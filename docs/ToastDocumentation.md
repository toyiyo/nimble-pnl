# Toast DevGuide (scraped)

Base: https://doc.toasttab.com/doc/devguide/
Pages: 198


---

# Developer guide -

Source: https://doc.toasttab.com/doc/devguide/index.html

# Developing a Toast integration

Use these guides to help you use Toast APIs and build a successful
integration with the Toast platform.

[Getting startedÂ

Start by identifying your integration type, then learn how to
make sure your integration works smoothly with the Toast
platform.](https://doc.toasttab.com/doc/devguide/apiIntegrationTypes.html)[OrdersÂ

Information about the orders taken and fulfilled at restaurant
locations.](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html)[PaymentsÂ

Information about guest payments applied to checks.](https://doc.toasttab.com/doc/devguide/portalApiPaymentsOverview.html)[MenusÂ

Information about menus available at restaurant
locations.](https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html)[StockÂ

Information about menu item selection availability.](https://doc.toasttab.com/doc/devguide/apiStock.html)[Restaurant informationÂ

Business information about a restaurant location.](https://doc.toasttab.com/doc/devguide/apiRestaurantInfo.html)[EmployeesÂ

Employee information for a restaurant location.](https://doc.toasttab.com/doc/devguide/api_get_all_employees.html)[Cash entriesÂ

Information about cash deposits and other cash
transactions.](https://doc.toasttab.com/doc/devguide/apiWorkingWithCashEntriesAndDeposits.html)[WebhooksÂ

Register to receive information about Toast platform events as
they happen.](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html)[Outbound integrationsÂ

Build an API that the Toast platform will use to integrate with
your service.](https://doc.toasttab.com/doc/devguide/apiUsingToastOutboundApis.html)[AnalyticsÂ

Request and view analytic data for locations in a management
group.](https://doc.toasttab.com/doc/devguide/apiAnalyticsOverview.html)


---

# Analytics API overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsOverview.html

### Analytics API overview

|  |
| --- |
| Important |
| All metric data supported in the analytics API does not adhere to accounting standards such as GAAP rules. This information is solely for informational purposes. Toast, Inc. does not offer accounting or tax advice. |

You can use the analytics API to request and view analytics data
for restaurants in a [management group](https://doc.toasttab.com/doc/platformguide/adminManagementGroup.html).

|  |
| --- |
| Note |
| Access to the analytics API requires an active subscription to [Toast Restaurant Management Suite Pro](https://www.toasttab.com/customers/shop/software-services/restaurant-management-suite?tier=Pro) or higher. |

You can use the analytics API to:

* Retrieve aggregated sales reporting data, which provides a
  high-level view of orders data for a restaurant. This includes sales
  and labor information. For more information, see [Aggregated sales reporting data overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataOverview.html).
* Retrieve check reporting data, which provides a detailed look
  at checks for a restaurant for a single day. For more information,
  see [Check reporting data overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataOverview.html).
* Retrieve labor reporting data, which provides a detailed look
  at employee and job information. For more information, see [Labor reporting data overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataOverview.html).
* Retrieve menu reporting information, which provides a detailed
  look at menu and menu entity information. For more information, see
  [Menu reporting data overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataOverview.html).
* Retrieve payout reporting data, which provides a detailed look
  at all deposits made to an account. For more information, see [Payout reporting data overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutReportingDataOverview.html).
* Retrieve guest reporting information, which provides a look at
  payment details associated with a guest's payment card. For more
  information, see [Guest reporting data overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataOverview.html).
* Retrieve restaurant information, which provides the names and
  GUIDs for restaurants in a management group. For more information,
  see [Restaurant information overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoOverview.html).

Toast APIs, including the analytics API, control access to
integration functionality using client authentication. When you
authenticate your API client you use client credentials that you get
from the Toast integrations team. The Toast platform includes different
API integration types and uses separate API client credentials for each
integration type. For information about using client credentials to
authenticate and access Toast APIs, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html).

**Important information about analytics API client authentication
credentials**

* Analytics API authentication credentials are different from
  other Toast API authentication credentials.
* If your organization has access to other Toast APIs, you
  cannot use the authentication credentials for other Toast APIs to
  access the analytics API. You must use separate client
  authentication credentials for the analytics API.


---

# Menus API overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html

### Menus API overview

Using the menus API, you can retrieve a fully resolved set of
menus for the restaurant you specify. With this data, you can construct
a menu that satisfies your business requirements. For example, you can
use the menus API data to construct a digital menu board or create an
ordering application where guests can place orders.

To retrieve data from the menus API, you send a `GET`
request to the `/menus` endpoint. Before retrieving data,
send a `GET` request to the `/metadata` endpoint
to [determine if the
menu data you have is stale](https://doc.toasttab.com/doc/devguide/apiDeterminingIfYourMenuJsonIsOutdated_V2.html).

Currently, the menus API has two versions, version 2 (V2) and
version 3 (V3). The [Comparing menus API V2 and V3](https://doc.toasttab.com/doc/devguide/apiComparingMenusAPIV2AndV3.html) section compares the two
versions and provides guidance on who should use them and how.


---

# Integration types - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiIntegrationTypes.html

### Integration types

The Toast platform supports different integration types,
including:

* Partner integrations: Technology providers create partner
  integrations that extend the Toast platform by adding their services and
  capabilities to it. Partner integrations use Toast APIs to read and
  write data on behalf of customers they share with Toast. For more
  information, see [Partner integration overview](https://doc.toasttab.com/doc/devguide/apiPartnerIntegrationOverview.html).
* Custom integrations: Toast customers working with their own
  development teams can build custom integrations specific to their
  organization's needs. Custom integrations use Toast APIs to read and
  write data, connecting the Toast platform to other information systems.
  Custom integrations are typically developed and maintained by in-house
  software developers or trusted technology partners. For more
  information, see [Custom integration overview](https://doc.toasttab.com/doc/devguide/apiCustomIntegrationOverview.html).
* Standard API access: Toast customers with unique integration needs
  not met by existing solutions integrated with the Toast platform or core
  Toast functionality. You can purchase self-service standard API access
  through the Toast Shop. Once enabled, you have access to a set of
  read-only API endpoints using credentials created in your Toast Web
  account. This access allows you to connect internal systems and gives
  you the flexibility to solve specific business needs using Toast APIs.
  For more information, see [Standard API access overview](https://doc.toasttab.com/doc/devguide/devApiAccessUserGuide.html).
* Analytics API access: Toast customers looking for insight into
  your locations' performance can use analytics API access to get
  read-only access to a specialized set of reporting and operational data
  not available through other APIs. For more information, see [Analytics API access overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsAccessOverview.html).


---

# Restaurant information overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRestaurantInfo.html

## Restaurant information overview

The restaurants API has
endpoints that let you obtain two types of information about
restaurants:

* The
  `/restaurants/v1/groups/{managementGroupGUID}/restaurants`
  endpoint returns a list of the restaurants that belong to a restaurant
  management group.
* The `/restaurants/v1/restaurants/{restaurantGUID}`
  endpoint returns configuration information about a specific restaurant
  location. This configuration information is more business oriented
  (such as the restaurant's location, services, and schedules) than the
  information returned by the [configuration
  API](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html).


---

# Stock overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiStock.html

## Stock overview

The stock webhook and stock API provide inventory information for
menu items and modifiers. This inventory information includes the stock
status of the menu item or modifier (in stock, out of stock, or low
quantity). Depending on the stock status, the webhook payload or API
response may also include the quantity of the menu item or
modifier.

With the [stock webhook](https://doc.toasttab.com/doc/devguide/apiUsingTheStockWebhook.html), the Toast
platform pushes updates to your system when the stock status of a menu
item or modifier changes. This is the preferred method for getting
information about changes to a menu item or modifier's inventory.

With the [stock API](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html), you can retrieve a list
of menu items that are out of stock, in limited supply, or both. You can
also submit a list of menu items or modifiers to the stock API and it
returns their current stock status and quantities.

In addition, the stock API gives you the ability to update inventory
information for menu items and modifiers.

|  |
| --- |
| Note |
| If the stock API is temporarily unavailable, Toast Support recommends that your integration assumes the items or modifiers are in stock and places the order anyway. The orders API will accept the order when it is placed even if it contains out of stock items or modifiers.  If the stock API is unavailable, it returns 5xx HTTP responses to your requests. You can also check the [Toast API Status](https://status-dev.toasttab.com/) site for information on the health of Toast APIs. |

To use the stock API, your API account must have one of the
following [scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html):

* To retrieve inventory information, your API account must have
  the `stock:read` scope.
* To update inventory information, your account must have the
  `stock:write` scope.

Stock updates do not represent changes to the menu itself. Updating
the menu and consuming stock updates should occur in separate processes.
Only retrieve a new menu when the menus webhook has sent a message that
the menu is outdated, or a request to the `/metadata` endpoint
of the menus API indicates that the menu JSON is outdated. For more
information about when to retrieve a new menu, see [Determining if a restaurant's menu data has gone stale](https://doc.toasttab.com/doc/devguide/apiDeterminingIfYourMenuJsonIsOutdated_V2.html).

|  |
| --- |
| Note |
| Modifiers are supported by an underlying menu item, called the modifier's item reference. Therefore, in this section, the term *menu item* is used to generically refer to both standalone menu items and modifier item references, because the same data is returned for both entities. For detailed information on modifier item references, see [Understanding a modifier item reference](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference). |

|  |
| --- |
| Note |
| Scheduled future orders from Toast product ordering channels, such as those placed through the Toast POS or Toast Online Ordering, decrement quantity-based stock immediately at the time of order creation. For example, if a restaurant has ten cookies in stock on Monday and a guest places a catering order on Monday for fulfillment on Friday that includes a cookie, the stock count will drop to nine on Monday (not Friday).  Scheduled future orders from the orders API do not decrement stock when the order is created. Stock is only decremented when the order is fired to the kitchen. For more information about scheduling future orders, see [Scheduling future orders](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html). |


---

# Using Toast outbound APIs - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingToastOutboundApis.html

### Using Toast outbound APIs

You can use Toast outbound APIs to integrate restaurant services with
the Toast platform. A Toast outbound API includes a REST API server
specification that your organization implements and maintains. In a Toast
outbound API integration, the Toast platform acts as the API client, and
sends HTTP requests to your organization's API server. For example, the
Toast platform might send API requests to your organization's outbound API
server during a Toast POS app workflow to integrate a gift card, loyalty
program, or other restaurant service.

The following diagram shows the Toast platform making HTTP requests as
an API client and receiving HTTP responses from the API server that your
organization implements.

![A diagram showing the Toast platform making HTTP requests as an API client and receiving HTTP responses from your organization's API server.](https://doc.toasttab.com/doc/media/toast-outbound-apis.png)

A Toast outbound API is similar to a webhook in that the Toast
platform sends HTTP messages to your organization to communicate about
specific Toast platform events. Toast outbound APIs include richer
information about Toast platform operations than a webhook and directly
interact with your organization's API implementation based on its HTTP
responses in a way that is more dynamic than webhooks. For information about
Toast platform webhooks, see [Webhook basics](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html).


---

# Webhook basics - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html

### Webhook basics

This section uses the following webhook terms and concepts:

| Term | Definition |
| --- | --- |
| Webhook | A Web-based callback that allows the Toast platform to push updates (also known as *webhook events*) to webhook consumers, reducing or eliminating the need to poll a Toast API. |
| Webhook URL | The URL of a webhook consumer service that is capable of receiving webhook events from the Toast platform. |
| Event category | A Toast-defined classification for the type of events a webhook sends. For example, the `partners` event category sends webhook events related to the addition or removal of partner integrations to a restaurant location. |
| Event type | A Toast-defined name for a specific type of webhook event, for example, a `partner_added` or `partner_removed` event. |
| Event GUID | An identifier for the specific webhook event that is generated by the Toast platform. |
| Webhook subscription | Maintained by Toast support, a webhook subscription associates a webhook endpoint with an event category. This defines the type of webhook events that will be sent to the webhook endpoint. A webhook endpoint may be associated with multiple event categories. |
| Webhook secret | A secret passphrase generated when a webhook subscription is created. The passphrase is used to sign the contents of a message posted to the endpoint associated with the webhook subscription. See [Message signing](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html).  The secret key is unique for each webhook subscription within an environment. For example, a `stock` webhook subscription has a different secret key than a `partner` webhook subscription for the same integration partner and within the same environment. For more information about webhook subscriptions, see [Webhook basics](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html). For more information about Toast API environments, see [Environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html). |


---

# Cash management overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiWorkingWithCashEntriesAndDeposits.html

## Cash management overview

This section provides information about using Toast APIs to perform
cash management operations that get information about cash entries and
cash deposits.

* Cash entries include information about cash collected after
  employee shifts, cash paid for restaurant services, and cash paid to
  employees for non-cash gratuities such as tips entered in credit card
  payments. Cash entries also include cash added to or removed from
  restaurant cash drawers for non-standard reasons. In the Toast POS,
  these are cash in and cash out operations.
* Cash deposits include information about cash removed from a
  restaurant and deposited in a bank or other financial
  institution.

|  |
| --- |
| Note |
| The cash management API does not provide information about guests' cash payments for orders. You can get order payment information by using the orders API. For more information about the orders API, see [Orders API overview](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html). |

For general information about cash management in the Toast POS, see
[Cash management overview](https://doc.toasttab.com/doc/platformguide/adminCashManagementOverview.html).


---

# Getting all employees of a restaurant - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/api_get_all_employees.html

### Getting all employees of a restaurant

To get information about the employees of a restaurant, send a
`GET` request to the
`/labor/v1/employees` endpoint of the labor API.

The request returns an array of `Employee` objects that
contain the configuration information for each employee.

#### Example request for information about all employees

The following example **curl** command sends a
`GET` request to the
`/labor/v1/employees` endpoint.

**Example request to GET all employees of a restaurant**

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
https://[toast-api-hostname]/labor/v1/employees
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/api_get_all_employees.html#get-employees-co) | Specify the GUID of the restaurant that you want to `GET` employees for. This must be an individual restaurant, not the GUID for a restaurant group. |

#### Example response

The following example shows the response for a `GET`
request to the `/labor/v1/employees` resource.

**Example response to a request to GET restaurant
employees**

```
[
  {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "guid": "b7946411-7d45-4beb-9bfc-0ec731da7b45",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "entityType": "RestaurantUser",
    "externalId": null,
    "lastName": "Mercier",
    "wageOverrides": [],
    "firstName": "Jean-Guy",
    "chosenName": "Jean",
    "createdDate": "2016-12-21T16:11:18.994+0000",
    "deleted": false,
    "deletedDate": "1970-01-01T00:00:00.000+0000",
    "jobReferences": [
      {
        "guid": "34ff8f6e-15e6-4ec1-b496-f57fc18fa0c6",
        "entityType": "RestaurantJob",
        "externalId": null
      }
    ],
    "modifiedDate": "2016-12-21T16:19:06.195+0000",
    "disabled": false,
    "externalEmployeeId": "1234567890",
    "email": "jmercier@arestaurant.com"
  },
  {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "guid": "abbafa20-0cbe-47e3-93e4-b69309e1bc33",
    "entityType": "RestaurantUser",
    "externalId": null,
    "lastName": "Ouellet",
    "wageOverrides": [],
    "firstName": "Clement",
    "chosenName": "Clem",
    "createdDate": "2016-08-31T20:19:02.666+0000",
    "deleted": true,
    "deletedDate": "2016-11-23T15:54:23.634+0000",
    "jobReferences": [
      {
        "guid": "a5eec1c0-1143-4408-bb6b-3d4b28a594a3",
        "entityType": "RestaurantJob",
        "externalId": null
      }
    ],
    "modifiedDate": "2016-11-23T15:54:23.635+0000",
    "disabled": false,
    "externalEmployeeId": "",
    "email": "couellet@arestaurant.com"
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/api_get_all_employees.html#co-d1e68BDD1A7D6-D479-4A5F-A4A1-975B60C265DD) | The `GET` request returns an array of employee objects. Each object contains information about an employee. |
| [2](https://doc.toasttab.com/doc/devguide/api_get_all_employees.html#co-d1e70BDD1A7D6-D479-4A5F-A4A1-975B60C265DD) | The `guid` value contains the unique Toast platform identifier for the employee. |
| [3](https://doc.toasttab.com/doc/devguide/api_get_all_employees.html#co-d1e72BDD1A7D6-D479-4A5F-A4A1-975B60C265DD) | Each object contains information for a different employee. |


---

# Payments overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/portalApiPaymentsOverview.html

## Payments overview

You can use the orders API to get information about payments made
for checks at your restaurant.

* You send a `GET` request to the
  `/payments` endpoint to get a list of the payments made in
  one business day.
* You send a `GET` request to the
  `/payments/{guid}` endpoint to
  get detailed information about one payment, specified by its
  GUID.


---

# Orders API overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html

### Orders API overview

The orders API allows you to create orders, update existing orders,
and retrieve information about orders.

#### Components of an order

Here is a high-level overview of the information contained in an
order. For the full list of values in the `Order` object, see the
[Orders
section of the API reference](https://doc.toasttab.com/openapi/orders/overview/). For a summary of the `Order`
object, including descriptions of the status, date-time, and amount fields
associated with an order, see [Order object summary](https://doc.toasttab.com/doc/devguide/apiOrdersOrderObjectSummary.html).

Each `Order` object in the orders API provides information
about the order and its processing.

The order dining option determines whether the order is dine-in,
takeout, curbside pickup (a variation of the takeout dining behavior), or
delivery. Some dining options allow or require additional order
information.

* Takeout and delivery orders require guest information.
* Delivery orders require a delivery address.
* Curbside pickup orders can include vehicle information.
* For dine-in orders, you can specify a table and identify a
  restaurant employee.

For more information about order values for dining options, see [Order details based on the order dining option](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html).

Each order contains one or more checks. The order checks contain the
majority of the order information. Orders often contain only one check. When
guests split an order so that they can pay separately, then the order
contains multiple checks.

An order check contains:

**Menu item selections**
:   The selected items from the menu.

    Each `Selection` object refers to a single menu
    item.

    Each menu item can have modifiers that provide additional
    details and modifications. See [Applying modifiers and pre-modifiers](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#apiApplyingModifiers).

**Price information**
:   Information about the amount that the guest was charged.

    Price information includes:

    * The price information for the menu item selections.

      The `receiptLinePrice` value is the original
      price of a menu item selection before any adjustments.

      The `amount` value is the actual amount that the
      guest is charged. It includes any discounts and service
      charges.
    * Applied discounts. A discount can be applied to the entire
      check or to an individual menu item selection. See [Working with order discounts](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html).
    * Applied service charges.
    * Applied taxes.

    For more information about order price information, see [Order prices](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html).

**Guest information**
:   Information about the guest.

    For example, takeout and delivery orders always provide a guest
    name and a corresponding email address and telephone number.

    Note that the orders API sometimes uses the term "customer" to
    refer to a guest. For example, guest information is provided in the
    `customer` object.

**Payment information**
:   Payments that are applied to the check.

#### Diagrams of basic order structures

The following diagram shows the basic structure of a typical delivery
order.

![Diagram of the basic structure of the order object for a delivery order.](https://doc.toasttab.com/doc/media/order-api-overview-diagram-delivery.png)

The following diagram shows the basic structure of a typical curbside
pickup order, which is a takeout order with curbside pickup enabled.

![Diagram of the basic structure of the order object for a curbside pickup order.](https://doc.toasttab.com/doc/media/order-api-overview-diagram-curbside.png)

The following diagram shows the basic structure of a typical dine-in
order that has multiple checks.

![Diagram of the basic structure of the order object for a dine-in order that has multiple checks.](https://doc.toasttab.com/doc/media/order-api-overview-diagram-dinein.png)

#### Orders API tasks

You can use the orders API to perform the following tasks:

**Create an order**
:   For an overview of the order creation process, see [Creating orders](https://doc.toasttab.com/doc/devguide/apiCreatingOrders.html).

    The order creation process includes retrieving price information
    for the order checks. See [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices).

    You can provide the revenue center for an order. See [Providing revenue center information for an order](https://doc.toasttab.com/doc/devguide/apiOrdersRevenueCenters.html).

    For information about dining options and the required
    information for types of dining options, see [Order details based on the order dining option](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html).

**Update an order**
:   You can use the orders API to update an existing order. Examples
    of order updates include:

    * [Adding items to an order
      check](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html)
    * [Adding discounts to an
      order check](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#apiAddingDiscountsToChecks)
    * [Updating the tip information
      for a payment](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html)
    * [Adding a credit card payment
      to an order check](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html).
    * [Changing the
      delivery information for an order](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html)

**Retrieve information about orders**
:   You can use an order GUID to retrieve the details for that
    order. See [Getting detailed information about one order](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html).

    You can retrieve details about orders that were either modified
    during a specific date range, or that were created on a specific
    business date. See [Getting detailed information about multiple orders](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html).

    You can only retrieve order details for orders that were created
    after December 1, 2015 (2015-12-01).

    If your integration submits orders to the Toast platform, your integration is an ordering channel integration.
    In that case, your API client has both the `orders:read` and the `orders.channel:read`
    [scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html), and can only
    retreive orders from the Toast platform if your integration submitted them.

#### Orders API limitations

When using the orders API to create an order, be aware of the
following limitations and default behavior.

##### Order scheduling

By default, the orders API creates an order that is to be fulfilled
as soon as possible. It does not verify the restaurant service
hours.

You are responsible for submitting orders while the restaurant is
open. For more information, see [Getting information about a specific restaurant](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html).

You also can create an order to be fulfilled at a specific time. For
example, you can create an order when the restaurant is closed, but
indicate to fulfill the order when the restaurant is open. See [Scheduling future orders](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html).

##### Order menu selection items

For the menu selection items in API orders, the following
limitations apply:

* You cannot add open menu items to an `Order` object.
  An open menu item is one where the restaurant employee specifies both
  the item description and price.

  However, you can add open priced menu items. An open priced menu
  item has a specified description. The restaurant employee only
  specifies the item price.
* The orders API cannot verify the availability of items based on
  time, menu visibility, or inventory.

  You are responsible for preventing guests from ordering items
  that are not available.

##### Order payment

Orders created using the orders API are limited to the
`CREDIT` and `OTHER` payment types.

Note that the orders API ignores the tax exempt setting for
`OTHER` payment types. The order is taxed regardless of whether
the payment type is configured to be tax exempt.

The orders API does not allow you to create cash orders or orders
that use Toast gift cards.

##### Loyalty programs

You cannot use Toast loyalty functionality with orders that are
created using the orders API.

You can use the orders API to apply a third-party loyalty program
that is integrated with Toast. For details, see [Working with loyalty programs](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#orders-api-loyalty-programs).

##### Gift card programs

You cannot use Toast or third-party gift card functionality with
orders that are created using the orders API.

##### Order communication to the kitchen

If a restaurant uses a Kitchen Display System (KDS) device, and has
properly configured an auto-firing device, then the order is sent straight
to the kitchen.

The order is not subject to approval rules or manual
approval.

##### Order text messages

Orders that are entered using the orders API do not [initiate SMS text
messages](https://doc.toasttab.com/doc/platformguide/platformKitchenTextMessaging.html#adminSendTextMessage). Guests or servers only receive text messages when an
order is entered in the Toast platform, for example, from a Toast POS
device.

When building the functionality to send an order fulfillment text
message from your platform, your code should inspect the
`fulfillmentStatus` value of an order and ensure it is set to
`READY` before it sends any messages. The
`fulfillmentStatus` value is in the `selections`
object which is a part of the `checks` object.

##### Order size

The orders API returns an HTTP status code 400 response when your
integration attempts to:

* Post an order with more than 1,000 top-level selections.
* Post an item to an order that causes the order to have more than
  1,000 top-level selections. For example, if an order has 995 top-level
  selections and your integration posts six items to that order in a
  single request, that request will be rejected.
* Post an order with a message body parameter that is greater than
  1 megabyte (1 MB).

A top-level selection is defined as a selection that is not the
child of another selection in the order.

To avoid exceeding the 1,000 top-level selection limit, Toast
support encourages the grouping of identical items together, so:

* 1 soda
* 1 lemonade
* 1 energy drink
* 1 soda
* 1 lemonade
* 1 soda

Can be combined into:

* 3 sodas
* 2 lemonades
* 1 energy drink

This reduces the number of top-level selections in the request from
six to three while providing the same order data.


---

# Creating a request for check reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html

### Creating a request for check reporting data

Send a `POST` request to the
`/era/v1/check/day` endpoint to request check reporting data
for a single day. The rate limit for this endpoint and method type is
five requests per minute and 60 requests per day. For more information
about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

You can optionally include only the data from currently inactive
restaurants using `onlyInactiveRestaurants` as a query
parameter. For more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

To create a request for check data, include the following:

* The `restaurantIds` value in the message body. This
  identifies the only restaurants to include in the returned data
  using the restaurant GUID. All restaurants not listed are excluded
  from the returned data. This value can be left empty to include all
  restaurants.
* The `excludedRestaurantIds` value in the message
  body. This identifies the restaurants to exclude from the returned
  data using the restaurant GUID. All restaurants not listed are
  included in the returned data. This value can be left empty to
  include all restaurants.

  |  |
  | --- |
  | Important |
  | You can only include restaurant GUIDs for either `restaurantIds` or `excludedRestaurantIds`. Listing restaurant GUIDs for both results in a 400 error or blank data. |
* The `startBusinessDate` value in the message body.
  This identifies the start date for the return data. This value must
  match the `endBusinessDate` value.
* The `endBusinessDate` value in the message body.
  This identifies the end date for the return data. This value must
  match the `startBusinessDate` value.

|  |
| --- |
| Note |
| The date used to determine whether a check is within the time range or not is the date the order was initially expected to be fulfilled. |

#### Request for check reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/check/day` endpoint.

```
curl -i -X POST \ 'https://[toast-api-hostname]/check/day' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H 'Authorization: Bearer [token]' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2840DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | Send a `POST` request to the `/era/v1/check/day` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2842DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2844DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2846DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | Include details about the requested check reporting data in the message body. The following example is the message body for this **curl** command example. |

#### Message body for check reporting data

The following example shows the message body for creating a
check reporting data request.

```
{
  "startBusinessDate": "20230201",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20230201",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "95a96d7b-dbf5-46d3-98c5-c65c8ad18021"
  ],
  "excludedRestaurantIds": []![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2861DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | The start date of the time range for the check reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2863DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | The end date of the time range for the check reporting data, in `YYYYMMDD` format. This is the same value as the start date. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2865DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | The list of restaurant GUIDs from the management group to include in the check reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2867DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | The list of restaurant GUIDs from the management group to exclude from the check reporting data. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |

#### Response to request for check reporting data

The following example shows the response from the
`/era/v1/check/day` endpoint.

```
"83c93717-02ba-4b7c-9891-dfe090274d2d"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html#co-d1e2886DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | The GUID for the check reporting data request, also called the `reportRequestGuid`. For more information about the analytics API process, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example that shows how to retrieve the check reporting
data, see [Retrieving the check reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html).


---

# Check reporting data overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataOverview.html

### Check reporting data overview

Check reporting data includes detailed check information for all
orders created on a specific day. For more information on what is
included in the check reporting data, see [Understanding the check reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataUnderstandingData.html). For more
information about inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

Retrieving the check reporting data is a two-step process. You
must:

1. Send a `POST` request to
   `/era/v1/check/{timeRange}` endpoint to create a
   request for check reporting data for the restaurants in a
   management group. The response is the
   `reportRequestGuid`, the unique request identifier. The
   analytics API currently only supports retrieving check reporting
   data for the `day` time range. For more information,
   see [Creating a request for check reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html).
2. Send a `GET` request to
   `/era/v1/check/{reportRequestGuid}` endpoint to
   retrieve the check reporting data. For more information, see
   [Retrieving the check reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html).

|  |
| --- |
| Note |
| The `reportRequestGuid` expires seven days after you create it. Using an expired or invalid `reportRequestGuid` results in a 404 error. The `message` of the response body contains additional information about the cause of the error. |


---

# Retrieving the check reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html

### Retrieving the check reporting data

Send a `GET` request to the
`/era/v1/check/{reportRequestGuid}` endpoint to retrieve
check reporting data. The rate limit for this endpoint and method type
is five requests per second and 30 requests per minute. For information
about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

To request the check reporting data, you must include the check
reporting data request GUID, or `reportRequestGuid`, as a
path variable.

Optionally, you can choose to include a
`fetchRestaurantNames` query parameter. If the
`fetchRestaurantNames` query parameter is set to
`true`, it adds the restaurant name to the check reporting
data. If the `fetchRestaurantNames` query parameter is set to
`false` or not included, it does not add the restaurant
name.

#### Request to retrieve check reporting data

The following example **curl** command sends a
`GET` request to the
`/era/v1/check/{reportRequestGuid}` endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/check/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
83c93717-02ba-4b7c-9891-dfe090274d2d/![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
&fetchRestaurantNames=trueâ \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -H 'Authorization: Bearer [token]'![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html#co-d1e2947DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | Send a `GET` request to the `/era/v1/check` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html#co-d1e2949DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | The GUID for the check reporting data request, also called the `reportRequestGuid`. For more information about the analytics API process, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html#co-d1e2951DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | Set the `fetchRestaurantNames` query parameter to `true` to include the restaurant name in the response. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html#co-d1e2953DE10C5BE-C9CE-4C55-87A6-C813632B28B5) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

#### Response to the retrieval request for check reporting data

The following example shows the response from the
`/era/v1/check/{reportRequestGuid}` endpoint.

```
[
  {
    "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
    "orderNumber": "5018",
    "orderGuid": "f8e4ae5e-ccbd-49e5-81e8-947d673c30ad",
    "checkNumber": "5018",
    "checkGuid": "98bca966-4969-4314-9a8a-8486340164d2",
    "orderOpenedDate": "20230201",
    "checkPaidDateTime": "2023-02-02T00:37:20.089Z",
    "checkModifiedDateTime": "2023-02-02T19:04:46.340Z",
    "checkStatus": "CLOSED",
    "checkVoidedStatus": false,
    "diningOption": "Dine In",
    "revenueCenter": "Dining Room",
    "serverName": "Lydia Bennet",
    "checkTotalAmount": 35.59,
    "checkDiscountAmount": 0.0,
    "checkTaxAmount": 2.06,
    "checkTipAmount": 5.59,
    "checkGratuityAmount": 0.0,
    "checkRefundAmount": 0.0,
    "restaurantName": "Grove Place Cafe"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  },
  [content omitted]
  {
    "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
    "orderNumber": "5010",
    "orderGuid": "98bca966-4969-4314-9a8a-8486340164d2",
    "checkNumber": "5010",
    "checkGuid": "e3dd31e1-78bb-47e4-a1a3-7c14c9f8c8ff",
    "orderOpenedDate": "20230201",
    "checkPaidDateTime": "2023-02-01T23:48:56.896Z",
    "checkModifiedDateTime": "2023-02-02T19:04:39.186Z",
    "checkStatus": "CLOSED",
    "checkVoidedStatus": false,
    "diningOption": "Take Out",
    "revenueCenter": "Dining Room",
    "serverName": "Lydia Bennet",
    "checkTotalAmount": 23.24,
    "checkDiscountAmount": 0.0,
    "checkTaxAmount": 1.32,
    "checkTipAmount": 3.95,
    "checkGratuityAmount": 0.0,
    "checkRefundAmount": 0.0,
    "restaurantName": "Grove Place Cafe"
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html#co-d1e3178EFD2B73E-74F6-4B53-908A-CFB01123F156) | The `restaurantName` value appears because the `fetchRestaurantName` query parameter was set to `true` in the request. |

For more information about the values in the response, see
[Understanding the check reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataUnderstandingData.html).


---

# Understanding the check reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataUnderstandingData.html

### Understanding the check reporting data

Check reporting data contains a constant set of values. These
values appear for every check and are organized by active restaurant.
Optionally, you can choose to include the restaurant name in the check
reporting data. For more information, see [Retrieving the check reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataRetrieveData.html). For more
information about inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

The restaurants included in the check reporting data can be
limited by adding the GUIDs of restaurants to either include only or
exclude only. For more information about choosing specific restaurants,
see [Creating a request for check reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsCheckReportingDataCreateRequest.html).

The following table specifies the set of values returned in the
check reporting data. The values are listed in the order that they
appear.

| Value name | Definition |
| --- | --- |
| `restaurantGuid` | The unique identifier assigned to the restaurant by the Toast platform. |
| `orderNumber` | The number of the order. |
| `orderGuid` | The unique identifier assigned to the order by the Toast platform. |
| `checkNumber` | The number of the check. |
| `checkGuid` | The unique identifier assigned to the check by the Toast platform. |
| `orderOpenedDate` | The business date for when the order is initially expected to be fulfilled. This date determines whether a check is within the requested time range or not. |
| `checkPaidDateTime` | The most recent date the check received payment. |
| `checkModifiedDateTime` | The most recent date that the check was modified. |
| `checkStatus` | The payment state of the check. The state can be one of the following values:  * `OPEN` : The check is open and   unpaid. * `PAID` : The check is paid, but the   payment is not finalized. * `CLOSED` : The check payment is   finalized. |
| `checkVoidedStatus` | Indicates whether the check was voided or not. A `true` value indicates the check was voided, while a `false` value indicates the check was not voided. |
| `diningOption` | The dining option for the check data. |
| `revenueCenter` | The revenue center for the check data. |
| `serverName` | The first and last name of the employee who created the order. |
| `checkTotalAmount` | The total amount of the check. |
| `checkDiscountAmount` | The total discounted amount of the check. |
| `checkTaxAmount` | The total tax amount of the check. |
| `checkTipAmount` | The total tip amount of the check. |
| `checkGratuityAmount` | The total gratuity amount of the check. |
| `checkRefundAmount` | The total refund amount of the check. |
| `restaurantName` | The restaurantâs name. This is included when you set the `fetchRestaurantNames` parameter to `true` in the `GET` request. |


---

# Understanding data discrepancies - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsDataDiscrepancies.html

### Understanding data discrepancies

Data discrepancies can occur when orders are modified. When an
order is modified, the changes are updated in the analytics data. The
time until the analytics data reflects this update depends on the when
the order is modified and when the order was originally scheduled for
fulfillment:

|  |
| --- |
| Note |
| The date an order was originally scheduled for fulfillment is considered the *initial order open date*. |

* If an order is modified within the range of 11 days before or
  two days after the *initial order open date*, the
  analytics data is updated within two and four hours of when the
  order was modified.
* If an order is modified outside that range of 11 days before
  or two days after the *initial order open date*,
  the analytics data is updated within six days of when the order was
  modified.

For example, an order is created on September 8 and scheduled for
fulfillment on September 10. September 10 is the *initial order
open date*, while September 8 is the day the order was
created. If the guest calls and changes the order to be scheduled for
September 12 instead, September 10 remains the *initial order
open date*, but the new date for scheduled fulfillment becomes
September 12.

For example, an order is scheduled for August 15, which is the
*initial order open date*. If the order is modified
between August 4 and August 17, the modification is reflected in the
analytics data within two to four hours. If the order is modified before
August 4 or after August 17, the modification is reflected in the
analytics data within six days. If the order is modified on August 18,
then the data is updated by August 24, six days after the order is
modified.


---

# Creating a request for guest reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html

### Creating a request for guest reporting data

Send a `POST` request to the
`/era/v1/guest/payments/{timeRange}` endpoint to request
guest reporting data organized by payment for a specific time range of
`day` or `week`. The rate limit for this endpoint
and method type is five requests per minute and 60 requests per day. For
more information about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

You can limit the reporting data to inactive restaurants only
using the `onlyInactiveRestaurants` query parameter. For more
information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

To create a request for guest reporting data organized by payment,
include the following:

* The `startDate` value in the message body, in
  `YYYYMMDD` format. This identifies the start date for
  the range of guest payment dates. This value must match the
  `endDate` value if using the `day` time
  range.
* The `endDate` value in the message body, in
  `YYYYMMDD` format. This identifies the end date for the
  range of guest payment dates. This value must match the
  `startDate` value if using the `day` time
  range.
* The `restaurantIds` value in the message body.
  This identifies the restaurants to include in the returned data
  using the restaurant GUID. All restaurants not listed are excluded
  from the returned data. Leave the `restaurantIds` value
  and the `excludedRestaurantIds` value empty to include
  all restaurants.
* The `excludedRestaurantIds` value in the message
  body. This identifies the restaurants to exclude in the returned
  data using the restaurant GUID. All restaurants not listed are
  included in the returned data. Leave the
  `excludedRestaurantIds` value and the
  `restaurantIds` value empty to include all
  restaurants.

|  |
| --- |
| Important |
| You can include restaurant GUIDs for either `restaurantIds` or `excludedRestaurantIds` but not for both. Listing restaurant GUIDs for both results in a 400 error or blank guest reporting data. `restaurantIds` and `excludedRestaurantIds` are contradictory values that cannot be used together. |

#### Request for guest reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/guest/payments/{timeRange}` endpoint. This example
uses the `week` time range.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/guest/payments/week' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H âAuthorization: Bearer [token]â \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9261AAAFB51B-562D-4033-B77B-6C18243DEDD8) | Send a `POST` request to the `/era/v1/guest/payments/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `week`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9263AAAFB51B-562D-4033-B77B-6C18243DEDD8) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9265AAAFB51B-562D-4033-B77B-6C18243DEDD8) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9267AAAFB51B-562D-4033-B77B-6C18243DEDD8) | Include details about the requested guest reporting data in the message body. The following example is the message body for this **curl** command example. |

#### Message body for guest reporting data

The following example shows the message body for creating a
guest reporting data request for a specific time range. This example
is for the `week` time range.

```
{
  "restaurantIds": [![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
    "6b853fa7-b3dc-4db7-a528-c3599823ccd1"
  ],
  "excludedRestaurantIds": [],![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "startDate": "20240924",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "endDate": "20240926"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9279AAAFB51B-562D-4033-B77B-6C18243DEDD8) | The list of restaurant GUIDs from the management group to include in the guest reporting data. Restaurant GUIDs not listed are excluded. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9281AAAFB51B-562D-4033-B77B-6C18243DEDD8) | The list of restaurant GUIDs from the management group to exclude from the guest reporting data. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9283AAAFB51B-562D-4033-B77B-6C18243DEDD8) | The start date of the time range for the guest reporting data, in `YYYYMMDD` format. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9285AAAFB51B-562D-4033-B77B-6C18243DEDD8) | The end date of the time range for the guest reporting data, in `YYYYMMDD` format. |

#### Response to request for guest reporting data

The following example shows the response from the
`/era/v1/guest/payments/{timeRange}` endpoint.

```
"fb23cfaa-56d7-4cb9-829d-531a8d02274a"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html#co-d1e9298AAAFB51B-562D-4033-B77B-6C18243DEDD8) | The GUID for the guest reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example about how to retrieve the guest reporting data,
see [Retrieving the guest reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataRetrieveData.html).


---

# Guest reporting data overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataOverview.html

### Guest reporting data overview

Guest reporting data includes payment details associated with a
guest's payment card. For more information, see [Understanding the guest reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataUnderstandData.html). For more information
about inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

|  |
| --- |
| Note |
| `cardFingerprint` data is only available for payments processed starting in August 2024. `cardFingerprint` data is not supported for older payments. |

Retrieving the guest reporting data is a two-step process. You
must:

1. Send a `POST` request to the
   `/era/v1/guest/payments/{timeRange}` endpoint to create
   a request for guest reporting data organized by payment for the
   restaurants in a management group. The response is the
   `reportRequestGuid`, which is the unique request
   identifier. The analytics API supports retrieving guest reporting
   data for the `day` and `week` time ranges.
   For more information, see [Creating a request for guest reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataCreateRequest.html).
2. Send a `GET` request to the
   `/era/v1/guest/payments/{reportRequestGuid}` endpoint
   to retrieve the guest reporting data organized by payment. For
   more information, see [Retrieving the guest reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataRetrieveData.html).

|  |
| --- |
| Note |
| The `reportRequestGuid` expires seven days after you create it. Using an expired or invalid `reportRequestGuid` results in a 404 error. The message of the response body contains additional information about the cause of the error. |


---

# Retrieving the guest reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataRetrieveData.html

### Retrieving the guest reporting data

Send a `GET` request to the
`/era/v1/guest/payments/{reportRequestGuid}` endpoint to
retrieve guest reporting data. The rate limit for this endpoint and
method type is five requests per second and 30 requests per minute. For
more information about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

To request the guest reporting data, you must include the guest
reporting data request GUID, or `reportRequestGuid`, as a
path parameter.

#### Request to retrieve guest reporting data

The following **curl** command sends a
`GET` request to the
`/era/v1/guest/payments/{reportRequestGuid}`
endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/guest/payments/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
fb23cfaa-56d7-4cb9-829d-531a8d02274a/' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataRetrieveData.html#co-d1e9348AAAFB51B-562D-4033-B77B-6C18243DEDD8) | Send a `GET` request to the `/era/v1/guest/payments` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataRetrieveData.html#co-d1e9350AAAFB51B-562D-4033-B77B-6C18243DEDD8) | Include the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataRetrieveData.html#co-d1e9352AAAFB51B-562D-4033-B77B-6C18243DEDD8) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

#### Response to the retrieval request for guest reporting data

The following example shows the response from the
`/era/v1/guest/payments/{reportRequestGuid}`
endpoint.

```
[
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": "Richmond",
        "restaurantLocationCode": "1737",
        "paymentDate": "20240924",
        "orderGuid": "f949eefc-06e4-4ff0-9bde-7e85b732fb36",
        "paymentGuid": "5a3dd0fd-48e0-4f32-8dc4-500784498477",
        "cardFingerprint": "22030f99-0bd1-4766-9bd4-9dd33576684f"
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": "Richmond",
        "restaurantLocationCode": "1737",
        "paymentDate": "20240924",
        "orderGuid": "27e00ac6-14ce-4a7c-baf2-93ee8ae54535",
        "paymentGuid": "95a97b2d-31a2-46a3-8592-5fb5fb74cf13",
        "cardFingerprint": "5391bff6-f5fa-4f0b-9df6-6125f1254737"
    },
    {
        "restaurantGuid": "6b853fa7-b3dc-4db7-a528-c3599823ccd1",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": "Boston",
        "restaurantLocationCode": "1630",
        "paymentDate": "20240924",
        "orderGuid": "07a64cf7-4c72-4f91-84ac-06c3659fd983",
        "paymentGuid": "2659d1bb-3265-41f5-8c59-7f51859fff9f",
        "cardFingerprint": "88ec15f8-4b4a-4071-925a-340ce5e313b1"
    },
    [content omitted]
    {
        "restaurantGuid": "6b853fa7-b3dc-4db7-a528-c3599823ccd1",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": "Boston",
        "restaurantLocationCode": "1630",
        "paymentDate": "20240926",
        "orderGuid": "eb0d9e22-a232-4e02-aea6-36f229c31c87",
        "paymentGuid": "95dba2a7-caa9-437d-81c7-e04c9b770241",
        "cardFingerprint": "d180c71f-a80d-4030-914d-f11a42664223"
    },
    {
        "restaurantGuid": "6b853fa7-b3dc-4db7-a528-c3599823ccd1",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": "Boston",
        "restaurantLocationCode": "1630",
        "paymentDate": "20240925",
        "orderGuid": "2df74a8d-6ce8-4e72-a672-c529ffbc00e1",
        "paymentGuid": "3641122d-9d3e-4f2e-b081-e5ce472546e9",
        "cardFingerprint": "35962871-10ae-4b98-89a9-f81a049552fd"
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": "Richmond",
        "restaurantLocationCode": "1737",
        "paymentDate": "20240925",
        "orderGuid": "d5fbb6dd-bdbe-4bed-bc21-d878bf695fe5",
        "paymentGuid": "ae9e449c-3998-40fc-834a-11b8d8a99830",
        "cardFingerprint": "22030f99-0bd1-4766-9bd4-9dd33576684f"
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": "Richmond",
        "restaurantLocationCode": "1737",
        "paymentDate": "20240924",
        "orderGuid": "b6865f15-5909-4d56-a3fc-66ae08cc22aa",
        "paymentGuid": "a4be40b5-7747-427f-9e78-b50802660cff",
        "cardFingerprint": "a85ae337-8c00-41a6-bd79-0efec7870575"
    },
    {
        "restaurantGuid": "6b853fa7-b3dc-4db7-a528-c3599823ccd1",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": "Boston",
        "restaurantLocationCode": "1630",
        "paymentDate": "20240924",
        "orderGuid": "561e2aae-a668-40cd-ae69-936428a58a8e",
        "paymentGuid": "42250a18-a5a2-4079-a7a9-1aa57fd045e0",
        "cardFingerprint": "ea918c06-f999-4c30-99c6-486fad5f9918"
    },
    [content omitted]
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": "Richmond",
        "restaurantLocationCode": "1737",
        "paymentDate": "20240925",
        "orderGuid": "3b5d6ee5-a94f-440f-863c-150d7e0a72c3",
        "paymentGuid": "a4049a1b-59e0-46af-bac5-f9d971dfc094",
        "cardFingerprint": "e6e7b568-0375-47ff-a380-fd1f44101a4e"
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": "Richmond",
        "restaurantLocationCode": "1737",
        "paymentDate": "20240926",
        "orderGuid": "66774f2e-2a63-4576-bda9-1714f96ca92f",
        "paymentGuid": "0bf2b932-d849-4229-ab5f-7857c612dc38",
        "cardFingerprint": "e6e7b568-0375-47ff-a380-fd1f44101a4e"
    },
    {
        "restaurantGuid": "6b853fa7-b3dc-4db7-a528-c3599823ccd1",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": "Boston",
        "restaurantLocationCode": "1630",
        "paymentDate": "20240924",
        "orderGuid": "fbea2cd5-2e4f-42b4-9d29-1b534ff99a7c",
        "paymentGuid": "1cef78b9-51da-48c6-b03a-3a34f0728742",
        "cardFingerprint": "b46dca14-e213-4c04-9c88-8ecf09d1ca04"
    },
    {
        "restaurantGuid": "6b853fa7-b3dc-4db7-a528-c3599823ccd1",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": "Boston",
        "restaurantLocationCode": "1630",
        "paymentDate": "20240925",
        "orderGuid": "a773d61d-d0c7-4d98-94ad-100a5e6be980",
        "paymentGuid": "5e1f17d7-21df-43fa-8af6-81a2f36828a5",
        "cardFingerprint": "22030f99-0bd1-4766-9bd4-9dd33576684f"
    }
    [content omitted]
]
```

For more information about the values in the response, see
[Understanding the guest reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataUnderstandData.html).


---

# Understanding the guest reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsGuestDataUnderstandData.html

### Understanding the guest reporting data

Guest reporting data contains objects for each payment
corresponding to the specified restaurants and payment dates. You can
also choose to retrieve data for currently inactive restaurants. For
more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

The restaurants included in the guest reporting data can be
limited using either the `restaurantIds` or
`excludedRestaurantIds` value in the message body. You can
include restaurant GUIDs for only one of these values. Any restaurants
listed with the `restaurantIds` value are included in the
guest reporting data, with any restaurants not listed excluded. Any
restaurants listed with the `excludedRestaurantIds` value are
excluded from the guest reporting data, with any restaurants not listed
included. When both are left blank, all restaurants are included
automatically.

The following table specifies the returned set of values in the
guest reporting data. The values are listed in the order they
appear.

| Value name | Definition |
| --- | --- |
| `restaurantGuid` | The unique identifier assigned to the restaurant by the Toast platform. |
| `restaurantName` | The restaurantâs name. |
| `restaurantLocationName` | The restaurantâs location name. |
| `restaurantLocationCode` | The restaurantâs location code. |
| `paymentDate` | The date when the payment was processed, in `YYYYMMDD` format. |
| `orderGuid` | The unique identifier assigned to the order by the Toast platform. |
| `paymentGuid` | The unique identifier assigned to the payment by the Toast platform. |
| `cardFingerprint` | The unique identifier assigned to a guest's payment card by the Toast platform.  |  | | --- | | Note | | `cardFingerprint` data is only available for payments processed starting in August 2024. `cardFingerprint` data is not supported for older payments. | |


---

# Viewing inactive restaurant data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html

### Viewing inactive restaurant data

By default, the analytics data only includes data from restaurants
that are considered active at the time and date you make the analytics
data request. To view inactive restaurant data, you can include the
`onlyInactiveRestaurants` query parameter in the
`POST` request to the
`/era/v1/metrics` or `/era/v1/metrics/{timeRange}`
endpoints.

The `onlyInactiveRestaurants` query parameter returns
the analytics data for all restaurants in a management group currently
considered inactive at the time you send the analytics data
request.

For example, if you use the `onlyInactiveRestaurants`
query parameter, a restaurant that is *currently*
active, but was inactive during the requested time range, is
*not* included. A restaurant that is
*currently* inactive, but was active during the
requested time range, *is* included.

Setting `onlyInactiveRestaurants` to `TRUE`
includes inactive restaurant data and excludes active restaurant data
while setting to `FALSE` excludes inactive restaurant data
and includes active restaurant data. The data is treated as if
`onlyInactiveRestaurants` is set to `FALSE` by
default.

The following example **curl** command sends a
`POST` request to the
`/era/v1/metrics` endpoint using the
`onlyInactiveRestaurants` query parameter.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/metrics
?onlyInactiveRestaurants=TRUE' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H âAuthorization: Bearer [token]â \
  -H 'Content-Type: application/json' \
  -d @[request-info].json \
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html#co-d1e2941F37ED50-563A-4DC2-A142-7FD5B7B554A5) | Include the `onlyInactiveRestaurants` query parameter set to `TRUE` to request analytics data from inactive restaurants only. |

If there are no inactive restaurants in a management group, the
response to the `POST` request for the analytics
data is a "No inactive restaurants found" message. For more information
about creating a request for aggregated sales reporting data, see [Creating a request for aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html).

If there are inactive restaurants in a management group, but no
sales from those restaurants during the requested time range, the
response to the `GET` request for the analytics
data is a closing and opening bracket. For more information about
retrieving aggregated sales reporting data, see [Retrieving the aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html).


---

# Aggregating the labor reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html

### Aggregating the labor reporting data

The default way to view the labor reporting data is by day for
each location. You can choose to aggregate the data into subsections by
either employee or job. Use the `groupBy` value in the
message body of the `/era/v1/labor/{timeRange}` request to
create these subsections. Use `EMPLOYEE` to group the labor
reporting data by employee and `JOB` to group by job.

|  |
| --- |
| Note |
| You can only aggregate using one value, either `EMPLOYEE` or `JOB`. Using both values results in an error. |

The following example shows the message body for a
`/era/v1/labor/week` request that uses the
`groupBy` value with `EMPLOYEE`.

```
{
  âstartBusinessDateâ: â20230203â,![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  âendBusinessDateâ: â20230209â,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  ârestaurantIdsâ: [],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  âgroupByâ:  [âEMPLOYEEâ]![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3346134B67F3-A975-4412-A030-B6DDC7E2BD35) | The start date of the time range for the labor reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3348134B67F3-A975-4412-A030-B6DDC7E2BD35) | The end date of the time range for the labor reporting data, in `YYYYMMDD` format. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3350134B67F3-A975-4412-A030-B6DDC7E2BD35) | The list of restaurant GUIDs from the management group to include in the labor reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3352134B67F3-A975-4412-A030-B6DDC7E2BD35) | This request is for labor reporting data grouped by employee. |

When you use `EMPLOYEE`, the data is split into
subsections by restaurant, then by day for the restaurant, and then by
employee for the day at that restaurant. For example, the following list
shows the structure of labor reporting data for two example restaurants,
covering two days and four employees.

* Restaurant 1, Day 1, Employee 1
* Restaurant 1, Day 1, Employee 2
* Restaurant 1, Day 2, Employee 2
* Restaurant 1, Day 2, Employee 3
* Restaurant 2, Day 1, Employee 3
* Restaurant 2, Day 1, Employee 4
* Restaurant 2, Day 2, Employee 1
* Restaurant 2, Day 2, Employee 4

|  |
| --- |
| Note |
| The data is not organized chronologically by day or alphabetically by employee name. |

When you use `JOB`, the data is split into subsections
by restaurant, then by day for the restaurant, and then by job for the
day at that restaurant. For example, the following list shows the
structure of labor reporting data for two example restaurants, covering
two days and four jobs.

* Restaurant 1, Day 1, Job 1
* Restaurant 1, Day 1, Job 2
* Restaurant 1, Day 2, Job 2
* Restaurant 1, Day 2, Job 3
* Restaurant 2, Day 1, Job 3
* Restaurant 2, Day 1, Job 4
* Restaurant 2, Day 2, Job 1
* Restaurant 2, Day 2, Job 4

|  |
| --- |
| Note |
| The data is not organized chronologically by day or alphabetically by job name. |

#### Example of labor reporting data aggregated by employee

The following example requests labor reporting data for three
days and two restaurants, and is grouped into subsections by
employee.

##### Request for labor reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/labor/week` endpoint.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/labor/week' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H 'Authorization: Bearer [token]' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3545134B67F3-A975-4412-A030-B6DDC7E2BD35) | Send a `POST` request to the `/era/v1/labor/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `week`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3547134B67F3-A975-4412-A030-B6DDC7E2BD35) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3549134B67F3-A975-4412-A030-B6DDC7E2BD35) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3551134B67F3-A975-4412-A030-B6DDC7E2BD35) | Include details about the requested labor reporting data in the message body. The following example is the message body for this **curl** command example. |

##### Message body for the labor reporting data request

The following example shows the message body for the
`/era/v1/labor/week` request that uses the
`groupBy` value with `EMPLOYEE`.

```
{
  "startBusinessDate": "20230203",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20230205",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "excludedRestaurantIds": [],![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "groupBy": ["EMPLOYEE"]![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3611134B67F3-A975-4412-A030-B6DDC7E2BD35) | The start date of the time range for the labor reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3613134B67F3-A975-4412-A030-B6DDC7E2BD35) | The end date of the time range for the labor reporting data, in `YYYYMMDD` format. The `endBusinessDate` value is optional for requests using the `day` time range. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3615134B67F3-A975-4412-A030-B6DDC7E2BD35) | The list of restaurant GUIDs from the management group to include in the labor reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3617134B67F3-A975-4412-A030-B6DDC7E2BD35) | The list of restaurant GUIDs from the management group to exclude from the labor reporting data. For this example, no restaurants are listed, so all other restaurants are included. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3619134B67F3-A975-4412-A030-B6DDC7E2BD35) | This request is for labor reporting data grouped by employee. |

|  |
| --- |
| Important |
| Adding restaurant GUIDs to both `restaurantIds` and `excludedRestaurantIds` results in an error. |

##### Response to the labor reporting data request

The following example shows the response from the
`/era/v1/labor/day` endpoint.

```
"97adf06d-60c3-4224-8062-003c9157702e"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3693134B67F3-A975-4412-A030-B6DDC7E2BD35) | The GUID for the labor reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

##### Request to retrieve the labor reporting data

The following example **curl** command sends a
`GET` request to the
`/era/v1/labor/{reportRequestGuid}` endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/labor/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
97adf06d-60c3-4224-8062-003c9157702e/' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3730134B67F3-A975-4412-A030-B6DDC7E2BD35) | Send a `GET` request to the `/era/v1/labor` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3732134B67F3-A975-4412-A030-B6DDC7E2BD35) | Include the GUID for the labor reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html#co-d1e3734134B67F3-A975-4412-A030-B6DDC7E2BD35) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

##### Response to the retrieval request for labor reporting data

The following example shows the response from the
`/era/v1/labor/{reportRequestGuid}` endpoint.

```
[
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230204,
       [content omitted]
       "jobGuid": null,
       "jobTitle": null,
       "jobCode": null,
       "employeeGuid": "68001176-111e-403f-9157-3459f8c5c284",
       "employeeFirstName": "Elizabeth",
       "employeeLastName": "Bennet",
       "employeeChosenName": "Lizzie",
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230204,
       [content omitted]
       "jobGuid": null,
       "jobTitle": null,
       "jobCode": null,
       "employeeGuid": "daf8623e-3e5b-4ee6-955e-6cf485cb4d23",
       "employeeFirstName": "Esther",
       "employeeLastName": "Summerson",
       "employeeChosenName": null,
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   [content omitted]
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230203,
       [content omitted]
       "jobGuid": null,
       "jobTitle": null,
       "jobCode": null,
       "employeeGuid": "e509a2dd-9e66-11ed-9c8b-0284a90dacf9",
       "employeeFirstName": "Anne",
       "employeeLastName": "Shirley",
       "employeeChosenName": null,
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230203,
       [content omitted]
       "jobGuid": null,
       "jobTitle": null,
       "jobCode": null,
       "employeeGuid": "68001176-111e-403f-9157-3459f8c5c284",
       "employeeFirstName": "Elizabeth",
       "employeeLastName": "Bennet",
       "employeeChosenName": "Lizzie",
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   [content omitted]   
   {
       "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
       "businessDate": 20230203,
       [content omitted]
       "jobGuid": null,
       "jobTitle": null,
       "jobCode": null,
       "employeeGuid": null,
       "employeeFirstName": "James",
       "employeeLastName": "Hawkins",
       "employeeChosenName": "Jim",
       "restaurantName": "Summer Street Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
       "businessDate": 20230203,
       [content omitted]
       "jobGuid": null,
       "jobTitle": null,
       "jobCode": null,
       "employeeGuid": "840a313f-8bc2-11ed-9c8b-0284a90dacf9",
       "employeeFirstName": "Nicholas",
       "employeeLastName": "Carraway",
       "employeeChosenName": "Nick",
       "restaurantName": "Summer Street Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   [content omitted]
   {
       "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
       "businessDate": 20230204,
       [content omitted]
       "jobGuid": null,
       "jobTitle": null,
       "jobCode": null,
       "employeeGuid": "daf8623e-3e5b-4ee6-955e-6cf485cb4d23",
       "employeeFirstName": "Esther",
       "employeeLastName": "Summerson",
       "employeeChosenName": null,
       "restaurantName": "Summer Street Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   }
   {
       "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
       "businessDate": 20230204,
       [content omitted]
       "jobGuid": null,
       "jobTitle": null,
       "jobCode": null,
       "employeeGuid": "e509a2dd-9e66-11ed-9c8b-0284a90dacf9",
       "employeeFirstName": "Anne",
       "employeeLastName": "Shirley",
       "employeeChosenName": null,
       "restaurantName": "Summer Street Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   [content omitted]
]
```


---

# Creating a request for labor reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html

### Creating a request for labor reporting data

You can request labor reporting data for a single day, week, or
month. The type of time range you use determines the rate limit for this
endpoint and method type. The rate limit for a `month` time
range is 10 requests per hour. The rate limit for `day` and
`week` time ranges is 10 requests per minute and 60 requests
per hour. For more information about API rate limits for the analytics
API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

You must include the `startBusinessDate` and
`endBusinessDate` properties in the message body to identify
the start and end dates for the time range, in `YYYYMMDD`
format. For the `day` time range, the dates must be the
same.

Optionally, you can use the `restaurantIds` in the
message body to list the GUIDs of specific restaurants from the
management group that you want to include, or the
`excludedRestaurantIds` in the message body to list the GUIDs
of specific restaurants from the management group that you want to
exclude. If you add restaurant GUIDs to the `restaurantIds`
value, all restaurants not listed are excluded from the labor reporting
data. If you add restaurant GUIDs to the
`excludedRestaurantIds` value, all restaurants not listed are
included in the labor reporting data.

|  |
| --- |
| Important |
| You can include restaurant GUIDs for only one of these values. Listing restaurant GUIDs for both `restaurantIds` and `excludedRestaurantIds` results in a 400 error or blank labor reporting data. They are contradictory values that cannot be used together. |

You can optionally include only data from currently inactive
restaurants using `onlyInactiveRestaurants` as a query
parameter. For more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

Send a `POST` request to the
`/era/v1/labor/{timeRange}` endpoint to request labor
reporting data for a specific time range. The time range you specify can
be `day`, `week`, or `month`.

To create a request for labor data, you must include:

* The `restaurantIds` value in the message body. This
  identifies the only restaurants to include in the returned data
  using the restaurant GUID. All restaurants not listed are excluded
  from the returned data. This value can be left empty to include all
  restaurants.
* The `excludedRestaurantIds` value in the message
  body. This identifies the only restaurants to exclude in the
  returned data using the restaurant GUID. All restaurants not listed
  are included in the returned data. This value can be left empty to
  include all restaurants.

  |  |
  | --- |
  | Important |
  | You can only include restaurant GUIDs for either `restaurantIds` or `excludedRestaurantIds`. Listing restaurant GUIDs for both results in a 400 error or blank data. |
* The `startBusinessDate` value in the message body.
  This identifies the start date for the return data. This value must
  match the `endBusinessDate` value if using the
  `day` time range.
* The `endBusinessDate` value in the message body.
  This identifies the end date for the return data. This value must
  match the `startBusinessDate` value if using the
  `day` time range.

#### Request for labor reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/labor/{timeRange}` endpoint. This example uses the
`day` time range.

```
curl -i -X POST \ 'https://[toast-api-hostname]/labor/day' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H 'Authorization: Bearer [token]' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4384134B67F3-A975-4412-A030-B6DDC7E2BD35) | Send a `POST` request to the `/era/v1/labor/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `day`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4386134B67F3-A975-4412-A030-B6DDC7E2BD35) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4388134B67F3-A975-4412-A030-B6DDC7E2BD35) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4390134B67F3-A975-4412-A030-B6DDC7E2BD35) | Include details about the requested labor reporting data in the message body. The following example is the message body for this **curl** command example. |

#### Message body for labor reporting data

The following example shows the message body for creating a
labor reporting data request.

```
{
  "startBusinessDate": "20230205",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20230205",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "excludedRestaurantIds": [],![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "groupBy": [âJOBâ]![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4444134B67F3-A975-4412-A030-B6DDC7E2BD35) | The start date of the time range for the labor reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4446134B67F3-A975-4412-A030-B6DDC7E2BD35) | The end date of the time range for the labor reporting data, in `YYYYMMDD` format. This is the same value as the start date. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4448134B67F3-A975-4412-A030-B6DDC7E2BD35) | The list of restaurant GUIDs from the management group to include in the labor reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4450134B67F3-A975-4412-A030-B6DDC7E2BD35) | The list of restaurant GUIDs from the management group to exclude from the labor reporting data. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4452134B67F3-A975-4412-A030-B6DDC7E2BD35) | This request for labor reporting data is grouped by job. |

#### Response to request for labor reporting data

The following example shows the response from the
`/era/v1/labor/day` endpoint.

```
"707d9f10-e0fe-4e6d-af49-3123a78cd2b3"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html#co-d1e4509134B67F3-A975-4412-A030-B6DDC7E2BD35) | The GUID for the labor reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example that shows how to retrieve the labor reporting
data, see [Retrieving the labor reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataRetrieveData.html).


---

# Labor reporting data overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataOverview.html

### Labor reporting data overview

Labor reporting data includes detailed information about employees
and jobs that are paid hourly. For more information about what is
included in the labor reporting data, see [Understanding the labor reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataUnderstandingData.html). For more
information about inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

Retrieving the labor reporting data is a two-step process. You
must:

1. Send a `POST` request to the
   `/era/v1/labor/{timeRange}` endpoint to create a request
   for labor reporting data for the restaurants in a management group.
   The response is the `reportRequestGuid`, the unique
   request identifier. The analytics API supports retrieving labor
   reporting data for the `day`, `week`, and
   `month` time ranges. For more information, see [Creating a request for labor reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html).
2. Send a `GET` request to the
   `/era/v1/labor/{reportRequestGuid}` endpoint to retrieve
   the labor reporting data. For more information, see [Retrieving the aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html).

|  |
| --- |
| Note |
| The `reportRequestGuid` expires seven days after you create it. Using an expired or invalid `reportRequestGuid` results in a 404 error. The `message` of the response body contains additional information about the cause of the error. |


---

# Retrieving the labor reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataRetrieveData.html

### Retrieving the labor reporting data

Send a `GET` request to the
`/era/v1/labor/{reportRequestGuid}` endpoint to retrieve
labor reporting data. The rate limit for this endpoint and method type
is five requests per second and 30 requests per minute. For more
information about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

To request the labor reporting data, you must include the labor
reporting data request GUID, or `reportRequestGuid`, as a
path variable.

#### Request to retrieve labor reporting data

The following example **curl** command sends a
`GET` request to the
`/era/v1/labor/{reportRequestGuid}` endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/labor/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
707d9f10-e0fe-4e6d-af49-3123a78cd2b3â \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataRetrieveData.html#co-d1e4574134B67F3-A975-4412-A030-B6DDC7E2BD35) | Send a `GET` request to the `/era/v1/labor` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataRetrieveData.html#co-d1e4576134B67F3-A975-4412-A030-B6DDC7E2BD35) | The GUID for the labor reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataRetrieveData.html#co-d1e4578134B67F3-A975-4412-A030-B6DDC7E2BD35) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

#### Response to the retrieval request for labor reporting data

The following example shows the response from the
`/era/v1/labor/{reportRequestGuid}` endpoint.

```
[
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230203,
       "regularHours": 47.645,
       "overtimeHours": 0.0,
       "totalHours": 47.645,
       "regularCost": 823.86,
       "overtimeCost": 0.0,
       "totalCost": 823.86,
       "netSalesAmount": null,
       "grossSalesAmount": null,
       "netSalesPerEmployeeHour": null,
       "grossSalesPerEmployeeHour": null,
       "totalCostPerNetSales": 11.95,
       "totalCostPerGrossSales": 11.58,
       "jobGuid": "fcdc414a-06af-4e3f-97d3-6924a2189415",
       "jobTitle": "Line Cook",
       "jobCode": "",
       "employeeGuid": null,
       "employeeFirstName": null,
       "employeeLastName": null,
       "employeeChosenName": null,
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230203,
       "regularHours": 5.8,
       "overtimeHours": 0.0,
       "totalHours": 5.8,
       "regularCost": 69.9,
       "overtimeCost": 0.0,
       "totalCost": 69.9,
       "netSalesAmount": null,
       "grossSalesAmount": null,
       "netSalesPerEmployeeHour": null,
       "grossSalesPerEmployeeHour": null,
       "totalCostPerNetSales": 1.01,
       "totalCostPerGrossSales": 0.98,
       "jobGuid": "2c9a9356-b29b-4095-a23e-064779dc8eb3",
       "jobTitle": "Host",
       "jobCode": "",
       "employeeGuid": null,
       "employeeFirstName": null,
       "employeeLastName": null,
       "employeeChosenName": null,
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230203,
       "regularHours": 11.759,
       "overtimeHours": 0.0,
       "totalHours": 11.759,
       "regularCost": 79.37,
       "overtimeCost": 0.0,
       "totalCost": 79.37,
       "netSalesAmount": null,
       "grossSalesAmount": null,
       "netSalesPerEmployeeHour": null,
       "grossSalesPerEmployeeHour": null,
       "totalCostPerNetSales": 1.15,
       "totalCostPerGrossSales": 1.12,
       "jobGuid": "cc115ae8-f81c-42c7-b21e-4da19c396021",
       "jobTitle": "Server",
       "jobCode": "",
       "employeeGuid": null,
       "employeeFirstName": null,
       "employeeLastName": null,
       "employeeChosenName": null,
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230203,
       "regularHours": 37.988,
       "overtimeHours": 0.0,
       "totalHours": 37.988,
       "regularCost": 256.42,
       "overtimeCost": 0.0,
       "totalCost": 256.42,
       "netSalesAmount": null,
       "grossSalesAmount": null,
       "netSalesPerEmployeeHour": null,
       "grossSalesPerEmployeeHour": null,
       "totalCostPerNetSales": 3.72,
       "totalCostPerGrossSales": 3.6,
       "jobGuid": "e2ab1fbd-c766-460d-8781-0d742d228e34",
       "jobTitle": "Service Prep",
       "jobCode": "",
       "employeeGuid": null,
       "employeeFirstName": null,
       "employeeLastName": null,
       "employeeChosenName": null,
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
       "businessDate": 20230203,
       "regularHours": 9.333,
       "overtimeHours": 0.0,
       "totalHours": 9.333,
       "regularCost": 149.33,
       "overtimeCost": 0.0,
       "totalCost": 149.33,
       "netSalesAmount": null,
       "grossSalesAmount": null,
       "netSalesPerEmployeeHour": null,
       "grossSalesPerEmployeeHour": null,
       "totalCostPerNetSales": 2.17,
       "totalCostPerGrossSales": 2.1,
       "jobGuid": "e2ab1fbd-c766-460d-8781-0d742d228e34",
       "jobTitle": "Service Prep",
       "jobCode": "",
       "employeeGuid": null,
       "employeeFirstName": null,
       "employeeLastName": null,
       "employeeChosenName": null,
       "restaurantName": "Summer Street Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
       "businessDate": 20230203,
       "regularHours": 9.5,
       "overtimeHours": 0.0,
       "totalHours": 9.5,
       "regularCost": 114.0,
       "overtimeCost": 0.0,
       "totalCost": 114.0,
       "netSalesAmount": null,
       "grossSalesAmount": null,
       "netSalesPerEmployeeHour": null,
       "grossSalesPerEmployeeHour": null,
       "totalCostPerNetSales": 1.65,
       "totalCostPerGrossSales": 1.6,
       "jobGuid": "b33bc9ee-04e1-46b6-ab7d-f95dad362414",
       "jobTitle": "Bartender",
       "jobCode": "",
       "employeeGuid": null,
       "employeeFirstName": null,
       "employeeLastName": null,
       "employeeChosenName": null,
       "restaurantName": "Summer Street Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "businessDate": 20230203,
       "regularHours": 11.759,
       "overtimeHours": 0.0,
       "totalHours": 11.759,
       "regularCost": 79.37,
       "overtimeCost": 0.0,
       "totalCost": 79.37,
       "netSalesAmount": null,
       "grossSalesAmount": null,
       "netSalesPerEmployeeHour": null,
       "grossSalesPerEmployeeHour": null,
       "totalCostPerNetSales": 1.15,
       "totalCostPerGrossSales": 1.12,
       "jobGuid": "cc115ae8-f81c-42c7-b21e-4da19c396021",
       "jobTitle": "Server",
       "jobCode": "",
       "employeeGuid": null,
       "employeeFirstName": null,
       "employeeLastName": null,
       "employeeChosenName": null,
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": ""
   }
]
```

For more information about the values in the response, see
[Understanding the labor reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataUnderstandingData.html).


---

# Understanding the labor reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataUnderstandingData.html

### Understanding the labor reporting data

Labor reporting data contains consistent values that appear for
each active restaurant and by business date. Optionally, you can choose
to aggregate the labor reporting data by either employee or job. For
more information, see [Aggregating the labor reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataAggregation.html). For information
about retrieving inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

The restaurants included in the labor reporting data can be
limited by adding the GUIDs of restaurants to either include only or
exclude only. For an example that chooses specific restaurants, see
[Creating a request for labor reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsLaborReportingDataCreateRequest.html).

The following table specifies the returned set of values in the
labor reporting data. The values are listed in the order they
appear.

| Value name | Definition |
| --- | --- |
| `restaurantGuid` | The unique identifier assigned to the restaurant by the Toast platform. |
| `businessDate` | The calendar date of the associated order data, in `YYYYMMDD` format. |
| `regularHours` | The total regular hours logged between clock-in and clock-out for employees with hourly jobs. This does not include overtime hours. |
| `overtimeHours` | The total overtime hours logged between clock-in and clock-out for employees with hourly jobs. This only includes overtime hours. |
| `totalHours` | The total hours logged between clock-in and clock-out for employees with hourly jobs. This includes regular and overtime hours. |
| `regularCost` | The operation costs related to employees with hourly jobs from all regular hours, including all shifts. |
| `overtimeCost` | The operation costs related to employees with hourly jobs from all overtime hours, including all shifts. |
| `totalCost` | The operation costs related to employees with hourly jobs from all work hours, including all shifts. |
| `netSalesAmount` | The total sales, excluding tax, gratuity, tips, discounts, refunds, and deferred amounts. This property is only included when no `groupBy` value is specified. |
| `grossSalesAmount` | The total sales, including discounts and refunds. This property is only included when no `groupBy` value is specified. |
| `netSalesPerEmployeeHour` | The average of the location's total net sales for each hour clocked by an employee. This property is only included when no `groupBy` value is specified. |
| `grossSalesPerEmployeeHour` | The average of the location's total gross sales for each hour clocked by an employee. This property is only included when no `groupBy` value is specified. |
| `totalCostPerNetSales` | The ratio of employee operational costs compared to total net sales, expressed as a percentage. |
| `totalCostPerGrossSales` | The ratio of employee operational costs compared to gross sales, expressed as a percentage. |
| `jobGuid` | The identifier assigned by the Toast platform used to identify a job. This property is only included when the `groupBy` property uses the `JOB` value. If not aggregated by `JOB`, the value is `null`. |
| `jobTitle` | The job name. This property only appears when the request for labor data includes the `groupBy` property with value `JOB`. If not aggregated by `JOB`, the value is `null`. |
| `jobCode` | A reference identifier for the job. This is an optional field entered when the job is created. For example, it can be used to match Toast platform jobs to jobs configured in external labor management systems. This property only appears when the request for labor data includes the `groupBy` property with value `JOB`. If not aggregated by `JOB`, the value is `null`. |
| `employeeGuid` | The identifier assigned by the Toast platform used to identify an employee. This property only appears when the request for labor data includes the `groupBy` property with value `EMPLOYEE`. If not aggregated by `EMPLOYEE`, the value is `null`. |
| `employeeFirstName` | The employee's first name. This property is populated when the request for labor data includes the `groupBy` property with value `EMPLOYEE`. If not aggregated by `EMPLOYEE`, the value is `null`. |
| `employeeLastName` | The employee's last name. This property is populated when the request for labor data includes the `groupBy` property with value `EMPLOYEE`. If not aggregated by `EMPLOYEE`, the value is `null`. |
| `employeeChosenName` | The employee's chosen name. This property is populated when the request for labor data includes the `groupBy` property with value `EMPLOYEE`. If not aggregated by `EMPLOYEE`, the value is `null`. |
| `restaurantName` | The restaurantâs name. |
| `restaurantLocationName` | The restaurantâs location name. |
| `restaurantLocationCode` | The restaurantâs location code. |


---

# Aggregating the menu reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html

### Aggregating the menu reporting data

The default way to view menu reporting data is by day for each
location. You can choose to further aggregate the data by menu, menu
group, menu item, or modifier. The `groupBy` value in the
message body of the `/era/v1/menu/day` or
`/era/v1/menu/week` request groups the data by one of these
options:

* `MENU` to group by menu
* `MENU_GROUP` to group by menu group
* `MENU_ITEM` to group by menu item
* `MODIFIER` to group by modifier

|  |
| --- |
| Note |
| You can only use the `groupBy` value if requesting data for a `day` or `week` time range. |

The menu reporting data you retrieve includes an object for every
available combination of business date, restaurant, and menu entity. If
there is no information correlated to a combination of data, then there
is no object. For example, if a menu item was not ordered on Monday,
there is no data available for the menu item on Monday for the
restaurant. Another example is a menu that is only available on Sundays.
There is no data for that menu at that restaurant for days other than
Sunday.

|  |
| --- |
| Note |
| You can only aggregate using one value, either `MENU`, `MENU_GROUP`, `MENU_ITEM`, or `MODIFIER`. |

The following example shows the message body for a
`/era/v1/menu/day` request that uses the `groupBy`
value with `MENU`.

```
{
  "startBusinessDate": "20220101",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20220101",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "groupBy": ["MENU"]![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e4831F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The start date of the time range for the menu reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e4833F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The end date of the time range for the menu reporting data, in `YYYYMMDD` format. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e4835F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The list of restaurant GUIDs from the management group to include in the menu reporting data. If any restaurants are listed, the restaurant GUIDs not listed are excluded. When left blank, all restaurants are included by default. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e4837F987D2F6-E937-4A8F-AC23-BD439B5BF371) | This request is for menu reporting data grouped by menu. |

When you use `MENU`, the menu reporting data includes
objects with information related to a menu for a specific restaurant and
day. If there is no information correlated to a combination of data,
then there is no object. The following list shows possible objects in
the menu reporting data for two restaurants, covering two days and two
menus. The objects can appear in any order in the menu reporting data.
They are not organized chronologically or alphabetically.

```
Restaurant 1, Day 1, Menu 1
Restaurant 1, Day 1, Menu 2
Restaurant 1, Day 2, Menu 2
Restaurant 2, Day 1, Menu 1
Restaurant 2, Day 2, Menu 1
Restaurant 2, Day 2, Menu 2
```

In the list above, the first object includes menu information
related to Menu 1 on Day 1 for Restaurant 1.

When you use `MENU_GROUP`, the menu reporting data
includes objects with information related to a menu group for a specific
restaurant and day. If there is no information correlated to a
combination of data, then there is no object. The following list shows
possible objects in the menu reporting data for two restaurants,
covering two days and three menu groups. The objects can appear in any
order in the menu reporting data. They are not organized chronologically
or alphabetically.

```
Restaurant 1, Day 1, Menu Group 1
Restaurant 1, Day 1, Menu Group 2
Restaurant 1, Day 1, Menu Group 3
Restaurant 1, Day 2, Menu Group 1
Restaurant 1, Day 2, Menu Group 2
Restaurant 2, Day 1, Menu Group 1
Restaurant 2, Day 1, Menu Group 3
Restaurant 2, Day 2, Menu Group 1
Restaurant 2, Day 2, Menu Group 2
```

In the list above, the first object includes menu information
related to Menu Group 1 on Day 1 for Restaurant 1.

When you use `MENU_ITEM`, the menu reporting data
includes objects with information related to a menu item for a specific
restaurant and day. If there is no information correlated to a
combination of data, then there is no object. The following list shows
possible objects in the menu reporting data for two restaurants,
covering two days and four menu items. The objects can appear in any
order in the menu reporting data. They are not organized chronologically
or alphabetically.

```
Restaurant 1, Day 1, Menu Item 1
Restaurant 1, Day 1, Menu Item 2
Restaurant 1, Day 1, Menu Item 3
Restaurant 1, Day 2, Menu Item 1
Restaurant 1, Day 2, Menu Item 2
Restaurant 1, Day 2, Menu Item 4
Restaurant 2, Day 1, Menu Item 1
Restaurant 2, Day 1, Menu Item 3
Restaurant 2, Day 1, Menu Item 4
Restaurant 2, Day 2, Menu Item 1
Restaurant 2, Day 2, Menu Item 2
Restaurant 2, Day 2, Menu Item 4
```

In the list above, the first object includes menu information
related to Menu Item 1 on Day 1 for Restaurant 1.

When you use `MODIFIER`, the menu reporting data
includes objects with information related to a modifier for a specific
restaurant and day. If there is no information correlated to a
combination of data, then there is no object. The following list shows
possible objects in the menu reporting data for two restaurants,
covering two days, and three modifiers. The objects can appear in any
order in the menu reporting data. They are not organized chronologically
or alphabetically.

* Restaurant 1, Day 1, Modifier 1
* Restaurant 1, Day 1, Modifier 2
* Restaurant 1, Day 1, Modifier 3
* Restaurant 1, Day 2, Modifier 1
* Restaurant 1, Day 2, Modifier 2
* Restaurant 2, Day 1, Modifier 1
* Restaurant 2, Day 1, Modifier 3
* Restaurant 2, Day 2, Modifier 1
* Restaurant 2, Day 2, Modifier 2

```
Restaurant 1, Day 1, Modifier 1
Restaurant 1, Day 1, Modifier 2
Restaurant 1, Day 1, Modifier 3
Restaurant 1, Day 2, Modifier 1
Restaurant 1, Day 2, Modifier 2
Restaurant 2, Day 1, Modifier 1
Restaurant 2, Day 1, Modifier 3
Restaurant 2, Day 2, Modifier 1
Restaurant 2, Day 2, Modifier 2
```

In the list above, the first object includes menu information
related to Modifier 1 on Day 1 for Restaurant 1.

#### Example of menu reporting data aggregated by menu item

The following example requests menu reporting data for two days
and two restaurants, and is grouped into subsections by menu
item.

##### Request for menu reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/menu/week` endpoint.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/menu/week' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H 'Authorization: Bearer [token]' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5153F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Send a `POST` request to the `/era/v1/menu/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `week`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5155F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5157F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5159F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Include details about the requested menu reporting data in the message body. The following example is the message body for this **curl** command example. |

##### Message body for the menu reporting data request

The following example shows the message body of the
`/era/v1/menu/week` request that uses the
`groupBy` value with `MENU_ITEM`.

```
{
  "restaurantIds": ["95a96d7b-dbf5-46d3-98c5-c65c8ad18021", "b6bae410-1316-4d3b-b01f-47a758811db2"],![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "excludedRestaurantIds": [],![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "startBusinessDate": "20220901",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "endBusinessDate": "20220906",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "groupBy": ["MENU_ITEM"]![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5183F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The list of restaurant GUIDs from the management group to include in the menu reporting data. Restaurant GUIDs not listed are excluded. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5185F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The list of restaurant GUIDs from the management group to exclude from the menu reporting data. For this example, `excludedRestaurantIds` must be empty because restaurant GUIDs are already included with the `restaurantIds` value. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5187F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The start date of the time range for the menu reporting data, in `YYYYMMDD` format. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5189F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The end date of the time range for the menu reporting data, in `YYYYMMDD` format. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5191F987D2F6-E937-4A8F-AC23-BD439B5BF371) | This request is for menu reporting data grouped by menu item. |

##### Response to the menu reporting data request

The following example shows the response from the
`/era/v1/menu/week` endpoint.

```
"bd9fb800-7c1e-40b8-9e5d-1010430a6a09"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5210F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The GUID for the menu reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

##### Request to retrieve the menu reporting data

The following example **curl** command sends a
`GET` request to the
`/era/v1/menu/{reportRequestGuid}` endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/menu/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
bd9fb800-7c1e-40b8-9e5d-1010430a6a09/' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5235F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Send a `GET` request to the `/era/v1/menu` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5237F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Include the GUID for the menu reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html#co-d1e5239F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

##### Response to the retrieval request for menu reporting data

The following example shows the response from the
`/era/v1/menu/{reportRequestGuid}` endpoint.

```
[
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "businessDate": "20220902",
        "netSalesAmount": 32.97,
        "grossSalesAmount": 32.97,
        "discountAmount": 0.0,
        "refundAmount": 0.0,
        "voidAmount": 0.0,
        "quantitySold": 3.0,
        "averagePrice": 10.99,
        "wasteCount": 0.0,
        "wasteAmount": 0.0,
        "menuItemGuid": "8588c16e-5f17-4144-b4c0-47f4f42ed4c0",
        "menuItemName": "Pancake Special"
    },
    {
        "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "businessDate": "20220902",
        "netSalesAmount": 5.98,
        "grossSalesAmount": 5.98,
        "discountAmount": 0.0,
        "refundAmount": 0.0,
        "voidAmount": 0.0,
        "quantitySold": 2.0,
        "averagePrice": 2.99,
        "wasteCount": 0.0,
        "wasteAmount": 0.0,
        "menuItemGuid": "4f5469c1-7f55-4f80-a1a6-d69253cd916b",
        "menuItemName": "Coffee"
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "businessDate": "20220902",
        "netSalesAmount": 95.29,
        "grossSalesAmount": 107.41,
        "discountAmount": 12.12,
        "refundAmount": 0.0,
        "voidAmount": 0.0,
        "quantitySold": 9.0,
        "averagePrice": 11.93,
        "wasteCount": 0.0,
        "wasteAmount": 0.0,
        "menuItemGuid": "a6a561ae-7c7a-4275-9345-ea3c0a72368f",
        "menuItemName": "Full English Breakfast"
    },
    [content omitted]
    {
        "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "businessDate": "20220902",
        "netSalesAmount": 51.96,
        "grossSalesAmount": 51.96,
        "discountAmount": 0.0,
        "refundAmount": 0.0,
        "voidAmount": 0.0,
        "quantitySold": 4.0,
        "averagePrice": 12.99,
        "wasteCount": 0.0,
        "wasteAmount": 0.0,
        "menuItemGuid": "8588c16e-5f17-4144-b4c0-47f4f42ed4c0",
        "menuItemName": "Pancake Special"
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "businessDate": "20220901",
        "netSalesAmount": 54.95,
        "grossSalesAmount": 54.95,
        "discountAmount": 0.0,
        "refundAmount": 0.0,
        "voidAmount": 0.0,
        "quantitySold": 5.0,
        "averagePrice": 10.99,
        "wasteCount": 0.0,
        "wasteAmount": 0.0,
        "menuItemGuid": "8588c16e-5f17-4144-b4c0-47f4f42ed4c0",
        "menuItemName": "Pancake Special"
    },
    {
        "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
        "restaurantName": "Summer Street Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "businessDate": "20220901",
        "netSalesAmount": 77.5,
        "grossSalesAmount": 90.17,
        "discountAmount": 12.67,
        "refundAmount": 0.0,
        "voidAmount": 0.0,
        "quantitySold": 8.0,
        "averagePrice": 11.27,
        "wasteCount": 0.0,
        "wasteAmount": 0.0,
        "menuItemGuid": "a6a561ae-7c7a-4275-9345-ea3c0a72368f",
        "menuItemName": "Full English Breakfast"
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "businessDate": "20220901",
        "netSalesAmount": 2.99,
        "grossSalesAmount": 2.99,
        "discountAmount": 0.0,
        "refundAmount": 0.0,
        "voidAmount": 0.0,
        "quantitySold": 1.0,
        "averagePrice": 2.99,
        "wasteCount": 0.0,
        "wasteAmount": 0.0,
        "menuItemGuid": "4f5469c1-7f55-4f80-a1a6-d69253cd916b",
        "menuItemName": "Coffee"
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "businessDate": "20220901",
        "netSalesAmount": 94.67,
        "grossSalesAmount": 94.67,
        "discountAmount": 0.0,
        "refundAmount": 0.0,
        "voidAmount": 0.0,
        "quantitySold": 8.0,
        "averagePrice": 11.83,
        "wasteCount": 0.0,
        "wasteAmount": 0.0,
        "menuItemGuid": "a6a561ae-7c7a-4275-9345-ea3c0a72368f",
        "menuItemName": "Full English Breakfast"
    },
    [content omitted]
]
```


---

# Creating a request for menu reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html

### Creating a request for menu reporting data

There are two ways to create a request for menu reporting data:
you can request menu reporting data for a custom time range or a
specific time range. The type of time range you use determines the rate
limit for this endpoint and method type. The rate limit for custom,
`month`, and `year` time ranges is 10 requests per
hour. The rate limit for `day` and `week` time
ranges is 10 requests per minute and 60 requests per hour. For more
information about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

You must include the `startBusinessDate` and
`endBusinessDate` properties in the message body to identify
the start and end dates for the time range, in `YYYYMMDD`
format. For the day time range, the dates must be the same.

|  |
| --- |
| Note |
| The `day` option for the specific time range menu reporting data request does not require the `endBusinessDate`. |

Optionally, you can use the `restaurantIds` in the
message body to list the GUIDs of specific restaurants from the
management group that you want to include, or the
`excludedRestaurantIds` in the message body to list the GUIDs
of specific restaurants from the management group that you want to
exclude. If you add restaurant GUIDs to the `restaurantIds`
value, all restaurants not listed are excluded from the menu reporting
data. If you add restaurant GUIDs to the
`excludedRestaurantIds` value, all restaurants not listed are
included in the menu reporting data.

|  |
| --- |
| Important |
| You can include restaurant GUIDs for only one of these values. Listing restaurant GUIDs for both `restaurantIds` and `excludedRestaurantIds` results in a 400 error or blank menu reporting data. They are contradictory values that cannot be used together. |

You can optionally aggregate the menu reporting data into groups
by menu, menu group, menu item, or modifier using the
`groupBy` value in the message body. For more information
about using `groupBy` with the menu reporting data endpoint,
see [Aggregating the menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html).

Also, you can optionally include only data from currently inactive
restaurants using `onlyInactiveRestaurants` as a query
parameter. For more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

#### Creating a menu reporting data request for a custom time range

Send a `POST` request to the
`/era/v1/menu` endpoint to request menu reporting data for
a customized time range. A custom time range can cover the current
date and earlier. For example, if the current date is January 1, 2025,
you could choose a range of January 1, 2023 to January 1, 2025, but
the end date could not be January 2, 2025.

##### Request for a custom time range of menu reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/menu` endpoint.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/menu' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H âAuthorization: Bearer [token]â \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e59532E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | Send a `POST` request to the `/era/v1/menu` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e59552E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e59572E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e59592E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | Include details about the requested menu reporting data in the message body. The following example is the message body for this **curl** command example. |

##### Message body for a custom time range of menu reporting data

The following example shows the message body for creating a
menu reporting data request for a custom time range.

```
{
  "startBusinessDate": "20220101",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20230912",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "95a96d7b-dbf5-46d3-98c5-c65c8ad18021"
  ],
  "excludedRestaurantIds": [],![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e60132E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | The start date of the time range for the menu reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e60152E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | The end date of the time range for the menu reporting data, in `YYYYMMDD` format. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e60172E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | The list of restaurant GUIDs from the management group to include in the menu reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e60192E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | The list of restaurant GUIDs from the management group to exclude from the menu reporting data. For this example, `excludedRestaurantIds` must be empty because a restaurant GUID is already included with the `restaurantIds` value. |

##### Response to request for a custom time range of menu reporting data

The following example shows the response from the
`/era/v1/menu` endpoint.

```
"fb23cfaa-56d7-4cb9-829d-531a8d02274a"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e60722E67B5E6-4A8B-4FAD-9CA0-6A0903A99396) | The GUID for the menu reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example about how to retrieve the menu reporting data,
see [Retrieving the menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataRetrieveData.html).

#### Creating a menu reporting data request for a specific time range

Send a `POST` request to
`/era/v1/menu/{timeRange}` endpoint to request menu
reporting data for a specific time range. The time range you specify
can be a day, week, month, or year, as represented by these options
for the `{timeRange}` path parameter:

* `day`: This requests data for one day, with the
  date specified by `startBusinessDate` in the message
  body. Providing an `endBusinessDate` is optional. If
  you choose to include the `endBusinessDate`, it must be
  the same date as the `startBusinessDate`.
* `week`: This requests data for seven or fewer
  days, with the start date specified by
  `startBusinessDate` and the end date specified by
  `endBusinessDate` in the message body.
* `month`: This requests data for 31 or fewer days,
  with the start date specified by `startBusinessDate`
  and the end date specified by `endBusinessDate` in the
  message body.
* `year`: This requests data for 366 or fewer days,
  with the start date specified by `startBusinessDate`
  and the end date specified by `endBusinessDate` in the
  message body.

|  |
| --- |
| Note |
| The number of days between, and including, the `startBusinessDate` and `endBusinessDate` must be equal to or less than the day limit for the specified time range. |

##### Request for a specific time range of menu reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/menu/{timeRange}` endpoint. This example uses
the `day` time range.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/menu/day' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H âAuthorization: Bearer [token]â \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5965F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Send a `POST` request to the `/era/v1/menu/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `day`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5967F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5969F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5971F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Include details about the requested menu reporting data in the message body. The following example is the message body for this **curl** command example. |

##### Message body for a specific time range of menu reporting data

The following example shows the message body for creating a
menu reporting data request for a specific time range. This example
is for the `day` time range.

```
{
  "startBusinessDate": "20220901",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20220901",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "95a96d7b-dbf5-46d3-98c5-c65c8ad18021"
  ],
  "excludedRestaurantIds": [],![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "groupBy": ["MODIFIER"]![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5990F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The start date of the time range for the menu reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5992F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The end date of the time range for the menu reporting data, in `YYYYMMDD` format. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5994F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The list of restaurant GUIDs from the management group to include in the menu reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5996F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The list of restaurant GUIDs from the management group to exclude from the menu reporting data. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e5998F987D2F6-E937-4A8F-AC23-BD439B5BF371) | This request is for menu reporting data grouped by modifier. |

##### Response to request for a specific time range of menu reporting data

The following example shows the response from the
`/era/v1/menu/{timeRange}` endpoint.

```
"fb23cfaa-56d7-4cb9-829d-531a8d02274a"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html#co-d1e6017F987D2F6-E937-4A8F-AC23-BD439B5BF371) | The GUID for the menu reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example about how to retrieve the menu reporting data,
see [Retrieving the menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataRetrieveData.html).


---

# Menu reporting data overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataOverview.html

### Menu reporting data overview

Menu reporting data includes detailed information about menu
entities as they relate to sales. For example, the gross and net sales
of the Croissant menu item and the number sold at a restaurant on a
specified day. For more information about what is included in the menu
reporting data, see [Understanding the menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataUnderstandingData.html). For more
information about inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

Retrieving the menu reporting data is a two-step process. You
must:

1. Send a `POST` request to the
   `/era/v1/menu` or `/era/v1/menu/{timeRange}`
   endpoint to create a request for menu reporting data for the
   restaurants in a management group. The response includes the
   `reportRequestGuid`, the unique request identifier.
   These endpoints are for either a custom time range
   (`/era/v1/menu`), which can include a time range for
   any number or days, or a specific time range
   (`/era/v1/menu/{timeRange}`), which allows for a
   maximum number of days depending on the specific time range value
   chosen. For more information, see [Creating a request for menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html).
2. Send a `GET` request to the
   `/era/v1/menu/{requestReportGuid}` endpoint to retrieve
   the menu reporting data. For more information, see [Retrieving the menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataRetrieveData.html).

|  |
| --- |
| Note |
| The `reportRequestGuid` expires seven days after you create it. Using an expired or invalid `reportRequestGuid` results in a 404 error. The `message` of the response body contains additional information about the cause of the error. |


---

# Retrieving the menu reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataRetrieveData.html

### Retrieving the menu reporting data

Send a `GET` request to the
`/era/v1/menu/{reportRequestGuid}` endpoint to retrieve menu
reporting data. The rate limit for this endpoint and method type is five
requests per second and 30 requests per minute. For more information
about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

#### Request to retrieve menu reporting data

The following example **curl** command sends a
`GET` request to
`/era/v1/menu/{reportRequestGuid}` endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/menu/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
fb23cfaa-56d7-4cb9-829d-531a8d02274a/' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataRetrieveData.html#co-d1e6065F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Send a `GET` request to the `/era/v1/menu` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataRetrieveData.html#co-d1e6067F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Include the GUID for the menu reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataRetrieveData.html#co-d1e6069F987D2F6-E937-4A8F-AC23-BD439B5BF371) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

#### Response to the retrieval request for menu reporting data

The following example shows the response from the
`/era/v1/menu/{reportRequestGuid}` endpoint.

```
[
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": "",
       "businessDate": "20220901",
       "netSalesAmount": 24.5,
       "grossSalesAmount": 24.5,
       "discountAmount": 0.0,
       "refundAmount": 0.0,
       "voidAmount": 0.0,
       "quantitySold": 7.0,
       "averagePrice": 3.5,
       "wasteCount": 0.0,
       "wasteAmount": 0.0,
       "modifierGuid": "025d8278-edc3-409a-a16e-c082ccd9e5a5",
       "modifierName": "Soup de Jour"
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": "",
       "businessDate": "20220901",
       "netSalesAmount": 0.0,
       "grossSalesAmount": 0.0,
       "discountAmount": 0.0,
       "refundAmount": 0.0,
       "voidAmount": 0.0,
       "quantitySold": 5.0,
       "averagePrice": 0.0,
       "wasteCount": 0.0,
       "wasteAmount": 0.0,
       "modifierGuid": "d1a45259-de30-48fc-950b-7ff2b3a31c75",
       "modifierName": "Chocolate Chip"
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": "",
       "businessDate": "20220901",
       "netSalesAmount": 0.0,
       "grossSalesAmount": 0.0,
       "discountAmount": 0.0,
       "refundAmount": 0.0,
       "voidAmount": 0.0,
       "quantitySold": 1.0,
       "averagePrice": 0.0,
       "wasteCount": 0.0,
       "wasteAmount": 0.0,
       "modifierGuid": "ab57a7ca-b6b4-435f-be49-e86ba8215253",
       "modifierName": "Decaf"
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": "",
       "businessDate": "20220901",
       "netSalesAmount": 0.0,
       "grossSalesAmount": 0.0,
       "discountAmount": 0.0,
       "refundAmount": 0.0,
       "voidAmount": 0.0,
       "quantitySold": 7.0,
       "averagePrice": 0.0,
       "wasteCount": 0.0,
       "wasteAmount": 0.0,
       "modifierGuid": "4640fd82-e973-40b3-98fb-d1b57d035aa5",
       "modifierName": "Vegetarian"
   },
   [content omitted]
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": "",
       "businessDate": "20220901",
       "netSalesAmount": 0.0,
       "grossSalesAmount": 0.0,
       "discountAmount": 0.0,
       "refundAmount": 0.0,
       "voidAmount": 0.0,
       "quantitySold": 2.0,
       "averagePrice": 0.0,
       "wasteCount": 0.0,
       "wasteAmount": 0.0,
       "modifierGuid": "0580b349-d885-45bb-9097-197fe5f9eb40",
       "modifierName": "Blueberry"
   },
   {
       "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
       "restaurantName": "Grove Place Cafe",
       "restaurantLocationName": null,
       "restaurantLocationCode": "",
       "businessDate": "20220901",
       "netSalesAmount": 6.0,
       "grossSalesAmount": 6.0,
       "discountAmount": 0.0,
       "refundAmount": 0.0,
       "voidAmount": 0.0,
       "quantitySold": 2.0,
       "averagePrice": 3.0,
       "wasteCount": 0.0,
       "wasteAmount": 0.0,
       "modifierGuid": "3c0b4332-cd0e-4fd5-ae7f-30e1480c46b7",
       "modifierName": "Croissant"
   },
   [content omitted]
]
```

For more information about the values in the response, see
[Understanding the menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataUnderstandingData.html).


---

# Understanding the menu reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataUnderstandingData.html

### Understanding the menu reporting data

Menu reporting data contains objects that correspond to each
available restaurant and business date combination. Optionally, you can
choose to aggregate the data by menu, menu group, menu item, or
modifier. For more information, see [Aggregating the menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataAggregation.html). You can also
choose to retrieve data for currently inactive restaurants. For more
information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

The restaurants included in the menu reporting data can be limited
using either the `restaurantIds` or
`excludedRestaurantIds` value in the message body. Any
restaurants listed with the `restaurantIds` value are
included in the menu reporting data, with any restaurants not listed
excluded. Any restaurants listed with the
`excludedRestaurantIds` value are excluded from the menu
reporting data, with any restaurants not listed included. When left
blank, all restaurants are included automatically. You can include
restaurant GUIDs for only one of these values. For an example that
chooses to include specific restaurants, see [Creating a request for menu reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMenuReportingDataCreateRequest.html).

The following table specifies the returned set of values in the
menu reporting data. The values are listed in the order they
appear.

| Value name | Definition |
| --- | --- |
| `restaurantGuid` | The unique identifier assigned to the restaurant by the Toast platform. |
| `restaurantName` | The restaurantâs name. |
| `restaurantLocationName` | The restaurantâs location name. |
| `restaurantLocationCode` | The restaurantâs location code. |
| `businessDate` | The calendar date of the associated order data, in `YYYYMMDD` format. |
| `netSalesAmount` | The total sales, excluding tax, gratuity, tips, discounts, refunds, and deferred amounts. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the net sales for the associated menu item or items, including any modifiers. When grouping by `MODIFIER`, this is the net sales for the modifier. |
| `grossSalesAmount` | The total sales, including discounts and refunds. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the gross sales for the associated menu item or items, including any modifiers. When grouping by `MODIFIER`, this is the gross sales for the modifier. |
| `discountAmount` | The total amount of discounts. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the discount amount for the associated menu item or items, including any modifiers. When grouping by `MODIFIER`, this is the discount amount for the modifier. |
| `refundAmount` | The total amount of refunded sales. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the refund amount for the associated menu item or items, including any modifiers. When grouping by `MODIFIER`, this is the refund amount for the modifier. |
| `voidAmount` | The total amount of voided sales. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the void amount for the associated menu item or items, including any modifiers. When grouping by `MODIFIER`, this is the void amount for the modifier. |
| `quantitySold` | The number of menu entities sold. This number includes items that were made but later refunded. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the count of the associated menu item or items and does not count modifiers separately. When grouping by `MODIFIER`, this is the count of the modifier. |
| `averagePrice` | The average price of the menu entity. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the average price for the associated menu item or items, including any modifiers. When grouping by `MODIFIER`, this is the average price for the modifier. |
| `wasteCount` | The number of menu entities tracked as food waste. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the count of the associated menu item or items and does not count modifiers separately. When grouping by `MODIFIER`, this is the count of the modifier. |
| `wasteAmount` | The total amount tracked as food waste. When grouping by `MENU`, `MENU_GROUP`, or `MENU_ITEM`, this is the total price for the menu item or items, including any modifiers. When grouping by `MODIFIER`, this is the total price for the modifier. |
| `menuGuid` | The identifier for the menu, assigned by the Toast platform. This property appears when the request for menu data includes the `groupBy` property with value `MENU`. |
| `menuName` | The name of the menu. This property appears when the request for menu data includes the `groupBy` property with value `MENU`. |
| `menuGroupGuid` | The identifier for the menu group, assigned by the Toast platform. This property appears when the request for menu data includes the `groupBy` property with value `MENU_GROUP`. |
| `menuGroupName` | The name of the menu group. This property appears when the request for menu data includes the `groupBy` property with value `MENU_GROUP`. |
| `menuItemGuid` | The identifier for the menu item, assigned by the Toast platform. This property appears when the request for menu data includes the `groupBy` property with value `MENU_ITEM`. |
| `menuItemName` | The name of the menu item. This property appears when the request for menu data includes the `groupBy` property with value `MENU_ITEM`. |
| `modifierGuid` | The identifier for the modifier, assigned by the Toast platform. This property appears when the request for menu data includes the `groupBy` property with value `MODIFIER`. |
| `modifierName` | The name of the modifier. This property appears when the request for menu data includes the `groupBy` property with value `MODIFIER`. |


---

# Aggregating the aggregated sales reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html

### Aggregating the aggregated sales reporting data

The default way to view the aggregated sales reporting data is by
day for each location. If you use the `day` time range, you
can choose to view the data by hour for each location instead. Use the
`aggregateBy` query parameter set to `HOUR` in the
`/era/v1/metrics/day` request to organize the data by hour
instead of day.

Optionally, you can choose to aggregate the data into subsections
according to an order's dining option, order source, revenue center, or
a combination of two of these values. Use the `groupBy` value
in the message body of the `/era/v1/metrics` or
`/era/v1/metrics/{timeRange}` request to create subsections
organized by dining option, order source, revenue center, or a
combination of two of these values.

#### Using the `aggregateBy` query parameter

The `aggregateBy` query parameter divides the metric
data into either daily or hourly increments. Setting
`aggregateBy` to `DAY` divides the order data
into daily intervals and setting to `HOUR` divides the
order data into hourly intervals. The data is aggregated by
`DAY` by default. You can only aggregate by
`HOUR` when using the `/era/v1/metrics/day`
request.

The following example shows a `/era/v1/metrics/day`
request that uses the `aggregateBy` query parameter set to
`HOUR`:

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/metrics/day![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)?aggregateBy=HOUR' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)  
  -H 'Authorization: Bearer [token]' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -H 'Content-Type: application/json' \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  -d @[request-info].json \![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e451DC5A6931-2D76-4C46-BBFF-DAEEFE875EB6) | Send a `POST` request to the `/era/v1/metrics/{timeRange}` endpoint of the analytics API. The `{timeRange}` is set to `day`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e455DC5A6931-2D76-4C46-BBFF-DAEEFE875EB6) | Use the `aggregateBy` query parameter set to `HOUR` to group the aggregated sales reporting data by hour instead of day. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e461DC5A6931-2D76-4C46-BBFF-DAEEFE875EB6) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e463DC5A6931-2D76-4C46-BBFF-DAEEFE875EB6) | Set the data type of the message body to `application/json`. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e468DC5A6931-2D76-4C46-BBFF-DAEEFE875EB6) | Include details about the requested aggregated sales reporting data in the message body. For an example of the message body, see [Message body for the aggregated sales reporting data request using `aggregateBy` and `groupBy`](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataAggregateByGroupByExampleCreateMessageBody). |

When aggregating by day, the report splits the data into
sections by day, which are organized from oldest to newest. For
example, the following list shows the structure of aggregated sales
reporting data, aggregated by day, for one example restaurant.

* Day 1
* Day 2
* Day 3

When aggregating by hour, the report splits the data into
sections by hour, which are organized from oldest to newest. For
example, the following list shows the structure of aggregated sales
reporting data, aggregated by hour, for one example restaurant:

* Day 1, Hour 9
* Day 1, Hour 10
* Day 1, Hour 11
* Day 1, Hour 12
* Day 1, Hour 13
* Day 1, Hour 14

|  |
| --- |
| Note |
| Aggregating by hour is only available to the `day` time range. Aggregating by hour results in the same day for each section, with each section representing a different hour. |

The hour number corresponds to the 24 hours of the day, starting
at `0` and ending at `23`. `0`
represents the interval between 12 AM and 1 AM, `1`
represents the interval between 1 AM and 2 AM, `2`
represents the interval between 2 AM and 3 AM, and so on.

#### Using the `groupBy` value

The `groupBy` value in the message body of a
`/era/v1/metrics` or
`/era/v1/metrics/{timeRange}` request can group the
returned data by the dining option associated with an order, the order
source which is the method used to submit the order, the revenue
center associated with an order, or a combination of two of these
values. Use `DINING_OPTION` to group the aggregated sales
reporting data by dining option, `ORDER_SOURCE` to group by
order source, and `REVENUE_CENTER` to group by revenue
center.

The following example shows the message body for a
`/era/v1/metrics/week` request that uses the
`groupBy` value with `DINING_OPTION`.

```
{
  "startBusinessDate": "20220824",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20220830",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "497f6eca-6276-4993-bfeb-53cbbbba6f08"
  ],
  "groupBy": [![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "DINING_OPTION"
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e2276FAD0EEB-57EF-441A-9E58-614F985F6270) | The start date of the time range for the aggregated sales reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e2296FAD0EEB-57EF-441A-9E58-614F985F6270) | The end date of the time range for the aggregated sales reporting data, in `YYYYMMDD` format. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e2316FAD0EEB-57EF-441A-9E58-614F985F6270) | The list of restaurant GUIDs from the management group to include in the aggregated sales reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e2336FAD0EEB-57EF-441A-9E58-614F985F6270) | This request is for aggregated sales reporting data grouped by dining option. |

When you use `DINING_OPTION`, the data is split into
subsections by dining option, which are organized alphabetically by
the dining option name, and then by day for that dining option. For
example, the following list shows the structure of aggregated sales
reporting data for one example restaurant, covering two days and two
dining options.

* Day 1, Dining Option A
* Day 2, Dining Option A
* Day 1, Dining Option B
* Day 2, Dining Option B

When you use `ORDER_SOURCE`, the data is split into
subsections by order source, which are organized alphabetically by the
name of the order source, and then by day for that order source. For
example, the following list shows the structure of aggregated sales
reporting data for one example restaurant, covering two days and two
order sources.

* Day 1, Order Source 1
* Day 2, Order Source 1
* Day 1, Order Source 2
* Day 2, Order Source 2

When you use `REVENUE_CENTER`, the data is split into
subsections by revenue center, which are organized alphabetically by
the revenue center name, and then by day for that revenue center. For
example, the following list shows the structure of aggregated sales
reporting data for one example restaurant, covering two days and two
revenue centers.

* Day 1, Revenue Center A
* Day 2, Revenue Center A
* Day 1, Revenue Center B
* Day 2, Revenue Center B

|  |
| --- |
| Note |
| If no revenue center is associated with an order, the revenue center name is `No Revenue Center`. |

When grouping by both `DINING_OPTION` and
`ORDER_SOURCE`, the data is split into subsections by
dining option, then by order source, and finally by day. The order in
which the options are listed does not affect the response. They are
listed alphabetically by dining option and then order source. For
example, the following list shows the structure of aggregated sales
reporting data for one example restaurant covering two days, four
dining options, and three order sources.

* Day 1, Dining Option 1, Order Source 1
* Day 2, Dining Option 1, Order Source 1
* Day 1, Dining Option 2, Order Source 2
* Day 2, Dining Option 2, Order Source 2
* Day 1, Dining Option 3, Order Source 2
* Day 2, Dining Option 3, Order Source 1
* Day 2, Dining Option 3, Order Source 2
* Day 1, Dining Option 4, Order Source 3

When grouping by both `DINING_OPTION` and
`REVENUE_CENTER`, the data is split into subsections by
dining option, then by revenue center, and finally by day. The order
in which the options are listed does not affect the response. They are
listed alphabetically by dining option and then revenue center. For
example, the following list shows the structure of aggregated sales
reporting data for one example restaurant covering two days, two
revenue centers, and two dining options.

* Day 1, Revenue Center A, Dining Option A
* Day 2, Revenue Center A, Dining Option A
* Day 1, Revenue Center B, Dining Option A
* Day 2, Revenue Center B, Dining Option A
* Day 1, Revenue Center A, Dining Option B
* Day 2, Revenue Center B, Dining Option B

When grouping by both `ORDER_SOURCE` and
`REVENUE_CENTER`, the data is split into subsections by
revenue center, then by order source, and finally by day. The order in
which the options are listed does not affect the response. The
response lists each section alphabetically by revenue center and then
order source. For example, the following list shows the structure of
aggregated sales reporting data for one example restaurant covering
two days, two revenue centers, and two order sources.

* Day 1, Revenue Center A, Order Source A
* Day 1, Revenue Center A, Order Source B
* Day 2, Revenue Center A, Order Source A
* Day 1, Revenue Center B, Order Source B
* Day 2, Revenue Center B, Order Source A
* Day 2, Revenue Center B, Order Source B

If the `groupBy` value uses two values and is used in
conjunction with the `aggregateBy` query parameter set to
`HOUR`, the aggregated sales reporting data is split into
sections by hour, then by either dining option, revenue center, or
order source respectively. For example, the aggregated sales reporting
data for one example restaurant covering two hours, two dining
options, and two revenue centers, is structured similarly to the
following:

* Day 1, Revenue Center A, Dining Option A, Hour 8
* Day 1, Revenue Center B, Dining Option A, Hour 8
* Day 1, Revenue Center A, Dining Option B, Hour 8
* Day 1, Revenue Center B, Dining Option B, Hour 8
* Day 1, Revenue Center A, Dining Option A, Hour 9
* Day 1, Revenue Center B, Dining Option A, Hour 9
* Day 1, Revenue Center A, Dining Option B, Hour 9
* Day 1, Revenue Center B, Dining Option B, Hour 9

#### Example using `aggregateBy` and `groupBy`

This section includes examples of how to create a request for
and retrieve aggregated sales reporting data that is aggregated into
hourly intervals, and then grouped into subsections by dining option
and revenue center for a single example restaurant.

##### Request for aggregated sales reporting data using `aggregateBy` and `groupBy`

The following example **curl** command sends a
`POST` request to the
`/era/v1/metrics/day` endpoint.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/metrics/day![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)?aggregateBy=HOUR' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -H 'Content-Type: application/json' \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  -d @[request-info].json \![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e5736FAD0EEB-57EF-441A-9E58-614F985F6270) | Send a `POST` request to the `/era/v1/metrics/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `day`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e5776FAD0EEB-57EF-441A-9E58-614F985F6270) | Use the `aggregateBy` query parameter set to `HOUR` to group the aggregated sales reporting data by hour. For more information, see [Using the `aggregateBy` query parameter](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataAggregateBy). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e5796FAD0EEB-57EF-441A-9E58-614F985F6270) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e5816FAD0EEB-57EF-441A-9E58-614F985F6270) | Set the data type of the message body to `application/json`. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e5846FAD0EEB-57EF-441A-9E58-614F985F6270) | Include details about the requested aggregated sales reporting data in the message body. The [following example](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataAggregateByGroupByExampleCreateMessageBody) is the message body for this **curl** command example. |

##### Message body for the aggregated sales reporting data request using `aggregateBy` and `groupBy`

The following example shows the message body for the
`/era/v1/metrics/day` request that uses the
`groupBy` value with `DINING_OPTION` and
`REVENUE_CENTER`.

```
{
  "startBusinessDate": "20230201",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "restaurantIds": [![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "43211888-2860-46c7-a8c8-32ba462e1280"
  ],
  "excludedRestaurantIds": [],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "groupBy": [![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "DINING_OPTION", 
    "REVENUE_CENTER"
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e6526FAD0EEB-57EF-441A-9E58-614F985F6270) | The start date of the time range for the aggregated sales reporting data, in `YYYYMMDD` format. The `endBusinessDate` value is optional for requests using the `day` time range. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e6546FAD0EEB-57EF-441A-9E58-614F985F6270) | The list of restaurant GUIDs from the management group to include in the aggregated sales reporting data. Restaurant GUIDs not listed are excluded. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e6566FAD0EEB-57EF-441A-9E58-614F985F6270) | The list of restaurant GUIDs from the management group to exclude from the aggregated sales reporting data. For this example, one restaurant is included, which excludes all other restaurants automatically. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e6586FAD0EEB-57EF-441A-9E58-614F985F6270) | This request is for aggregated sales reporting data grouped by dining option and revenue center. |

|  |
| --- |
| Important |
| Adding restaurant GUIDs to both `restaurantIds` and `excludedRestaurantIds` results in an error. For more information, see [Creating a request for aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html). |

##### Response to the request for aggregated sales reporting data using `aggregateBy` and `groupBy`

The following example shows the response from the
`/era/v1/metrics/day` endpoint.

```
"3a29d28e-171f-43d8-a36a-0a26fe65783d"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e7026FAD0EEB-57EF-441A-9E58-614F985F6270) | The GUID for the aggregated sales reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

##### Request to retrieve the aggregated sales reporting data using `aggregateBy` and `groupBy`

The following example **curl** command sends a
`GET` request to the
`/era/v1/metrics/{reportRequestGuid}` endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/metrics/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
3a29d28e-171f-43d8-a36a-0a26fe65783d/' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e7226FAD0EEB-57EF-441A-9E58-614F985F6270) | Send a `GET` request to the `/era/v1/metrics` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e7246FAD0EEB-57EF-441A-9E58-614F985F6270) | Include the GUID for the aggregated sales reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#co-d1e7286FAD0EEB-57EF-441A-9E58-614F985F6270) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

##### Response to the retrieval request for aggregated sales reporting data using `aggregateBy` and `groupBy`

The following example shows the response from the
`/era/v1/metrics/{reportRequestGuid}` endpoint.

```
[
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "businessDate": "20230201",
        [content omitted]
        "revenueCenter": "Bar",
        "diningOption": "Dine In",
        "businessHour": "7"
    },
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "businessDate": "20230201",
        "guestCount": 14,
        [content omitted]
        "revenueCenter": "Bar",
        "diningOption": "Take Out",
        "businessHour": "7"
    },
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "businessDate": "20230201",
        [content omitted]
        "revenueCenter": "Dining Room",
        "diningOption": "Take Out",
        "businessHour": "7"
    },
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "businessDate": "20230201",
        [content omitted]
        "revenueCenter": "No Revenue Center",
        "diningOption": "Take Out",
        "businessHour": "7"
    },
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "businessHour": "20230201",
        [content omitted]
        "revenueCenter": "Bar",
        "diningOption": "Dine In",
        "businessHour": "8"
    },
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "businessDate": "20230201",
        [content omitted]
        "revenueCenter": "Bar",
        "diningOption": "Take Out",
        "businessHour": "8"
    },
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "businessDate": "20230201",
        [content omitted]
        "revenueCenter": "Dining Room",
        "diningOption": "Take Out",
        "businessHour": "8"
    },
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "businessDate": "20230201",
        [content omitted]
        "revenueCenter": "No Revenue Center",
        "diningOption": "Take Out",
        "businessHour": "8"
    },
    [content omitted]
]
```


---

# Creating a request for aggregated sales reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html

### Creating a request for aggregated sales reporting data

There are two ways to create a request for aggregated sales
reporting data: you can request aggregated sales reporting data for a
custom time range or a specific time range. The type of time range you
use also determines the rate limit for this endpoint and method type.
The rate limit for custom, `month`, and `year`
time ranges is 10 requests per hour. The rate limit for `day`
and `week` time ranges is 10 requests per minute and 60
requests per hour. For more information about API rate limits for the
analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

You must include the `startBusinessDate` and
`endBusinessDate` properties in the message body to identify
the start and end dates of your time range, in `YYYYMMDD`
format.

|  |
| --- |
| Note |
| The `day` option for the specific time range aggregated sales reporting data request does not require the `endBusinessDate`. |

Optionally, you can use the `restaurantIds` in the
message body to list the GUIDs of specific restaurants from the
management group that you want to include, or the
`excludedRestaurantIds` in the message body to list the GUIDs
of specific restaurants from the management group that you want to
exclude. If you add restaurant GUIDs to the `restaurantIds`
value, all restaurants not listed are excluded from the aggregated sales
reporting data. If you add restaurant GUIDs to the
`excludedRestaurantIds` value, all restaurants not listed are
included in the aggregated sales reporting data.

|  |
| --- |
| Important |
| You can include restaurant GUIDs for only one of these values. Listing restaurant GUIDs for both `restaurantIds` and `excludedRestaurantIds` results in a 400 error or blank aggregated sales reporting data. They are contradictory values that cannot be used together. |

If you use the `day` time range, you can aggregate the
aggregated sales reporting data hourly instead of the default of daily
by using the `aggregateBy` query parameter set to
`HOUR`. For more information, see [Using the `aggregateBy` query parameter](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataAggregateBy).

You can optionally aggregate the aggregated sales reporting data
into groups by either dining option, order source, revenue center, or a
combination of two of these values, using the `groupBy` value
in the message body. For more information about using
`groupBy`, see [Using the `groupBy` value](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataGroupBy).

Also, you can optionally include only data from currently inactive
restaurants using `onlyInactiveRestaurants` as a query
parameter. For more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

#### Creating an aggregated sales reporting data request for a custom time range

Send a `POST` request to the
`/era/v1/metrics` endpoint to request aggregated sales
reporting data for a customized time range. A custom time range can
cover the current date and earlier. For example, if the current date
is January 1, 2025, you could choose a range of January 1, 2023 to
January 1, 2025, but the end date could not be January 2, 2025.

To create a request for aggregated sales reporting data that
covers a customized time range, you must include:

* The `startBusinessDate` value in the message
  body. This identifies the start date for the custom time
  range.
* The `endBusinessDate` value in the message body.
  This identifies the end date for the custom time range.

##### Request for a custom time range of aggregated sales reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/metrics` endpoint.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/metrics' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H âAuthorization: Bearer [token]â \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e11276FAD0EEB-57EF-441A-9E58-614F985F6270) | Send a `POST` request to the `/era/v1/metrics` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e11316FAD0EEB-57EF-441A-9E58-614F985F6270) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e11336FAD0EEB-57EF-441A-9E58-614F985F6270) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e11366FAD0EEB-57EF-441A-9E58-614F985F6270) | Include details about the requested aggregated sales reporting data in the message body. The [following example](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#apiAnalyticsMetricsReportingDataCreateRequestCustomRangeExampleMessageBody) is the message body for this **curl** command example. |

##### Message body for the custom time range aggregated sales reporting data request

The following example shows the message body for creating an
aggregated sales reporting data request for a custom time
range.

```
{
  "startBusinessDate": "20220824",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20220903",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "95a96d7b-dbf5-46d3-98c5-c65c8ad18021"
  ],
  "excludedRestaurantIds": [],![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "groupBy": [![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    "REVENUE_CENTER"
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e11956FAD0EEB-57EF-441A-9E58-614F985F6270) | The start date of the time range for the aggregated sales reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e11976FAD0EEB-57EF-441A-9E58-614F985F6270) | The end date of the time range for the aggregated sales reporting data, in `YYYYMMDD` format. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e11996FAD0EEB-57EF-441A-9E58-614F985F6270) | The list of restaurant GUIDs from the management group to include in the aggregated sales reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e12016FAD0EEB-57EF-441A-9E58-614F985F6270) | The list of restaurant GUIDs from the management group to exclude from the aggregated sales reporting data. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e12036FAD0EEB-57EF-441A-9E58-614F985F6270) | This request is for aggregated sales reporting data grouped by revenue center. |

##### Response to the request for custom time range aggregated sales reporting data

The following example shows the response from the
`/era/v1/metrics` endpoint.

```
"fb23cfaa-56d7-4cb9-829d-531a8d02274a"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e12656FAD0EEB-57EF-441A-9E58-614F985F6270) | The GUID for the aggregated sales reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example that shows how to retrieve the aggregated sales
reporting data, see [Retrieving the aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html).

#### Creating an aggregated sales reporting data request for a specific time range

Send a `POST` request to
`/era/v1/metrics/{timeRange}` endpoint to request
aggregated sales reporting data for a specific time range. The time
range you specify can be a day, week, month, or year. Accordingly, the
options for the `{timeRange}` path parameter are:

* `day`: This requests data for one day, with the
  date specified by `startBusinessDate` in the message
  body. Providing an `endBusinessDate` is optional. If
  you choose to include the `endBusinessDate`, it must be
  the same date as the `startBusinessDate`.
* `week`: This requests data for seven or fewer
  days, with the start date specified by
  `startBusinessDate` and the end date specified by
  `endBusinessDate` in the message body.
* `month`: This requests data for 31 or fewer days,
  with the start date specified by `startBusinessDate`
  and the end date specified by `endBusinessDate` in the
  message body.
* `year`: This requests data for 366 or fewer days,
  with the start date specified by `startBusinessDate`
  and the end date specified by `endBusinessDate` in the
  message body.

If you choose the `day` time range, you can choose to
group the aggregated sales reporting data by hour instead of day. For
more information about aggregating by hour, see [Using the `aggregateBy` query parameter](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataAggregateBy). For an
example of using the `aggregateBy` query parameter, see
[Example using `aggregateBy` and
`groupBy`](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataAggregateByGroupByExample).

|  |
| --- |
| Note |
| The number of days between, and including, the `startBusinessDate` and `endBusinessDate` must be equal to or less than the day limit for the specified time range. |

##### Request for specific time range aggregated sales reporting data

The following example **curl** command sends a
`POST` request to the
`/era/v1/metrics/{timeRange}` endpoint. This example uses
the `week` time range.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/metrics/week' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H 'Authorization: Bearer [token]' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e14156FAD0EEB-57EF-441A-9E58-614F985F6270) | Send a `POST` request to the `/era/v1/metrics/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `week`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e14216FAD0EEB-57EF-441A-9E58-614F985F6270) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e14236FAD0EEB-57EF-441A-9E58-614F985F6270) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e14266FAD0EEB-57EF-441A-9E58-614F985F6270) | Include details about the requested aggregated sales reporting data in the message body. The [following example](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#apiAnalyticsMetricsReportingDataCreateRequestSpecificRangeExampleMessageBody) is the message body for this **curl** command example. |

##### Message body for the specific time range aggregated sales reporting data request

The following example shows the message body for creating an
aggregated sales reporting data request for a specific time range.
This example is for the `week` time range.

```
{
  "startBusinessDate": "20230205",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "endBusinessDate": "20230207",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "restaurantIds": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "b6bae410-1316-4d3b-b01f-47a758811db2",
    "43211888-2860-46c7-a8c8-32ba462e1280"
  ],
  "excludedRestaurantIds": [],![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "groupBy": []![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e15026FAD0EEB-57EF-441A-9E58-614F985F6270) | The start date of the time range for the aggregated sales reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e15036FAD0EEB-57EF-441A-9E58-614F985F6270) | The end date of the time range for the aggregated sales reporting data, in `YYYYMMDD` format. The number of days in the time range must be seven or fewer because the request is for a `week` time range. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e15056FAD0EEB-57EF-441A-9E58-614F985F6270) | The list of restaurant GUIDs from the management group to include in the aggregated sales reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e15076FAD0EEB-57EF-441A-9E58-614F985F6270) | The list of restaurant GUIDs from the management group to exclude from the aggregated sales reporting data. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e15096FAD0EEB-57EF-441A-9E58-614F985F6270) | This request for aggregated sales reporting data is not grouped by dining option, order source, or revenue center. |

##### Response to the request for specific time range aggregated sales reporting data

The following example shows the response from the
`/era/v1/metrics/{timeRange}` endpoint.

```
"d3d1ebdb-5e46-46ea-9491-f091466c5f22"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html#co-d1e15686FAD0EEB-57EF-441A-9E58-614F985F6270) | The GUID for the aggregated sales reporting data, or the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For the example about how to retrieve the aggregated sales
reporting data for this request, see [Retrieving the aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html).


---

# Aggregated sales reporting data overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataOverview.html

### Aggregated sales reporting data overview

Aggregated sales reporting data includes a high-level view of
active restaurant metrics based on orders, including sales and labor
information. For more information on what is included in the aggregated
sales reporting data, see [Understanding aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataUnderstandingData.html). For
more information about inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

Retrieving the aggregated sales reporting data is a two-step
process. You must:

1. Send a `POST` request to the
   `/era/v1/metrics` or
   `/era/v1/metrics/{timeRange}` endpoint to create a
   request for aggregated sales reporting data for the restaurants in
   a management group and receive the `reportRequestGuid`,
   the unique request identifier. These endpoints are for either a
   custom time range (`/era/v1/metrics`) or a specific
   time range (`/era/v1/metrics/{timeRange}`). For more
   information, see [Creating a request for aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html).
2. Send a `GET` request to the
   `/era/v1/metrics/{reportRequestGuid}` endpoint to
   retrieve the aggregated sales reporting data. For more
   information, see [Retrieving the aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html).

|  |
| --- |
| Note |
| The `reportRequestGuid` expires seven days after you create it. Using an expired or invalid `reportRequestGuid` results in a 404 error. The `message` of the response body contains additional information about the cause of the error. |


---

# Retrieving the aggregated sales reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html

### Retrieving the aggregated sales reporting data

Send a `GET` request to the
`/era/v1/metrics/{reportRequestGuid}` endpoint to retrieve
aggregated sales reporting data. The rate limit for this endpoint and
method type is five requests per second and 30 requests per minute. For
more information about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

Optionally, you can choose to include a
`fetchRestaurantNames` query parameter. The
`fetchRestaurantNames` query parameter set to
`true` adds the restaurant name to the aggregated sales
reporting data. If set to `false`, it does not add the
restaurant name, which acts the same as not including the
`fetchRestaurantName` query parameter.

#### Request to retrieve aggregated sales reporting data

The following example **curl** command sends a
`GET` request to
`/era/v1/metrics/{reportRequestGuid}` endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/metrics/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
fb23cfaa-56d7-4cb9-829d-531a8d02274a/' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html#co-d1e16496FAD0EEB-57EF-441A-9E58-614F985F6270) | Send a `GET` request to the `/era/v1/metrics` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html#co-d1e16516FAD0EEB-57EF-441A-9E58-614F985F6270) | Include the GUID for the aggregated sales reporting data request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html#co-d1e16556FAD0EEB-57EF-441A-9E58-614F985F6270) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

#### Response to the retrieval request for aggregated sales reporting data

The following example shows the response from the
`/era/v1/metrics/{reportRequestGuid}` endpoint.

```
[
    {
        "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
        "businessDate": "20220824",
        "guestCount": 64,
        "voidOrdersCount": 0,
        "discountOrderCount": 12,
        "ordersCount": 64,
        "openOrdersCount": 0,
        "closedOrdersCount": 64,
        "netSalesAmount": 975.75,
        "grossSalesAmount": 1162.5,
        "discountAmount": 186.75,
        "voidOrdersAmount": 0.0,
        "refundAmount": 0.0,
        "avgOrderValue": 15.25,
        "revenueCenter": "Dining Room"
    },
    {
        "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
        "businessDate": "20220825",
        "guestCount": 39,
        "voidOrdersCount": 2,
        "discountOrderCount": 12,
        "ordersCount": 39,
        "openOrdersCount": 0,
        "closedOrdersCount": 39,
        "netSalesAmount": 507.25,
        "grossSalesAmount": 695.5,
        "discountAmount": 188.25,
        "voidOrdersAmount": 16.0,
        "refundAmount": 0.0,
        "avgOrderValue": 13.01,
        "revenueCenter": "Dining Room"
    },
    [content omitted]
    {
        "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
        "businessDate": "20220824",
        "guestCount": 974,
        "voidOrdersCount": 9,
        "discountOrderCount": 15,
        "ordersCount": 974,
        "openOrdersCount": 0,
        "closedOrdersCount": 974,
        "netSalesAmount": 14939.25,
        "grossSalesAmount": 15063.25,
        "discountAmount": 124.0,
        "voidOrdersAmount": 93.5,
        "refundAmount": 0.0,
        "avgOrderValue": 15.34,
        "revenueCenter": "No Revenue Center"
    },
    {
        "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
        "businessDate": "20220825",
        "guestCount": 945,
        "voidOrdersCount": 2,
        "discountOrderCount": 8,
        "ordersCount": 945,
        "openOrdersCount": 0,
        "closedOrdersCount": 945,
        "netSalesAmount": 14499.1,
        "grossSalesAmount": 14573.1,
        "discountAmount": 74.0,
        "voidOrdersAmount": 23.75,
        "refundAmount": 0.0,
        "avgOrderValue": 15.34,
        "revenueCenter": "No Revenue Center"
    },
    [content omitted]
]
```

For more information about the values in the response, see
[Understanding aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataUnderstandingData.html).


---

# Understanding aggregated sales reporting data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataUnderstandingData.html

### Understanding aggregated sales reporting data

Aggregated sales reporting data contains a constant set of values.
These values appear for each active restaurant, and are grouped into
sections either by day or hour, depending on how you choose to aggregate
the data. Optionally, you can create subsections of the data by grouping
by dining option, order source, revenue center, or a combination of two
of these values. For more information, see [Aggregating the aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html). You can also
choose to include the restaurant name in the aggregated sales reporting
data. For more information, see [Retrieving the aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataRetrieveData.html). For more
information about inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

The restaurants included in the aggregated sales reporting data
can be limited by adding the GUIDs of restaurants to either include only
or exclude only. For more information about choosing specific
restaurants, see [Creating a request for aggregated sales reporting data](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataCreateRequest.html).

The following table specifies the returned set of values in the
aggregated sales reporting data. The values are listed in the order that
they appear.

| Value name | Definition |
| --- | --- |
| `restaurantGuid` | The unique identifier assigned to the restaurant by the Toast platform. |
| `businessDate` | The calendar date of the associated order data, in `YYYYMMDD` format. |
| `guestCount` | The total number of guests recorded across all orders. |
| `voidOrdersCount` | The total number of orders with at least one voided item. |
| `discountOrderCount` | The total number of orders that used a discount. |
| `ordersCount` | The total number of orders, excluding voided orders. |
| `openOrdersCount` | The total number of open orders. |
| `closedOrdersCount` | The total number of closed orders. |
| `netSalesAmount` | The total sales, excluding tax, gratuity, tips, discounts, and deferred amounts. |
| `grossSalesAmount` | The total sales, including applied discounts and refunds. |
| `discountAmount` | The total amount of discounts for orders. |
| `voidOrdersAmount` | The total amount of voided orders. |
| `refundAmount` | The total amount of refunded sales. |
| `avgOrderValue` | The average amount for an order. |
| `revenueCenter` | The revenue center for the order data. This appears when the `POST` request message body includes `groupBy` with `REVENUE_CENTER`. For more information, see [Using the `groupBy` value](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataGroupBy). |
| `diningOption` | The dining option for the order data. This appears when the `POST` request message body includes `groupBy` with `DINING_OPTION`. For more information, see [Using the `groupBy` value](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataGroupBy). |
| `orderSource` | The method used to place an order, also known as the order source. This appears when the `POST` request message body includes `groupBy` with `ORDER_SOURCE`. For more information, see [Using the `groupBy` value](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataGroupBy). |
| `businessHour` | The hour the data represents. This appears when the `aggregateBy` query parameter is set to `HOUR` in the `/era/v1/metrics/day` request. For more information, see [Using the `aggregateBy` query parameter](https://doc.toasttab.com/doc/devguide/apiAnalyticsMetricsReportingDataAggregation.html#apiAnalyticsMetricsReportingDataAggregateBy). |
| `hourlyJobTotalHours` | The total hours worked by employees with hourly jobs. This does not include breaks. |
| `hourlyJobTotalPay` | The total wages earned by employees with hourly jobs, including overtime pay. This does not include tips. |
| `hourlyJobSalesPerLaborHour` | The average net sales per each hour worked by employees with hourly jobs. |
| `restaurantName` | The restaurantâs name. This is included when you set the `fetchRestaurantNames` parameter to `true` in the `GET` request. |


---

# Payout reporting data by payments - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html

### Payout reporting data by payments

Retrieving the payout reporting data by payment is a two-step
process. You must:

1. Send a `POST` request to the
   `/era/v1/payout/payments/day` endpoint to create a
   request for payout reporting data organized by payment for the
   restaurants in a management group. The response is the
   `reportRequestGuid`, the unique request
   identifier.

   |  |
   | --- |
   | Note |
   | The analytics API currently only supports retrieving payout by payments reporting data for the `day` time range. |

   For more information, see [Creating a request for payout reporting data by
   payments](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#apiAnalyticsPayoutByPaymentsReportingDataCreateRequest).
2. Send a `GET` request to the
   `/era/v1/payout/payments/{requestReportGuid}` endpoint to
   retrieve the payout reporting data organized by payments. For more
   information, see [Retrieving the payout reporting data by payments](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#apiAnalyticsPayoutByPaymentsReportingDataRetrieveData).

#### Creating a request for payout reporting data by payments

Send a `POST` request to the
`/era/v1/payout/payments/{timeRange}` endpoint to request
payout reporting data organized by payments for a single day. The rate
limit for this endpoint and method type is five requests per minute
and 60 requests per day. For more information about API rate limits
for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

You can limit the reporting data to inactive restaurants only
using the `onlyInactiveRestaurants` query parameter. For
more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

To create a request for payout reporting data organized by
payments, include the following:

* The `startDate` value in the message body, in
  `YYYYMMDD` format. This identifies the start date for
  the range of included payments. This value must match the
  `endDate` value.
* The `endDate` value in the message body, in
  `YYYYMMDD` format. This identifies the end date for
  the range of payment sales dates. This value must match the
  `startDate` value.
* The `restaurantIds` value in the message body.
  This identifies the only restaurants to include in the returned
  data using the restaurant GUID. All restaurants not listed are
  excluded from the returned data. Leave the
  `restaurantIds` value and the
  `excludedRestaurantIds` value empty to include all
  restaurants.
* The `excludedRestaurantIds` value in the
  message body. This identifies the only restaurants to exclude in
  the returned data using the restaurant GUID. All restaurants not
  listed are included in the returned data. Leave the
  `excludedRestaurantIds` value and the
  `restaurantIds` value empty to include all
  restaurants.

|  |
| --- |
| Important |
| You can include restaurant GUIDs for either `restaurantIds` or `excludedRestaurantIds` but not for both. Listing restaurant GUIDs for both results in a 400 error or blank payout reporting data. They are contradictory values that cannot be used together. |

##### Request for payout reporting data by payments

The following example **curl** command sends a
`POST` request to the
`/era/v1/payout/payments/day` endpoint.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/payout/payments/day' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H 'Authorization: Bearer [token]' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7575E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Send a `POST` request to the `/era/v1/payout/payments/day` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7577E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7579E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7581E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include details about the requested payout reporting data organized by payments in the message body. The following example is the message body for this **curl** command example. |

##### Message body for payout reporting data by payments

The following example shows the message body for creating a
payout reporting data by payments request.

```
{
    "startDate": "20240710",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "endDate": "20240710",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "restaurantIds": ["95a96d7b-dbf5-46d3-98c5-c65c8ad18021"],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "excludedRestaurantIds": []![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7623E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The start date of the time range for the payout reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7625E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The end date of the time range for the payout reporting data, in `YYYYMMDD` format. This is the same value as the start date. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7627E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The list of restaurant GUIDs from the management group to include in the payout reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7629E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The list of restaurant GUIDs from the management group to exclude from the payout reporting data by settled date. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |

##### Response to request for payout reporting data by payments

The following example shows the response from the
`/era/v1/payout/payments/day` endpoint.

```
"62bd5cf3-26c5-4fa8-8f51-15b3dd4d2e09"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7670E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The GUID for the payout reporting data by payments request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example that shows how to retrieve the payout reporting
data by payments, see [Retrieving the payout reporting data by payments](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#apiAnalyticsPayoutByPaymentsReportingDataRetrieveData).

#### Retrieving the payout reporting data by payments

Send a `GET` request to the
`/era/v1/payout/payments/{reportRequestGuid}` endpoint to
retrieve payout reporting data organized by payments. The rate limit
for this endpoint and method type is five requests per second and 30
requests per minute. For more information about API rate limits for
the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

##### Request to retrieve payout reporting data by payments

The following example **curl** command sends a
`GET` request to the
`/era/v1/payout/payments/{reportRequestGuid}`
endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/payout/payments/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
bc5279b0-a46d-4707-94e6-614edd31f2b3' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7731E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Send a `GET` request to the `/era/v1/payout/payments` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7733E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include the GUID for the payout reporting data organized by payments request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html#co-d1e7735E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

##### Response to retrieval request for payout reporting data by payments

The following example shows the response from the
`/era/v1/payout/payments/{reportRequestGuid}`
endpoint.

```
[
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "orderGuid": "e9b858ca-0694-4948-b97b-f80e0d2e72a1",
        "checkGuid": "05c8b87f-abb7-4c30-9b74-b936ee02162d",
        "paymentGuid": "36fdb0b7-5b66-49e3-b360-e0c10a497612",
        "settledDate": 20240702,
        "orderOpenDateTime": null,
        "paidDateTime": "2024-07-01 08:14:06",
        "paymentCardBrand": "Visa",
        "paymentCardType": "Credit",
        "tipAmount": 0.0,
        "gratuityAmount": 0.0,
        "paymentSubtotal": 1.39,
        "paymentTotal": 1.39
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "orderGuid": "7f0d83dc-04cc-4c0f-98ab-fb3fe34dae77",
        "checkGuid": "01f7500c-add4-42f6-96c0-ad6f2c9832cf",
        "paymentGuid": "01f7500c-add4-42f6-96c0-ad6f2c9832cf",
        "settledDate": 20240702,
        "orderOpenDateTime": null,
        "paidDateTime": "2024-07-01 22:57:44",
        "paymentCardBrand": "AMEX",
        "paymentCardType": "Credit",
        "tipAmount": 0.01,
        "gratuityAmount": 0.0,
        "paymentSubtotal": 1.39,
        "paymentTotal": 1.4
    },
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "orderGuid": "7ddda484-72e6-4c6b-bdf2-10ab4f4bf66c",
        "checkGuid": "415fc617-9a52-43a2-b9d0-938f0d4ae2c7",
        "paymentGuid": "eb2f462a-d442-4707-94a3-38b2d93146e1",
        "settledDate": 20240702,
        "orderOpenDateTime": null,
        "paidDateTime": "2024-07-01 21:45:41",
        "paymentCardBrand": "Discover",
        "paymentCardType": "Credit",
        "tipAmount": 0.01,
        "gratuityAmount": 0.0,
        "paymentSubtotal": 1.39,
        "paymentTotal": 1.4
    }
]
```

#### Understanding the payout reporting data by payments

Payout reporting data by payment contains objects that
correspond to each available restaurant and payment combination. You
can also choose to retrieve data for currently inactive restaurants.
For more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

The restaurants included in the payout reporting data organized
by payments can be limited using either the `restaurantIds`
or `excludedRestaurantIds` value in the message body. You
can include restaurant GUIDs for only one of these values. Any
restaurants listed with the `restaurantIds` value are
included in the payout reporting data, with any restaurants not listed
excluded. Any restaurants listed with the
`excludedRestaurantIds` value are excluded from the payout
reporting data, with any restaurants not listed included. When both
are left blank, all restaurants are included automatically.

The following table specifies the returned set of values in the
payout reporting data organized by payments. The values are listed in
the order they appear in the response.

| Value name | Definition |
| --- | --- |
| `restaurantGuid` | The unique identifier assigned to the restaurant by the Toast platform. |
| `restaurantName` | The restaurantâs name. |
| `restaurantLocationName` | The restaurantâs location name. |
| `restaurantLocationCode` | The restaurantâs location code. |
| `orderGuid` | The identifier assigned by the Toast platform used to identify an order. This is the order associated with the payment. |
| `checkGuid` | The identifier assigned by the Toast platform used to identify a check. This is the check associated with the payment. |
| `paymentGuid` | The identifier assigned by the Toast platform used to identify the payment. |
| `settledDate` | The date when the payouts associated with the payment were either processed or settled. |
| `orderOpenDateTime` | The date and time when the order associated with the payment was opened. |
| `paidDateTime` | The date and time when the order associated with the payment was paid. |
| `paymentCardBrand` | The brand or card provider of the card used to complete the payment. |
| `paymentCardType` | The payment type used by the card completing the payment. The type can be one of the following values:  * `Credit`: A credit card was used to   complete the payment. * `Debit`: A debit card was used to   complete the payment. * `UNSPECIFIED CARD`: The card type is   neither credit or debit, or cannot be   identified. |
| `tipAmount` | The tip amount added to the payment. |
| `gratuityAmount` | The gratuity amount added to the payment. |
| `paymentSubtotal` | The total payment amount before tip and gratuity. |
| `paymentTotal` | The total payment amount, including tip, and gratuity. |


---

# Payout reporting data by sales date - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html

### Payout reporting data by sales date

Retrieving the payout reporting data by sales date is a two-step
process. You must:

1. Send a `POST` request to the
   `/era/v1/payout/sales-date/{timeRange}` endpoint to
   create a request for payout reporting data organized by sales date
   for the restaurants in a management group. The response is the
   `reportRequestGuid`, the unique request identifier. The
   analytics API supports retrieving payout reporting data for the day,
   week, and month time ranges. For more information, see [Creating a request for payout reporting data by sales
   date](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#apiAnalyticsPayoutBySalesDateReportingDataCreateRequest).
2. Send a `GET` request to the
   `/era/v1/payout/sales-date/{requestReportGuid}` endpoint
   to retrieve the payout reporting data organized by sales date. For
   more information, see [Retrieving the payout reporting data by sales date](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#apiAnalyticsPayoutBySalesDateReportingDataRetrieveData).

#### Creating a request for payout reporting data by sales date

Send a `POST` request to the
`/era/v1/payout/sales-date/{timeRange}` endpoint to request
payout reporting data organized by sales date for that specific time
range. The `timeRange` can be `day`,
`week`, or `month`. The type of time range you
use determines the rate limit for this endpoint and method type. The
rate limit for `month` time ranges is 10 requests per hour.
The rate limit for `day` and `week` time ranges
is 10 requests per minute and 60 requests per hour. For more
information about API rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

You can limit the reporting data to inactive restaurants only
using the `onlyInactiveRestaurants` query parameter. For
more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

To create a request for payout reporting data organized by sales
date, include the following:

* The `startDate` value in the message body, in
  `YYYYMMDD` format. This identifies the start date for
  the range of payment sales dates. This value must match the
  `endDate` value if using the `day` time
  range.
* The `endDate` value in the message body, in
  `YYYYMMDD` format. This identifies the end date for the
  range of payment sales dates. This value must match the
  `startDate` value if using the `day` time
  range.
* The `restaurantIds` value in the message body.
  This identifies the only restaurants to include in the returned
  data using the restaurant GUID. All restaurants not listed are
  excluded from the returned data. Leave the
  `restaurantIds` value and the
  `excludedRestaurantIds` value empty to include all
  restaurants.
* The `excludedRestaurantIds` value in the message
  body. This identifies the only restaurants to exclude in the
  returned data using the restaurant GUID. All restaurants not
  listed are included in the returned data. Leave the
  `excludedRestaurantIds` value and the
  `restaurantIds` value empty to include all
  restaurants.

|  |
| --- |
| Important |
| You can include restaurant GUIDs for either `restaurantIds` or `excludedRestaurantIds` but not for both. Listing restaurant GUIDs for both results in a 400 error or blank payout reporting data. They are contradictory values that cannot be used together. |

##### Request for payout reporting data by sales date

The following example **curl** command sends a
`POST` request to the
`/era/v1/payout/sales-date/{timeRange}` endpoint. This
example uses the `day` time range.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/payout/sales-date/day' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H 'Authorization: Bearer [token]' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8170E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Send a `POST` request to the `/era/v1/payout/sales-date/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `day`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8172E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8174E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8176E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include details about the requested payout reporting data organized by sales date in the message body. The following example is the message body for this **curl** command example. |

##### Message body for payout reporting data by sales date

The following example shows the message body for creating a
payout reporting data by sales date request.

```
{
    "startDate": "20240710",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "endDate": "20240710",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "restaurantIds": ["95a96d7b-dbf5-46d3-98c5-c65c8ad18021"],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "excludedRestaurantIds": []![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8218E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The start date of the time range for the payout reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8220E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The end date of the time range for the payout reporting data, in `YYYYMMDD` format. This is the same value as the start date for the `day` time range. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8222E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The list of restaurant GUIDs from the management group to include in the payout reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8224E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The list of restaurant GUIDs from the management group to exclude from the payout reporting data organized by sales date. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |

##### Response to request for payout reporting data by sales date

The following example shows the response from the
`/era/v1/payout/sales-date/day` endpoint.

```
"bc5279b0-a46d-4707-94e6-614edd31f2b3"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8268E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The GUID for the payout reporting data organized by sales date request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example that shows how to retrieve the payout reporting
data by sales date, see [Retrieving the payout reporting data by sales date](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#apiAnalyticsPayoutBySalesDateReportingDataRetrieveData).

#### Retrieving the payout reporting data by sales date

Send a `GET` request to the
`/era/v1/payout/sales-date/{reportRequestGuid}` endpoint to
retrieve payout reporting data organized by sales date. The rate limit
for this endpoint and method type is five requests per second and 30
requests per minute. For more information about API rate limits for
the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

##### Request to retrieve payout reporting data by sales date

The following example **curl** command sends a
`GET` request to the
`/era/v1/payout/sales-date/{reportRequestGuid}`
endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/payout/sales-date/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
bc5279b0-a46d-4707-94e6-614edd31f2b3' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8329E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Send a `GET` request to the `/era/v1/payout/sales-date` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8331E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include the GUID for the payout reporting data organized by sales date request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html#co-d1e8333E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

##### Response to retrieval request for payout reporting data by sales date

The following example shows the response from the
`/era/v1/payout/sales-date/{reportRequestGuid}`
endpoint.

```
[
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "salesDate": "20240723",
        "settledDates": [
            "20240724"
        ],
        "transactionCount": 9,
        "paymentAmount": 12.58,
        "refundAmount": 9.79,
        "totalFeeAmount": 1.35,
        "withholdingAmount": 0.0,
        "payoutAmount": 1.44
    }
]
```

#### Understanding the payout reporting data by sales date

Payout reporting data by sales date contains objects that
correspond to each available restaurant and sales date combination.
You can also choose to retrieve data for currently inactive
restaurants. For more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

The restaurants included in the payout reporting data organized
by sales date can be limited using either the
`restaurantIds` or `excludedRestaurantIds` value
in the message body. You can include restaurant GUIDs for only one of
these values. Any restaurants listed with the
`restaurantIds` value are included in the payout reporting
data, with any restaurants not listed excluded. Any restaurants listed
with the `excludedRestaurantIds` value are excluded from
the payout reporting data, with any restaurants not listed included.
When both are left blank, all restaurants are included
automatically.

The following table specifies the returned set of values in the
payout reporting data organized by sales date. The values are listed
in the order they appear.

| Value name | Definition |
| --- | --- |
| `restaurantGuid` | The unique identifier assigned to the restaurant by the Toast platform. |
| `restaurantName` | The restaurantâs name. |
| `restaurantLocationName` | The restaurantâs location name. |
| `restaurantLocationCode` | The restaurantâs location code. |
| `salesDate` | The date when the payment was completed. |
| `settledDate` | The date when the payouts associated with the payment were either processed or settled. |
| `transactionCount` | The number of transactions made on the sales date. |
| `paymentAmount` | The amount paid to the restaurant by guests using cards on the sales date. |
| `refundAmount` | The amount refunded to guests by the restaurant for payments made on the sales date. |
| `totalFeeAmount` | The amount paid or owed by the restaurant in fees associated with payments made on the sales date. An example is the processing fees charged by card providers on payments. |
| `withholdingAmount` | The amount owed to Toast by the restaurant for products and services. For example, this includes Toast Capital, Fundraising, and Instant Deposit. |
| `payoutAmount` | The amount to be deposited into the restaurantâs account associated with the sales date. This amount is calculated by subtracting the `refundAmount`, `totalFeeAmount`, and `withholdingAmount` from the `paymentAmount`. |


---

# Payout reporting data by settled date - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html

### Payout reporting data by settled date

Retrieving the payout reporting data by settled date is a two-step
process. You must:

1. Send a `POST` request to the
   `/era/v1/payout/{timeRange}` endpoint to create a
   request for payout reporting data organized by settled date for
   the restaurants in a management group. The response is the
   `reportRequestGuid`, the unique request identifier. The
   analytics API supports retrieving payout reporting data for the
   day, week, and month time ranges. For more information, see [Creating a request for payout reporting data by settled
   date](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#apiAnalyticsPayoutBySettledDateReportingDataCreateRequest).
2. Send a `GET` request to the
   `/era/v1/payout/{requestReportGuid}` endpoint to
   retrieve the payout reporting data organized by settled date. For
   more information, see [Retrieving the payout reporting data by settled date](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#apiAnalyticsPayoutBySettledDateReportingDataRetrieveData).

#### Creating a request for payout reporting data by settled date

Send a `POST` request to the
`/era/v1/payout/{timeRange}` endpoint to request payout
reporting data organized by settled date for that specific time range.
The `timeRange` can be `day`, `week`,
or `month`. The type of time range you use determines the
rate limit for this endpoint and method type. The rate limit for
`month` time ranges is 10 requests per hour. The rate limit
for `day` and `week` time ranges is 10 requests
per minute and 60 requests per hour. For more information about API
rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

You can limit the reporting data to inactive restaurants only
using the `onlyInactiveRestaurants` query parameter. For
more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

To create a request for payout reporting data organized by
settled date, include the following:

* The `startDate` value in the message body, in
  `YYYYMMDD` format. This identifies the start date for
  the range of payout settled dates. This value must match the
  `endDate` value if using the `day` time
  range.
* The `endDate` value in the message body, in
  `YYYYMMDD` format. This identifies the end date for the
  range of payout settled dates. This value must match the
  `startDate` value if using the `day` time
  range.
* The `restaurantIds` value in the message body.
  This identifies the only restaurants to include in the returned
  data using the restaurant GUID. All restaurants not listed are
  excluded from the returned data. Leave the
  `restaurantIds` value and the
  `excludedRestaurantIds` value empty to include all
  restaurants.
* The `excludedRestaurantIds` value in the message
  body. This identifies the only restaurants to exclude in the
  returned data using the restaurant GUID. All restaurants not
  listed are included in the returned data. Leave the
  `excludedRestaurantIds` value and the
  `restaurantIds` value empty to include all
  restaurants.

|  |
| --- |
| Important |
| You can include restaurant GUIDs for either `restaurantIds` or `excludedRestaurantIds` but not for both. Listing restaurant GUIDs for both results in a 400 error or blank payout reporting data. They are contradictory values that cannot be used together. |

##### Request for payout reporting data by settled date

The following example **curl** command sends a
`POST` request to the
`/era/v1/payout/{timeRange}` endpoint. This example uses
the `day` time range.

```
curl -i -X POST \ 'https://[toast-api-hostname]/era/v1/payout/day' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  -H 'Authorization: Bearer [token]' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Content-Type: application/json' \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  -d @[request-info].json \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e6955E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Send a `POST` request to the `/era/v1/payout/{timeRange}` endpoint of the analytics API. The `{timeRange}` in this example is `day`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e6957E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e6959E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Set the data type of the message body to `application/json`. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e6961E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include details about the requested payout reporting data, organized by settled date, in the message body. The following example is the message body for this **curl** command example. |

##### Message body for payout reporting data by settled date

The following example shows the message body for creating a
payout reporting data by settled date request.

```
{
    "startDate": "20240710",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "endDate": "20240710",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "restaurantIds": ["95a96d7b-dbf5-46d3-98c5-c65c8ad18021"],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "excludedRestaurantIds": []![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e7003E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The start date of the time range for the payout reporting data, in `YYYYMMDD` format. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e7005E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The end date of the time range for the payout reporting data, in `YYYYMMDD` format. This is the same value as the start date for the `day` time range. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e7007E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The list of restaurant GUIDs from the management group to include in the payout reporting data. Restaurant GUIDs not listed are excluded. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e7009E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The list of restaurant GUIDs from the management group to exclude from the payout reporting data by settled date. In this example, restaurants are included with the `restaurantIds` value, so all other restaurants are excluded automatically. |

##### Response to request for payout reporting data by settled date

The following example shows the response from the
`/era/v1/payout/day` endpoint.

```
"bc5279b0-a46d-4707-94e6-614edd31f2b3"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e7053E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | The GUID for the payout reporting data by settled date request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |

For an example that shows how to retrieve the payout reporting
data by settled date, see [Retrieving the payout reporting data by settled date](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#apiAnalyticsPayoutBySettledDateReportingDataRetrieveData).

#### Retrieving the payout reporting data by settled date

Send a `GET` request to the
`/era/v1/payout/{reportRequestGuid}` endpoint to retrieve
payout reporting data organized by settled date. The rate limit for
this endpoint and method type is five requests per second and 30
requests per minute. For more information about API rate limits for
the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

##### Request to retrieve payout reporting data by settled date

The following example **curl** command sends a
`GET` request to the
`/era/v1/payout/{reportRequestGuid}` endpoint.

```
curl -X GET \ 'https://[toast-api-hostname]/era/v1/payout/![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
bc5279b0-a46d-4707-94e6-614edd31f2b3' \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  -H 'Authorization: Bearer [token]'![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e7114E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Send a `GET` request to the `/era/v1/payout` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e7116E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include the GUID for the payout reporting data organized by settled date request, also called the `reportRequestGuid`. For more information about how to retrieve data using the analytics API, see [Understanding the analytics API process](https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html#co-d1e7118E4B1B8E9-CCDA-450F-BFEC-913D3B74A9DC) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

##### Response to retrieval request for payout reporting data by settled date

The following example shows the response from the
`/era/v1/payout/{reportRequestGuid}` endpoint.

```
[
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",
        "restaurantName": "Grove Place Cafe",
        "restaurantLocationName": null,
        "restaurantLocationCode": "",
        "settledDate": "20240710",
        "salesPeriodStartDateTime": "2024-07-09 12:53:55",
        "salesPeriodEndDateTime": "2024-07-09 22:47:59",
        "transactionCount": 19,
        "paymentAmount": 26.54,
        "refundAmount": 23.74,
        "totalFeeAmount": 2.85,
        "withholdingAmount": 0.0,
        "payoutAmount": -0.05,
        "payoutStatus": "CAPTURED"
    }
]
```

#### Understanding the payout reporting data by settled date

Payout reporting data by settled date contains objects that
correspond to each available restaurant and settled payout date
combination. You can also choose to retrieve data for currently
inactive restaurants. For more information, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html).

The restaurants included in the payout reporting data organized
by settled date can be limited using either the
`restaurantIds` or `excludedRestaurantIds` value
in the message body. You can include restaurant GUIDs for only one of
these values. Any restaurants listed with the
`restaurantIds` value are included in the payout reporting
data, with any restaurants not listed excluded. Any restaurants listed
with the `excludedRestaurantIds` value are excluded from
the payout reporting data, with any restaurants not listed included.
When both are left blank, all restaurants are included
automatically.

The following table specifies the returned set of values in the
payout reporting data organized by settled date. The values are listed
in the order they appear in the response.

| Value name | Definition |
| --- | --- |
| `restaurantGuid` | The unique identifier assigned to the restaurant by the Toast platform. |
| `restaurantName` | The restaurantâs name. |
| `restaurantLocationName` | The restaurantâs location name. |
| `restaurantLocationCode` | The restaurantâs location code. |
| `settledDate` | The date when the payout was either processed or settled. |
| `salesPeriodStartDateTime` | The date and time of the first payment included in the payout amount. |
| `salesPeriodEndDateTime` | The date and time of the last payment included in the payout amount. |
| `transactionCount` | The number of transactions included in the payout. |
| `paymentAmount` | The amount paid to the restaurant by guests using cards that contributes towards the payout amount. |
| `refundAmount` | The amount refunded to guests by the restaurant that contributes towards the payout amount. |
| `totalFeeAmount` | The amount paid or owed by the restaurant in fees that contributes towards the payout amount. An example is the processing fees charged by card providers on payments. |
| `withholdingAmount` | The amount owed to Toast by the restaurant for products and services. For example, this includes Toast Capital, Fundraising, and Instant Deposit. |
| `payoutAmount` | The amount to be deposited into the restaurantâs account. This amount is calculated by subtracting the `refundAmount`, `totalFeeAmount`, and `withholdingAmount` amounts from the `paymentAmount`. |
| `payoutStatus` | The status of the payout. The status can be:  * `CAPTURED`: Toast collected the guest   card payments included in the   `payoutAmount` successfully. * `SENT`: Toast sent the   `payoutAmount` to the bank. It may take   some time to appear in the account. * `NONE`: The payout failed, or the   payout was made prior to January 10, 2024 and is   unavailable. |


---

# Payout reporting data overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutReportingDataOverview.html

### Payout reporting data overview

Payout reporting data includes a detailed look at the deposits
from credit card payments. Three endpoints can be used to analyze the
payout data:

* The `/era/v1/payout` endpoint to analyze payout
  data by the date the payout was made. For more information, see
  [Payout reporting data by settled date](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySettledDateReportingData.html).
* The `/era/v1/payout/payments` endpoint to analyze
  payout data by each payment. For more information, see [Payout reporting data by payments](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutByPaymentsReportingData.html).
* The `/era/v1/payout/sales-date` endpoint to
  analyze payout data by the date the sale was made. For more
  information, see [Payout reporting data by sales date](https://doc.toasttab.com/doc/devguide/apiAnalyticsPayoutBySalesDateReportingData.html).

|  |
| --- |
| Note |
| For more information about using inactive restaurant data, see [Viewing inactive restaurant data](https://doc.toasttab.com/doc/devguide/apiAnalyticsInactiveRestaurantData.html). |


---

# Analytics API rate limits - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html

### Analytics API rate limits

The rate limit used by an endpoint depends on the endpoint and its
time range. The following table lists the endpoints of the analytics
API, organized by endpoint, method type, and rate limit. Notes are
included when applicable.

|  |
| --- |
| Note |
| As a Toast API, the analytics API adheres to the global rate limits. For more information, see [Rate limiting](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html). |

| Method and endpoint | Rate limits | Notes |
| --- | --- | --- |
| `POST` `/era/v1/metrics` | 10 requests per hour | This endpoint uses a custom time range. |
| `POST` `/era/v1/metrics/{timeRange}` | If `{timeRange`} is:  * `month` or `year`: 10 requests   per hour * `day` or `week`: 10 requests   per minute, 60 requests per hour |  |
| `GET` `/era/v1/metrics/{reportRequestGuid}` | 5 requests per second  30 requests per minute | Â |
| `POST` `/era/v1/check/{timeRange}` | 5 requests per minute  60 requests per day | This endpoint uses `day` as the `{timeRange}`. |
| `GET` `/era/v1/check/{reportRequestGuid}` | 5 requests per second  30 requests per minute |  |
| `POST` `/era/v1/labor/{timeRange}` | If `{timeRange`} is:  * `month`: 10 requests per hour * `day` or `week`: 10 requests   per minute, 60 requests per hour |  |
| `GET` `/era/v1/labor/{reportRequestGuid}` | 5 requests per second  30 requests per minute |  |
| `POST` `/era/v1/menu` | 10 requests per hour | This endpoint uses a custom time range. |
| `POST` `/era/v1/menu/{timeRange}` | If `{timeRange`} is:  * `month` or `year`: 10 requests   per hour * `day` or `week`: 10 requests   per minute, 60 requests per hour |  |
| `GET` `/era/v1/menu/{reportRequestGuid}` | 5 requests per second  30 requests per minute |  |
| `POST` `/era/v1/payout/{timeRange}` | If `{timeRange`} is:  * `month`: 10 requests per hour * `day` or `week`: 10 requests   per minute and 60 requests per hour |  |
| `GET` `/era/v1/payout/{reportRequestGuid}` | 5 requests per second  30 requests per minute |  |
| `POST` `/era/v1/payout/payments/{timeRange}` | 5 requests per minute  60 requests per day | This endpoint uses `day` as the `{timeRange}`. |
| `GET` `/era/v1/payout/payments/{reportRequestGuid}` | 5 requests per second  30 requests per minute |  |
| `POST` `/era/v1/payout/sales-date/{timeRange}` | If `{timeRange`} is:  * `month`: 10 requests per hour * `day` or `week`: 10 requests   per minute and 60 requests per hour |  |
| `GET` `/era/v1/payout/sales-date/{reportRequestGuid}` | 5 requests per second  30 requests per minute |  |
| `POST` `/era/v1/guest/payments/{timeRange}` | 5 requests per second  60 requests per minute | This endpoint uses `day` or `week` as the `{timeRange}`. |
| `GET` `/era/v1/guest/payments/{reportRequestGuid}` | 5 requests per second  30 requests per minute | Â |
| `GET` `/era/v1/restaurant-info` | 5 requests per second  30 requests per minute |  |


---

# Getting a list of restaurants in a management group - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoGetRestaurantList.html

### Getting a list of restaurants in a management group

You can use the `/era/v1/restaurants-information`
endpoint of the analytics API to retrieve a list of the restaurants and
their statuses in the management group associated with your account.
This list includes the `restaurantGuid` and the
`restaurantName`, and the restaurant statuses for
`active`, `testMode`, and
`archived`.

* The `restaurantGuid` is the unique GUID assigned to
  the restaurant by the Toast platform.
* The `restaurantName` is the restaurantâs
  name.
* The `active` value indicates whether the restaurant
  is activated or not. A `true` value indicates the
  restaurant is activated, while a `false` value indicates
  the restaurant is deactivated.
* The `testMode` value indicates whether the
  restaurant is in test mode or not. A `true` value
  indicates the restaurant is in test mode, while a `false`
  value indicates the restaurant is not in test mode.
* The `archived` value indicates whether the
  restaurant is archived or not. A `true` value indicates
  the restaurant is archived, while a `false` value
  indicates the restaurant is not archived. A common reason for
  archiving a restaurant is if the restaurant was created in
  error.

The `restaurantGuid` is the unique GUID assigned to the
restaurant by the Toast platform. The `restaurantName` is the
restaurantâs name.

The rate limit for this endpoint and method type is five requests
per second and 30 requests per minute. For more information about API
rate limits for the analytics API, see [Analytics API rate limits](https://doc.toasttab.com/doc/devguide/apiAnalyticsRateLimiting.html).

#### Request for restaurant information

The following example shows a **curl** command
that sends a `GET` request to the
`/era/v1/restaurants-information` endpoint.

```
curl -X GET 'https://[toast-api-hostname]/era/v1/restaurants-information' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H 'Authorization: Bearer [token]'![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoGetRestaurantList.html#co-d1e17846FAD0EEB-57EF-441A-9E58-614F985F6270) | Send a `GET` request to the `/era/v1/restaurants-information` endpoint of the analytics API. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoGetRestaurantList.html#co-d1e17866FAD0EEB-57EF-441A-9E58-614F985F6270) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

#### Response to the request for restaurant information

The following example shows the response from the
`/era/v1/restaurants-information` endpoint.

```
[
    {
        "restaurantGuid": "95a96d7b-dbf5-46d3-98c5-c65c8ad18021",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
        "restaurantName": "Grove Place Cafe"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "active": true,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
        "testMode": false,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
        "archived": false![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    },
    {
        "restaurantGuid": "b6bae410-1316-4d3b-b01f-47a758811db2",
        "restaurantName": "Summer Street Cafe"
        "active": true,
        "testMode": false,
        "archived": false
    },
    {
        "restaurantGuid": "b6108638-ed33-4a26-b78d-37a9ae68f71f",
        "restaurantName": "Third Street Cafe"
        "active": false,
        "testMode": true,
        "archived": false
    },
    {
        "restaurantGuid": "43211888-2860-46c7-a8c8-32ba462e1280",
        "restaurantName": "West End Cafe"
        "active": true,
        "testMode": false,
        "archived": false
    }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoGetRestaurantList.html#co-d1e1009877E149E8-9F61-41FB-B0A1-9C937BA546FC) | The unique GUID assigned to the restaurant by the Toast platform. |
| [2](https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoGetRestaurantList.html#co-d1e1010077E149E8-9F61-41FB-B0A1-9C937BA546FC) | The restaurantâs name. |
| [3](https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoGetRestaurantList.html#co-d1e1010277E149E8-9F61-41FB-B0A1-9C937BA546FC) | Indicates whether or not the restaurant is activated. For this example, the restaurant is activated. |
| [4](https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoGetRestaurantList.html#co-d1e1010477E149E8-9F61-41FB-B0A1-9C937BA546FC) | Indicates whether or not the restaurant is in test mode. For this example, the restaurant is not in test mode. |
| [5](https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoGetRestaurantList.html#co-d1e1010677E149E8-9F61-41FB-B0A1-9C937BA546FC) | Indicates whether or not the restaurant is archived. For this example, the restaurant is not archived. |


---

# Restaurant information overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsRestaurantInfoOverview.html

### Restaurant information overview

The restaurant information data includes the restaurant GUID,
restaurant name, active status, test mode status, and archive status for
every restaurant in a management group.

Send a `GET` request to the
`/era/v1/restaurants-information` endpoint to retrieve the
`restaurantGUID`, `restaurantName`,
`active`, `testMode`, and `archived`
values for each restaurant in a management group.


---

# Required scope for the analytics API - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsScope.html

### Required scope for the analytics API

All analytics API endpoints require the
`enterprise-metrics:read` scope. This includes creating a
analytics data request, retrieving the analytics data, and retrieving
restaurant information for the management group.


---

# Understanding the analytics API process - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsUnderstandingProcess.html

### Understanding the analytics API process

Retrieving the analytics data involves two steps:

1. Creating a request for the analytics data and receiving a
   request identifier
2. Retrieving the analytics data using the request
   identifier

|  |
| --- |
| Note |
| The `reportRequestGuid` expires seven days after you create it. Using an expired or invalid `reportRequestGuid` results in a 404 error. The `message` of the response body contains additional information about the cause of the error. |

To create a request, you send a `POST`
request to the endpoint corresponding to the type and time range of the
analytics data you want. When creating the request, you specify what to
include in the analytics data and how you want it to be organized in
query parameters and the message body. The analytics API then returns
the `reportRequestGuid`, the unique identifier used to
identify this request.

To retrieve the analytics data, you send a
`GET` request to the endpoint corresponding to
the type and time range of the initial request for analytics data. You
include the `reportRequestGuid` in the request to retrieve
the analytics data you defined when creating the request. The API then
returns the analytics data.


---

# Authentication and restaurant access - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/authentication.html

### Authentication and restaurant access

Toast APIs use the [OAuth 2](https://tools.ietf.org/html/rfc6749)
client-credentials grant type to authenticate access to secure resources.
When you send requests to secure API resources, you include an OAuth 2
bearer authentication token in the Authorization HTTP header field of your
request.

|  |
| --- |
| Note |
| The authentication endpoint and procedure described here replaced an earlier Toast API authentication service. If your integration uses the legacy authentication endpoint, you must implement support for the authentication process described here. For information about the legacy authentication endpoint and process, see [Legacy API authentication (deprecated)](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiLegacyAuthentication). |

#### About authentication tokens

An authentication token is an encoded text string that you can get
from the authentication API (`/authentication`). To request an
authentication token, you send the client identifier and client secret in
the message body of a `POST` request to the
`/authentication/login` endpoint of the authentication API
(`/authentication/v1/authentication/login`).

Authentication tokens are valid for a limited period of time. The
length of time is determined by the Toast API environment that you use.
When it returns the token, the authentication API response specifies how
long an authentication token is valid. After an authentication token
expires, you must get a new token from the authentication API.

#### Getting API credentials

Before you can authenticate, you need API credentials. The way you
get credentials depends on your integration access type. Credentials
include a `clientId` and `clientSecret`. The table
below shows how credentials are issued for each integration type. For more
information, see [Integration types](https://doc.toasttab.com/doc/devguide/apiIntegrationTypes.html).

| Integration Type | Credentials |
| --- | --- |
| Partner integrations | Credentials are created by the Toast integrations team after your application has been reviewed and approved. For more information see, [Integration partnership process](https://doc.toasttab.com/doc/devguide/integrationDevProcess.html). |
| Custom integrations | Credentials are created by the Toast integrations team after you have been approved for custom integration access. For more information see, [Custom integration overview](https://doc.toasttab.com/doc/devguide/apiCustomIntegrationOverview.html). |
| Standard API access | You create your own credentials through Toast Web. For more information, see [Creating standard API access credentials](https://doc.toasttab.com/doc/devguide/devApiAccessCredentials.html#devApiAccessCreatingCredentials). |
| Analytics API access | You create your own credentials through Toast Web. For more information, see [Creating analytics API access credentials](https://doc.toasttab.com/doc/devguide/apiAnalyticsAccessCreatingCredentials.html). |

#### Credential storage guidelines

API credentials provide access to valuable and sensitive information
and must be saved in a secure way. If your API credentials are exposed,
the Toast integrations team deactivates the compromised credentials and
generates new ones.

To decrease the likelihood of exposing your API credentials, follow
these guidelines for your production and sandbox API credentials.

##### Do this

It is best to do the following things:

* Save your API credentials as environment variables. If your
  team needs local access to credential strings, share them using a
  secret management service and store them in local environment
  variables.
* Programmatically retrieve your API credentials at runtime from
  a secret management service. This allows you to rotate credentials
  without the need to update environment variables.
* When possible, visually mask your client secret to decrease
  the likelihood of displaying the secret when you use a
  screen-sharing service or when other people can see your computer
  display.

##### Don't do this

It is best *not* to do the following
things:

* Do not store API credentials in your Toast integration
  code.
* Do not store API credentials in any repositories saved to the
  cloud, whether public or private.
* Do not display your client secret while using a screen-sharing
  service.
* Do not send an unencrypted client secret via email or in a
  messenger application.

##### Indicators of credential compromise

If any of the following things occurs, your API credentials are
considered compromised. Contact Toast support immediately so that you
can receive a new client secret.

* Your client secret is committed to a repository that is not a
  purpose-built secret management service.
* Your client secret is deployed in your code.
* Somebody sends your client secret in plain text via email or
  on a messenger application.
* Your client secret is displayed on a screen-share recording
  that is saved to the cloud.
* You have any other known or suspected security breach.

#### Getting an authentication token

##### Making the request

To get an authentication token, you send a
`POST` request to the
`/authentication/login` endpoint of the Toast authentication
API. The following example shows the URL of the endpoint.

```
https://[toast-api-hostname]/authentication/v1/authentication/login
```

You must include your client identifier and client secret string
in the message body of a `POST` request for an
authentication token. You receive a client identifier string
(*`clientId`*) and client secret string
(*`clientSecret`*) from the Toast support team.
Follow [these guidelines](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthTokenStorage) when storing
your API credentials.

When the authentication API determines that the client identifier
and client secret string are valid, it returns an authentication token
along with a set of data describing the way you can use it. For more
information, see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

You include the following JSON object in the message body
parameter of an `/authentication/login` endpoint
request.

**Message body parameter for an
`/authentication/login` endpoint request**

```
{
  "clientId": "myToastApiClientIdentifier",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "clientSecret": "myToastApiClientSecret",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "userAccessType": "TOAST_MACHINE_CLIENT"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e98A4C8F3C8-8D85-4C49-9326-B0697729B4A3) | The identifier string for your Toast API client. |
| [2](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e103A4C8F3C8-8D85-4C49-9326-B0697729B4A3) | The secret string that corresponds to your Toast API client. |
| [3](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e105A4C8F3C8-8D85-4C49-9326-B0697729B4A3) | Always include the `userAccessType` value and set it to `TOAST_MACHINE_CLIENT`. |

  

The following **curl** command requests an
authentication token from the `/authentication/login` resource.
For more information about the curl utility, see <https://curl.haxx.se/>.

**Authentication request using curl program command**

```
curl -X POST \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Content-Type: application/json" \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
-d @file-containing-message-body-parameter.json \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
https://[toast-api-hostname]/authentication/v1/authentication/login![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e128A4C8F3C8-8D85-4C49-9326-B0697729B4A3) | Use the `POST` HTTP method to make an authentication request. |
| [2](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e130A4C8F3C8-8D85-4C49-9326-B0697729B4A3) | Include the HTTP `Content-Type` header field and set its value to `application/json`. |
| [3](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e132A4C8F3C8-8D85-4C49-9326-B0697729B4A3) | Include a JSON object including your client identifier and client secret in the message body parameter. See [Message body parameter for an `/authentication/login` endpoint request](https://doc.toasttab.com/doc/devguide/authentication.html#apiMessageBodyParamForAuthenticationRequest). |
| [4](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e137A4C8F3C8-8D85-4C49-9326-B0697729B4A3) | Send the request to the `/authentication/login` endpoint of the authentication API. |

##### Authentication return data

The return data that you receive depends on the type of Toast API
client you are using. Toast APIs support partner clients and restaurant
management group clients. For more information about the types of Toast
API clients, see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

###### Authentication return data for a partner API client

The authentication API returns the information shown in the
following example for a successful authentication request using a
partner API client. For more information about partner API accounts,
see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

**Authentication return data for a partner API client**

```
{
  "@class": ".SuccessfulResponse",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "token": {
    "tokenType": "Bearer",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "scope": null,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png) 
    "expiresIn": 19168,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "accessToken": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXJ0bmVyR3![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      V3JkZXJzOnYThkYWE5LWIyMDQtNDhhZi1iZDY2LWZiMzZkNzViYjU1NiIsIm5hbWl
      uZ0F1dGhvcml05NiIGlBFVEVSUEFSVE5FUiIsImF6cCI6InBldGVyLXBhcnRuZXIi
      LCJzY29wZSI6WyJjcm0iLCJsYWJvciIsImNvbmZpZ3VyYXRpb24iLCJjYXNobWdtd
      CIsInBhcnRuZXJzIiwiZ3Vlc3QucGk6cmVhZCIsImRlbGlcml05X2luZm8uYWRkcm
      VzczpyZWFkIiwib3JkZXJzO5NiIGQiLCJvcmRlcnMub3JkZXJzOndyaXRlIiwib3J
      kZXJzIiwiY3JlZGl0X2NhcmRzLmF1dGhvcml6YXRpb2463JkZXJzOnSwiZXhwIjox
      NTg4MTc2NDY2LCJqdGkiOiIyMTk4OWQwNS1jNzg4LTQzNWYtODQyMi0xYjRjZTM5O
      DdlODgiLCJjbGllbnRfaWQiOiJwZXRlci1wYXJ0bmVyIn0.BxROzc5ZyKVgkdsLTF
      LbyPR_dt5NiIG8vtJd3JkZXJzOnOQiJRtfx6sfse1i2ZG6VWIz_jVOvOiR2zaWra0
      yCcml051AVNV3xxn7u4finETPzm43lhf5NiIGYKqUD_HM-Z1B-CCAj-7C6nOGQWI9
      G_PYZRsb7lwmJG3tPW74bDKZhYJVnPO3HMNnd93A8AL4QVOVBO6L6BdqsK3lZ7nzY
      0hALk-LzyD-w_maz-s2kFx7vbWrp0l2X_gSpEi3JkZXJzOn81T-2bBtz4vkObQm27
      iI0Ww8K2ZeRwkSaR8zL2Qo-5NiIGRcml059S1_halz_GuWy4xOctS5WZOuIe5FaA",
    "idToken": null,![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
    "refreshToken": null![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
  },
  "status": "SUCCESS"![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authentication.html#mg_co-d1e276C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | For internal use. |
| [2](https://doc.toasttab.com/doc/devguide/authentication.html#mg_co-d1e278C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | The OAuth 2 authentication scheme used for the authentication token. Toast API authentication uses the bearer authentication scheme. |
| [3](https://doc.toasttab.com/doc/devguide/authentication.html#mg_co-d1e280C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | The `scope` value in your authentication token request response will be null. Your JSON Web Token (JWT) contains your list of scopes. |
| [4](https://doc.toasttab.com/doc/devguide/authentication.html#mg_co-d1e282C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | The number of remaining seconds that the authentication token is valid. For more information, see [Refreshing authentication tokens](https://doc.toasttab.com/doc/devguide/apiAuthTokenRefresh.html). |
| [5](https://doc.toasttab.com/doc/devguide/authentication.html#mg_co-d1e284C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | A JSON Web Token (JWT) string that contains an authentication token. You present this string when you make requests to other Toast API resources. The JWT includes information about your Toast API client. For more information, see [JWT payload contents for partner API client access token](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationJwtContentsPartner). |
| [6](https://doc.toasttab.com/doc/devguide/authentication.html#mg_co-d1e287C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | For internal use. |
| [7](https://doc.toasttab.com/doc/devguide/authentication.html#mg_co-d1e289C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | For internal use. |
| [8](https://doc.toasttab.com/doc/devguide/authentication.html#mg_co-d1e291C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | Indicates that your authentication request was successful. |

  

The following example shows the JWT payload contents for a
partner API client access token.

**JWT payload contents for partner API client access
token**

```
{
  "https://toasttab.com/client_name": "MYNAMINGAUTHORITY",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "https://toasttab.com/access_type": "TOAST_MACHINE_CLIENT",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "https://toasttab.com/partner_guid": "23a8eca9-b403-45bf-cd66-fb36a85be556",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "https://toasttab.com/type": "CUSTOMER",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "iss": "[Toast-token-issuer]",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  "sub": "my-client-id@clients",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
  "aud": "https://toast-services-api/",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
  "iat": 1603107025,![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
  "exp": 1588176466,![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
  "azp": "my-client-id",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
  "scope": "orders:read menus:read",![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
  "gty": "client-credentials"![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3368D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | A human-readable name representing your API client. |
| [2](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3388D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The types of users that can authenticate through the system. For API clients, this is `TOAST_MACHINE_CLIENT`. `TOAST_MACHINE_CLIENT` represents the type of access credentials issued to services that use Toast APIs. |
| [3](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3408D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The unique Toast platform identifier for the integration partner organization. |
| [4](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3428D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The type of client requesting authentication. For partner API clients, this is `PARTNER`. |
| [5](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3458D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The issuer of the authentication token. |
| [6](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3508D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The subject of the token being issued. This value will be set to your client identifier and the string `@clients`. |
| [7](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3528D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The intended audience of your API usage. |
| [8](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3548D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | A standard JWT claim indicating the time that the authentication token was issued. The time is presented in UNIX epoch format. |
| [9](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3568D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | A standard JWT claim indicating the time that the authentication token expires. The time is presented in UNIX epoch format. |
| [10](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3628D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | A standard JWT claim containing the identifier for the Toast API client. |
| [11](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3648D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The API functionality that your client ID is provisioned to use. For more information about API scopes, see [API scopes page](https://doc.toasttab.com/doc/devguide/apiScopes.html). |
| [12](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e3668D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The grant type of this API client. This value will be `client-credentials`. |

###### Authentication return data for a restaurant management group API client

The authentication API returns the information shown in the
following example for a successful authentication request using a
restaurant management group API client. For more information about
restaurant management group API accounts, see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

**Authentication return data for a restaurant management group
client**

```
{
  "@class": ".SuccessfulResponse",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "token": {
    "tokenType": "Bearer",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "scope": null,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png) 
    "expiresIn": 19168,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "accessToken": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXJ0bmVyR3![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      V3JkZXJzOnYThkYWE5LWIyMDQtNDhhZi1iZDY2LWZiMzZkNzViYjU1NiIsIm5hbWl
      uZ0F1dGhvcml05NiIGlBFVEVSUEFSVE5FUiIsImF6cCI6InBldGVyLXBhcnRuZXIi
      LCJzY29wZSI6WyJjcm0iLCJsYWJvciIsImNvbmZpZ3VyYXRpb24iLCJjYXNobWdtd
      CIsInBhcnRuZXJzIiwiZ3Vlc3QucGk6cmVhZCIsImRlbGlcml05X2luZm8uYWRkcm
      VzczpyZWFkIiwib3JkZXJzO5NiIGQiLCJvcmRlcnMub3JkZXJzOndyaXRlIiwib3J
      kZXJzIiwiY3JlZGl0X2NhcmRzLmF1dGhvcml6YXRpb2463JkZXJzOnSwiZXhwIjox
      NTg4MTc2NDY2LCJqdGkiOiIyMTk4OWQwNS1jNzg4LTQzNWYtODQyMi0xYjRjZTM5O
      DdlODgiLCJjbGllbnRfaWQiOiJwZXRlci1wYXJ0bmVyIn0.BxROzc5ZyKVgkdsLTF
      LbyPR_dt5NiIG8vtJd3JkZXJzOnOQiJRtfx6sfse1i2ZG6VWIz_jVOvOiR2zaWra0
      yCcml051AVNV3xxn7u4finETPzm43lhf5NiIGYKqUD_HM-Z1B-CCAj-7C6nOGQWI9
      G_PYZRsb7lwmJG3tPW74bDKZhYJVnPO3HMNnd93A8AL4QVOVBO6L6BdqsK3lZ7nzY
      0hALk-LzyD-w_maz-s2kFx7vbWrp0l2X_gSpEi3JkZXJzOn81T-2bBtz4vkObQm27
      iI0Ww8K2ZeRwkSaR8zL2Qo-5NiIGRcml059S1_halz_GuWy4xOctS5WZOuIe5FaA",
    "idToken": null,![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
    "refreshToken": null![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
  },
  "status": "SUCCESS"![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e276C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | For internal use. |
| [2](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e278C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | The OAuth 2 authentication scheme used for the authentication token. Toast API authentication uses the bearer authentication scheme. |
| [3](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e280C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | The `scope` value in your authentication token request response will be null. Your JSON Web Token (JWT) contains your list of scopes. |
| [4](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e282C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | The number of remaining seconds that the authentication token is valid. For more information, see [Refreshing authentication tokens](https://doc.toasttab.com/doc/devguide/apiAuthTokenRefresh.html). |
| [5](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e284C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | A JSON Web Token (JWT) string that contains an authentication token. You present this string when you make requests to other Toast API resources. The JWT includes information about your Toast API client. For more information, see [JWT payload contents for restaurant management group API client access token](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationJwtContentsRMG). |
| [6](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e287C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | For internal use. |
| [7](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e289C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | For internal use. |
| [8](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e291C5E153BC-CA16-4F95-AF35-6E1AEA0AA25E) | Indicates that your authentication request was successful. |

  

The following example shows the JWT payload contents for a
restaurant management group API client access token.

**JWT payload contents for restaurant management group API
client access token**

```
{
  "https://toasttab.com/client_name": "MYNAMINGAUTHORITY",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "https://toasttab.com/access_type": "TOAST_MACHINE_CLIENT",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "https://toasttab.com/management_set_guid": "0423ad35-8ba2-45cf-9b6b-7da03f982c46",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "https://toasttab.com/type": "CUSTOMER",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "iss": "[Toast-token-issuer]",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  "sub": "my-client-id@clients",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
  "aud": "https://toast-services-api/",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
  "iat": 1603107025,![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
  "exp": 1588176466,![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
  "azp": "my-client-id",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
  "scope": "orders:read menus:read",![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
  "gty": "client-credentials"![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4798D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | A human-readable name representing your API client. |
| [2](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4818D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The types of users that can authenticate through the system. For API clients, this is `TOAST_MACHINE_CLIENT`. `TOAST_MACHINE_CLIENT` represents the type of access credentials issued to services that use Toast APIs. |
| [3](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4838D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The unique Toast platform identifier for the restaurant management group this client can access. |
| [4](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4858D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The type of client requesting authentication. For restaurant management group API clients, this is `CUSTOMER`. |
| [5](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4888D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The issuer of the authentication token. |
| [6](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4938D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The subject of the token being issued. This value will be set to your client identifier and the string `@clients`. |
| [7](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4958D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The intended audience of your API usage. |
| [8](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4978D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | A standard JWT claim indicating the time that the authentication token was issued. The time is presented in UNIX epoch format. |
| [9](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e4998D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | A standard JWT claim indicating the time that the authentication token expires. The time is presented in UNIX epoch format. |
| [10](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e5058D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | A standard JWT claim containing the identifier for the Toast API client. |
| [11](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e5078D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The API functionality that your client ID is provisioned to use. For more information about API scopes, see the [API scopes page](https://doc.toasttab.com/doc/devguide/apiScopes.html). |
| [12](https://doc.toasttab.com/doc/devguide/authentication.html#co-d1e5098D7F9437-AF36-4CB1-B9E3-E47AFE6F8BC9) | The grant type of this API client. This value will be `client-credentials`. |

#### Using an authentication token

To use secured Toast API resources, when you make a request
you:

* Present a valid authentication token in the
  *`Authorization`* HTTP header field when you make a
  request. An authentication token is a text string that you can get
  from the `/authentication/login` endpoint of the
  authentication API. See [Getting an authentication token](https://doc.toasttab.com/doc/devguide/authentication.html#getting-authentication-token).

  The Toast API uses bearer authentication tokens. You must
  include the string `Bearer` in the value of the
  *`Authorization`* HTTP header field, before the
  token string, to indicate the type of the token. For example,
  `Authorization: Bearer
  [my-authentication-token]`.
* Specify the individual restaurant context for your request in
  the *`Toast-Restaurant-External-ID`* header
  field.

  To specify the restaurant that is the subject of a Toast API
  request, you include the Toast system GUID for that restaurant in the
  *`Toast-Restaurant-External-ID`* HTTP header field.
  For example, `Toast-Restaurant-External-ID:
  47286e0a4-4fef-9230-b3dae11e7a9`.

The following **curl** command presents an
authentication token when it makes a Toast API request.

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQLCJqdLWFlODItNGFlYy04ND
M1LLCJqdRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedLCJqdK9ghNZVCs28
Td2Sp3IxLCJqdbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GLCJqdlryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4721e7a9-b4ae-4fef-9230-b3dae186e0a4" \
https://[toast-api-hostname]/labor/v1/employees
```


---

# Comparing menus API V2 and V3 - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiComparingMenusAPIV2AndV3.html

### Comparing menus API V2 and V3

When choosing which version of the menus API to use, follow these
guidelines:

* *Ordering partner integrations must use V3 of the
  menus API*.
* Other integration partners should continue to use V2.
  Currently, V3 only supports ordering partner integrations.

To understand the difference between V2 and V3 of the menus API,
you must understand channel visibility. Toast menu entities each have a
set of channel visibility settings in Toast Web. Restaurants use these
settings to control where the menu entity is visible. If a menu entity
is visible on a channel, then it is available for ordering on that
channel. Channel examples include the Toast POS app, Toast kiosks, a
restaurant's Toast Online Ordering website, and online ordering partner
websites such as Grubhub and Uber Eats.

#### Channel visibility in menus API V2

With menus API V2, requests sent to the `/menus`
endpoint return all menu entities for all of the specified
restaurant's menus. The data for each menu entity includes a
`visibility` array that defines which channels the menu
entity is visible on. Possible values included in this array are
`POS`, `KIOSK`,
`TOAST_ONLINE_ORDERING`, and
`ORDERING_PARTNERS`. Partner integrations use this
`visibility` array to determine whether to include a menu
entity in their integration or not. For example, consider a menu item
whose `visibility` array contains `POS` but not
`ORDERING_PARTNERS`. Ordering partner integrations would
have to include logic to filter this menu item out to keep it from
displaying on their online ordering websites.

Also, with the `/V2/menus` endpoint, there is no way
to distinguish which specific online ordering partner channels a menu
entity is visible on, so a menu entity whose `visibility`
array includes the `ORDERING_PARTNERS` value is considered
visible to all online ordering partners.

#### Channel visibility in menus API V3

With menus API V3, the `/menus` endpoint has been
re-factored for ordering partners so it returns only menu entities
that are visible to the ordering partner making the request. This
eliminates the need for an ordering partner integration to filter the
menu data it receives from the `/menus` endpoint. The Toast
platform uses the partner token included with the request to determine
which ordering partner made the request and filters the menu data
accordingly. To access the `/V3/menus` endpoint, an
ordering partner's API account must have the
`menus.channel:read` scope.

Currently, menus API V3 only supports ordering partners.
Additional re-factoring will happen in the future to support other
types of partner integrations, including integrations that continue to
need an aggregated view of all of a restaurant's menu entities.

|  |
| --- |
| Note |
| For more information on the channel visibility settings in the Toast Web, see [Specifying ordering channel visibility](https://doc.toasttab.com/doc/platformguide/adminSpecifyingOrderingChannelVisibility.html) (for menu builder users) and [Visibility overview](https://doc.toasttab.com/doc/platformguide/adminMenuVisibilityOverview.html) (for classic menu page users). |


---

# Comparing the menus API with the configuration API and menu JSON export - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiComparingTheMenusApiWithTheConfigurationApiAndMenuJsonExport_V2.html

### Comparing the menus API with the configuration API and menu JSON export

This section compares and contrasts the menus API with the
configuration API and the nightly menu JSON export so that you can
understand their differences. In general, if you need to retrieve the
entire menu structure for a restaurant, the menus API is the preferred
method for doing so.

* [Comparing the menus API with the configuration API](https://doc.toasttab.com/doc/devguide/apiComparingTheMenusApiWithTheConfigurationApiAndMenuJsonExport_V2.html#apiComparingTheMenusApiWithTheConfigurationApi_V2)
* [Comparing the menus API with the menu data export](https://doc.toasttab.com/doc/devguide/apiComparingTheMenusApiWithTheConfigurationApiAndMenuJsonExport_V2.html#apiComparingTheMenusApiWithTheMenuDataExport_V2)

#### Comparing the menus API with the configuration API

Unlike the menus API, which returns fully resolved JSON for all
of a restaurant's menus, the configuration API endpoints return data
for individual menu entities (menus, menu groups, menu items, modifier
groups and modifier options). When using the configuration API, you
must make successive calls to retrieve the data for each menu entity
type and then construct the full menu from those successive calls. For
example, you make a call to retrieve a menu so you can determine which
menu groups it contains. Next, you make calls to retrieve data for
those menu groups to determine which menu items they contain, and so
on.

The menus API eliminates the need to make successive calls for
individual menu entity data. It also eliminates the need to construct
a full menu from individual menu entities. Instead, it returns all of
the menu data for the specified restaurant with one call.

#### Comparing the menus API with the menu data export

The menu data export returns fully resolved JSON for a
restaurant's menus, however, it is only refreshed and made available
for downloading once per day. By contrast, the menus API allows you to
retrieved fully resolved menu JSON data at any time.


---

# Detecting and avoiding infinite loops in the menus API JSON - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDetectingAndAvoidingInfiniteLoopsInTheMenusApiJson.html

### Detecting and avoiding infinite loops in the menus API JSON

While unusual, it is technically possible for the following menu
structure to be created in Toast Web:

* Menu Item A includes Modifier Group B
* Modifier Group B includes Modifier Option C
* Modifier Option C's menu item reference is Menu Item A

This configuration can create an infinite loop that prevents a
menu from being resolved. If your integration encounters a modifier
option whose item reference is the same as the modifier option's parent
menu item (Menu Item A in the example above), your integration should
stop looping through the menu JSON and not display the modifier
option.

|  |
| --- |
| Note |
| For information about modifier option item references, see [Understanding a modifier item reference](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference). |


---

# Determining if a menu entity should be visible on a partner integration - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDeterminingIfAMenuEntityShouldBeVisibleOnAnOrderingPartnerSite_V2.html

### Determining if a menu entity should be visible on a partner integration

|  |
| --- |
| Important |
| This section applies to partners using menus API V2 only. For partners using menus API V3, menu entities are pre-filtered to exclude menu entities that should not be visible on their sites. For more information, see [Comparing menus API V2 and V3](https://doc.toasttab.com/doc/devguide/apiComparingMenusAPIV2AndV3.html). |

In Toast Web, there are channel visibility settings that
restaurants use to control where a menu entity is visible and, by
extension, available for ordering. For example, these settings control
whether an entity can be ordered on the Toast POS app, on a Toast Kiosk,
through a restaurant's Toast Online Ordering website, or through a
restaurant's integration with another, third-party online ordering
system.

The channel visibility settings reside on a menu entity's details
page in Toast Web. The names of the settings are slightly different
depending on whether the restaurant is using the [classic
menu details pages or the newer menu builder tool](https://doc.toasttab.com/doc/platformguide/adminBasicMenuBuilderAndTheLegacyMenuDetailsPages.html) to edit the
menu. The table below describes the behavior of the channel visibility
settings and how they are represented in the `visibility`
array that appears in the menus API for each menu entity:

| Classic menus setting | Menu builder setting | Menus API visibility array enum | Description |
| --- | --- | --- | --- |
| In-store orders: POS | POS | `POS` | The menu entity is visible on a Toast POS device. |
| In-store orders: Kiosk | Kiosk, Toast Order and Pay | `KIOSK` | The menu entity is visible on a Toast Kiosk. |
| Online orders: Toast | Toast Online Ordering, Toast Takeout (Local by Toast) app | `TOAST_ONLINE_ORDERING` | The menu entity is visible on a restaurant's Toast online ordering site. |
| Online orders: Ordering partners | Online ordering partners | `ORDERING_PARTNERS` | The restaurant wants the menu entity to be visible on all online ordering sites that they have allowed to integrate with their restaurant. |

Partner integrations should inspect a menu entity's
`visibility` array to determine whether an entity should be
included in their integration or not.


---

# Determining if a menu item or modifier contains alcohol - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDeterminingIfMenuItemsOrModifiersContainAlcohol.html

### Determining if a menu item or modifier contains alcohol

There are situations where additional information regarding the
alcohol content of a menu item or modifier is needed to determine
whether an order contains alcohol and therefore requires additional
handling. For example, local laws might require an ID check or prevent
the accrual of loyalty points for orders containing alcohol. For these
situations, the menus API provides a `contentAdvisories`
value for `MenuItem` and `ModifierOption` objects.
This `contentAdvisories` value holds a
`ContentAdvisories` object that contains important
information about the contents of a menu item or modifier.

The `ContentAdvisories` object contains an
`alcohol` value containing an `Alcohol` object,
which encapsulates important information pertaining to the alcoholic
aspects of a menu item or modifier. The `Alcohol` object has
one value, `containsAlcohol` string, which may be one of the
following:

* `YES` - The menu item or modifier contains
  alcohol.
* `NO` - The menu item or modifier does not contain
  alcohol.

If the value is `null`, this indicates that the
restaurant has not set the corresponding Does this item
contain alcohol setting in Toast Web.

|  |
| --- |
| Note |
| Not all menu items or modifiers containing alcohol benefit from or require additional handling. For example, a delivery containing a rum drink would require an ID check, while one containing rum cake would not. |

The following is an example of a `MenuItem` object for
a menu item containing alcohol:

```
"menuItems": [
  {
    "name": "Rum Punch",
    "guid": "0a6e4999-cfl1-4dd6-bf4d-f4d2b65f7d88",
    "multiLocationId": "100000000100009153",

    [contents omitted]

    "contentAdvisories": {
      "alcohol": {
        "containsAlcohol": "YES"
      }
    }
  }                       
]
```

The following is an example of a `ModifierOption`
object for a modifier not containing alcohol:

```
"modifierOptionReferences": {
  "2": {
    "referenceId": 2,
    "name": "Lettuce",
    "guid": "429f9045-74a1-81bc-4c48-86ce51c2f6ae",
    "multiLocationId": "100000000100008684",

    [contents omitted]

    "contentAdvisories": {
      "alcohol": {
        "containsAlcohol": "NO"
      }
    }
  }
}
```

The following is an example of a `MenuItem`
object for a menu item whose `containsAlcohol` option has not
been set in Toast Web:

```
"menuItems": [
  {
    "name": "Grilled Cheese",
    "guid": "0a6e4999-cfl1-4dd6-bf4d-f4d2b65f7d88",
    "multiLocationId": "100000000100009153",

    [contents omitted]

    "contentAdvisories": {
      "alcohol": {
        "containsAlcohol": null
      }
    }
  }                       
]
```

Partner integrations should inspect the `MenuItem` or
`ModifierOption` objects for the
`ContentAdvisories` object and use the
`containsAlcohol` value to understand the alcohol content of
the menu item or modifier.


---

# Determining if a restaurant's menu data has gone stale - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDeterminingIfYourMenuJsonIsOutdated_V2.html

### Determining if a restaurant's menu data has gone stale

There are two methods for determining if the menu data your
integration client has for a restaurant has gone stale, the
`menus` webhook and the `/metadata` endpoint. You
should not make a call to the `/menus` endpoint for a
restaurant unless you have used one of these methods to determine that
the menu data you have for that restaurant is stale. While this
recommendation applies to all clients of the menus API, it is
particularly important for clients that have limited bandwidth.

The `menus` webhook is the preferred method for
determining when a restaurant's menu data has gone stale. This webhook
sends a message when a restaurant that uses your integration has
published a change to its menus. The message payload includes the GUID
of the affected restaurant and a timestamp, in the UTC time zone, for
when the restaurant last published its menus. To keep your integration
in sync with the Toast platform, request a new menu from the
`/menus` endpoint after you receive a message from the
`menus` webhook. If you are using the `menus`
webhook, Toast support recommends also polling the
`/metadata` endpoint (described below) every 30 minutes. This
provides a backup in case your integration misses a message from the
`menus` webhook.

As an alternative to the `menus` webhook, you can use
the `/metadata` endpoint to retrieve the most recent date and
time that the restaurant's menu was published, in the UTC time zone. You
can compare the date and time returned by the `/metadata`
endpoint to the `lastUpdated` value of the
`Restaurant` object in your current menu data. Toast support
strongly recommends that you do not make a call to the
`/menus` endpoint unless the date and time returned by the
`/metadata` endpoint is more recent than the
`lastUpdated` date and time. If your integration uses the
`/metadata` endpoint, Toast Support recommends that you poll
the `/metadata` endpoint throughout the day to determine if
your menu data has become stale.

For more information on the `menus` webhook, see [Menus webhook](https://doc.toasttab.com/doc/devguide/apiMenusWebhook.html). For more
information on the `/metadata` endpoint, see the [menus API
reference documentation](https://doc.toasttab.com/openapi/menus/overview/).


---

# Ensuring your menu data is up-to-date - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiEnsuringYourMenuDataIsUpToDate.html

### Ensuring your menu data is up-to-date

Toast Support recommends that you compare the date and time of
your current menu JSON to that of the most recently published JSON to
see if changes have been made before you make a call to the
`/menus` endpoint. You retrieve the date and time of the most
recently published JSON using the `/metadata` endpoint. See
[Determining if a restaurant's menu data has gone stale](https://doc.toasttab.com/doc/devguide/apiDeterminingIfYourMenuJsonIsOutdated_V2.html) for more
information.

|  |
| --- |
| Important |
| Best practice is to poll the `/metadata` endpoint through the day to determine if your menu JSON has become stale and make a call to the `/menus` endpoint if it has. |


---

# Mapping menus API values to other Toast APIs and the menu data export - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html

### Mapping menus API values to other Toast APIs and the menu data export

To create a stronger connection between the data returned by the
menus API and the configuration options you see in Toast Web, the menus
API uses updated names for some of the JSON values it returns, as
compared to the names used by existing Toast APIs or the menu data
export.

|  |
| --- |
| Important |
| A menu entity's GUID remains consistent between the APIs even if the names used by the APIs are different. |

The menus API has also restructured and combined some menu data to
make it easier to consume. For example, the menu data export uses twelve
separate values to express when a menu is available
(`startTime`, `endTime`,
`availableAllDays`, `daysAvailableString`, and so
on) while the menus API combines those separate elements into a single
`availability` value.

The following sections provide mappings that show the menu-related
configuration options in Toast Web and the JSON values that represent
those options in the Toast POS APIs and the menu data export.

* [Restaurant mappings](https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html#apiRestaurantMappings_V2)
* [Menu mappings](https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html#apiMenuMappings_V2)
* [Menu group mappings](https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html#apiMenuGroupMappings_V2)
* [Menu item mappings](https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html#apiMenuItemMappings_V2)
* [Modifier group mappings](https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html#apiModifierGroupMappings_V2)
* [Modifier option mappings](https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html#apiModifierOptionMappings_V2)
* [Premodifier group mappings](https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html#apiPremodifierGroupMappings_V2)
* [Premodifier mappings](https://doc.toasttab.com/doc/devguide/apiMappingMenusApiValuesToOtherToastApisAndTheMenuDataExport_V2.html#apiPremodifierMappings_V2)

#### Restaurant mappings

The menus API returns metadata about a restaurant in its
`Restaurant` object. The restaurants API returns comparable
data for some of these metadata values, as shown in the table
below.

| Toast Web | Menus API | Restaurants API |
| --- | --- | --- |
| Restaurant GUID | restaurantGuid | guid (in the Restaurant object) |
| Publication Date | lastUpdated | - |
| Time Zone | restaurantTimeZone | timeZone |
| Menus | menus | - |

#### Menu mappings

This section provides a mapping that shows the configuration
options for menus in Toast Web and the JSON values that represent
those configuration options in the menu data export, the menus API,
and the configuration API. If a configuration option is not
represented in the data returned by an API or in the data export, it
is marked with a dash (-).

| Toast Web | Menus API | Menu data export | Configuration API |
| --- | --- | --- | --- |
| - | - | entityType | - |
| Name | name | name | name |
| Menu GUID | guid | guid | - |
| Number | multilocationId | - | - |
| Groups | menuGroups | groups | groups |
| Available at all times of the day | availability | availableAllTimes | - |
| Times available | availability | startTime  endTime  startTimeHHmm  endTimeHHmm  startTimeLocalStandardTime  endTimeLocalStandardTime  startTimeHHmmLocalStandardTime  endTimeHHmmLocalStandardTime | - |
| Available every day | availability | availableAllDays | - |
| Days available | availability | daysAvailableBits  daysAvailableString | - |
| Description | description | description | - |
| Image | image | imageLink | images |
| High Res Image | highResImage | - | - |
| Visibility | visibility | visibility | visibility |
| Orderable Online | visibility | orderableOnline | orderableOnline |
| Grubhub | visibility | - | - |
| - | - | idString | - |
| - | - | orderableOnlineStatus | - |

#### Menu group mappings

This section provides a mapping that shows the configuration
options for menu groups in Toast Web and the JSON values that
represent those configuration options in the menu data export, the
menus API, and the configuration API. If a configuration option is not
represented in the data returned by an API or in the data export, it
is marked with a dash (-).

| Toast Web | Menus API | Menu data export | Configuration API |
| --- | --- | --- | --- |
| - | - | entityType | - |
| Name | name | name | name |
| GUID | guid | guid | - |
| Number | multilocationId | - | - |
| Items | menuItems | items | items |
| Modifier Groups | - | - | optionGroups |
| Subgroups | menuGroups | subgroups | subgroups |
| Description | description | description | - |
| Image | image | imageLink | images |
| Visibility | visibility | visibility | visibility |
| Orderable Online | visibility | orderableOnline | orderableOnline |
| Grubhub | visibility | - | - |
| - | - | idString | - |
| - | - | - | menu |
| - | - | - | parent |
| inheritOptionGroups | - | - | inheritOptionGroups |
| Unit of Measure | - | - | unitOfMeasure |
| Inherit Unit of Measure | - | - | inheritUnitOfMeasure |

#### Menu item mappings

This section provides a mapping that shows the configuration
options for menu items in Toast Web and the JSON values that represent
those configuration options in the menu data export, the menus API,
and the configuration API. If a configuration option is not
represented in the data returned by an API or in the data export, it
is marked with a dash (-).

| Toast Web | Menus API | Menu data export | Configuration API |
| --- | --- | --- | --- |
| - | - | entityType | - |
| Name | name | name | name |
| GUID | guid | guid | - |
| Number | multilocationId | - | - |
| Price Level | pricingStrategy  pricingRules | price | - |
| Pricing Strategy | pricingStrategy  pricingRules | - | - |
| Base Price | pricingStrategy  pricingRules | price | - |
| Size Prices | pricingStrategy  pricingRules | price | - |
| Menu Prices | pricingStrategy  pricingRules | price | - |
| Time Prices | pricingStrategy  pricingRules | price | - |
| Location Prices | pricingStrategy  pricingRules | price | - |
| Portions | portions | - | - |
| Modifier Groups | modifierGroupReferences | optionGroups | optionGroups |
| Inherited Modifier Groups | - | - | inheritOptionGroups |
| Description | description | description | - |
| Calories | calories | calories | calories |
| Image | image | imageLink | images |
| Tags | itemTags | - | - |
| Visibility | visibility | visibility | visibility |
| Orderable Online | visibility | orderableOnline | orderableOnline |
| Grubhub Orderable | visibility | - | - |
| SKU | sku | - | sku |
| PLU | plu | - | plu |
| Sales Category | salesCategory | - | - |
| Can be discounted | isDiscountable | - | - |
| Applicable taxes | taxInfo | - | - |
| Unit of Measure | - | unitOfMeasure | unitOfMeasure |
| Inherit Unit of Measure | - | - | inheritUnitOfMeasure |
| - | - | - | type |

#### Modifier group mappings

This section provides a mapping that shows the configuration
options for modifier groups in Toast Web and the JSON values that
represent those configuration options in the menu data export, the
menus API, and the configuration API. If a configuration option is not
represented in the data returned by an API or in the data export, it
is marked with a dash (-).

| Toast Web | Menus API | Menu data export | Configuration API |
| --- | --- | --- | --- |
| - | - | entityType | - |
| Name | name | name | name |
| GUID | guid | guid | - |
| Number | multilocationId | - | - |
| Required | requiredMode | - | - |
| Multi-select | isMultiSelect | - | - |
| Min # selections | minSelections | minSelections | minSelections |
| Max # selections | maxSelections | maxSelections | maxSelections |
| Pre-Modifier Group | premodifierGroupReferences | - | - |
| Select where pricing is set | pricingStrategy  pricingRules | pricingMode | - |
| Allow default modifiers to charge their configured price | defaultOptionsChargePrice | defaultOptionsChargePrice | - |
| Enable Substitution Pricing | defaultOptionsSubstitutionPricing | defaultOptionsSubstitutionPricing | - |
| Select pricing for all modifiers | pricingStrategy  pricingRules | - | - |
| Fixed Modifier Price | pricingStrategy  pricingRules | - | - |
| Sequence Price | pricingStrategy  pricingRules | pricingStrategy  pricingStrategyRules | - |
| Size Price | pricingStrategy  pricingRules | pricingStrategy  pricingStrategyRules | - |
| Size/Sequence Price | pricingStrategy  pricingRules | pricingStrategy  pricingStrategyRules | - |
| Modifiers | modifierOptionReferences | items | options |
| Visibility | visibility | visibility | - |
| Grubhub | visibility | - | - |
| ID string | - | idString | - |

|  |
| --- |
| Note |
| While the menu data export contains JSON data for the premodifiers themselves, it does not contain data that defines the modifier groups that a premodifier applies to. The menus API has resolved this issue by including a `premodifierGroupReferences` value on each `ModifierGroup` object that defines which premodifiers apply to each modifier group. |

#### Modifier option mappings

This section provides a mapping that shows the configuration
options for modifier options in Toast Web and the JSON values that
represent those configuration options in the menu data export, the
menus API, and the configuration API. If a configuration option is not
represented in the data returned by an API or in the data export, it
is marked with a dash (-).

| Toast Web | Menus API | Menu data export | Configuration API |
| --- | --- | --- | --- |
| - | - | entityType | - |
| Name | name | name | - |
| GUID | guid | guid | - |
| Number | multilocationId | - | - |
| Enable duplicates of this modifier | allowsDuplicates | - | - |
| Default | isDefault | isDefaultMod | - |
| Visibility | visibility | visibility | - |
| Orderable Online | visibility | orderableOnline | - |
| Grubhub Orderable | visibility | - | - |
| Tax info | taxInfo | - | - |
| Sales Category | salesCategory | - | - |
| Calories | calories | calories | - |
| SKU | sku | sku | - |
| PLU | plu | plu | - |
| GUID (on the menu item details page) | - | itemGroupGuid | - |
| Option Groups | modifierGroupReferences | optionGroups | - |
| Price | pricingStrategy  pricingRules | price | - |
| Description | description | description | - |
| Item Tags | itemTags | - | - |
| - | - | maxSelections | - |
| - | jsonIdentifier | - | - |
| Portions | portions | - | - |
| Image | image | - | - |

#### Premodifier group mappings

This section provides a mapping that shows the configuration
options for premodifier groups in Toast Web and the JSON values that
represent those configuration options in the menu data export, the
menus API, and the configuration API. If a configuration option is not
represented in the data returned by an API or in the data export, it
is marked with a dash (-).

| Toast Web | Menus API | Menu data export | Configuration API |
| --- | --- | --- | --- |
| Name | name | name | name |
| GUID | guid | guid | - |
| Default | - | isDefault | isDefault |
| Members | premodifiers | premodifiers |  |

#### Premodifier mappings

This section provides a mapping that shows the configuration
options for premodifiers in Toast Web and the JSON values that
represent those configuration options in the menu data export, the
menus API, and the configuration API. If a configuration option is not
represented in the data returned by an API or in the data export, it
is marked with a dash (-).

| Toast Web | Menus API | Menu data export | Configuration API |
| --- | --- | --- | --- |
| Name | name | name | name |
| GUID | guid | guid | - |
| Base Price | fixedPrice | basePrice | basePrice |
| Scale Price | - | scalePrice | scalePrice |
| Scale Factor | multiplicationFactor | scaleFactor | scaleFactor |
| Display Mode | displayMode | displayMode | displayMode |
| Parent | - | - | parent |


---

# Menus API rate limit - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMenusApiRateLimit_V2.html

### Menus API rate limit

The `GET /menus` endpoint of the menus API uses an
endpoint rate limit for each client of one request per second per
location. Requests that your API client makes for one restaurant do not
affect the client's rate limits for any other restaurant. Note that this
is a lower rate limit than the default API rate limit that is enforced
for other Toast APIs. The `GET /metadata` endpoint of the
menus API uses the default API rate limit described in [Toast rate limit values](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiToastRateLimits).

For more information on rate limits for Toast APIs, see [Rate limiting](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html).


---

# Menus API returns fully resolved JSON - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMenusApiReturnsFullyResolvedJson_V2.html

### Menus API returns fully resolved JSON

The Toast platform's menu structure is a hierarchical structure
where menu entities can inherit properties from other entities in the
hierarchy. For example, menu items may inherit their prices from a
parent menu group or modifier options may inherit a price from their
underlying [item
reference](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference).

The menus API returns JSON that is as fully resolved as possible.
This means, whenever possible, menu data is resolved down to the menu
item or modifier option level. For example, if a menu item inherits its
price from a menu group, that price is returned as part of the menu
item's JSON data, not as part of the menu group's data.

In some cases, it is not possible to resolve price data down to
the menu item or modifier option level because the price depends on some
unknown context, for example, the particular size of a menu item when it
is ordered or the specific time a menu item is ordered. In these cases,
you must calculate prices for the menu items or modifier options using
additional pricing data returned by the menus API. See [Using PricingRules and PricingStrategy to calculate
prices](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html)
for more information.


---

# Menus API returns published data only - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMenusApiReturnsPublishedDataOnly.html

### Menus API returns published data only

To conserve the use of system resources, the menus API service
only generates the JSON that it returns when a menu-related change has
been made and published. This means that:

* The menus API returns published data only.
* The menus API does not return data for archived menu
  entities.
* If changes have been made to a restaurant's menu configuration
  in Toast Web, the Toast customer must publish those changes before
  the menus API can return them.

There is a period of time after a menu has been published during
which the Toast platform publishes the new data and then creates the
menu JSON file that the menus API returns in response to requests made
to the `/menus` endpoint. The length of this time period
depends on the size and complexity of the restaurant's menu. You must
wait for this process to complete before the newly published data will
be returned by the menus API.


---

# Menus API structure mirrors Toast Web structure - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMenusApiStructureMirrorsToastAdministrationBackEndStructure.html

### Menus API structure mirrors Toast Web structure

The menus API returns JSON that reflects the structure that a
Toast customer has defined for their restaurant's menus in Toast Web.
This is also the structure that the Toast platform uses to display menus
on Toast devices. For example, if a restaurant's Breakfast menu is
configured to appear on a Toast POS device before a Lunch menu, then the
JSON returned by the menus API will include the Breakfast menu data
before the Lunch menu data. To use the menus API effectively, it is
important to understand the Toast menu structure and rules described in
[Menu hierarchy](https://doc.toasttab.com/doc/platformguide/adminMenuHierarchy.html).


---

# Menus API supersedes configuration API and menu data export for menu data retrieval - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMenusApiSupersedesConfigApiAndMenuDataExport.html

### Menus API supersedes configuration API and menu data export for menu data retrieval

The menus API supersedes the configuration API and the nightly
menu JSON export for menu data retrieval. To understand the differences
between these three menu retrieval mechanisms, see [Comparing the menus API with the configuration API and menu JSON
export](https://doc.toasttab.com/doc/devguide/apiComparingTheMenusApiWithTheConfigurationApiAndMenuJsonExport_V2.html).


---

# Menus API supports data retrieval only - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMenusApiSupportsDataRetrievalOnly.html

### Menus API supports data retrieval only

The menus API returns all values for all objects in the JSON
output, even if they are empty or null. The menus API currently supports
data retrieval only. If any of the menu entities returned by the menus
API need modification, those configuration changes must be made in the
Toast Web by the Toast customer.


---

# Menus API troubleshooting - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMenusApiTroubleshooting_V2.html

### Menus API troubleshooting

**Problem:** The JSON returned by the
menus API is missing a value that you are expecting.

**Potential Solution:** Ask the
restaurant to make a minor menu-related change and then publish to force
the JSON to be regenerated.


---

# POS button color hex codes for light and dark modes - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiPosButtonColorHexCodesForLightAndDarkMode.html

### POS button color hex codes for light and dark modes

The `Menu`, `MenuGroup`,
`MenuItem`, `ModifierGroup`,
`Modifier`, and `PreModifier` objects of the menus
API have two values, `posButtonColorLight` and
`posButtonColorDark`, that represent the button color you see
for that menu entity in the Toast POS app.

When an employee configures the POS button color for a menu
entity, they select a color pairing that consists of two colors, one for
light mode and one for dark mode. `posButtonColorLight`
contains the hexadecimal (hex) code for the light mode color.
`posButtonColorDark` contains the hex code for the dark mode
color.

The default color pairing is `WHITE`. In the
`WHITE` color pairing, `posButtonColorLight` is
`#f7f7f7` and `posButtonColorDark` is
`#1a1c23`.

The following table shows the color pairing names and the color
hex codes for light and dark mode associated with each pairing.

**Color pairing names and their light and dark hex codes**

| Color pairing name | Light hex code | Dark hex code |
| --- | --- | --- |
| WHITE | #f7f7f7 | #1a1c23 |
| TERRACOTTA\_1 | #ffe6e9 | #7e635d |
| TERRACOTTA\_2 | #efa49f | #74504D |
| TERRACOTTA\_3 | #f07166 | #722e25 |
| TERRACOTTA\_4 | #e45a4e | #561408 |
| ORANGE\_1 | #fbd9b6 | #8f5f3d |
| ORANGE\_2 | #f7be6e | #7e4116 |
| ORANGE\_3 | #f98c1f | #803500 |
| ORANGE\_4 | #e56f1a | #682d03 |
| YELLOW\_1 | #fbf5b6 | #7e6b44 |
| YELLOW\_2 | #fed850 | #7b5f27 |
| YELLOW\_3 | #e9b10c | #7c5000 |
| YELLOW\_4 | #c78605 | #633d09 |
| GRASS\_1 | #e8f7d4 | #657552 |
| GRASS\_2 | #afe26c | #556e34 |
| GRASS\_3 | #71b314 | #37570a |
| GRASS\_4 | #32a206 | #113a00 |
| SKY\_1 | #e3f0fb | #637486 |
| SKY\_2 | #9fc5f0 | #4d6074 |
| SKY\_3 | #77a5e4 | #2a456b |
| SKY\_4 | #558edd | #213554 |
| LAVENDER\_1 | #f1e3fd | #78668a |
| LAVENDER\_2 | #dab2f7 | #5e4776 |
| LAVENDER\_3 | #b26ee2 | #402960 |
| LAVENDER\_4 | #a270db | #25174f |
| GRAY\_1 | #d0d0d0 | #6c6c6c |
| GRAY\_2 | #c3c3c3 | #5f5f5f |
| GRAY\_3 | #b1b1b1 | #474747 |
| GRAY\_4 | #989898 | #404040 |


---

# Understanding GUIDs, referenceIds, and multiLocationIds - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUnderstandingGuidsEntityIdentifiersAndMultilocationIds_V2.html

### Understanding GUIDs, referenceIds, and multiLocationIds

All of the objects returned by the menus API have
`guid` values. Menus, menu groups, menu items, modifier
groups, and modifier options have `multiLocationId` values.
Modifier groups, modifier options, and premodifier groups also have
`referenceId` values. All three values contain IDs, however,
they are used for different purposes. The sections below describe each
ID type and what they are used for.

* [guid values](https://doc.toasttab.com/doc/devguide/apiUnderstandingGuidsEntityIdentifiersAndMultilocationIds_V2.html#apiGuidValues_V2)
* [referenceId values and <menu-entity>references
  objects](https://doc.toasttab.com/doc/devguide/apiUnderstandingGuidsEntityIdentifiersAndMultilocationIds_V2.html#apiReferenceIdValuesAndMenuEntityReferencesObjects_V2)
* [multiLocationId values](https://doc.toasttab.com/doc/devguide/apiUnderstandingGuidsEntityIdentifiersAndMultilocationIds_V2.html#apiMultilocationIdValues_V2)

#### guid values

The `guid` value provides a unique ID for a menu
entity, generated by the Toast platform. You can use a
`guid` to request information about a specific menu entity
from the configuration API.

#### referenceId values and <menu-entity>references objects

It is quite common for a modifier group to apply to more than
one menu item, for example, a Toppings modifier group could apply to
all of the menu items in a Pizza menu group. Instead of replicating a
modifier group in the JSON every time it applies to a menu item, the
menus API calculates all the unique modifier group instances, assigns
them `referenceId` values, and presents them in a map of
`ModifierGroup` objects. Menu items then reference the
`ModifierGroup` objects using their
`referenceId` values. Using this approach reduces the size
of the menu JSON by avoiding the need to replicate modifier groups
multiple times.

This same `referenceId` and map structure is also
used for modifier options and premodifier groups. The maps for the
modifier groups, modifier options, and premodifier groups are
contained in the `modifierGroupReferences`,
`modifierOptionReferences`, and
`premodifierGroupReferences` values of the
`restaurant` object, respectively.

The JSON sample below shows a menu item, Cheese Pizza, that
references Size and Toppings modifier groups. The modifier groups, in
turn, reference the modifier options they contain (Small and Large for
the Size modifier group, Mushrooms and Onions for the Toppings
modifier group).

**Sample JSON for modifier group and modifier option
references**

```
{
  "restaurantGuid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  ...
  "menus": [
    {
      "name": "Dinner",
      "guid": "ddd681de-3c12-4d45-b8b1-a5b2ea898210",
      ...
      "menuGroups": [
        {
          "name": "Pizza",
          "guid": "dc868006-919a-4950-a4cc-3a03f9770fd7",
          ...
          "menuItems": [
            {
              "name": "Cheese Pizza",
              "guid": "95c5d500-8d92-46f2-bec4-fb2a42a46621",
              ...
              "price": null,
              "pricingStrategy": "SIZE_PRICE",
              "pricingRules": {
                ...
              },
              ...
              "modifierGroupReferences": [
                2,
                3,
                ...
              ],
              ...
            }
          ]
        }
      ]
    }
  ],
  "modifierGroupReferences": {
    ...
    "2": {
      "referenceId": 2,
      "name": "Size",
      "guid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",
      ...
      "modifierOptionReferences": [
        12,
        13
      ],
      ...
    },
    "3": {
      "referenceId": 3,
      "name": "Toppings",
      "guid": "58b79986-f88f-411d-ba18-14b1e2441e9d",
      ...
      "pricingStrategy": "SIZE_PRICE",
      "pricingRules": {
        ...
      },
      ...
      "modifierOptionReferences": [
        10,
        11
      ],
      ...
    },
    ...
  },
  "modifierOptionReferences": {
    ...
    "10": {
      "referenceId": 10,
      "name": "Mushrooms",
      "guid": "fa24fee9-76c4-40ba-ae3c-7dfccafdd8d3",
      ...
      "modifierGroupReferences": []
    },
    "11": {
      "referenceId": 11,
      "name": "Onions",
      "guid": "afee6be7-8280-4c69-a170-9fdf4c76bf7b",
      ...
      "modifierGroupReferences": []
    },
    "12": {
      "referenceId": 12,
      "name": "Small",
      "guid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",
      ...
      "modifierGroupReferences": []
    },
    "13": {
      "referenceId": 13,
      "name": "Large",
      "guid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",
      ...
      "modifierGroupReferences": []
    },
    ...
  }
}
```

  

As you can see in the JSON sample above, the menus API
structures the `<menu-entity-type>References` objects
so that they contain a set of key/value pairs, and each pair
represents a modifier group, modifier option, or premodifier group
(depending on which type of menu entity the `References`
object contains). A pair's key matches the `referenceId` of
the object contained in the pair's value. JSON deserializers will
convert the `<menu-entity-type>References` objects
into maps, allowing you to use the keys provided in other objects to
find matching references in these maps. For example, you can use a key
provided in a `MenuItem` object's
`modifierGroupReferences` value to locate a matching
`ModifierGroup` object in the
`modifierGroupReferences` map.

In rare cases, a modifier group, modifier option, or premodifier
group may resolve into multiple unique instances in the
`<menu-entity-type>References` map. For this reason,
you should not assume that there is a 1:1 relationship between an
object's `referenceId` and its `guid`. The
following configuration is an example of when this situation could
occur:

* Menu Item 1 and Menu Item 2 have different visibility
  settings.
* Menu Item 1 and Menu Item 2 are both assigned Modifier Group
  A.

Because modifier groups inherit their visibility settings from
the menu items they are assigned to, there are two possible visibility
settings for Modifier Group A, one inherited from Menu Item 1 and
another inherited from Menu Item 2. As such, this configuration
results in two resolved instances of Modifier Group A in the JSON, one
that uses Menu Item 1's visibility setting and another that uses Menu
Item 2's visibility setting. These two instances will have the same
`guid` value but different `referenceId`
values.

#### multiLocationId values

The `multiLocationId` is an identifier that is used
to identify and consolidate menu entities that are versions of each
other.

|  |
| --- |
| Note |
| `multiLocationId` replaces `masterId` and has the same value. |

Menu entities can be versioned. Those versions can be assigned
to specific restaurant locations, or groups of locations, in a
management group. For example, you could have two versions of a
Breakfast menu, one for a Boston location and another for a New York
City location. Versioned menu entities share the majority of, but not
all of, their data. For example, the Boston version includes waffles
while the New York City version does not.

You use the `multiLocationId` to identify menu
entities that are versions of each other. To continue the example
above, the Breakfast menu in the JSON returned for the Boston location
has the same `multiLocationId` as the Breakfast menu in the
JSON returned for the New York City location. These matching
`multiLocationId` values indicate that the two menus are
related versions.

The Toast platform ensures that once a
`multiLocationId` value is assigned to a set of versions
within a management group, that `multiLocationId` is not
used for any other versioned menu entities in the same management
group. It does not guarantee, however, that the
`multiLocationId` is not used by another management group,
to identify a set of versions within it.

For detailed information on the enterprise module and
versioning, see [Enterprise
Restaurant Chains](https://doc.toasttab.com/doc/platformguide/sharingMenusAndOtherInformationAmongRestaurants.html) in the Toast platform guide.


---

# Understanding the order in which modifier groups are returned - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUnderstandingTheOrderInWhichModifierGroupsAreReturned.html

### Understanding the order in which modifier groups are returned

The menus API returns modifier groups in the same order in which
they are displayed on the Toast POS app. For more information on the
logic the Toast platform uses to determine modifier group display order
on the Toast POS app, see [Modifier group display order overview](https://doc.toasttab.com/doc/platformguide/platformModifierGroupDisplayOrderOverview.html).


---

# Using menus API data to construct valid orders - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingMenusApiDataToConstructValidOrders.html

### Using menus API data to construct valid orders

If you are using the menus API data to construct an ordering
application, those orders will ultimately be injected into the Toast
platform using the orders API. It is important that orders injected into
the orders API are properly formed and valid. The menus API provides
information that you can use to ensure that orders you pass to the
orders API are valid. See [Using menus API data to submit properly formed orders](https://doc.toasttab.com/doc/devguide/apiUsingMenusApiDataToSubmitProperlyFormedOrders_V2.html) for
more information.


---

# Using menus API data to submit properly formed orders - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingMenusApiDataToSubmitProperlyFormedOrders_V2.html

### Using menus API data to submit properly formed orders

If you are using the menus API data to construct an ordering
application, those orders will ultimately be injected into the Toast
platform using the orders API. It is important that orders injected into
the orders API are properly formed and valid. You can inspect certain
values in the menus API data to make sure that the orders you submit to
the orders API will pass validation. For example, if a modifier group
has a minimum number of selections required, the orders API will fail an
order that contains too few selections from that modifier group. You can
inspect the `minSelections` values on the modifier groups
returned by the menus API to make sure you account for the minimum
selections requirement and your orders will pass validation.

Use the following values returned by the menus API to ensure that
you submit orders correctly to the orders API:

* The `availability` value of the [Menu](https://doc.toasttab.com/openapi/menusv3/tag/Data-definitions/schema/Menu/)
  object. The orders API *does not validate*
  against the availability settings of a menu, meaning it is possible
  to submit an order for an item on a menu that is not currently
  available (see [Orders API limitations](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html#ordersAPILimitations) for more information). For this
  reason, it is particularly important that you use the menus API to
  confirm the availability of a menu before you place an order from
  it.
* The `minSelections` and `maxSelections`
  values of the [ModifierGroup](https://doc.toasttab.com/openapi/menusv3/tag/Data-definitions/schema/ModifierGroup/)
  object. The orders API rejects an order if at least one menu item
  selection has a modifier group with minimum or maximum selection
  requirements and those requirements have not been met for that menu
  item.
* The `requiredMode` value of the [ModifierGroup](https://doc.toasttab.com/openapi/menusv3/tag/Data-definitions/schema/ModifierGroup/)
  object. The orders API rejects an order if at least one menu item
  selection has a required modifier group and there is no modifier
  option from that group specified for the menu item.
* The `isMultiSelect` value of the [ModifierGroup](https://doc.toasttab.com/openapi/menusv3/tag/Data-definitions/schema/ModifierGroup/)
  object. The orders API rejects an order if at least one menu item
  selection has a modifier group whose `isMultiSelect`
  value is FALSE, meaning only one modifier option may be chosen from
  the group, and more than one modifier option has been specified from
  that modifier group for the menu item.
* The `isDefault` value of the [ModifierOption](https://doc.toasttab.com/openapi/menusv3/tag/Data-definitions/schema/ModifierOption/)
  object. The orders API *does not validate*
  against the `isDefault` value, meaning it is possible to
  submit an order for a menu item that has a default modifier and that
  default modifier has been omitted. To avoid issues with default
  modifiers, your integration should inspect each modifier option's
  `isDefault` value and, if `isDefault` is set
  to `True`, include that modifier option by default for
  the parent menu item on the online ordering site. You should also
  provide guests with the ability to remove a default modifier from
  its parent menu item. For example, if a burger includes lettuce and
  tomato as default modifiers then, by default, your online ordering
  site should show lettuce and tomato as modifier options on the
  burger and guests should have the ability to exclude these options
  from their burger.
* The `isDiscountable` value of the [MenuItem](https://doc.toasttab.com/openapi/menusv3/tag/Data-definitions/schema/MenuItem/)
  object. The orders API *does not validate*
  against the `isDiscountable` value. If you submit an
  order that applies a discount to a menu item whose
  `isDiscountable` value is FALSE, the orders API will not
  fail the order but it will set the discount amount on the menu item
  to $0.00. If you are using the menus API to build an ordering
  application, be sure to inspect the `isDiscountable`
  value of the menu items to ensure that your ordering application
  does not allow an item to be discounted if its
  `isDiscountable` value is FALSE.
* The `pricingStrategy` value of the [MenuItem](https://doc.toasttab.com/openapi/menusv3/tag/Data-definitions/schema/MenuItem/)
  object. For menu items that use the Open Price pricing strategy, the
  expectation is that the price is provided to the Toast platform at
  the time the item is ordered. If you are injecting orders into the
  Toast platform using the orders API, you must include the price for
  an Open Price menu item in the [openPriceAmount
  value of the Selection object](https://doc.toasttab.com/openapi/orders/tag/Data-definitions/schema/Selection/). You can inspect the
  `pricingStrategy` value of your menu items to determine
  if any of them use the OPEN\_PRICE pricing strategy. If so, be sure
  to include pricing information for those items in the injected
  order.

You should also be aware that the orders API and the menus API use
slightly different names for the values that make up an order, as shown
in the table below.

| Value name in orders API | Value name in menus API |
| --- | --- |
| itemGroup | menuGroups |
| item | menuItem |
| optionGroup | modifierGroup |
| item | modifierOption |


---

# Using PricingRules and PricingStrategy to calculate prices - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html

### Using PricingRules and PricingStrategy to calculate prices

There are situations where additional context is needed before a
price can be determined. For example, the price of a menu item that uses
time-specific pricing depends on the time the menu item is ordered. For
these situations, the menus API provides two values,
`pricingStrategy` and `pricingRules`, that contain
the information you need to calculate the menu item or modifier option's
price. These values appear for every menu item, modifier group, and
modifier option in the fully resolved JSON. Their contents change
depending on how a menu item or modifier option's price has been
configured.

You use the `pricingStrategy` and
`pricingRules` values to calculate prices for:

* Menu items that use either the [Time Specific Price](https://doc.toasttab.com/doc/platformguide/adminTimeSpecificPrice.html) or
  [Size
  Price](https://doc.toasttab.com/doc/platformguide/adminSizePrice.html) pricing strategy.
* Modifier options that inherit their prices from a parent
  modifier group that uses the [Size Price](https://doc.toasttab.com/doc/platformguide/adminSizePrice.html), [Sequence
  Price](https://doc.toasttab.com/doc/platformguide/adminSequencePrice.html), or [Size/Sequence Price](https://doc.toasttab.com/doc/platformguide/adminSizeSequencePrice.html)
  pricing strategy.
* Modifier options that get their prices from modifier option
  [item
  references](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference) that use the [Time Specific Price](https://doc.toasttab.com/doc/platformguide/adminTimeSpecificPrice.html) or
  [Size
  Price](https://doc.toasttab.com/doc/platformguide/adminSizePrice.html) pricing strategy.

The `pricingStrategy` value tells you which pricing
strategy is in effect so that you can properly interpret the contents of
the `pricingRules` value and calculate the correct price.
Because they appear in multiple locations in the menu JSON, it is
important to use the correct `pricingStrategy` and
`pricingRules` values when calculating prices. The following
sections describe which `pricingStrategy` and
`pricingRules` values to use and how to interpret
them.

#### Calculating prices for menu items

The following sections describe how to calculate time-specific
and size prices for a menu item. When calculating the price for a menu
item, you use the `pricingStrategy` and
`pricingRules` values for that menu item.

|  |
| --- |
| Note |
| For menu items that use the Base Price or Menu Specific Price pricing strategy, no calculations are required. You retrieve the price from the menu item's `price` value. For menu items that use the Open Price pricing strategy, the expectation is that the price is provided at the time the item is ordered. See [Using menus API data to submit properly formed orders](https://doc.toasttab.com/doc/devguide/apiUsingMenusApiDataToSubmitProperlyFormedOrders_V2.html) for more information. |

##### Menu item with a time-specific price

When a menu item is priced using the Time Specific Price
pricing strategy, its `pricingStrategy` value is
`TIME_SPECIFIC_PRICE` and its `pricingRules`
value contains the information you need to calculate the price of
the item at any given time. Inside the `pricingRules`
value, you see the `timeSpecificPricingRules` value which
contains an array of time-specific prices for the menu item.

In this use case, the `pricingRules` value also
contains the `sizeSpecificPricingGuid` and
`sizeSequencePricingRules` values, however, the
`sizeSpecificPricingGuid` is null and the
`sizeSequencePricingRules` array is empty because the
menu item uses a time-specific price, not a size price.

**Sample JSON for a menu item that uses the Time Specific
Price pricing strategy**

```
{
  "restaurantGuid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  ...
  "menus": [
    {
      "name": "Dinner",
      "guid": "ddd681de-3c12-4d45-b8b1-a5b2ea898210",
      ...
      "menuGroups": [
        {
          "name": "Pizza",
          "guid": "dc868006-919a-4950-a4cc-3a03f9770fd7",
          ...
          "menuItems": [
            {
              "name": "Cheese Pizza",
              "guid": "6f54db28-557b-4070-b3da-58a52fa4a4fb",
              ...
              "price": null,
              "pricingStrategy": "TIME_SPECIFIC_PRICE",
              "pricingRules": {
                "timeSpecificPricingRules": [
                  {
                    "timeSpecificPrice": 8.0,![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
                    "basePrice": 10.0,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                    "schedule": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                      {
                        "days": [![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                          "MONDAY",
                          "TUESDAY",
                          "WEDNESDAY",
                          "THURSDAY",
                          "FRIDAY"
                        ],
                        "timeRanges": [![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
                          {
                            "start": "12:00",
                            "end": "14:00"
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "timeSpecificPrice": 9.0,![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
                    "basePrice": 10.0,
                    "schedule": [
                      {
                        "days": [
                          "SATURDAY",
                          "SUNDAY"
                        ],
                        "timeRanges": [
                          {
                            "start": "12:00",
                            "end": "15:00"
                          }
                        ]
                      }
                    ]
                  }
                ],
                "sizeSpecificPricingGuid": null,
                "sizeSequencePricingRules": []
              },
              ...
            },
          ]
        }
      ]
    }
  ],
  "modifierGroupReferences": {
    ...
  },
  "modifierOptionReferences": {
    ...
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e5741578678687) | The price of the Cheese Pizza menu item during the time period defined by the `schedule` value ($8). |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e5761578678687) | The base price of the Cheese Pizza menu item ($10), used for time periods when a time-specific price has not been defined. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e5781578678687) | The schedule for this time specific price, which defines the days and times the price applies. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e5801578678687) | The days this time-specific price applies (Monday through Friday). |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e5821578678687) | The times this time-specific price applies (noon to 2pm), in the restaurant's local time. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e5851578678687) | The configuration for another time-specific price for Saturday and Sunday. |

##### Menu item with a size price

When a menu item is priced using the Size Price pricing
strategy, its `pricingStrategy` value is
`SIZE_PRICE` and its `pricingRules` value
contains the information you need to calculate the prices for
different sizes of the item. Inside the `pricingRules`
value, you see the `sizeSpecificPricingGuid` value, which
is populated with the `GUID` of the Size modifier group
that contains the sizes and prices for this menu item.

The Toast platform automatically creates a Size modifier group
when you choose the Size Price pricing strategy for a menu item. The
system stores the sizes and prices you specify in this modifier
group, using separate modifier options, one for each size. You use
the `sizeSpecificPricingGuid` value to locate the correct
Size modifier group to use when pricing a menu item that uses size
pricing. In the JSON fragment below, you can see that Cheese Pizza
menu item uses the `SIZE_PRICE` pricing strategy and the
Size modifier group where the sizes and prices for the Cheese Pizza
menu item are defined has a `GUID` ending in
`31b0`. The Size modifier group has two modifier options
that define two sizes for the Cheese Pizza menu item, Small and
Large, which cost $8 and $10, respectively.

In this use case, the `timeSpecificPricingRules`
array contained in the `pricingRules` value is empty
because the menu item uses a size price, not a time-specific price.
Also, the `sizeSequencePricingRules` array is empty
because because this array is used for modifier option pricing, not
menu item pricing.

**Sample JSON for a menu item that uses the Size Price
pricing strategy**

```
{
  "restaurantGuid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  ...
  "menus": [
    {
      "name": "Dinner",
      "guid": "ddd681de-3c12-4d45-b8b1-a5b2ea898210",
      ...
      "menuGroups": [
        {
          "name": "Pizza",
          "guid": "dc868006-919a-4950-a4cc-3a03f9770fd7",
          ...
          "menuItems": [
            {
              "name": "Cheese Pizza",
              "guid": "95c5d500-8d92-46f2-bec4-fb2a42a46621",
              ...
              "price": null,
              "pricingStrategy": "SIZE_PRICE",
              "pricingRules": {
                "timeSpecificPricingRules": [],
                "sizeSpecificPricingGuid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
                "sizeSequencePricingRules": []
              },
              ...
              "modifierGroupReferences": [
                2,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                6,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                ...
              ],
              ...
            }
          ]
        }
      ]
    }
  ],
  "modifierGroupReferences": {
    ...
    "2": {![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      "referenceId": 2,
      "name": "Size",
      "guid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",
      ...
      "pricingStrategy": "NONE",
      "pricingRules": null,
      ...
      "modifierOptionReferences": [![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        12,
        13
      ],
      ...
    },
    ...
  },
  "modifierOptionReferences": {
    ...
    "12": {![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      "referenceId": 12,
      "name": "Small",
      "guid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",
      ...
      "price": 8.0,![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
      "pricingStrategy": "BASE_PRICE",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      "pricingRules": null,![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
      ...
      "modifierGroupReferences": []
    },
    "13": {![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
      "referenceId": 13,
      "name": "Large",
      "guid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",
      ...
      "price": 10.0,
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    }
    ...
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6741578678687) | The `GUID` of the Size modifier group that defines the sizes and prices for Cheese Pizza menu item. Note that this is the same modifier group that is referenced in the `modifierGroupReferences` map using the ID `2`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6761578678687) | A reference to the Size modifier group in the `modifierGroupReferences` map. This is the same modifier group whose `GUID` is specified in the `sizeSpecificPricingGuid` value. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6781578678687) | References to other, non-size related, modifier groups that modify the Cheese Pizza menu item. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6801578678687) | The Size modifier group for the Cheese Pizza menu item. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6821578678687) | References to the modifier options in the Size modifier group where the individual sizes and prices are defined. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6851578678687) | The Small modifier option, which defines the price of the Small size of the Cheese Pizza menu item. |
| [7](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6871578678687) | The price ($8) of the Small size of the Cheese Pizza menu item. This price is inherited from the Small modifier option's underlying [item reference](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference). |
| [8](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6891578678687) | The `pricingStrategy` for the Small modifier option, inherited from the underlying item reference. |
| [9](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6911578678687) | The `pricingRules` for the Small modifier option, inherited from the underlying item reference. |
| [10](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e6931578678687) | The Large modifier option, which defines the price of the Large size of the Cheese Pizza menu item. |

#### Calculating prices for modifier options that inherit a price from a modifier group

Modifier options that are priced at the group level, using the
[Size
Price](https://doc.toasttab.com/doc/platformguide/adminSizePrice.html), [Sequence Price](https://doc.toasttab.com/doc/platformguide/adminSequencePrice.html), or [Size/Sequence Price](https://doc.toasttab.com/doc/platformguide/adminSizeSequencePrice.html) pricing
strategy, require additional price calculation. You can determine if a
modifier option is priced this way by inspecting the modifier option's
`price` and `pricingStrategy` values. If the
`pricingStrategy` value is `GROUP_PRICE`, then
the modifier option has been priced at the group level. If the
modifier option's `price` value is `null`, it
means that the group price is one that cannot be resolved down to the
modifier option level and it requires additional calculation. This
indicates that the modifier group uses the Size Price, Sequence Price,
or Size/Sequence Price pricing strategy because those are the
group-level pricing strategies that require additional
calculation.

##### Modifier option that inherits a size price from a modifier group

When calculating [size pricing](https://doc.toasttab.com/doc/platformguide/adminSizePrice.html) for a modifier
option, the Toast platform determines which size of a menu item has
been ordered and then it locates the coordinating size and price for
the modifier option. For example, toppings on a small pizza are $1
while toppings on a large pizza are $2. This scenario requires that
both the menu item and the modifier group are configured to use the
Size Price pricing strategy.

In the example below, the Cheese Pizza menu item's
`pricingStrategy` is `SIZE_PRICE` and it has
two sizes defined, Small and Large, priced at $8 and $10
respectively (for information on size pricing for a menu item, see
[Menu item with a size price](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#apiMenuItemWithASizePrice_V2)). The Toppings modifier
group's `pricingStrategy` is also `SIZE_PRICE`
and its sizes and prices are defined in its own
`pricingRules` value.

**Sample JSON for modifier options that inherit Size pricing
from a parent modifier group**

```
{
  "restaurantGuid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  ...
  "menus": [
    {
      "name": "Dinner",
      "guid": "ddd681de-3c12-4d45-b8b1-a5b2ea898210",
      ...
      "menuGroups": [
        {
          "name": "Pizza",
          "guid": "dc868006-919a-4950-a4cc-3a03f9770fd7",
          ...
          "menuItems": [
            {
              "name": "Cheese Pizza",
              "guid": "95c5d500-8d92-46f2-bec4-fb2a42a46621",
              ...
              "price": null,
              "pricingStrategy": "SIZE_PRICE",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              "pricingRules": {
                "timeSpecificPricingRules": [],
                "sizeSpecificPricingGuid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                "sizeSequencePricingRules": []
              },
              ...
              "modifierGroupReferences": [
                2,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                3,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                ...
              ],
              ...
            }
          ]
        }
      ]
    }
  ],
  "modifierGroupReferences": {
    ...
    "2": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "referenceId": 2,
      "name": "Size",
      "guid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",
      ...
      "pricingStrategy": "NONE",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      "pricingRules": null,
      ...
      "modifierOptionReferences": [
        12,![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
        13![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      ],
      ...
    },
    "3": {![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
      "referenceId": 3,
      "name": "Toppings",
      "guid": "58b79986-f88f-411d-ba18-14b1e2441e9d",
      ...
      "pricingStrategy": "SIZE_PRICE",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
      "pricingRules": {
        "timeSpecificPricingRules": [],
        "sizeSpecificPricingGuid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
        "sizeSequencePricingRules": [
          {
            "sizeName": "Small",![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)    (12)
            "sizeGuid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
            "sequencePrices": [
              {
                "sequence": 1,![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)
                "price": 2.0![15](https://doc.toasttab.com/doc/devguide/assets/images/callouts/15.png)
              }
            ]
          },
          {
            "sizeName": "Large",(16)
            "sizeGuid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",(17)
            "sequencePrices": [
              {
                "sequence": 1,
                "price": 4.0(18)
              }
            ]
          }
        ]
      },
      ...
      "modifierOptionReferences": [
        10,(19)
        11(20)
      ],
      ...
    },
    ...
  },
  "modifierOptionReferences": {
    ...
    "10": {
      "referenceId": 10,
      "name": "Mushrooms",
      "guid": "fa24fee9-76c4-40ba-ae3c-7dfccafdd8d3",
      ...
      "price": null,
      "pricingStrategy": "GROUP_PRICE",(21)
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "11": {
      "referenceId": 11,
      "name": "Onions",
      "guid": "afee6be7-8280-4c69-a170-9fdf4c76bf7b",
      ...
      "price": null,
      "pricingStrategy": "GROUP_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "12": {
      "referenceId": 12,
      "name": "Small",(22)
      "guid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",
      ...
      "price": 8.0,(23)
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "13": {
      "referenceId": 13,
      "name": "Large",(24)
      "guid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",
      ...
      "price": 10.0,(25)
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    ...
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8361578678687) | Indicates that the pricing strategy for the Cheese Pizza menu item is `SIZE_PRICE`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8381578678687) | The `GUID` of the Size modifier group that defines the sizes and prices for Cheese Pizza menu item. Note that this is the same modifier group that is referenced in the `modifierGroupReferences` map using the ID `2`. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8401578678687) | Reference to the Size modifier group in the `modifierGroupReferences` map. This is the same modifier group whose `GUID` is specified in the `sizeSpecificPricingGuid` value. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8421578678687) | Reference to the Toppings modifier group. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8441578678687) | The Size modifier group that defines sizes and prices for the Cheese Pizza menu item. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8471578678687) | Prices are defined on the Small and Large modifier options themselves, so the `pricingStrategy` for the Size modifier group is `NONE` and `pricingRules` is `null`. |
| [7](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8491578678687) | Reference to the Small modifier option for the Cheese Pizza menu item. |
| [8](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8511578678687) | Reference to the Large modifier option for the Cheese Pizza menu item. |
| [9](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8531578678687) | The Toppings modifier group. |
| [10](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8551578678687) | Indicates that the pricing strategy for the Toppings modifier group is `SIZE_PRICE`. |
| [11](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8571578678687) | The `GUID` of the Size modifier group that defines sizes and prices for the Cheese Pizza menu item. |
| [12](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8601578678687) | An object that defines the price of toppings added to a Small cheese pizza. |
| [13](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8621578678687) | The `GUID` of the modifier option that defines the matching Small size of the Cheese Pizza menu item. |
| [14](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8641578678687) | The sequence value is always 1 for the `SIZE_PRICE` pricing strategy because there is only one price for each size of the modifier option. (Other pricing strategies use the sequence value to assign a price to a modifier option based on the sequence in which it was ordered.) |
| [15](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8661578678687) | The price for a Small size of a topping ($2). |
| [(16)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8681578678687) | An object that defines the price of toppings added to a Large cheese pizza. |
| [(17)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8701578678687) | The `GUID` of the modifier option that defines the matching Large size of the Cheese Pizza menu item. |
| [(18)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8731578678687) | The price for a Large size of a topping ($4). |
| [(19)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8751578678687) | Reference to the Mushrooms modifier option. |
| [(20)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8771578678687) | Reference to the Onions modifier option. |
| [(21)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8791578678687) | `GROUP_PRICE` indicates that the Mushrooms modifier option inherits its price from its parent modifier group. |
| [(22)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8811578678687) | The modifier option that defines the price of a Small cheese pizza. |
| [(23)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8831578678687) | The price of a Small cheese pizza ($8). |
| [(24)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8861578678687) | The modifier option that defines the price of a Large cheese pizza. |
| [(25)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e8881578678687) | The price of a Large cheese pizza ($10). |

##### Modifier option that inherits a sequence price from a modifier group

When using [sequence pricing](https://doc.toasttab.com/doc/platformguide/adminSequencePrice.html), the cost of
a modifier option depends on the order in which it is added to a
menu item. For example, on a pizza menu item, the first topping is
free, the second topping costs $1.00, the third topping costs $1.50,
and all additional toppings cost $2.00. As modifier options are
added to or removed from the menu item, the cost of the menu item is
updated to reflect those choices.

Unlike the Size Price and Size/Sequence Price pricing
strategies, the Sequence Price pricing strategy has no interaction
with the pricing strategy of the menu item that a modifier option is
applied to. In the example below, the Cheese Pizza menu item has two
sizes, Small ($8) and Large ($10). The first topping added to either
size costs $1, the second topping costs $2, and all additional
toppings cost $2.50. So, a small Cheese Pizza with two toppings
costs $11 while a large Cheese Pizza with two toppings costs
$13.

**Sample JSON for modifier options that inherit Sequence
pricing from a parent modifier group**

```
{
  "restaurantGuid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  ...
  "menus": [
    {
      "name": "Dinner",
      "guid": "ddd681de-3c12-4d45-b8b1-a5b2ea898210",
      ...
      "menuGroups": [
        {
          "name": "Pizza",
          "guid": "dc868006-919a-4950-a4cc-3a03f9770fd7",
          ...
          "menuItems": [
            {
              "name": "Cheese Pizza",
              "guid": "95c5d500-8d92-46f2-bec4-fb2a42a46621",
              ...
              "price": null,
              "pricingStrategy": "SIZE_PRICE",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              "pricingRules": {
                "timeSpecificPricingRules": [],
                "sizeSpecificPricingGuid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                "sizeSequencePricingRules": []
              },
              ...
              "modifierGroupReferences": [
                2,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                4,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                ...
              ],
              ...
            }
          ]
        }
      ]
    }
  ],
  "modifierGroupReferences": {
    ...
    "4": {
      "referenceId": 4,
      "name": "Toppings",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "guid": "2fb9889a-e3e9-4039-9bbd-99defb7f04b1",
      ...
      "pricingStrategy": "SEQUENCE_PRICE",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      "pricingRules": {
        "timeSpecificPricingRules": [],
        "sizeSpecificPricingGuid": null,
        "sizeSequencePricingRules": [
          {
            "sizeName": null,
            "sizeGuid": null,
            "sequencePrices": [
              {
                "sequence": 1,
                "price": 1.0![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
              },
              {
                "sequence": 2,
                "price": 2.0![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
              },
              {
                "sequence": 3,
                "price": 2.5![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
              }
            ]
          }
        ]
      },
      ...
      "modifierOptionReferences": [
        14,![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
        15![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
      ],
      ...
    },
    "2": {![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
      "referenceId": 2,
      "name": "Size",
      "guid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",
      ...
      "pricingStrategy": "NONE",
      "pricingRules": null,
      ...
      "modifierOptionReferences": [
        12,![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
        13![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)
      ],
      ...
    },
  },
  "modifierOptionReferences": {
    ...
    "14": {
      "referenceId": 14,
      "name": "Pepperoni",
      "guid": "11adaad3-c391-42e8-a234-350a16e5a68d",
      ...
      "price": null,
      "pricingStrategy": "GROUP_PRICE",![15](https://doc.toasttab.com/doc/devguide/assets/images/callouts/15.png)
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "15": {
      "referenceId": 15,
      "name": "Sausage",
      "guid": "bd3a44ed-8362-49b8-8f6e-c899480137ff",
      ...
      "price": null,
      "pricingStrategy": "GROUP_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    ...
    "12": {
      "referenceId": 12,
      "name": "Small",
      "guid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",
      ...
      "price": 8.0,(16)
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "13": {
      "referenceId": 13,
      "name": "Large",
      "guid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",
      ...
      "price": 10.0,(17)
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    }
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10441578678687) | Indicates that the pricing strategy for the Cheese Pizza menu item is `SIZE_PRICE`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10461578678687) | The `GUID` of the Size modifier group that defines the sizes and prices for Cheese Pizza menu item. Note that this is the same modifier group that is referenced in the `modifierGroupReferences` map using the ID `2`. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10481578678687) | Reference to the Size modifier group in the `modifierGroupReferences` map. This is the same modifier group whose `GUID` is specified in the `sizeSpecificPricingGuid` value. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10501578678687) | Reference to the Toppings modifier group. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10521578678687) | The Toppings modifier group. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10551578678687) | Indicates that the pricing strategy for the Toppings modifier group is `SEQUENCE_PRICE`. |
| [7](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10571578678687) | The price of the first topping added to the Cheese Pizza menu item ($1). |
| [8](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10591578678687) | The price of the second topping added to the Cheese Pizza menu item ($2). |
| [9](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10611578678687) | The price of the third topping added to the Cheese Pizza menu item ($2.50). Because this is the last price in the sequence, it is also the price of any toppings added beyond the third. |
| [10](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10631578678687) | Reference to the Pepperoni modifier option. |
| [11](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10651578678687) | Reference to the Sausage modifier option. |
| [12](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10681578678687) | The Size modifier group that defines sizes for the Cheese Pizza menu item. |
| [13](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10701578678687) | Reference to the Small modifier option. |
| [14](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10721578678687) | Reference to the Large modifier option. |
| [15](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10741578678687) | `GROUP_PRICE` indicates that the Pepperoni modifier option inherits its price from its parent modifier group. |
| [(16)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10761578678687) | A Small cheese pizza costs $8. |
| [(17)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e10781578678687) | A Large cheese pizza costs $10. |

##### Modifier option that inherits a size/sequence price from a modifier group

With [size/sequence pricing](https://doc.toasttab.com/doc/platformguide/adminSizeSequencePrice.html),
the cost of a modifier option depends on the size of the menu item
it is applied to and the order in which it is applied to the menu
item. For example, the first topping on a small pizza is $0.50 and
additional toppings are $1 while the first topping on a large pizza
is $1.50 and additional toppings are $2.50. To configure
size/sequence pricing, the menu item must use the Size Price pricing
strategy and the modifier group must use the Size/Sequence Price
pricing strategy.

In the example below, the Cheese Pizza menu item's
`pricingStrategy` is `SIZE_PRICE` and it has
two sizes defined, Small and Large, priced at $8 and $10
respectively (for information on size pricing for a menu item, see
[Menu item with a size price](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#apiMenuItemWithASizePrice_V2)). The Toppings modifier
group's `pricingStrategy` is
`SIZE_SEQUENCE_PRICE` and it defines that the first
topping on a small Cheese Pizza costs $1 while the second topping
costs $2. Likewise, the first topping on a large Cheese Pizza costs
$3 and the second topping costs $4.

**Sample JSON for modifier options that inherit Size/Sequence
pricing from a parent modifier group**

```
{
  "restaurantGuid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  ...
  "menus": [
    {
      "name": "Dinner",
      "guid": "ddd681de-3c12-4d45-b8b1-a5b2ea898210",
      ...
      "menuGroups": [
        {
          "name": "Pizza",
          "guid": "dc868006-919a-4950-a4cc-3a03f9770fd7",
          ...
          "menuItems": [
            {
              "name": "Cheese Pizza",
              "guid": "95c5d500-8d92-46f2-bec4-fb2a42a46621",
              ...
              "price": null,
              "pricingStrategy": "SIZE_PRICE",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              "pricingRules": {
                "timeSpecificPricingRules": [],
                "sizeSpecificPricingGuid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                "sizeSequencePricingRules": []
              },
              ...
              "modifierGroupReferences": [
                2,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                5,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                ...
              ],
              ...
            }
          ]
        }
      ]
    }
  ],
  "modifierGroupReferences": {
    ...
    "2": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "referenceId": 2,
      "name": "Size",
      "guid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",
      ...
      "pricingStrategy": "NONE",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      "pricingRules": null,
      ...
      "modifierOptionReferences": [
        12,![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
        13![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      ],
      ...
    },
    "5": {![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
      "referenceId": 5,
      "name": "Toppings",
      "guid": "e65dd350-5628-45fd-993d-8cf9c4f15a76",
      ...
      "pricingStrategy": "SIZE_SEQUENCE_PRICE",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
      "pricingRules": {
        "timeSpecificPricingRules": [],
        "sizeSpecificPricingGuid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
        "sizeSequencePricingRules": [
          {
            "sizeName": "Small",![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
            "sizeGuid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
            "sequencePrices": [
              {
                "sequence": 1,
                "price": 1.0![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)
              },
              {
                "sequence": 2,
                "price": 2.0![15](https://doc.toasttab.com/doc/devguide/assets/images/callouts/15.png)
              }
            ]
          },
          {
            "sizeName": "Large",
            "sizeGuid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",
            "sequencePrices": [
              {
                "sequence": 1,
                "price": 3.0
              },
              {
                "sequence": 2,
                "price": 4.0
              }
            ]
          }
        ]
      },
      ...
      "modifierOptionReferences": [
        16,(16)
        17(17)
      ],
      ...
    },
    ...
  },
  "modifierOptionReferences": {
    ...
    "16": {
      "referenceId": 16,
      "name": "Olives",
      "guid": "8d45403d-5393-4c19-9d11-1dd963df8a26",
      ...
      "price": null,
      "pricingStrategy": "GROUP_PRICE",(18)
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "17": {
      "referenceId": 17,
      "name": "Peppers",
      "guid": "d4977c91-08d3-4060-a7bd-13e19a83e794",
      ...
      "price": null,
      "pricingStrategy": "GROUP_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "12": {
      "referenceId": 12,
      "name": "Small",(19)
      "guid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",
      ...
      "price": 8.0,(20)
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "13": {
      "referenceId": 13,
      "name": "Large",
      "guid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",
      ...
      "price": 10.0,
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    }
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e11991578678687) | Indicates that the pricing strategy for the Cheese Pizza menu item is `SIZE_PRICE`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12011578678687) | The `GUID` of the Size modifier group that defines the sizes and prices for Cheese Pizza menu item. Note that this is the same modifier group that is referenced in the `modifierGroupReferences` map using the ID `2`. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12031578678687) | Reference to the Size modifier group in the `modifierGroupReferences` map. This is the same modifier group whose `GUID` is specified in the `sizeSpecificPricingGuid` value. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12051578678687) | Reference to the Toppings modifier group. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12071578678687) | The Size modifier group that defines sizes and prices for the Cheese Pizza menu item. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12101578678687) | Prices are defined on the Small and Large modifier options themselves, so the `pricingStrategy` for the Size modifier group is `NONE` and `pricingRules` is null. |
| [7](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12121578678687) | Reference to the Small modifier option for the Cheese Pizza menu item. |
| [8](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12141578678687) | Reference to the Large modifier option for the Cheese Pizza menu item. |
| [9](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12161578678687) | The Toppings modifier group. |
| [10](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12181578678687) | Indicates that the pricing strategy for the Toppings modifier group is `SIZE_SEQUENCE_PRICE`. |
| [11](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12201578678687) | The `GUID` of the Size modifier group that defines sizes and prices for the Cheese Pizza menu item. |
| [12](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12231578678687) | An object that defines the price of toppings added to a Small cheese pizza. |
| [13](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12251578678687) | The `GUID` of the modifier option that defines the matching Small size of the Cheese Pizza menu item. |
| [14](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12271578678687) | The price of the first topping added to a Small cheese pizza ($1). |
| [15](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12291578678687) | The price of the second topping added to a Small cheese pizza ($2). Because this is the last price in the sequence, it is also the price of any toppings added beyond the second. |
| [(16)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12311578678687) | Reference to the Olives modifier option. |
| [(17)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12331578678687) | Reference to the Peppers modifier option. |
| [(18)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12361578678687) | `GROUP_PRICE` indicates that the Olives modifier option inherits its price from its parent modifier group. |
| [(19)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12381578678687) | The modifier option that defines the price of a Small cheese pizza. |
| [(20)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e12401578678687) | The price of a Small cheese pizza ($8). |

#### Calculating prices for modifier options that use their item reference price

This section describes the `pricingRules` and
`pricingStrategy` values when you have configured a
modifier option so that it uses the price of its underlying [item
reference](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference) and that item reference uses the Time Specific Price
or Size Price pricing strategy.

##### Modifier option that uses a time specific price from its item reference

The example below shows a modifier group, Toppings, whose
modifier options are individually priced. One of the modifier
options in the Toppings group, Goat Cheese, uses the
`TIME_SPECIFIC_PRICE` pricing strategy. When the Goat
Cheese modifier option is ordered between noon and 2pm, it costs $1.
During the rest of the day, it costs $2.

**Sample JSON for a modifier option that inherits a Time
Specific Price from its item reference**

```
{
  "restaurantGuid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  ...
  "menus": [
    {
      "name": "Dinner",
      "guid": "ddd681de-3c12-4d45-b8b1-a5b2ea898210",
      ...
      "menuGroups": [
        {
          "name": "Pizza",
          "guid": "dc868006-919a-4950-a4cc-3a03f9770fd7",
          ...
          "menuItems": [
            {
              "name": "Cheese Pizza",
              "guid": "95c5d500-8d92-46f2-bec4-fb2a42a46621",
              ...
              "price": null,
              "pricingStrategy": "SIZE_PRICE",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              "pricingRules": {
                "timeSpecificPricingRules": [],
                "sizeSpecificPricingGuid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                "sizeSequencePricingRules": []
              },
              ...
              "modifierGroupReferences": [
                2,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                6,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                ...
              ],
              ...
            }
          ]
        }
      ]
    }
  ],
  "modifierGroupReferences": {
    "6": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "referenceId": 6,
      "name": "Toppings",
      "guid": "a1778e92-7ce9-4b1e-867d-c1effd7478b8",
      ...
      "pricingStrategy": "NONE",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      "pricingRules": null,
      ...
      "modifierOptionReferences": [
        18,![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
        ...
      ],
      ...
    },
    "2": {![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      "referenceId": 2,
      "name": "Size",
      "guid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",
      ...
      "pricingStrategy": "NONE",![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
      "pricingRules": null,
      ...
      "modifierOptionReferences": [
        12,![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
        13![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
      ],
      ...
    },
  },
  "modifierOptionReferences": {
    "18": {
      "referenceId": 18,
      "name": "Goat Cheese",
      "guid": "0ca19f15-184c-4b69-8049-cd50bf96c39e",
      ...
      "price": null,
      "pricingStrategy": "TIME_SPECIFIC_PRICE",![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
      "pricingRules": {
        "timeSpecificPricingRules": [
          {
            "timeSpecificPrice": 1.0,![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
            "basePrice": 2.0,![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)
            "schedule": [![15](https://doc.toasttab.com/doc/devguide/assets/images/callouts/15.png)
              {
                "days": [(16)
                  "MONDAY",
                  "TUESDAY",
                  "WEDNESDAY",
                  "THURSDAY",
                  "FRIDAY",
                  "SATURDAY",
                  "SUNDAY"
                ],
                "timeRanges": [(17)
                  {
                    "start": "12:00",
                    "end": "14:00"
                  }
                ]
              }
            ]
          }
        ],
        "sizeSpecificPricingGuid": null,
        "sizeSequencePricingRules": []
      },
      ...
    },
    "12": {
      "referenceId": 12,
      "name": "Small",(18)
      "guid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",
      ...
      "price": 8.0,(19)
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "13": {
      "referenceId": 13,
      "name": "Large",
      "guid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",
      ...
      "price": 10.0,
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    }
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e13871578678687) | Indicates that the pricing strategy for the Cheese Pizza menu item is `SIZE_PRICE`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e13891578678687) | The `GUID` of the Size modifier group that defines the sizes and prices for Cheese Pizza menu item. Note that this is the same modifier group that is referenced in the `modifierGroupReferences` map using the ID `2`. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e13911578678687) | Reference to the Size modifier group in the `modifierGroupReferences` map. This is the same modifier group whose `GUID` is specified in the `sizeSpecificPricingGuid` value. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e13931578678687) | Reference to the Toppings modifier group. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e13951578678687) | The Toppings modifier group. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e13981578678687) | A price is defined on the Goat Cheese modifier option itself, so the `pricingStrategy` for the Toppings modifier group is `NONE` and `pricingRules` is null. |
| [7](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14001578678687) | Reference to the Goat Cheese modifier option. |
| [8](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14021578678687) | The Size modifier group that defines sizes and prices for the Cheese Pizza menu item. |
| [9](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14041578678687) | Prices are defined on the Small and Large modifier options themselves, so the `pricingStrategy` for the Size modifier group is `NONE` and `pricingRules` is null. |
| [10](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14061578678687) | Reference to the Small modifier option for the Cheese Pizza menu item. |
| [11](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14081578678687) | Reference to the Large modifier option for the Cheese Pizza menu item. |
| [12](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14111578678687) | Indicates that the pricing strategy for the Goat Cheese modifier option is `TIME_SPECIFIC_PRICE`. |
| [13](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14131578678687) | The price of the Goat Cheese modifier option during the time period defined by the schedule value ($1). |
| [14](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14151578678687) | The base price of the Goat Cheese modifier option ($2), used for time periods when a time-specific price has not been defined. |
| [15](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14171578678687) | The schedule for this time-specific price, which defines the days and times the price applies. |
| [(16)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14191578678687) | The days this time-specific price applies (Monday through Sunday). |
| [(17)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14211578678687) | The times this time-specific price applies (noon to 2pm), in the restaurant's local time. |
| [(18)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14241578678687) | The modifier option that defines the price of a Small cheese pizza. |
| [(19)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e14261578678687) | The price of a Small cheese pizza ($8). |

##### Modifier option that uses a size price from its item reference

The example below shows a modifier group, Toppings, whose
modifier options are individually priced. One of the modifier
options in the Toppings group, Tomatoes, uses the
`SIZE_PRICE` pricing strategy. Two sizes and prices are
defined for Tomatoes, Small for $1.50 and Large for $3.50.

**Sample JSON for a modifier option that inherits a Size
Price from its item reference**

```
{
  "restaurantGuid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  ...
  "menus": [
    {
      "name": "Dinner",
      "guid": "ddd681de-3c12-4d45-b8b1-a5b2ea898210",
      ...
      "menuGroups": [
        {
          "name": "Pizza",
          "guid": "dc868006-919a-4950-a4cc-3a03f9770fd7",
          ...
          "menuItems": [
            {
              "name": "Cheese Pizza",
              "guid": "95c5d500-8d92-46f2-bec4-fb2a42a46621",
              ...
              "price": null,
              "pricingStrategy": "SIZE_PRICE",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              "pricingRules": {
                "timeSpecificPricingRules": [],
                "sizeSpecificPricingGuid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                "sizeSequencePricingRules": []
              },
              ...
              "modifierGroupReferences": [
                2,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                6,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                ...
              ],
              ...
            }
          ]
        }
      ]
    }
  ],
  "modifierGroupReferences": {
    "7": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "referenceId": 7,
      "name": "Size",
      "guid": "1517b7a4-612f-4447-ab93-46b989f01b6b",
      ...
      "pricingStrategy": "NONE",
      "pricingRules": null,
      ...
      "modifierOptionReferences": [
        20,![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
        21![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
      ],
      ...
    },
    "6": {
      "referenceId": 6,
      "name": "Toppings",
      "guid": "a1778e92-7ce9-4b1e-867d-c1effd7478b8",
      ...
      "pricingStrategy": "NONE",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      "pricingRules": null,
      ...
      "modifierOptionReferences": [
        19,![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
        ...
      ],
      ...
    },
    "2": {![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
      "referenceId": 2,
      "name": "Size",
      "guid": "23c02762-9d6a-4d3f-a298-71c989bf31b0",
      ...
      "pricingStrategy": "NONE",
      "pricingRules": null,
      ...
      "modifierOptionReferences": [
        12,![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
        13![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
      ],
      ...
    },
  "modifierOptionReferences": {
    "19": {![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
      "referenceId": 19,
      "name": "Tomatoes",
      "guid": "b53cb945-d790-4386-88b5-c29b4f72141f",
      ...
      "price": null,
      "pricingStrategy": "SIZE_PRICE",![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)
      "pricingRules": {
        "timeSpecificPricingRules": [],
        "sizeSpecificPricingGuid": "1517b7a4-612f-4447-ab93-46b989f01b6b",![15](https://doc.toasttab.com/doc/devguide/assets/images/callouts/15.png)
        "sizeSequencePricingRules": []
      },
      ...
      "modifierGroupReferences": [
        7(16)
      ]
    },
    "20": {
      "referenceId": 20,
      "name": "Small",(17)
      "guid": "e5c9883b-5c15-4771-9efa-0a63b9124484",
      ...
      "price": 1.5,
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "21": {
      "referenceId": 21,
      "name": "Large",(18)
      "guid": "269cbff6-2e90-4ef8-8a83-ea5a76fb7199",
      ...
      "price": 3.5,
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "12": {
      "referenceId": 12,
      "name": "Small",(19)
      "guid": "352244f2-a952-4a3a-a3ae-7775fa221ce7",
      ...
      "price": 8.0,
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    },
    "13": {
      "referenceId": 13,
      "name": "Large",(20)
      "guid": "4ff89bca-b448-4892-bc4c-62c37a28ac44",
      ...
      "price": 10.0,
      "pricingStrategy": "BASE_PRICE",
      "pricingRules": null,
      ...
      "modifierGroupReferences": []
    }
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15511578678687) | Indicates that the pricing strategy for the Cheese Pizza menu item is `SIZE_PRICE`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15531578678687) | The `GUID` of the Size modifier group that defines the sizes and prices for Cheese Pizza menu item. Note that this is the same modifier group that is referenced in the `modifierGroupReferences` map using the ID `2`. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15551578678687) | Reference to the Size modifier group in the `modifierGroupReferences` map. This is the same modifier group whose `GUID` is specified in the `sizeSpecificPricingGuid` value. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15571578678687) | Reference to the Toppings modifier group. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15591578678687) | The Size modifier group that defines sizes and prices for the Tomatoes modifier option. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15621578678687) | Reference to the Small modifier option for the Tomatoes modifier option. |
| [7](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15641578678687) | Reference to the Large modifier option for the Tomatoes modifier option. |
| [8](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15661578678687) | Prices are defined on the modifier options themselves, so the `pricingStrategy` is `NONE` and `pricingRules` is null. |
| [9](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15681578678687) | Reference to the Tomatoes modifier option. |
| [10](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15701578678687) | The Size modifier group that defines sizes and prices for the Cheese Pizza menu item. |
| [11](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15721578678687) | Reference to the Small modifier option for the Cheese Pizza menu item. |
| [12](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15751578678687) | Reference to the Large modifier option for the Cheese Pizza menu item. |
| [13](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15771578678687) | The Tomatoes modifier option. |
| [14](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15791578678687) | Indicates that the pricing strategy for the Tomatoes modifier option is `SIZE_PRICE`. |
| [15](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15811578678687) | The `GUID` of the Size modifier group that defines sizes and prices for the Tomatoes modifier option. Note that this is the same modifier group that is referenced in the `modifierGroupReferences` map using the ID `7`. |
| [(16)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15831578678687) | Reference to the Size modifier group that defines sizes and prices for the Tomatoes modifier option. This is the same modifier group whose `GUID` is specified in the `sizeSpecificPricingGuid` value. |
| [(17)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15851578678687) | The modifier option that defines the price of the Tomatoes modifier option when it is applied to a Small cheese pizza. |
| [(18)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15881578678687) | The modifier option that defines the price of the Tomatoes modifier option when it is applied to a Large cheese pizza. |
| [(19)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15901578678687) | The modifier option that defines the price of a Small cheese pizza. |
| [(20)](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#co-d1e15921578678687) | The modifier option that defines the price of a Large cheese pizza. |


---

# Using taxInfo and modifierOptionTaxInfo to calculate taxes for menu items and modifier options - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingTaxInfoAndModifierOptionTaxInfoToCalculateTaxesForMenuItemsAndModOptions.html

### Using taxInfo and modifierOptionTaxInfo to calculate taxes for menu items and modifier options

In Toast Web, you can configure a modifier option's underlying
[item
reference](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference) to use one of the following tax behaviors:

* Inherit item tax rate: The modifier is
  taxed at the same rate as the parent menu item. For example, if the
  menu item is taxed at 6.25%, then the modifier option is also taxed
  at the 6.25% rate. This is the default behavior.
* Unique tax rate applied to modifiers: The
  modifier option is configured with a tax rate that is different from
  the parent menu item and is applied separately from the menu item
  tax rate. For example, a menu item is taxed at a 6.25% rate and the
  modifier option is taxed at a 2.75% rate.

  If the menu item has multiple modifier options, each modifier
  option may have its own unique tax rate. For example, a pizza menu
  item is taxed at 6.25%, a pineapple modifier option has a unique tax
  rate of 4.25%, and a pepperoni modifier option has a unique tax rate
  of 3.50%.
* Modifier tax rate overrides item tax
  rate: The modifier option has a different tax rate than
  its parent menu item and the modifier option tax rate overrides the
  menu item tax rate. This means that both the menu item and the
  modifier option are taxed at the rate configured for the modifier
  option. For example, if the menu item is configured for a 6.25% tax
  rate and the modifier option is configured for a 2.75% tax rate,
  when that modifier option is applied to the menu item, both are
  taxed at the 2.75% tax rate. Note that the menu item's tax rate is
  overridden only if the modifier option is added to the menu item on
  a Toast POS device. The modifier option may be available to apply to
  the menu item, but if it is not added to the menu item on an order,
  then the menu item's tax rate is not overridden.

  Also, if more than one modifier option that is configured to
  override the menu item's tax rates is added to a menu item, the
  Toast platform defaults to using the menu item's tax rate and
  ignores all of the modifier option tax rates.

These three settings are represented by the
`modifierOptionTaxInfo` value of the
`ModifierOption` object that is returned by the
`/menus` endpoint of the menus API. You can use the
`modifierOptionTaxInfo` value in conjunction with the
`taxInfo` value on a `MenuItem` object to
determine the tax on menu items and the modifier options that are
applied to them when an order is placed on the Toast platform.

|  |
| --- |
| Note |
| For detailed instructions for configuring the tax behavior of a modifier option's item reference in Toast Web, see [Taxes on modifiers](https://doc.toasttab.com/doc/platformguide/adminTaxesOnModifiers.html). |

|  |
| --- |
| Note |
| The `modifierOptionTaxInfo` value always reflects the parent menu item tax rate, unless Toast grants the restaurant the ability to override modifier tax rates. If this permission is not granted, then even if the restaurant configured the modifier with a different tax rate, `modifierOptionTaxInfo` reflects the parent menu item tax rate. |

To understand how to calculate menu item and modifier option
taxes, consider the following example of three modifier options that
apply to the same menu item but use different tax behavior
configurations. To begin, we need to know the tax rate assigned to the
menu item, which is specified in the menu item's `taxInfo`
value. The Cheese Pizza menu item below uses the tax rate identified by
the GUID `1a2b`:

```
"menuItems": [
  {
    "name": "Cheese Pizza",
    ...
    "taxInfo": [
      "1a2b"
    ],
    ...
  },
  ...
]
```

Modifier Option 1, shown below, is configured in Toast Web to
inherit its tax rate from a parent menu item. As such, its
`taxRateGuids` value contains the same tax rate GUID as
Cheese Pizza (`1a2b`) and its
`overrideItemTaxRates` value is set to `false`.
With this scenario, you would use the `taxInfo` value in the
`MenuItem` object (`1a2b`) to determine the tax
rate for Cheese Pizza and the `taxRateGuids` value in the
`ModifierOptionTaxInfo` object (also `1a2b`) to
determine the tax rate for Modifier Option 1.

**Modifier Option 1 inherits the parent menu item's tax
rate**

```
"modifierOptionReferences": {
  "7": {
    "referenceId": 7,
    "name": "Modifier Option 1",
    ...
    "modifierOptionTaxInfo": [
      "taxRateGuids": ["1a2b"],
      "overrideItemTaxRates": false
    ],
    ...
  },
  ...
},
```

  

Modifier Option 2 is configured to use its own unique tax rate.
Its `taxRateGuids` value contains the tax rate GUID from its
underlying modifier option item reference (`3c4d`) and its
`overrideItemTaxRates` value is set to `false`.
With this scenario, you use the `taxInfo` value in the
`MenuItem` object (`1a2b`) to determine the tax
rate for Cheese Pizza and the `taxRateGuids` value in the
`ModifierOptionTaxInfo` object (`3c4d`) to
determine the tax rate for Modifier Option 2.

**Modifier Option 2 has its own unique tax rate**

```
"modifierOptionReferences": {
  "9": {
    "referenceId": 9,
    "name": "Modifier Option 2",
    ...
    "modifierOptionTaxInfo": [
      "taxRateGuids": ["3c4d"],
      "overrideItemTaxRates": false
    ],
    ...
  },
  ...
},
```

  

Modifier Option 3 is configured so that its tax rate overrides the
parent menu item's tax rate. Its `taxRateGuids` value
contains the tax rate GUID from its underlying modifier option item
reference (`3c4d)` and its `overrideItemTaxRates`
value is set to `true`. When Modifier Option 3 is applied to
Cheese Pizza in an order, the `taxInfo` value in the
`MenuItem` object for Cheese Pizza (`1a2b`) should
be overridden by the `taxRateGuids` value in the
`ModifierOptionTaxInfo` object for Modifier Option 3
(`3c4d`). This means your integration should use the
`3c4d` tax rate for both Cheese Pizza and Modifier Option
3.

**Modifier Option 3's tax rate overrides the parent menu item's
tax rate**

```
"modifierOptionReferences": {
  "12": {
    "referenceId": 12,
    "name": "Modifier Option 3",
    ...
    "modifierOptionTaxInfo": [
      "taxRateGuids": ["3c4d"],
      "overrideItemTaxRates": true
    ],
    ...
  },
  ...
},
```

  

|  |
| --- |
| Important |
| It is not shown in the examples in this section but the `ModifierOption` object still contains the original `taxInfo` value that stored the tax rate GUIDs for a modifier option's parent menu item. Your integration should switch from using the `taxInfo` value to using the `modifierOptionTaxInfo` value. The `taxInfo` value is no longer accurate for modifier options that do not inherit their tax rates from a parent menu item. |

#### Impact of tax-related features not returned in the ModifierOptionTaxInfo object

There are other tax-related features that can impact the tax of
a modifier option, such as tax inclusion and smart tax, that
*are not* returned in the
`ModifierOptionTaxInfo` object. More information on these
features and their impact on modifier option taxes is provided in
[Tax functionality interaction](https://doc.toasttab.com/doc/platformguide/adminTaxesOnModifiers.html#adminModifierTaxInteraction).


---

# Getting menu information from the configuration API - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/menu_information_config_api.html

### Getting menu information from the configuration API

|  |
| --- |
| Important |
| The menus API has replaced the configuration API as the preferred mechanism for retrieving menu data for a restaurant. It is described in the [Menus API overview](https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html) section. This section remains for customers who have not yet transitioned to using the menus API for menu data retrieval. |

This section explains how to use the Toast configuration API to
get menu information for a restaurant.

The menu resources available from the configuration API provide
JSON representations of the menu components for your restaurant. The
JSON information includes the Toast GUIDs for menu components. You can
use these GUIDs to submit pricing queries to the orders API.

**Menu Resources in the Configuration API**

* `/menus`
* `/menus/{guid}`
* `/menuGroups`
* `/menuGroups/{guid}`
* `/menuItems`
* `/menuOptionGroups`
* `/menuOptionGroups/{guid}`
* `/preModifiers`
* `/preModifiers/{guid}`
* `/preModifierGroups`
* `/preModifierGroups/{guid}`

In a Toast `Menu`, each `MenuGroup` has a
list of `MenuItem`s in its `items` value. Each
`MenuItem` may also have one or more
`MenuOptionGroup`s in its `optionGroup`s value,
which in turn contains further `MenuItem`s that are modifiers
for the primary item. See more information about the data objects that
represent menu components in [MenuItems, MenuGroups, MenuOptionGroups, and Menus](https://doc.toasttab.com/doc/devguide/menu_information_config_api.html#menu-component-data-objects "MenuItems, MenuGroups, MenuOptionGroups, and Menus").

The following example shows the JSON representations of a menu,
composed from configuration API return data. You can get the JSON
representations of each component from the menu resources of the
configuration API. See information about composing a menu from menu
resource return data in [Working with the Toast menu hierarchy](https://doc.toasttab.com/doc/devguide/menu_information_config_api.html#api-working-with-menu-hierarchy "Working with the Toast menu hierarchy").

**JSON Menu Composed from Configuration API Return Data**

```
[
  {
    "entityType":"Menu",
    "name":"Lunch Menu",
    "guid":"a2a0b78a-a480-4adb-bbac-b32a7e0c2a12",
    "groups":[
      {
        "entityType":"MenuGroup",
        "name":"A Twist-On-Fries",
        "guid":"578c5e48-7d99-438f-be61-f4f972569ce6",
        "subgroups":[],
        "items":[
          {
            "entityType":"MenuItem",
            "name":"'Award Winning' Curly-Q Fries",
            "guid":"f21f2250-6f97-4a31-8a78-3283a5be0af4",
            "optionGroups":[
              {
                "entityType":"MenuOptionGroup",
                "name":"Size",
                "guid":"f63f8bd3-9764-4b1b-b3c9-40c8c104b42b",
                "items":[
                  {
                    "entityType":"MenuItem",
                    "name":"Half Basket",
                    "guid":"3c043245-3b4f-4e87-a6c9-6eeeb073518a",
                    "optionGroups":[]
                  },
                  {
                    "entityType":"MenuItem",
                    "name":"Full Basket",
                    "guid":"68343381-290b-4410-9b8a-c8d63d9c9e1a",
                    "optionGroups":[]
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
]
```

  

The following example shows a curl command that places an order
for `'Award Winning' Curly-Q Fries` with `Full
Basket` modifier with the **curl** command and
order JSON shown in the following example.

**Submitting an Order Selection with a Modifier**

```
curl -X POST \
-H "Content-Type: application/json" \
-H "Toast-Restaurant-External-ID: 93d6a5ce-395f-42ca-aa9d-d12a66a3b781" \
-H "Authorization: Bearer eyJhbGciOiJSUzI1NiJ9.eyJhdWQiOlsidG9hc3QiXSwic2
NvcGUiOlsiY2FyZHMiLCJjY3Byb2Nlc3NpbmciLCJkZXZpY2VzIiwic3ZjbWdtdCIsInVzZXJ
tZ210Il0sImV4cCI6MTQ2NDI4ODAwNCwianRpIjoiZWU0ODMyNzYtZmNmZC00ZmM5LThhZjAt
YTE5YzVhNzBmNzg5IiwiY2xpZW50X2lkIjoidG9hc3R3ZWIifQ.WzS6hcLrfXtcsmwXq2u0Ou
CmXBZoBRY0wVk__gNpg8TnV94zEnpB77BkBlVPqKk8YM9_ZOC1MDt4atZVAM_ImiEbtugTF9z
6YPROhhtDYx37BaDNrViUggvhY5PplZND_nSNSgA8nu6CARBIoTcfoWzSg0jj1yR8mUk2edFc
TzU" \
-d '{
    "entityType": "Order",
    "diningOption": {
      "guid": "a8512bcf-fde7-446e-ac31-7c342d4aaaff",
      "entityType": "DiningOption"
    },
    "checks": [
      {
        "entityType": "Check",
        "selections": [
          {
            "entityType": "MenuItemSelection",
            "itemGroup": {
              "guid": "578c5e48-7d99-438f-be61-f4f972569ce6",
              "entityType": "MenuGroup"
            },
            "item": {
              "guid": "f21f2250-6f97-4a31-8a78-3283a5be0af4",
              "entityType": "MenuItem"
            },
            "quantity": 1,
            "modifiers": [{
                "entityType": "MenuItemSelection",
                "optionGroup": {
                  "guid": "f63f8bd3-9764-4b1b-b3c9-40c8c104b42b",
                  "entityType": "MenuOptionGroup"
                },
                "item": {
                  "guid": "68343381-290b-4410-9b8a-c8d63d9c9e1a",
                  "entityType": "MenuItem"
                },
                "quantity": 1,
                "modifiers": []
              }
            ]
          }
        ]
      }
    ]
  }' "https://[toast-api-hostname]/orders/v2/orders"
```

  

#### MenuItems, MenuGroups, MenuOptionGroups, and Menus

The Toast POS represents menus using the following data
objects:

* A `MenuItem` represents a single base product or
  product option. A final line item will correspond to a base
  `MenuItem` and any number of optional
  `MenuItems` made available by
  `MenuOptionGroups` associated with the base
  `MenuItem`. These `MenuOptionGroups` can be
  attached to the `MenuItem` itself or inherited from a
  `MenuGroup` of which the `MenuItem` is a
  member.
* A `MenuOptionGroup` is a collection of optional
  `MenuItems` that modify an associated base
  `MenuItem`. For instance, a "Burger"
  `MenuItem` might have a `MenuOptionGroup`
  called "Condiments" containing "Pickle", "Cheese", and "Tomato"
  `MenuItem`s. If there's only one burger on the
  `Menu`, the "Condiments" group will probably be
  attached directly to the "Burger" `MenuItem`. If the
  `Menu` contains a whole `MenuGroup` of
  various burgers, all of which can be ordered with pickles, cheese,
  or tomato, the `MenuOptionGroup` might instead be
  attached to the `MenuGroup`, and inherited by all the
  `MenuItems` in it.
* A `MenuGroup` is a named logical grouping of
  `MenuItems` and `MenuGroups`. A
  `MenuOptionGroup` attached to a `MenuGroup`
  provides the options in that `MenuOptionGroup` to all
  `MenuItems` in the `MenuGroup`, and to any
  of its child `MenuGroups` that have the
  `inheritOptionGroups` flag set to true.
* A `Menu` is the top-level representation of a
  group of products. A given restaurant might, for instance, have a
  "Lunch" `Menu` and a "Dinner" `Menu`.
  `Menu`s contain any number of `MenuGroup`s,
  and cannot contain `MenuItem`s directly.

Toast also offers pre-modifiers, which can supply additional
information about a modifier, and pre-modifier groups. For more
information, see the [reference
documentation for the configuration API](https://doc.toasttab.com/openapi/configuration/overview/).

#### Working with the Toast menu hierarchy

Toast menus have the following attributes:

* Inheritance: Each MenuGroup can define MenuOptionGroups to
  apply to its containing MenuGroups and MenuItems. The final
  optionGroups in a MenuItem are determined by the
  inheritOptionGroups boolean property. If the value is true, the
  MenuItem takes optionGroups from its containing MenuGroup (which
  in turn may take it from its containing MenuGroup depending on its
  inheritOptionGroups property).
* Arbitrary Depth: A MenuItem can reference a MenuOptionGroup
  that in turn contains MenuItems that refer to MenuOptionGroups,
  and so forth. MenuGroups regularly contain other MenuGroups,
  though we encourage restaurants not to nest deeper than two
  levels.
* Multiple Parentage: Most Toast menu entities can be
  referenced by more than one container. MenuItems can be referenced
  by multiple MenuGroups, and a MenuGroup can be included in
  multiple Menus and MenuGroups. Position in the tree matters: The
  same MenuItem might inherit options from one MenuGroup in one
  subtree, and different options from another MenuGroup in another
  subtree.

##### Raw menu JSON versus resolved menu JSON

There are two different logical representations of a menu. The
configuration API currently operates on a raw menu structure in
which `MenuOptionGroup`s appear at any level as described
above, and inheritance flags are present and necessary to determine
which options are available for which items.

In a resolved menu structure, inheritance information has been
consulted, `MenuOptionGroup`s have been propagated down
to each item to which they apply, and inheritance flags are
withheld. This is a more usable structure, and will eventually be
supported by our APIs. For now, best practice for partners is to
derive this resolved structure from the raw configuration API
results. If Toast provides you with a JSON `Menu` export
for testing purposes, it will be in this format.

The following example demonstrates a simple raw menu
structure. If you need a JSON export of a restaurant menu for
testing, contact Toast integration support. Note that these exports
will include pricing information, which is not yet available through
the API. Actual API responses will also include an additional
`externalId` field, which is omitted here. For more
information, see [External identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html#apiExternalIdentifiers).

```
[
  {
    "entityType":"Menu",
    "name":"Lunch Menu",
    "guid":"a2a0b78a-a480-4adb-bbac-b32a7e0c2a12",
    "groups":[
      {
        "entityType":"MenuGroup",
        "name":"A Twist On Fries",
        "guid":"578c5e48-7d99-438f-be61-f4f972569ce6",
        "subgroups":[],
        "optionGroups": [
          {
            "entityType":"MenuOptionGroup",
            "name":"Size",
            "guid":"f63f8bd3-9764-4b1b-b3c9-40c8c104b42b",
            "items":[
              {
                "entityType":"MenuItem",
                "name":"Half Basket",
                "guid":"3c043245-3b4f-4e87-a6c9-6eeeb073518a",
                "optionGroups":[]
              },
              {
                "entityType":"MenuItem",
                "name":"Full Basket",
                "guid":"68343381-290b-4410-9b8a-c8d63d9c9e1a",
                "optionGroups":[]
              }
            ]
          }
        ]
        "items":[
          {
            "entityType":"MenuItem",
            "name":"'Award Winning' Curly-Q Fries",
            "guid":"f21f2250-6f97-4a31-8a78-3283a5be0af4",
            "optionGroups":[],
            "inheritOptionGroups":true
          }
        ]
      }
    ]
  }
]
```

##### Constructing the menu

A restaurant's complete menu can be reconstructed via API
calls.

In the above example, calling

```
GET /menus/a2a0b78a-a480-4adb-bbac-b32a7e0c2a12
```

returns

```
{
  "entityType":"Menu",
  "name":"Lunch Menu",
  "guid":"a2a0b78a-a480-4adb-bbac-b32a7e0c2a12",
  "groups":[
    {
      "guid":"578c5e48-7d99-438f-be61-f4f972569ce6",
      "entityType": "MenuGroup"
    }
  ]
}
```

Which gives you a list of `MenuGroup` GUIDs. For
each one, you can the call

```
GET /menuGroups/578c5e48-7d99-438f-be61-f4f972569ce6
```

which returns

```
{
  "entityType":"MenuGroup",
  "name":"A Twist On Fries",
  "guid":"578c5e48-7d99-438f-be61-f4f972569ce6",
  "subgroups":[],
  "optionGroups": [
    {
      "entityType":"MenuOptionGroup",
      "guid":"f63f8bd3-9764-4b1b-b3c9-40c8c104b42b"
    }
  "items":[
    {
      "entityType":"MenuItem",
      "guid":"f21f2250-6f97-4a31-8a78-3283a5be0af4"
    }
  ]
}
```

giving you lists of the `MenuItem` GUIDs,
`MenuOptionGroup` GUIDs, and `MenuGroup` GUIDs
(none in this case) in each of those `MenuGroup`s. For
each such GUID, make the appropriate call:

```
GET /menuOptionGroups/f63f8bd3-9764-4b1b-b3c9-40c8c104b42b

{
  "entityType":"MenuOptionGroup",
  "name":"Size",
  "guid":"f63f8bd3-9764-4b1b-b3c9-40c8c104b42b",
  "items":[
    {
      "entityType":"MenuItem",
      "guid":"3c043245-3b4f-4e87-a6c9-6eeeb073518a"
    },
    {
      "entityType":"MenuItem",
      "guid":"68343381-290b-4410-9b8a-c8d63d9c9e1a"
    }
  ]
}
```

In this case we can see that there are two options in the
"Size" `MenuOptionGroup`. These options themselves can of
course be retrieved as above with `GET`
`/menuItems/<guid>`.

Going back up to the "A Twist On Fries" group, make the calls
for the listed `MenuItem`s:

```
GET /menuItems/f21f2250-6f97-4a31-8a78-3283a5be0af4
```

This returns

```
{
  "entityType":"MenuItem",
  "name":"'Award Winning' Curly-Q Fries",
  "guid":"f21f2250-6f97-4a31-8a78-3283a5be0af4",
  "modifierGroups":[],
  "inheritOptionGroups":true
}
```

We've now retrieved all the relevant information, but there is
one more step. Checking the inheritOptionGroups flag on each
MenuItem, we can see that "'Award Winning' Curly-Q Fries" inherits
MenuOptionGroups from its parent, "A Twist On Fries". This means
that the "Size" options apply to it. To derive a resolved Menu
structure from this information, remove the "optionGroups" attribute
from "A Twist On Fries" and copy it into each MenuItem that inherits
it (in this case just "'Award Winning' Curly-Q Fries"). Then remove
the iniheritGroups flag from all menuItems. The final resolved Menu
structure is

```
[
  {
    "entityType":"Menu",
    "name":"Lunch Menu",
    "guid":"a2a0b78a-a480-4adb-bbac-b32a7e0c2a12",
    "groups":[
      {
        "entityType":"MenuGroup",
        "name":"A Twist On Fries",
        "guid":"578c5e48-7d99-438f-be61-f4f972569ce6",
        "subgroups":[],
        "items":[
          {
            "entityType":"MenuItem",
            "name":"'Award Winning' Curly-Q Fries",
            "guid":"f21f2250-6f97-4a31-8a78-3283a5be0af4",
            "optionGroups": [
              {
                "entityType":"MenuOptionGroup",
                "name":"Size",
                "guid":"f63f8bd3-9764-4b1b-b3c9-40c8c104b42b",
                "items":[
                  {
                    "entityType":"MenuItem",
                    "name":"Half Basket",
                    "guid":"3c043245-3b4f-4e87-a6c9-6eeeb073518a",
                    "optionGroups":[]
                  },
                  {
                    "entityType":"MenuItem",
                    "name":"Full Basket",
                    "guid":"68343381-290b-4410-9b8a-c8d63d9c9e1a",
                    "optionGroups":[]
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  }
]
```


---

# Creating analytics API access credentials - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsAccessCreatingCredentials.html

### Creating analytics API access credentials

The following procedure describes how to create analytics API access
credentials in Toast Web.

|  |
| --- |
| Note |
| You can configure configure only one set of analytics API access credentials per management group in Toast Web. |

**To create Analytics API credentials**

1. [Access Toast
   Web](https://doc.toasttab.com/doc/platformguide/adminAccessToastAdminBackend.html).
2. Choose Integrations > Toast API access > Manage
   credentials to open the Manage
   credentials page.

   |  |
   | --- |
   | Note |
   | An active subscription to Toast Restaurant Management Suite Pro or higher is required. |
3. On the Manage credentials page, navigate to
   the Create new credentials button.
4. Select the down arrow and select Analytics
   API. This opens the New Credentials
   page.

   ![Shows the Manage credentials page with the Analytics API button emphasized.](https://doc.toasttab.com/doc/media/api-analytics-access-manage-credentials-page.png)
5. On the New Credentials page, you
   can:

   * View a list of the reporting data that you will have
     read-only access to.
   * View links to documentation.
   * Enter a credential name. Toast support recommends this be a
     name that you can easily reference.
   * View the management group you are creating credentials for
     and the number of locations included.

     ![Shows the credential name, API scopes, and locations fields on the New Credentials page.](https://doc.toasttab.com/doc/media/api-analytics-access-new-credentials-page.png)
6. Select the Create credentials button. This
   navigates you to the Credentials page.

   ![Shows the Credentials page for the credentials just created.](https://doc.toasttab.com/doc/media/api-analytics-access-credentials-page.png)

   On the Credentials page, you can:

   * View and edit the credential set name
   * View the management group used for the credentials set and
     the number of locations included
   * View links to the analytics API documentation and standard
     API access documentation
   * View and copy the API access URL
   * View and copy the API access type
   * View and copy the Client ID
   * View the Client secret

     |  |
     | --- |
     | Note |
     | You can only view the client secret once. |
   * Delete credentials

#### Viewing analytics API access credentials in JSON format

You can choose to view your credentials in JSON format. JSON is
short for JavaScript Object Notation. You can choose to copy your
credentials and include them in the [request for an authentication
token](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthGetTokenRequest).

![Shows credentials in JSON format.](https://doc.toasttab.com/doc/media/api-analytics-access-credentials-json.png)

#### Rotating client secret

|  |
| --- |
| Note |
| Active authentication tokens generated using your credentials will continue to be valid until they expire or are replaced with new authentication tokens. |

A client secret is a private string assigned by Toast to verify
the identity of the partner application to the service API when the
application makes requests to Toast services. It is good security
practice to rotate your client secret to minimize the impact of
potential breaches and to reduce the possibility of compromised
credentials. For more information, see [Credential storage guidelines](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthTokenStorage).

|  |
| --- |
| Note |
| Rotating your client secret may cause disruptions to any integrations using the same credentials. |

**To rotate your client secret:**

1. On the Credentials page, navigate to the
   Client secret information.
2. Select Rotate secret. The Ready
   to rotate the client secret? dialog opens.
3. To confirm, type ROTATE SECRET in the
   text field.
4. Select the Continue button. The
   View the client secret dialog opens.
5. Select View secret. Your new client
   secret appears. Toast support recommends you copy and store your
   client secret in a secure location, such as a password manager. For
   more information, see [Credential storage guidelines](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthTokenStorage).
6. Select the I have copied and saved the client
   secret checkbox.
7. Select the Finish button to finish
   rotating the client secret.

#### Deleting analytics API access credentials

|  |
| --- |
| Note |
| Deleting analytics API access credentials is permanent. You cannot restore deleted credentials. |

To delete your analytics API access credentials, select the
Delete credentials button on the
Credentials page. This opens a confirmation dialog.
In the dialog, type DELETE SECRET in the text field
to confirm deletion of the credentials, and select the
Delete button to finish deleting the
credentials.


---

# Analytics API access overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAnalyticsAccessOverview.html

### Analytics API access overview

If you are a Toast customer looking for insight into your management
groupâs performance, you can use analytics API access to get read-only
access to a specialized set of reporting and operational data. This access
is included with [Restaurant
Management Suite Pro](https://www.toasttab.com/customers/shop/software-services/restaurant-management-suite?tier=Pro) and is enabled through credentials you create
in Toast Web. The analytics API provides narrowly focused, high-value data
on sales, checks, labor, menus, payouts, and guests available only through
this access type. Analytics API access gives you the flexibility to power
custom reports, dashboards, and other business tools using your own
analytics.

For more information about using the analytics API, see [Analytics API overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsOverview.html).

#### Analytics API access requirements

The following are required to enable analytics API access:

* You must be an active employee of the Toast management group
  you are creating credentials for.
* An active subscription to [Toast
  Restaurant Management Suite Pro](https://www.toasttab.com/customers/shop/software-services/restaurant-management-suite?tier=Essentials) or higher. Sign in with your
  Toast Web credentials to be directed to Toast Shop where you can
  purchase RMS. RMS grants you access to the analytics API.
* You must have the Manage Integrations
  permission. For more information, see [Account admin access permissions](https://doc.toasttab.com/doc/platformguide/adminPermissions.html#adminAccountAdminAccessPermissions).

#### Support

Have additional questions? Visit our [Toast
Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics). Login or sign up for an account to
access the Toast Integrations Community Forum.

If your questions contain sensitive information, use this [form](https://tost.co/custom-api-support).

|  |
| --- |
| Note |
| Do not provide your client secret or authentication token in plain text if posting in the Toast Integrations Community Forum. |


---

# API updates may require publishes - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiApiUpdatesMayRequirePublishes.html

### API updates may require publishes

The Toast development team regularly makes updates to the Toast APIs
that add to the data that the APIs return. For some of these API updates,
the new data is not available for a restaurant until after that restaurant
has published from Toast Web.

The menus API has the additional requirement that the restaurant must
make a *menu-related change* and then publish from the
Toast Web. This publish makes the new menu data
available via the menus API. Making a menu-related change forces the
restaurant's menu data to be re-generated. Non-menu-related changes do not
initiate this menu data refresh, hence the requirement that the restaurant
makes a menu-related change before publishing.

The release note for an API update will inform you if a publish, or a
menu-related change and publish, is required for the updated data to be
available.

For information about how to publish configuration changes, see [Publishing updates to restaurant configuration](https://doc.toasttab.com/doc/platformguide/platformPublishingOverview.html).


---

# Refreshing authentication tokens - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAuthTokenRefresh.html

### Refreshing authentication tokens

The `exp` value encoded in the `accessToken`
within the authentication token response indicates the UNIX time when the
token will expire; UNIX time represents the number of seconds past
1970-01-01 00:00:00Z. You refresh your integration's authentication token to
get a new token that you can use after the existing one expires.

Authentication tokens are valid for one day. Multiple requests for
authentication tokens during the same period of token validity will return
the same token and the same expiration time. To ensure that you receive an
authentication token with an expiration time that is later than the
expiration time of your previous authentication token, your client
*must* request a new authentication token during the last
one-minute period that the previous authentication token is valid, or
re-authenticate once the previous token expires.

For example, if your client requests an authentication token at 15:00
and this token expires at 21:00, and then you request another authentication
token at 15:30, you will receive the same authentication token with the same
expiration time (21:00) in the second request. You are not able to request a
new unique authentication token until 20:59 PM. You must either request your
new authentication token between 20:59 and 21:00 PM in order to consistently
have a valid authentication token or request a new authentication token once
the previous token expires.

Toast support recommends that you cache only *one*
copy of the token for all locations instead of caching one copy of the token
per location. This reduces the chances of receiving a 429 rate-limiting
error when authenticating with an expired token. For more information on
authentication rate limits, please see [Authentication rate limit](https://doc.toasttab.com/doc/devguide/apiAuthenticationRateLimit.html).

If you send an expired authentication token in a request to Toast's
APIs, you will receive a 401 error in response. If you receive a 401 error,
your integration *must* stop using this token and must
request a new token to avoid receiving additional 401 errors.


---

# Authentication rate limit - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAuthenticationRateLimit.html

### Authentication rate limit

Your Toast API client must reuse authentication tokens for as long as
possible before getting a new token from the Toast authentication API.
Authentication tokens are typically valid for one day after they are
initially issued.

Try to request no more than one or two authentication tokens per
day.

**Do not request a new authentication token more
than twice in a one-hour period.** Make sure that you implement
client software in a way that reuses authentication tokens for at least 30
minutes.

|  |
| --- |
| Note |
| Your Toast API client software *must* be prepared to reuse authentication tokens and conform to the authentication rate limit.  The current Toast authentication API enforces the [Toast global rate limit](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiToastRateLimits) by IP address on requests for authentication tokens. Future versions of the authentication API may enforce the limit on the number of requests.  If the Toast team determines that you are requesting an unreasonably high number of authentication tokens per hour, the Toast integrations team reserves the right to terminate API access until you can decrease your volume of requests for authentication tokens. |

The length of time that an authentication token is valid depends on
the Toast API environment you are using. The `expires_in` value
in the JSON return data from the user management API indicates the length of
time, in seconds, that the token is valid. For example, if the return data
for an authentication token request includes the value `"expires_in":
3599` you can reuse the authentication token for approximately one
hour. For more information about the return data from the user management
system, see [Getting an authentication token](https://doc.toasttab.com/doc/devguide/authentication.html#getting-authentication-token).


---

# Toast API accounts - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiClientAccounts.html

### Toast API accounts

As part of the API registration process for an API environment, the
Toast integrations team:

* Creates API access accounts.
* Assigns client credentials.
* Grants access to services for restaurants.

#### Client identifier and secret

API users must register with the Toast integrations team for each
environment to obtain the client credentials to use with that environment.
In this context, *client* refers to the software that
you use to exchange information with Toast APIs.

API client credentials include:

* **Client identifier -** A unique
  application identifier that the service API uses to identify the
  partner application. A client identifier is comparable to an account
  name.
* **Client secret -** A private
  string assigned by Toast used to verify the identity of the partner
  application to the service API when the application makes requests to
  Toast services. This secret must be kept private between the partner
  and the Toast integrations team.

  The client secret is similar to a password. Do not use email to
  send or receive a Toast API client secret.

#### Types of Toast API accounts

A Toast API account is one of the following types:

* **Partner API account -** Used by
  integration partners who perform Toast API operations on multiple
  restaurants that are not part of the same restaurant management
  group.

  Individual restaurants choose to give API access to specific
  integration partners.
* **Restaurant management group API accounts
  -** Used by internal or contracted API client software
  developers to perform Toast API operations on restaurants that are
  part of a single restaurant management group.

  An example of a restaurant management group is a restaurant
  chain, with multiple restaurant locations.

##### Partner API accounts

Partner API accounts give an API client access to multiple Toast
platform restaurants that may be part of different restaurant management
groups. Typically, a partner API client account is used by a restaurant
service provider. An individual Toast platform restaurant that uses the
services that you provide can choose to give your API account access to
the restaurant.

You can use a partner API account to perform Toast API operations
for any of the restaurants that you have access to. When you
authenticate with a partner API account, you use the same authentication
token at any of the restaurants.

The following diagram shows a partner API client using a partner
authentication token to perform API operations at any restaurant
location that chooses to give that partner access.

![Diagram that shows the authentication process for a partner API client](https://doc.toasttab.com/doc/media/partner-api-client-authentication.png)

For information about finding the restaurants that your partner
API account has access to, see [Location access](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html).

##### Restaurant management group API accounts

Restaurant management group API accounts give an API client access
to all of the Toast platform restaurants in one restaurant management
group. A restaurant management group might represent a restaurant chain
or it might represent the ownership of a single restaurant
location.

You can use a restaurant management group API account to perform
Toast API operations for any of the restaurants that are part of that
restaurant management group.

The following diagram shows a restaurant management group API
client using a management group authentication token to perform API
operations at any restaurant location that is a part of that restaurant
management group. It does not matter which partners a location has
chosen to connect to.

![Diagram that shows the authentication process for a restaurant management group API client](https://doc.toasttab.com/doc/media/management-group-api-client-authentication.png)


---

# Custom integration overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiCustomIntegrationOverview.html

### Custom integration overview

If you're a Toast customer working with your own development team, you
can build a custom integration specific to your organization's needs. Custom
integrations let you tailor connectivity to your internal systems. They are
typically developed and maintained by your in-house software developers or
trusted technology partners. You request API access through your Toast
account representative. Your API access is customized to your organization's
specific needs.


---

# Deployment best practices - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDeployment.html

### Deployment best practices

When you deploy updates to your integration, use the following best
practices:

**Do not deploy on weekends**
:   Only deploy updates on Monday through Thursday.

    Do not deploy updates on Fridays, Saturdays, or Sundays, because
    of the increased restaurant activity on weekends and the reduced
    availability of Toast technical support.

**Avoid peak traffic hours**
:   Restaurants' peak traffic tends to happen at evening mealtime.
    Do not deploy significant integration updates between 20:00 UTC and
    02:00 UTC.

    These hours correspond to evening meal rush times for a majority
    of Toast platform restaurants in their local timezones.

**Deploy updates incrementally**
:   Deploy updates to a small percentage of customers first and
    gradually increase the deployment percentage over time.

    Toast support recommends that you first deploy to 1% of
    customers, then to 5%, then 10%, 25%, 50%, and finally 100%.

**Monitor errors and roll back if needed**
:   Monitor errors while you deploy updates.

    If you see a significant increase in errors or latency after you
    deploy your change, then roll back your updates.


---

# Deprecated API functions - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html

### Deprecated API functions

This section includes information about Toast API functionality that
is available but is expected to be removed or replaced.

#### Orders

This section includes information about Toast orders API functionality
that is available but is expected to be removed or replaced.

##### Getting order identifiers for a time period (deprecated)

You can send a `GET` request to the
`/orders` endpoint to get a list of the orders that were last
modified during a period of time.

When you send a `GET` request to the
`/orders` endpoint, you specify the period of time that you want
to return orders for by using one of two query parameter
options:

* You can select the orders that were last modified during a time
  period of up to one hour by specifying dates and times in the
  `startDate` and `endDate` query parameters. Note
  that modification includes creation; that is, these query parameters
  will return orders that were created or modified during the specified
  time period.
* You can select the orders that were created during a single
  restaurant business day by setting the `businessDate` query
  parameter. The restaurant's business day cutoff is determined by the
  `closeoutHour` value in the `General` object
  within the `RestaurantInfo` object in the restaurants
  API.

Toast support recommends that you use the `startDate` and
`endDate` query parameters, because these parameters get order
information using the order's *modification* timestamp.
The `businessDate` query parameter gets the information using the
order's *creation* date. This means, for example, that if
you retrieve order GUIDs with the `businessDate` query parameter,
you will not get orders that were modified on that date but created on an
earlier date.

**Request for orders last modified during a time period**

The following example shows the path for a
`GET` request that will return orders last modified
during a one-hour period. The values of the `startDate` and
`endDate` query parameters must be URL encoded. For more
information about date and time formats, see [Dates and timestamps](https://doc.toasttab.com/doc/devguide/api_dates_and_timestamps.html).

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
"https://[toast-api-hostname]/orders/v2/orders?![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
startDate=2019-02-27T09%3A00%3A00.000-0500&
endDate=2019-02-27T09%3A59%3A00.000-0500"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e9309EC9F64-B75D-413A-803D-C8F76FF3D18A) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [2](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e9509EC9F64-B75D-413A-803D-C8F76FF3D18A) | Specify the GUID of the restaurant that created the orders. This must be an individual restaurant, not the GUID for a restaurant group. |
| [3](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e9709EC9F64-B75D-413A-803D-C8F76FF3D18A) | Send a `GET` request to the `/orders` endpoint of the orders API. |
| [4](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e9909EC9F64-B75D-413A-803D-C8F76FF3D18A) | Specify a period of time up to one hour by including dates and times in the *`startDate`* and *`endDate`* query parameters. |

  

**Request for orders created during one business day**

The following example **curl** command shows a
request for all of the orders that were created during one restaurant
business day. Specify the restaurant business day with the
*`businessDate`* query parameter.

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \
"https://[toast-api-hostname]/orders/v2/orders?
businessDate=20190227"
```

  

**Response data containing order GUIDs for one business day**

The following example shows the response data from the
`/orders` endpoint using the
*`businessDate`* query parameter. It contains the GUIDs
of each order that was created at a restaurant during a business day. The
response data from a request using the *`startDate`*
and *`endDate`* query parameters will contain the GUIDs
of orders that were modified or created during the specified time
period.

```
[
  "017fdd94-4a30-4657-9475-b1a684758531",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "a64ce8be-c3d0-44cb-a807-86b997847469",
  "bd1e031e-cb86-4ea5-baea-7a6d887d41d8",

  [contents omitted]

  "12acb0c5-27e1-4022-9ad3-2a58f389d590",
  "b89eb706-55ee-4fa2-915c-377568b831cd",
  "e5f91d49-1167-405d-a809-0e36ce260e3d"
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e11509EC9F64-B75D-413A-803D-C8F76FF3D18A) | The `/orders` endpoint returns a JSON array of order GUIDs. |

#### Authentication

This section includes information about Toast API authentication
functionality that is available but is expected to be removed or
replaced.

##### Legacy API authentication (deprecated)

|  |
| --- |
| Important |
| The API authentication endpoint and procedure described in this section is deprecated. Implement authentication for your Toast API integration using the endpoint and procedure described in [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

You get an authentication token by sending a
`POST` request to the
`/usermgmt/v1/oauth/token` resource of the Toast user management
API. The following example shows the URL of the user management token
endpoint.

```
https://[toast-api-hostname]/usermgmt/v1/oauth/token
```

You must include your client identifier and client secret string in
the message body of a `POST` request for an
authentication token. When the user management API determines that the
client identifier and client secret string are valid, it returns an
authentication token along with a set of data describing the way you can use
it. You receive a client identifier (*`client_id`*) and
client secret string (*`client_secret`*) when you
register to use Toast APIs. For more information, see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

To create the message body of an authentication request, concatenate
your client identifier, client secret string, and the grant type (which is
always *`grant_type=client_credentials`*) using the
syntax for a set of query parameters:

* The `grant_type` is always
  *`grant_type=client_credentials`*.
* Include the client identifier in the
  *`client_id`* parameter.
* Include the client secret string in the
  *`client_secret`* parameter.

|  |
| --- |
| Important |
| You must URL encode the values of each parameter to replace special characters that interfere with processing the string of query parameters. |

The following example shows a concatenated string of the
*`grant_type`*, *`client_id`*, and
*`client_secret`* parameters.

```
grant_type=client_credentials&client_id=my-identifier&client_secret=XwEW%3C%3CvR*k6%3B%23Fp8
```

|  |
| --- |
| Note |
| You must use query parameter syntax for API client credentials, even though you submit them in the message body of a `POST` authentication request. |

The following **curl** command requests an
authentication token from the `usermgmt/v1/oauth/token` resource.
For more information about the curl utility, see <https://curl.haxx.se/>.

```
curl -X POST \
-H "Content-Type: application/x-www-form-urlencoded" \
-d "grant_type=client_credentials&client_id=my-identifier&client_secret=XwEW%3C%3CvR*k6%3B%23Fp8" \
https://[toast-api-hostname]/usermgmt/v1/oauth/token
```

The return data that you receive depends on the type of Toast API
client you are using. Toast APIs support partner clients and restaurant
management group clients. For more information about the types of Toast API
clients, see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

The following sections provide information about the return data
provided for authentication requests for different Toast API client
types.

* [Authentication return data for a partner API client](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiAuthenticationReturnDataPartnerLegacy)
* [Authentication return data for a restaurant management group API
  client](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiAuthenticationReturnDataRestaurantLegacy)

###### Authentication return data for a partner API client

|  |
| --- |
| Important |
| The API authentication endpoint and procedure described in this section is deprecated. Implement authentication for your Toast API integration using the endpoint and procedure described in [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

The user management API returns the following information for a
successful authentication request using a partner API client. For more
information about partner API accounts, see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

* access\_token - an encoded string that
  contains an authentication token. You must present this string when
  you make requests to other, secure Toast API resources.
* token\_type - the OAuth 2 authentication
  scheme used for the authentication token. Toast API authentication
  uses the bearer authentication scheme.
* expires\_in - the number of seconds that the
  authentication token is valid. For example, an authentication token
  might be valid for 3600 seconds after the user management API issues
  it.
* scope - a space-delimited list of Toast
  APIs that will accept the authentication token.

  The user management API does not return a complete list of the
  Toast APIs that your client is authorized to use.
* jti - an identifier for the authentication
  token. You do not need to use the information in this field.
* namingAuthority - the name of your
  organization.
* `partnerGuid` - the Toast POS system unique
  identifier for the integration partner organization.

The following example shows the JSON data that the user management
API returns for a successful authentication request using a partner API
client.

**Authentication return data for a partner API client**

```
{
   "access_token":"eyJhbGciOiJSUzI1NiJ9.eyJhdWQiOlsidG9hc3Q
iXSwibmFtaW5nQXV0aG9yaXR5IjoiVE9BU1RXRUIiLCJzY29wZSI6WyJhY2
Nlc3MtYWxsLXJlc3RhdXJhbnRzIiwiY2FyZHMiLCJjY3Byb2Nlc3NpbmciL
CJjY3Rvb2xpbmciLCJjcm0iLCJjcm0taW50ZXJuYWwiLCJkZXZpY2VzIiwi
ZmVhdHVyZS1mbGFncyIsImJhbGchbC1kYXRhIiwibGFJhbGcLWludGVybmF
sIiwib2F1dGgtY2xpZW50OnJlYWQiLCJwdXJnZSIsInNoYXJkLWJyYWluIi
wic3ZjbWdtdCIsInVzZXJtZ210Il0sImV4cCI6MTUzMjYxNzg2MCwianRpI
joiMGFlYjc4NzctMjRkZS00ZWJlLTg5NTYJhbGcYWNmN2JhNzRlIiwiY2xp
ZWJhbGckIjoidG9hc3R3ZWIifQ.iZsmlBiLo2BnpFikmb9G4rwJ6t3s7y5E
Ht-0nYo7tPV-qwRZKNfJDsjjXqGxey4SjgY3I4_TM5UcDDj5U7hoBNlqwlU
zqUJaoFgNHF273x0-dbRdt5_sagwLl5O7ufrCYTBQky5GASJK7GqhnNAIXb
iNTlbPVwAvrFTbEWcmys0",
   "token_type":"bearer",
   "expires_in":3600,
   "scope":"labor orders usermgmt",
   "jti":"0aeb7877-24de-4ebe-8956-0d4acf7ba74e",
   "namingAuthority":"USEFULRESTAURANSERVICE",
   "partnerGuid": "46a8dba9-b204-38bf-bd76-fb26d74bc513"
}
```

###### Authentication return data for a restaurant management group API client

|  |
| --- |
| Important |
| The API authentication endpoint and procedure described in this section is deprecated. Implement authentication for your Toast API integration using the endpoint and procedure described in [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |

The user management API returns the following information for a
successful authentication request using a restaurant management group API
client. For more information about restaurant management group API
accounts, see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

* access\_token - an encoded string that
  contains an authentication token. You can present this string when you
  make requests to other, secure Toast API resources.
* expires\_in - the number of seconds that the
  authentication token is valid. For example, an authentication token
  might be valid for 3600 seconds after the user management API issues
  it.
* jti - an identifier for the authentication
  token. You do not need to use the information in this field.
* namingAuthority - the name of your
  organization.
* rsGuid - the globally unique identifier
  (GUID) of the top-level unit in your restaurant chain. For example,
  this identifier might be for the parent unit for multiple restaurants,
  or for a single, independent restaurant.
* scope - a space-delimited list of Toast
  APIs that will accept the authentication token.

  The user management API does not return a complete list of the
  Toast APIs that your client is authorized to use.
* token\_type - the OAuth 2 authentication
  scheme used for the authentication token. Toast API authentication
  uses the bearer authentication scheme.

The following example shows the JSON data that the user management
API returns for a successful request using a restaurant management group
client.

**Authentication return data for a restaurant management group
client**

```
{
    "access_token": "eyJhbGciOiJSUzI1NiJ9ciOiJSUzI.e5nQXV0aG
9yaXR5IjoiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjyJhdWQiOlsidG9hc3QiX
SwibmFtaWE4YzQ5YWJlLWFllIjpbImxhYm9yIiwib3JkZXJzIiwidXNlcm1n
bXQiXSwiZXhwIjoxNODItNGFlYy04NDM1LWJhYTRjMjVlYTY2MiIsInNjb3B
Dg0Mzg5ODUwLCJqdGkiOiJlMDxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW
1lIn0YzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZDA.X18_lryUNHaEv
JdWq45F9gdOw2o6VSYTyZwooAJiFMDmN_0y9HzjSg7sddrGatj0xJzts3GJ8
uakbZrtiGJL3txKL1L-K2j1Enoq8An8hEUdYwLzuLwLpCMQzX5pKYtOqDUz_
cetM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28Td2wAR60xczlCF5rna
98RMLN6zY4ffjmljKFZ6QV0KkVppWjEiJn7oSp3Ix3fObxbrvanocx9_OT8S
9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b9bz1FtgOvrClhELxCe8dJy7jiFH
iIylCX1sYzd241Y-gwo007AMgxjH9",
    "expires_in": 3600,
    "jti": "e063f2d3-c4f2-4bf2-82f6-51855c3d013f",
    "namingAuthority": "MYORGANIZATION",
    "rsGuid": "18c49abe-4aec-a2e8-8543-baa4c25ea662",
    "scope": "labor orders usermgmt",
    "token_type": "bearer"
}
```

#### Guests

This section includes information about Toast API guest functionality
that is available but is expected to be removed or replaced.

##### Working with guests (deprecated)

This section provides information about working with restaurant guest
records in Toast APIs. You can use the Toast CRM (customer relations
management) API to perform operations that affect restaurant guest
records.

|  |
| --- |
| Important |
| The CRM API is deprecated and will be replaced by future Toast API functionality. Before beginning development work using the CRM API, contact the Toast technical partnership team to make sure your integration plans are coordinated with upcoming API changes. |

For general information about the way the Toast POS handles guest
records, see [Guest data overview](https://doc.toasttab.com/doc/platformguide/adminGuestDataOverview.html).

The Toast POS creates customer records when:

* The POS processes takeout, delivery, and other types of orders
  that require customer information.
* Restaurant employees give customer credits for future check
  payments.
* The POS issues or imports gift or loyalty cards that require
  customer information.
* Other restaurant and POS operations that include customer
  information.

The following sections provide more information about working with
customers.

* [Searching for guest records](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiSearchingForCustomerRecords)
* [Adding a guest record](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiAddingCustomerRecords)
* [Adding guest credits](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiAddingCustomerCredits)

###### Searching for guest records

To find existing customer records in the Toast POS you send a
`POST` request to the
`/crm/v1/customers/search` endpoint of the CRM API.

You must include A JSON `CustomerSearchRequest` object
containing a `CustomerSearchQuery` object in a
`POST` request to search for existing customer
records. The `CustomerSearchQuery` object includes information
about the customer you are searching for. For example, if you are
searching for a customer record with a telephone number, you submit a
`POST` request including a message body that
consists of a `CustomerSearchRequest` object with a
`query` value containing a `CustomerSearchQuery`
object. The `CustomerSearchQuery` object contains a
`phone` value with the telephone number that you want to
match.

The following example shows the message body for a
`POST` request to the
`/crm/v1/customers/search` endpoint.

**Guest search query message body**

```
{
  "query": {
    "phone": "9876543210"
  }
}
```

###### Adding a guest record

To add a customer record to a restaurant and its restaurant group
you send a `POST` request to the
`/crm/v1/customers` endpoint of the CRM API. The
`POST` request to the customers endpoint creates a
customer record and returns a JSON `Customer` object containing
the new customer information.

Before you add a customer record, you must make sure that the Toast
POS does not have an existing customer record for the customer. The
customers endpoint will create a new customer record each time you submit
a successful POST request. To avoid duplicate customer records for the
same restaurant customer you must:

**Before creating a new guest record**

1. Search for an existing customer record for the restaurant
   customer. For more information, see [Searching for guest records](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiSearchingForCustomerRecords).
2. If one or more customer records match your search criteria, add
   customer credit or perform other customer-related operations on the
   existing customer record.
3. If no existing customer records match your search criteria,
   create a new customer record by sending a
   `POST` request to the
   `/crm/v1/customers` endpoint of the CRM API.

To create a customer record, you must provide a unique identifier
(UUID or GUID) for the customer. The `Customer` object in the
message body of the `POST` request must include a
`guid` value containing a unique UUID or GUID for the new
customer record.

The following example shows the JSON message body content for a
`POST` request to the
`/crm/v1/customers` endpoint.

**Message body content to add a guest**

```
{
  "guid": "743B0D5C-66E4-4A46-B3E2-6694031B180C",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "firstName": "Josephine",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "lastName": "Banton",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "email": "jbanton@example.org"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e1648E813524-E4E5-4A3C-A9B0-E4D395D37745) | Generate a unique identifier for the customer (UUID or GUID). Include the identifier in the `guid` value. |
| [2](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e1668E813524-E4E5-4A3C-A9B0-E4D395D37745) | Include a first name, or given name, for the customer. |
| [3](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e1688E813524-E4E5-4A3C-A9B0-E4D395D37745) | Include a last name, or family name, for the customer. |
| [4](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e1708E813524-E4E5-4A3C-A9B0-E4D395D37745) | You must include either an email address (shown) or a telephone number for the customer. |

  

The following example shows the JSON response data for a
`POST` request to the
`/crm/v1/customers` endpoint.

**Add guest response data**

```
{
  "guid": "743b0d5c-66e4-4a46-b3e2-6694031b180c",
  "entityType": "Customer",
  "firstName": "Josephine",
  "lastName": "Banton",
  "phone": null,
  "email": "jbanton@example.org"
}
```

###### Adding guest credits

To add customer credit value for a restaurant customer, you send a
`POST` request to the
`/crm/v1/`/customers/*`{customerId}`*/creditTransactions
endpoint of the CRM API. Adding customer credit value creates a customer
credit transaction.

To create a customer credit transaction, you must provide a unique
identifier (UUID or GUID) for the transaction. The
`CustomerCreditTransaction` object in the message body of the
`POST` request must include a `guid`
value containing a unique UUID or GUID for the new customer record.

The following example shows the JSON message body content for a
`POST` request to the
`/crm/v1/`/customers/*`{customerId}`*/creditTransactions
endpoint.

**Message body content to add guest credit value**

```
{
  "guid": "65F15E87-F985-4AE4-B970-04CF5F758C17",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "transactionType": "ADD_VALUE",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "amount": 10.00,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "localCreatedDate": "2018-06-16T15:01:14.000+0000"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e305E3AAA573-E85E-49CD-80EE-85E18B5086BE) | Generate a unique identifier for the customer credit transaction (UUID or GUID). Include the identifier in the `guid` value. |
| [2](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e307E3AAA573-E85E-49CD-80EE-85E18B5086BE) | Include the `ADD_VALUE` value when you add customer credit value in a transaction. |
| [3](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e309E3AAA573-E85E-49CD-80EE-85E18B5086BE) | Include the currency amount of the customer credit transaction in the `amount` value. |
| [4](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e311E3AAA573-E85E-49CD-80EE-85E18B5086BE) | Include the date and time that you added customer credits in the `localCreatedDate` value. |

  

The following example shows the JSON response data for a
`POST` request to the
`/crm/v1/`/customers/*`{customerId}`*/creditTransactions
endpoint.

**Add guest credit transaction response data**

```
{
  "guid": "65f15e87-f985-4ae4-b970-04cf5f758c17",
  "entityType": "CustomerCreditTransaction",
  "approver": null,
  "note": null,
  "server": null,
  "amount": 10.01,
  "restaurant": {
    "guid": "76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf",
    "entityType": "Restaurant"
  },
  "transactionDate": "2018-06-16T19:01:14.488+0000",
  "transactionType": "ADD_VALUE",
  "familyGuid": null,
  "localCreatedDate": "2018-06-16T15:01:14.000+0000",
  "device": null,
  "expirationDate": "2018-09-15T06:00:00.000+0000",
  "customer": {
    "guid": "f7111e82-5979-4579-a86b-e91d10ee6d3a",
    "entityType": "Customer"
  }
}
```

#### Menus

This section includes information about Toast API menu functionality
that is available but is expected to be removed or replaced.

##### Getting menu information from the menu data export (deprecated)

|  |
| --- |
| Important |
| The menus API has replaced the the menu data export as the preferred mechanism for retrieving menu data for a restaurant. It is described in the [Menus API overview](https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html) section. This section remains for customers who have not yet transitioned to using the menus API for menu data retrieval, however, the export functionality will be deprecated at some point in the future and this section will be removed. |

You can get detailed information about the menus configured for your
restaurant from the menu data export file. The Toast POS system generates
data export files once a day and makes them available for downloading. This
section provides information about downloading data export files and
understanding the values in menu data export files.

###### Downloading data export files

The Toast platform stores data export files for seven days, and then
they are deleted. When data exports are enabled for your restaurant, the
following items are needed to retrieve your files:

* SFTP User name: This is provided by Toast support.
* SSH key: For more information about generating an SSH key, and
  where to enter this in Toast Web, see [SSH keys](https://doc.toasttab.com/doc/platformguide/adminSshKeys.html).
* Server URL: To locate the appropriate Server URL, navigate to
  Reports > Settings > SSH Keys from the
  Toast Web. Locate your SFTP username and find the Server
  URL.

Export IDs can also be obtained from Toast Web. Navigate to
Reports > Settings > Data Exports and click the
link in the banner at the top of the screen, view restaurant #
mapping to export a file that includes an Export
ID column which includes the ID for each restaurant.

![](https://doc.toasttab.com/doc/media/export_ids_data_export.png)

Prior to downloading data export files, ensure that you have [added an SSH key](https://doc.toasttab.com/doc/platformguide/adminSshKeys.html) to
Toast Web. The following examples describe how to connect to your SFTP
directory for use with the macOSâ¢ terminal and
Windowsâ¢ command prompt. For information about how to
export files using a third party FTP solution see this [Toast
Central article.](https://central.toasttab.com/s/article/Automated-Nightly-Data-Export-1492723819691)

###### Accessing your SFTP directory using macOS terminal

1. **Connect to your SFTP directory**

   To access your restaurant's SFTP directory using terminal use
   the following command:

   ```
   sftp \ 
         -i ~/{SSH_key_filepath} \
         -r {sftp_username}@s-9b0f88558b264dfda.server.transfer.us-east-1.amazonaws.com:{export_id}/{YYYYMMDD}/*
   ```

   Replace the *`{sftp_username}`* and
   *`{export_id}`* placeholders with the details
   you received from Toast support. Change
   *`{YYYYMMDD}`* to the business date of the
   desired export within the last seven days and the
   *`{SSH_key_filepath}`* to the location of your
   SSH key on your machine.

   |  |
   | --- |
   | Note |
   | The *`{filepath}`* used will be the export directory for your restaurant files. |
2. **Exporting files using terminal**

   Once you are connected to the SFTP directory use the
   **ls** command and press Return to
   display all files.

   Export all files using the **get \*** command or
   use **get *`{fileName}`*** to
   export a specific file.

###### Accessing your SFTP directory using Windows command prompt

1. **Connect to your SFTP directory**

   To access your restaurant's SFTP directory using command prompt
   use the following command:

   ```
   sftp -i {SSH_key_filepath} -r {sftp_username}@s-9b0f88558b264dfda.server.transfer.us-east-1.amazonaws.com
   ```

   Replace *`{SSH_key_filepath}`* with the
   location of your SSH key on your machine. Replace
   *`{export_username}`* with the export user name
   you received from Toast support.
2. **Exporting files using command prompt**

   Once you are connected to the SFTP directory, use the
   **ls** command and press Enter to
   display all files.

   To export a file for a specific location and date, use the
   following command:

   ```
   get /{export_id}/{YYYYMMDD} {download_location}
   ```

   Replace *`{export_id}`* with the export
   ID you received from Toast support. Change
   *`{YYYYMMDD}`* to the business date of the
   desired export within the last seven days. Replace
   *`{download_location}`* with the location on
   the local file system where you want the downloaded files to be
   stored.

   To export all files, use the following command:

   ```
   get * {download_location}
   ```

###### Menu Data Export Values

The menu data export includes two types of information:

* Information about each menu item at your restaurant.
* Information about the premodifiers and postmodifiers created at
  your restaurant.

The file name of the menu data export is
`MenuExport_[export file
identifier].json`. The menu data export is in
JavaScript Object Notation (JSON) format. For information about downloading
data export files, see [Downloading data export files](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#downloading-data-export-files).

|  |
| --- |
| Note |
| The JSON format of the menu data export is significantly different than the spreadsheet formats of other Toast POS data exports. JSON is optimized for use by software and the menu data export is intended to assist in integration with Toast POS API clients. |

###### Menus

This section describes information about each menu entity at your
restaurant.

###### Menu

The following table shows the information about each menu at your
restaurant from from the menu data export.

| Field | Description | Data Type |
| --- | --- | --- |
| entityType | The type of the menu component described by this JSON object. The value for a menu object is `Menu`. | String |
| name | A descriptive identifier for the menu. For example, `Food` or `Drinks`. | String |
| guid | The unique identifier for the menu, assigned by the Toast POS. | String |
| description | A written description of the menu. | String |
| groups | A JSON array of [MenuGroup](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#menuExportMenugroup) objects. | JSON array |
| idString | This field is for Toast internal use only. | String |
| orderableOnline | Indicates whether the menu is available for online ordering. Valid values are `true` and `false`. This field is a Boolean version of the orderableOnlineStatus field. | Boolean |
| orderableOnlineStatus | Indicates whether the menu is available for online ordering. Valid values are `YES` and `NO`. This field is a string version of the orderableOnline field. | String |
| visibility | Indicates where the menu is displayed and who can see it. Values are:  * `ALL` - The menu is visible to everyone.   For example, the menu is seen by restaurant employees   using a Toast POS device and by restaurant guests using   the online ordering page. * `POS_ONLY` - The menu is visible only on   Toast POS devices (including kiosks). * `NONE` - The menu is hidden from   everyone. | String |
| startTime | The time of day when a time-based menu becomes available. The value is in milliseconds (for example, `41400000`) since the start of the restaurant's day (the day starts at `0`). When converted to 24-hour clock time, the result should be the same as the startTimeHHmm field. | Int |
| endTime | The time of day when a time-based menu stops being available. The value is in milliseconds (for example, `57600000`) since the start of the restaurant's day (the day starts at `0`). When converted to 24-hour clock time, the result should be the same as the endTimeHHmm field. | Int |
| startTimeHHmm | The time of day when a time-based menu becomes available. The time is in 24-hour HHmm format (for example, `15:45`). This value is a conversion of the startTime field to a more readable format (the day starts at `00:00`). | String |
| endTimeHHmm | The time of day when a time-based menu stops being available. The time is in 24-hour HHmm format (for example, `19:35`). This value is a conversion of the endTime field to a more readable format (the day starts at `00:00`). | String |
| startTimeLocalStandardTime | The time of day when a time-based menu becomes available. The value is in milliseconds since the start of the restaurant's day (the day starts at `0`). The value adds the restaurant timezone's offset (for example, -5 hours in a `23400000` value). Note that Daylight Saving Time (DST) is ignored. When converted to 24-hour clock time, the result should be the same as the startTimeHHmm field. | Int |
| endTimeLocalStandardTime | The time of day when a time-based menu stops being available. The value is in milliseconds since the start of the restaurant's day (the day starts at `0`). The value adds the restaurant timezone's offset (for example, -5 hours in a `36900000` value). Note that Daylight Saving Time (DST) is ignored. When converted to 24-hour clock time, the result should be the same as the startTimeLocalStandardTime field. | Int |
| startTimeHHmmLocalStandardTime | The time of day when a time-based menu becomes available. The time is in 24-hour HHmm format (for example, `15:45`). This value is a conversion of the startTimeLocalStandardTime field to a more readable format (the day starts at `00:00`). | String |
| endTimeHHmmLocalStandardTime | The time of day when a time-based menu stops being available. The time is in 24-hour HHmm format (for example, `19:35`). This value is a conversion of the endTimeLocalStandardTime field to a more readable format (the day starts at `00:00`). | String |
| availableAllTimes | Indicates whether the menu is available at all times of the day. If the value is `false`, then the startTime\* fields and the endTime\* fields list when this time-based menu is available. | Boolean |
| availableAllDays | Indicates whether the menu is available each day of the week. | Boolean |
| daysAvailableString | A JSON array of strings that lists the days of the week when the menu is available. The days are listed in an abbreviated format, such as `Sun` or `Thurs`.  In this example, the menu is available on all days except for Sunday and Saturday:   ``` "daysAvailableString": [    "Mon",    "Tues",    "Wed",    "Thurs",    "Fri" ] ``` | JSON array |
| daysAvailableBits | This field is a numeric version of the daysAvailableString field and is for Toast internal use only. | Int |
| imageLink | A URL to an image located on Amazon S3. For example:  https://s3.amazonaws.com/toasttab/restaurants/restaurant-59760/menu/items/5/item-4989\_149066.jpg | String |

###### MenuGroup

The following table shows the information about each menu group at
your restaurant from the menu data export.

| Field | Description | Data Type |
| --- | --- | --- |
| entityType | The type of the menu component described by this JSON object. The value for a menu object is `MenuGroup`. | String |
| name | A descriptive identifier for the menu group. For example, `Appetizers` or `Entrees`. | String |
| guid | The unique identifier for the menu group, assigned by the Toast POS. | String |
| description | A written description of the menu group. | String |
| subgroups | An array of other `MenuGroup` objects. For example, `Red Wine` is the menu group and it has the subgroups `By the Glass` and `By the Bottle`. | JSON array |
| items | An array of [MenuItem](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#menuExportMenuitem) objects. | JSON array |
| idString | This field is for Toast internal use only. | String |
| imageLink | A URL to an image located on Amazon S3. For example:  https://s3.amazonaws.com/toasttab/restaurants/restaurant-59760/menu/items/5/item-4989\_149066.jpg | String |
| orderableOnline | Indicates whether the menu group is available for online ordering. | Boolean |
| visibility | Indicates where the menu group is displayed and who can see it. Values are:  * `ALL` - The menu group is visible to   everyone. For example, the menu group is seen by   restaurant employees using a Toast POS device and by   restaurant guests using the online ordering page. * `POS_ONLY` - The menu group is visible   only on Toast POS devices (including kiosks). * `NONE` - The menu group is hidden from   everyone. | String |

###### MenuItem

The following table shows the information about each menu item at
your restaurant from the menu data export.

| Field | Description | Data Type |
| --- | --- | --- |
| entityType | The type of the menu component described by this JSON object. The value for a menu item object is `MenuItem`. | String |
| name | A descriptive identifier for the menu item. For example, `Caesar Salad` or `Lemonade`. | String |
| guid | The unique identifier for the menu item, assigned by the Toast POS. | String |
| description | A written description of the menu item. | String |
| sku | The stock keeping unit (SKU) identifier for the item. | String |
| plu | The price lookup (PLU) code for the item. | String |
| maxSelections | This value only applies to items in a [MenuOptionGroup](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#menuExportMenuoptiongroup) object. | Integer |
| price | The amount of money that the item costs, expressed in U.S. dollars. All currency in Toast is treated the same and uses the dollar symbol $. There is no conversion between currency. | Currency |
| prices | An array of menu-specific prices for the item. If an item is included in more than one menu, it can have different prices on each menu. For example, if you have a Lunch menu and a Dinner menu, a menu item can belong to both menus and have one price for the Lunch menu and a higher price for the Dinner menu. | JSON array |
| isDefault | Whether or not the item is selected unless a customer chooses to decline it. | Boolean |
| optionGroups | An array of [MenuOptionGroup](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#menuExportMenuoptiongroup) objects. | JSON array |
| idString | This field is for Toast internal use only. | String |
| itemGroupGuid | The unique identifier of the menu group to which this menu item belongs. | String |
| calories | The caloric value for this menu item. The value can be any positive or negative integer, or zero. | Integer |
| imageLink | A URL to an image located on Amazon S3. For example:  https://s3.amazonaws.com/toasttab/restaurants/restaurant-59760/menu/items/5/item-4989\_149066.jpg | String |
| orderableOnline | Indicates whether the menu item is available for online ordering. | Boolean |
| visibility | Indicates where the menu item is displayed and who can see it. Values are:  * `ALL` - The menu item is visible to   everyone. For example, the menu item is seen by restaurant   employees using a Toast POS device and by restaurant   guests using the online ordering page. * `POS_ONLY` - The menu item is visible   only on Toast POS devices (including kiosks). * `NONE` - The menu item is hidden from   everyone. | String |

###### MenuOptionGroup

The following table shows the information about each menu option
group, or modifier group, at your restaurant from the menu data
export.

| Field | Description | Data Type |
| --- | --- | --- |
| entityType | The type of the menu component described by this JSON object. The value for a menu option group object is `MenuOptionGroup`. | String |
| name | A descriptive identifier for the menu option group. For example, `Substitutions` or `Extras`. | String |
| guid | The unique identifier for the menu option group, assigned by the Toast POS. | String |
| minSelections | The minimum number of options that a customer can choose from the menu option group. If a server must make a selection from the menu option group, the value is `1`. For example, a menu item might require that a customer choose an option from a menu option group that specifies the level of doneness. | Integer |
| maxSelections | The maximum number of options that a customer can choose from the menu option group. If a customer can choose an unlimited number of options from a menu option group, the value is `null`.  As an example of a menu option group with a maximum greater than one, assume this configuration:   ``` Group: Cheese Items: ( Cheddar, American, Swiss ) maxSelections: 2 minSelections: 1 ```   This means:  * You can select AT MOST two different cheeses from   this group to apply on the item (the   `maxSelections` value). * You must select AT LEAST one cheese from this group   to apply on the item (the `minSelections`   value). | Integer or null |
| pricingMode | Indicates how the options in the menu option group affect the price of the menu items they are applied to. Values are:  * `ADJUSTS_PRICE` - Choosing an option from   the menu option group affects the price of the menu item   it applies to. The amount of the adjustment depends on the   price of the option applied. * `FIXED_PRICE` - Choosing an item from the   menu option group affects the price of the item it applies   to. The amount of the adjustment is set at the menu option   group level and applies to all options in the group. Note   that this does not necessarily mean that all options in   the group have an identical price. It means that all   options in the group are treated the same way with respect   to pricing. For example, if the menu option group uses   sequence pricing, and the first two options are free while   the third is $1, the specific modifier that costs $1 is   arbitrary. Fixed refers to the fact that the pricing is   fixed at the modifier group level, not that the price of   each option in the group is constant. * `INCLUDED` - Choosing an option from the   menu option group does not affect the price of the menu   item it applies to (because the price of the option is   included in the price of the menu item it applies   to). | String |
| pricingStrategy | Indicates the way prices are set for the options in this menu option group. Values are:  * `NONE` - Indicates that no pricing   strategy is defined for this menu option group.   `pricingStrategy` is set to `NONE`   if the [pricingMode](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#adminDataExportPricingModeModifierGroup)   is set to `ADJUSTS_PRICE` (prices are set on   individual items in the menu option group, not on the menu   option group itself, so there is no pricing strategy for   the menu option group as a whole) or `INCLUDED`   (no additional cost is charged for the options in the menu   option group). * `BASE_PRICE` - The pricing strategy for   the menu option group is a constant price that does not   change based on other conditions (such as size, sequence   of ordering, and so on). For example, all of the options   in the menu option group cost $1 at all times. * `SEQUENCE_PRICE` - The pricing strategy   for the menu option group is Sequence Price. With sequence   pricing, the order in which options are specified   determines the cost of each option, for example, the first   option costs $1.00, the second costs $1.50, and the third   costs $1.75. * `UNSUPPORTED_STRATEGY` - The pricing   strategy for the menu option group is one that, while it   is supported internally in the Toast POS system, it is not   yet supported for use via API. Currently, two pricing   strategies are unsupported by the API, Size Price and   Size/Sequence Price. | String |
| pricingStrategyRules | An [object](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#menuExportPricingStrategyRules) that contains the pricing rules for the chosen [pricingStrategy](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#adminDataExportPricingStrategyModOptionGroup). If the pricing strategy is `NONE` or `UNSUPPORTED_STRATEGY`, this object is set to `NONE`. | JSON object |
| defaultOptionsChargePrice | Indicates whether the prices associated with the menu option group's default options are added to the cost of the menu items they modify. Values are:  * `NO` - The option price is ignored. No   change is made to the cost of the menu item. * `YES` - The option price is added to the   cost of the menu item. | String |
| defaultOptionsSubstitutionPricing | Indicates whether substitution pricing is enabled for the menu options group. Values are:  * `NO` - Substitution pricing is not   enabled. Removing a default option from a menu item has no   impact on the price of the menu item. * `YES` - Substitution pricing is enabled.   Substitution pricing allows a guest to remove one or more   default options from a menu item and apply the value of   those options toward the purchase of one or more different   options. For example, a guest orders a salad that comes   with chicken by default but asks to substitute salmon for   the chicken. The price of the chicken option is $7. The   price of the salmon option is $9. In this case, the Toast   POS system calculates the difference and charges the   substitution price of $2 for the salmon (not the regular   price of $9).  There are two scenarios that can occur with substitution pricing:  * If the substitution options cost the same as or less   than the default options, then no price adjustments occur.   The menu item costs the same as it does with the default   options. * If the substitution options cost more than the   default options, then the Toast POS system calculates the   difference in price and reprices the substitution options   accordingly. For example, if you remove a default option   that costs $10 and replace it with two options that cost   $8 and $7, then the cost of the replacement options is $5   ($8 + $7 - $10 = $5). | String |
| items | An array of the objects that represent the options in the menu option group. | JSON array |
| idString | This field is for Toast internal use only. | String |
| visibility | Indicates where the menu option group is displayed and who can see it. Values are:  * `ALL` - The menu option group is visible   to everyone. For example, the menu option group is seen by   restaurant employees using a Toast POS device and by   restaurant guests using the online ordering page. * `POS_ONLY` - The menu option group is   visible only on Toast POS devices (including   kiosks). * `NONE` - The menu option group is hidden   from everyone. | String |

###### PricingStrategyRules

The following table shows the information about the pricing
strategy for the modifier groups at your restaurant from the menu data
export.

| Field | Description | Data Type |
| --- | --- | --- |
| basePrice | Used when the [pricingStrategy](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#adminDataExportPricingStrategyModOptionGroup) is set to `BASE_PRICE`. Defines a constant price for all of the options in the menu options group. For example:   ``` "optionGroups": [  {   "guid": "7aeae7d5-8891-4fa1-bcbd-647ad1f16c66",   "name": "Toppings",   ...   "pricingStrategy":"BASE_PRICE",   "pricingStategyRules": {     "basePrice": 1.00     }   ... } ``` | Number |
| numberOfLevels | Used when the [pricingStrategy](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#adminDataExportPricingStrategyModOptionGroup) is set to `SEQUENCE_PRICE`. Defines the number of levels for the sequence price. For example, if you have three levels, you can set a price for the first option added to the order, the second option added to the order, and all options added from the third option on. Used in conjunction with the [sequencePrices](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#adminDataExportSequencePrices) array. | Number |
| sequencePrices | Sets the price for each level defined in the [numberOfLevels](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#adminDataExportNumberOfLevels) value. For example:   ``` "optionGroups": [  {   "guid": "7aeae7d5-8891-4fa1-bcbd-647ad1f16c66",   "name": "Toppings",   ...   "pricingStrategy": "SEQUENCE_PRICE",   "pricingStrategyRules": {     "numberOfLevels": 3,     "sequencePrices": [       0.50,       0.75,       1.00,     ]   }   ... } ``` | JSON array |

###### Premodifiers and postmodifiers

This section describes:

* `premodifierGroup` objects. Each premodifier group
  contains a group of `premodifier` objects.
* `premodifier` objects. Each premodifier can be a
  premodifier or postmodifier item.

###### premodifierGroups

The following table shows the information about the premodifier
groups at your restaurant from the menu data export.

| Field | Description | Data Type |
| --- | --- | --- |
| name | A descriptive identifier for a `premodifierGroup` object. | String |
| guid | The unique identifier for the premodifier group, assigned by the Toast POS. | String |
| isDefault | Whether or not the item is selected unless a customer chooses to decline it. | Boolean |
| premodifiers | An array of [premodifiers](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#menuExportPremodifier) objects. | JSON array |

###### premodifiers

The following table shows the information about the premodifiers
or postmodifiers at your restaurant from the menu data export.

| Field | Description | Data Type |
| --- | --- | --- |
| name | A descriptive identifier for a specific premodifier or postmodifier in a `premodifiers` object. For example, `ADD` or `ON SIDE`. | String |
| guid | The unique identifier for the premodifier or postmodifier, assigned by the Toast POS. | String |
| basePrice | If `scalePrice` is `false`, this amount is added to the price. Note that the amount can be 0.00 (so that the price remains the same) and it can also be a negative value (which will reduce the price). | Currency |
| scalePrice | Determines how the price is scaled. Values are:  * `true` - multiplies the price by the   `scaleFactor` value. * `false` - does not multiply the price but   instead adds the `basePrice` value to the   item. | Boolean |
| scaleFactor | If `scalePrice` is `true`, the item price is multiplied by this factor. | Number |
| displayMode | Determines the modifier type. Values are:  * `PREFIX` - specifies a premodifier. This   means the name of this premodifier is displayed as a   prefix before the name of the modifier. For example, if   the modifier is named `Bacon` and the   premodifer is named `ADD`, the full display   will be `ADD Bacon`. * `SUFFIX` - specifies a postmodifier. This   means the name of this premodifier is displayed as a   suffix after the name of the modifier. For example, if the   modifier is named `Bacon` and the postmodifer   is named `ON SIDE`, the full display will be   `Bacon ON SIDE`. | String |

###### Finding the default modifiers for a menu item

When you create an order using the orders API, you must include all of
the default modifiers for each menu item selection. If you omit a default
modifier, the orders API will not apply it to the menu item. You can find
the default modifiers for a menu item in the menu data export file for your
restaurant. For general information about the menu data export file, see
[Getting menu information from the menu data export
(deprecated)](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiMenuInformationMenuDataExport).

The menu data export file contains a JSON representation of the menus
configured for your restaurant. The nested hierarchical structure of the
JSON matches the structure of your menus. For example, a menu JSON object
contains menu group objects, which contain menu item objects. The
`optionGroups` value for a menu item includes
`MenuOptionGroup` objects for the types of modifier that you can
apply to the item. The `MenuItem` objects in the items value of
the `MenuOptionGroup` object are the modifier menu items that you
can apply. For example, a salad menu item might have a toppings menu option
group that contains menu items such as tomatoes or onions that you can apply
as modifiers. The `MenuItem` objects in a
`MenuOptionGroup` include an `isDefault` value to
indicate whether or not the modifier item is a default modifier for the menu
item.

The following example shows a menu, menu group, menu item, and
modifier menu items in the JSON menu data export file.

**Menu hierarchy in the menu data export file**

```
{
  "entityType": "Menu",
  "name": "Dinner",
  "guid": "7d9e0d3d-b844-4133-943a-4b8d0c160786",
  "groups": [
    {
      "entityType": "MenuGroup",
      "name": "Salads",
      "guid": "bd56a9b4-89c4-4105-bd8e-cdd5d95a1e3c",
      "items": [
        {
          "entityType": "MenuItem",
          "name": "Garden Salad",
          "guid": "ca6c1271-6efb-470e-aa95-da4380d6bf62",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)

          [contents omitted]

          "optionGroups": [![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
            {
              "entityType": "MenuOptionGroup",
              "name": "Toppings",
              "guid": "be8ff99e-8cfe-4641-88ef-6f4f32d00535",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)

              [contents omitted]

              "items": [
                {
                  "entityType": "MenuItem",
                  "name": "Banana peppers",
                  "guid": "3ad58e65-6daf-4c51-90ef-1af45bc33ac3",

                  [contents omitted]

                  "isDefault": false,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                },
                {
                  "entityType": "MenuItem",
                  "name": "Tomatoes",
                  "guid": "c95060c2-5aa6-44b2-a9d2-b2c1f01468ac",

                  [contents omitted]

                  "isDefault": true,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
                },
          
    [contents omitted]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e465A2FDFF6-1785-406C-970F-4C5331B7DDF8) | The GUID of a menu item. |
| [2](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e485A2FDFF6-1785-406C-970F-4C5331B7DDF8) | The `optionGroups` value contains information about the groups of items that you can apply as modifiers. |
| [3](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e505A2FDFF6-1785-406C-970F-4C5331B7DDF8) | The GUID of one group of modifier menu items. |
| [4](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e525A2FDFF6-1785-406C-970F-4C5331B7DDF8) | This item is not a default modifier for the menu item. |
| [5](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e545A2FDFF6-1785-406C-970F-4C5331B7DDF8) | This item is a default modifier for the menu item. |

  

The following example shell script uses a **jq**
command to select the default modifiers for a menu item from the menu data
export file for a restaurant. For more information about the
**jq** utility, see the [jq web site](https://stedolan.github.io/jq/).

**Using the jq utility to find the default modifiers for a menu
item**

```
#!/bin/bash

MENU_EXPORT_FILE="MenuExport_5c2dad3f-1b13-5be3-bc52-d132244153c5.json"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)

MENU_GUID="315267d2-80fd-4aef-95aa-62adf41bdb7a"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
MENU_GROUP_GUID="974c43f7-a357-4bef-92aa-00a1238e22e1"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
MENU_ITEM_GUID="dc426c22-e132-4adf-4adf-d82b1fe512b3"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)

jq --arg MENU_GUID ${MENU_GUID} \![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
--arg MENU_GROUP_GUID ${MENU_GROUP_GUID} \
--arg MENU_ITEM_GUID ${MENU_ITEM_GUID} \
'.[] | select(.guid==$MENU_GUID) | .groups[] | select(.guid==$MENU_GROUP_GUID)
| .items[] | select(.guid==$MENU_ITEM_GUID) | .optionGroups[].items[] 
| select(.isDefault==true)' \![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
${MENU_EXPORT_FILE}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e31A5DAB7DB-524E-4BD7-B772-27EB69622FF0) | The menu data export file contains a JSON representation of the menus configured for your restaurant. For general information about the menu data export file, see [Getting menu information from the menu data export (deprecated)](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiMenuInformationMenuDataExport). |
| [2](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e33A5DAB7DB-524E-4BD7-B772-27EB69622FF0) | To find the default modifiers for a menu item, you locate the item in the menu and menu group that contain that contain it. This variable stores the GUID of the menu that contains the item. |
| [3](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e35A5DAB7DB-524E-4BD7-B772-27EB69622FF0) | This variable stores the GUID of the menu group that contains the item. |
| [4](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e37A5DAB7DB-524E-4BD7-B772-27EB69622FF0) | This variable stores the GUID of the menu item that this example script finds the default modifiers for. |
| [5](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e39A5DAB7DB-524E-4BD7-B772-27EB69622FF0) | This **jq** command filters the JSON contents of the menu data export file. For more information about the **jq** utility command syntax, see the [jq web site](https://stedolan.github.io/jq/). |
| [6](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#co-d1e42A5DAB7DB-524E-4BD7-B772-27EB69622FF0) | These **jq** command filters select one menu item from its menu and menu group. It then selects each menu item in the `optionGroup` array for that menu item if the `isDefault` value for the `optionGroup` is `true`. |

  

The following example shows menu items that are the default modifiers
for a menu item. These menu item objects were filtered from the menu data
export file for a restaurant using the jq command shown in [Using the jq utility to find the default modifiers for a menu
item](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiUsingJqToFindDefaultModifiers).

**Default modifiers for a menu item**

```
{
  "entityType": "MenuItem",
  "name": "Cucumber",
  "guid": "e47b25f2-2c13-4428-b344-34b3214515d1",
  "description": "",
  "sku": null,
  "plu": null,
  "maxSelections": null,
  "price": 0,
  "isDefault": true,
  "optionGroups": [],
  "idString": null
}
{
  "entityType": "MenuItem",
  "name": "Green Peppers",
  "guid": "f9ec9a05-5c60-42dc-ad17-db0fb6be93c7",
  "description": "",
  "sku": null,
  "plu": null,
  "maxSelections": null,
  "price": 0,
  "isDefault": true,
  "optionGroups": [],
  "idString": null
}
{
  "entityType": "MenuItem",
  "name": "Onions",
  "guid": "ececb63f-0491-4955-9331-4ad2cd685e60",
  "description": "",
  "sku": null,
  "plu": null,
  "maxSelections": null,
  "price": 0,
  "isDefault": true,
  "optionGroups": [],
  "idString": null
}
{
  "entityType": "MenuItem",
  "name": "Tomato",
  "guid": "cb5dc6ee-2c25-4fcc-aff8-8452c9bf19e1",
  "description": "",
  "sku": null,
  "plu": null,
  "maxSelections": null,
  "price": 0,
  "isDefault": true,
  "optionGroups": [],
  "idString": null
}
{
  "entityType": "MenuItem",
  "name": "Garlic Croutons",
  "guid": "17831034-c2bc-4cca-b845-c52f441955be",
  "description": "",
  "sku": null,
  "plu": null,
  "maxSelections": null,
  "price": 0,
  "isDefault": true,
  "optionGroups": [],
  "idString": null
}
```

##### Menu entity visibility enhancements (rolled out)

The following sections describe changes to the visibility settings for
menu entities (menus, menu groups, menu items, modifier groups, modifier
options and their underlying item references). Visibility settings control
where a menu entity is visible and, by extension, available for ordering.
For example, visibility settings control whether an entity can be ordered on
a Toast POS device, on a Toast Kiosk, via a restaurant's Toast online
ordering website, or via a restaurant's integration with another online
ordering system.

Previously, a menu entity's visibility was controlled by several,
separate settings in Toast Web. The visibility changes described in this
release note:

* Make the settings easier to understand and more intuitive to use
  by combining them into one cohesive set of configuration options with
  better labeling.
* Allow a restaurant to specify which menu entities are visible on a
  restaurant's Toast Online Ordering website, which are visible on online
  ordering websites that integrate with the Toast POS system using the
  orders API, and which are visible on both.
* Allow a restaurant to specify that a menu entity is visible on a
  restaurant's Toast Online Ordering website but not on a Toast POS
  device. Previously, in order for an entity to be available on Toast
  online ordering, it had to also be available on Toast POS
  devices.

To support the new visibility functionality, user interface changes
have been made to the menu entity details pages in Toast Web and a set of
corresponding changes have been made to the menus and configuration APIs.
More information is provided about these UI and API changes in the [Understanding the new visibility behavior](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiUnderstandingTheNewVisibilityBehavior) section.

If you are an online ordering partner, the visibility changes require
that you:

* Use the `visibility` array available in the menus API
  for each menu entity to determine if the menu entity should be visible
  on your ordering web site. See [Understanding the new visibility behavior](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiUnderstandingTheNewVisibilityBehavior) for
  details.
* Stop using the `visibility` and
  `orderableOnline` values on the `Menu`,
  `MenuGroup`, and `MenuItem` objects in the
  configuration API. While these values will continue to exist for a short
  period so that integrations do not break, they will be populated
  differently after 2020-05-25 and integrations that use them will
  potentially see unexpected behavior after this date.

To allow you to develop against the new `visibility` array,
the sandbox environment now includes both Toast Web configuration options
and the API changes, while the production environment includes the API
updates only. This will allow you to set the configuration options in
sandbox and develop and test against them, and then move your code to
production in preparation for when restaurants will begin using the new
configuration options. On 2020-05-25, the new visibility configuration
options will become available to restaurants in the production environment.
This is the date after which your partner restaurants may start using them
and your integration must be able to handle the new API in the production
environment.

|  |
| --- |
| Note |
| To conserve the use of system resources, the menus API service only generates the JSON that it returns when a menu-related change has been made and published. This means that, when a restaurant makes changes to its menu visibility settings in Toast Web after 2020-05-25, they will have to publish those changes before the menus API can return them to your integration. |

* [Understanding the new visibility behavior](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiUnderstandingTheNewVisibilityBehavior)
* [Understanding the Grubhub enumeration](https://doc.toasttab.com/doc/devguide/apiDeprecatedApiFunctions.html#apiUnderstandingTheGrubhubEnumeration)

###### Understanding the new visibility behavior

To understand the visibility changes, it is helpful to understand
the old behavior. Previously, menu entities in the Toast POS system had
several configuration options in Toast Web for controlling where an entity
was visible and available for ordering. On the menu entity details pages,
those settings look liked this:

![](https://doc.toasttab.com/doc/media/original-visibility-settings.png)

And this:

![](https://doc.toasttab.com/doc/media/show-on-kiosk.png)

|  |
| --- |
| Note |
| The Grubhub setting was only visible at Toast POS system restaurants that used a legacy Grubhub integration, so not all restaurants would have seen this option. |

These original settings were represented in the menus API by a
`visibility` array that was included for each menu entity. A
menu entity's `visibility` array would contain various
combinations of the following enums, depending on how the menu entity was
configured:

* `POS`: The menu entity is visible in the Toast POS
  app.
* `TOAST_ONLINE_ORDERING`: The menu entity is visible
  on the Toast Online Ordering site for this restaurant.
* `KIOSK`: The menu entity is visible on a Toast Kiosk
  device.
* `GRUBHUB`: The menu entity is included during a menu
  sync to Grubhub and will be visible on the Grubhub online ordering
  service after a menu sync has completed.

Grubhub was the only online ordering integration that the menus
API's `visibility` array explicitly identified. In other words,
you could tell if a menu entity should be visible on the Grubhub online
ordering site by using the `GRUBHUB` enum, but no equivalent
indicator existed for other online ordering integrations.

The configuration API is older and it treats orderable online and
visibility as two separate concepts. In the configuration API, the
original menu visibility settings were represented by:

* An `orderableOnline` value on the `Menu`,
  `MenuGroup`, and `MenuItem` objects that could
  be set to `Yes` or `No`. Some integrations used
  this value to determine whether a menu entity should be included in an
  online ordering integration.
* A `visibility` value on the `Menu`,
  `MenuGroup`, and `MenuItem` objects. All of the
  values in this array, however, were related to the visibility of a
  menu entity on a Toast POS device and had no bearing on whether an
  entity could be ordered online or not.

The Grubhub and Show on
Kiosk configuration options were not represented in the
configuration API.

As stated earlier, the menu visibility enhancements combine the
original visibility settings into one cohesive set of options with better,
more intuitive labeling. The following illustration shows the new combined
settings, which all reside in the Visible To
configuration option on a menu entity's details page:

![](https://doc.toasttab.com/doc/media/visible-to-config-options.png)

These configuration options have a one-to-one relationship with an
enum in the `visibility` array that the menus API returns for
each menu entity. The table below describes the behavior of each option
and defines the enum used to represent it in the `visibility`
array:

| Configuration option | Menus API Visibility Array Enum | Description |
| --- | --- | --- |
| In-store orders: POS | `POS` | The menu entity is visible on a Toast POS device. |
| In-store orders: Kiosk | `KIOSK` | The menu entity is visible on a Toast Kiosk device. |
| Online orders: Toast | `TOAST_ONLINE_ORDERING` | The menu entity is visible on a restaurant's Toast online ordering site. |
| Online orders: Ordering partners | `ORDERING_PARTNERS` | The restaurant wants the menu entity to be visible on online ordering sites that integrate with the Toast POS system using the orders API. |

To sum up, the effect of these changes for online ordering partners
are as follows:

* Ordering partner integrations should no longer use the
  `orderableOnline` value in the configuration API to
  determine if a menu entity should be visible on their online ordering
  site. Instead, an online ordering integration should inspect the
  `visibility` array that the menus API returns for all menu
  entities for the existence of the `ORDERING_PARTNERS` enum
  and only display menu entities where that enum exists. The Toast
  technical integrations team also recommends that partners discontinue
  using the configuration API for retrieving any menu-related data and
  use the menus API instead.
* If your ordering partner integration used the
  `TOAST_ONLINE_ORDERING` enum in the menus API
  `visibility` array to determine if a menu entity should be
  available on your ordering site, you must switch to using the
  `ORDERING_PARTNERS` enum instead. The
  `TOAST_ONLINE_ORDERING` enum is now used exclusively to
  indicate a menu entity's availability on a restaurant's Toast online
  ordering site. Only menu entities whose `visibility` array
  includes the `ORDERING_PARTNERS` enum should be shown on
  ordering partner web sites.

|  |
| --- |
| Note |
| For historical reasons, modifier groups currently do not have the Online orders: Toast option in the Visible To settings in Toast Web. This omission does not affect partner implementations because the Online orders: Toast option only impacts whether a menu entity is available on a restaurant's Toast Online Ordering site. In other words, the omission of this setting has no bearing on whether the modifier group is visible to a partner integration's online ordering site. The Online orders: Toast option will be added to modifier groups in a future release. Also, the `TOAST_ONLINE_ORDERING` enum is included in the `visibility` array for all modifier groups, regardless of the Visible To settings. This is a temporary condition that will be fixed soon. It should not impede the ability for partners to use, test, and code against the new Visible To settings because the `TOAST_ONLINE_ORDERING` enum is intended for the use of Toast Online Ordering only. |

###### Understanding the Grubhub enumeration

Conceptually, the Grubhub setting has been
replaced by the more general Online orders: Ordering
partners setting and restaurants that used the
Grubhub setting will automatically be migrated to the
new Ordering partners setting. This means that any
menu entity that had the Grubhub setting set to
Yes will now have the Online orders:
Ordering partners option enabled and, in the menus API
`visibility` array, the `ORDERING_PARTNERS` enum
will be present. In the short term, however, the `visibility`
array will continue to contain the `GRUBHUB` enum for backwards
compatibility. In the future, the `GRUBHUB` enum will be
removed.

|  |
| --- |
| Note |
| The Grubhub setting was only visible at Toast POS system restaurants that used a legacy Grubhub integration, so not all restaurants would have seen this option. |


---

# Toast developer portal - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html

### Toast developer portal

#### Developer portal overview

The Toast developer portal allows you to easily view and manage your
credentials and scopes, access technical documentation, and connect with
the Toast integration community.

To use the developer portal, you need:

* To be a Toast integration partner
* A production Toast developer portal account

  |  |
  | --- |
  | Note |
  | Your developer portal account is created by the Toast Developer Relations team during onboarding, once you are approved as a Toast integration partner. For more information, see [Integration partnership process](https://doc.toasttab.com/doc/devguide/integrationDevProcess.html).  For developer portal account assistance, visit the [Toast Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics) and open a support request with the Toast Developer Relations team. |

##### Activating your account

Once your developer portal account is created by the Toast Partner
Connect team, you will receive a welcome email from Toast with a link to
activate and set up your account.

**To activate your developer portal account**

1. In the developer portal account welcome email, select the
   Set up your account button. This opens the
   account activation page in the Toast developer portal.

   ![Toast developer portal welcome email.](https://doc.toasttab.com/doc/media/developer-portal-welcome-email.png)
2. Enter your password and select the
   Activate button to save your password and
   activate your developer portal account.

   ![Toast developer portal Account activation page.](https://doc.toasttab.com/doc/media/developer-portal-account-activation-page.png)
3. Select the Login now button. Your account
   is activated and you are logged into the developer portal. You can
   also log in to the developer portal through this [link](https://developer.toasttab.com/v1/home).

##### Using the developer portal

On the developer portal home page, you can:

* View API operational status
* View technical documentation

  + View cookbooks
  + View the Developer guide
  + View API references
  + View the Platform guide
  + View API and Platform release notes
* Visit the Toast Integrations Community Forum
* View and manage your credentials
* View your connected restaurants
* View and manage your Toast Partner Integrations marketplace
  listing
* View and manage your payment methods
* View and manage your webhooks
* Submit feedback and request support

![Toast developer portal Home page.](https://doc.toasttab.com/doc/media/developer-portal-home-page.png)

###### Environment selector

|  |
| --- |
| Note |
| To get access to the environment selector, open a support request with the Toast Developer Relations team. For more information, see [Getting help with your integration](https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html#apiDeveloperPortalMarketplaceListingHelpLinks). |

The environment selector allows you to manage
environment-specific data. You can switch between sandbox and
production [environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html) using the environment
selector dropdown menu. You can manage and view environment-specific
data on the following pages:

* Credentials
* Connected restaurants
* Marketplace listing
* Webhooks

The following image shows the environment selector on the Toast
developer portal page.

![The environment selector on the developer portal.](https://doc.toasttab.com/doc/media/developer-portal-environment-switcher.png)

###### API status

The API status button on the top navigation
bar opens the [Toast APIs status](https://status-dev.toasttab.com/)
and incident history page.

###### Documentation

The Documentation button on the top
navigation bar opens the [Technical
Documentation site](https://doc.toasttab.com/doc/devguide/index.html). The site has links to various
documentation resources useful for integration developers.

###### Community

The Community button on the top navigation
bar opens the [Toast
Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics). In the forum, you can read
announcements and news, ask questions, and submit feature
requests.

##### Credentials

The Credentials page contains your API
credentials. Your API credentials grant you access to Toast resources
and allow you to securely send API requests. For more information about
credentials, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html).

The Credentials page contains your
Client name, Client ID, and
Client secret.

![Toast developer portal Credentials page.](https://doc.toasttab.com/doc/media/developer-portal-credentials-page.png)

To copy your Client name or Client
ID, select the Copy button to copy the
information to your clipboard. To rotate your Client
secret, select the Rotate button to open
the Ready to rotate the client secret dialog. In
the Ready to rotate the client secret dialog,
confirm you want the existing client secret to expire and want to create
a new client secret. To confirm, type ROTATE SECRET
in the text field and then select the Continue
button.

![Toast developer portal Rotate secret dialog.](https://doc.toasttab.com/doc/media/developer-portal-rotate-secret-dialog-box.png)

|  |
| --- |
| Note |
| Rotating your client secret terminates the existing client secret for Toast API access and creates a new client secret to replace it. The active authentication token generated using your credentials is valid until it expires or is replaced with a new authentication token. |

###### Scopes

The Scopes page contains the API scopes
associated with your developer portal account. Access to Toast APIs,
specific endpoints, and specific API endpoint operations is controlled
by the scopes that are associated with your client credentials. For
more information, select the [Scope Descriptions](https://doc.toasttab.com/doc/devguide/apiScopes.html) link.

![Toast developer portal Scopes page.](https://doc.toasttab.com/doc/media/developer-portal-scopes-page.png)

###### API access endpoint

The API access endpoint page displays the endpoint you can use
to access Toast's production environment. For more information, see
[Environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html).

![Toast developer portal API access point page.](https://doc.toasttab.com/doc/media/developer-portal-access-point-page.png)

##### Connected restaurants

The Connected Restaurants page displays all
the restaurants that are connected to your integration.

You can filter your connected restaurants by custom date range. To
filter by date range, select the date picker and enter your custom date
range. Select the Apply button to apply the custom
date range filter. The Connected Restaurants page
displays a list of connected restaurants that match your filter.

You can also enter words into the search field to search for
connected restaurants. As you type, the developer portal automatically
searches and shows a list of connected restaurants that match the
entered characters. For example, if you search for "island", your search
results may display a restaurant located in Long Island, and another
with "island" in the restaurant name.

You can also export a report of your connected restaurants by
selecting the Export button. The report contains
the same information that is displayed on the Connected
Restaurants page.

![Toast developer portal Connected restaurants page.](https://doc.toasttab.com/doc/media/developer-portal-connected-restaurants-page.png)

##### Marketplace listing

The Toast Partner Integrations marketplace
listing page is where you can manage the details of your
Toast Partner Integrations listing. Your
marketplace listing provides information about your integration, such as
a description, logo, and support details. Toast Partner
Integrations is Toast's integration management portal. For
more information about Toast Partner Integrations,
see [Set
Up Toast Partner Integrations](https://central.toasttab.com/s/article/Toast-Partner-Connect-Setting-Up-Integrations-with-Toast).

You can edit your integrationâs sandbox or production marketplace
listing using the [environment
selector](https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html#apiDeveloperPortalEnvironmentSelector). Select the environment to edit that environmentâs
integration marketplace listing details and appearance.

![Toast developer portal Partner Integrations marketplace page.](https://doc.toasttab.com/doc/media/developer-portal-marketplace-listing.png)

On the Toast Partner Integrations marketplace
listing page, you can edit and view your integration listing
using the progress bar to guide you through the setup process. You can
edit how your integrationâs listing appears on Toast Partner
Integrations by selecting the Edit
details button.

**To edit your integration listing**

|  |
| --- |
| Note |
| You can proceed forward through the setup process by selecting the Continue button or go back to the previous section by selecting the Back button. |

1. On the Toast Partner Integrations marketplace
   listing page, select the Edit
   details button. This opens the About your
   app section. This is the first section of the integration
   setup process. Each section of the setup process is listed
   below:

   * About your app:

     + Onboarding email address: This is
       the email address that Toast uses to send integration
       communication requests to.
     + Categories: This field is
       automatically populated and cannot be edited. The categories
       listed correspond to categories listed on the Add
       Integrations page in Toast Web. To edit
       categories, select the open a ticket
       link to open a support request with the Toast Developer
       Relations team.
     + Available in: This field is
       automatically populated and cannot be edited. To edit your
       integrationâs country availability, select the
       open a ticket link to open a support
       request with the Toast Developer Relations team.
   * Support:

     + Support phone number: This is the
       phone number that directs Toast customers to contact if they
       need help with your integration.
     + Company website URL: This is the
       website URL of your integrationâs website.
     + Support email address: This is
       email address that directs Toast customers to contact if
       they need help with your integration.
   * Marketplace listing:

     |  |
     | --- |
     | Note |
     | A preview of your Toast Partner Integrations listing appears to the right of the Marketplace listing section. The preview displays your logo, short description, and categories. Buttons and links are disabled in the preview. Your integration's description and image are visible to all Toast customers who subscribe to Toast Partner Integrations. |

     + Application logo: Delete your
       application image, or upload or drag and drop a new image
       that will appear on your integrationâs Toast
       Partner Integrations listing.
     + Short description: Enter a short
       description for your integration. The description is visible
       to all Toast customers who have access to Toast
       Partner Integrations. The description cannot
       exceed 120 characters.
     + Primary action label: This field
       is automatically populated and cannot be edited. The primary
       action label appears on the action button on your
       integration's marketplace listing. To edit your primary
       action label, select the open a ticket
       link to open a support request with the Toast
       Developer Relations team.
     + Primary action reference: This
       field is automatically populated and cannot be edited. The
       primary action reference directs customers to an external
       link to either learn more about the integration, request a
       demo, or complete an action. To edit your primary action
       reference, select the open a ticket
       link to open a support request with the Toast Developer
       Relations team.

       |  |
       | --- |
       | Note |
       | You can also set optional secondary action labels and references that will appear on your Toast Partner Integrations listing. To edit your secondary action label or action reference, select the Open a support ticket link to open a support request with the Toast Developer Relations team. |
2. Select the Submit button to save your
   changes or the Back button to go back to the
   previous section.

###### Getting help with your integration

You can use the links to the right of the About your
app section to learn more about integrations or to open a
support request. Select the links to:

* Learn more about what happens when a [restaurant
  adds your integration](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html) in Toast Partner
  Integrations.
* Learn more about the [Partners webhook](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html) and how to use it to be notified
  when a restaurant adds your integration.
* Visit the [Toast
  Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics) and open a support request
  with the Toast Developer Relations team.

##### Payment methods

|  |
| --- |
| Important |
| This feature is in limited release. |

The Payment methods page displays your
payment method configurations and their statuses. On the
Payment methods page, you can also choose to add a
payment method configuration or edit an existing configuration.

![Payment method configurations page on developer portal.](https://doc.toasttab.com/doc/media/developer-portal-payment-methods-page.png)

###### Adding a payment method configuration

Use the procedure below to add a new payment method
configuration.

**To add a new payment method configuration**

1. On the Payment methods page, select the
   + Add a configuration button. This opens the
   Add configuration dialog.
2. In the Add configuration dialog, enter
   a name for the new configuration and toggle on or off the
   following payment methods: Apple Pay, Google Pay, and Keyed-in
   cards.
3. Select the Save button or select the
   Cancel button to close out of the
   dialog.

![Add payment method configurations dialog on developer portal.](https://doc.toasttab.com/doc/media/developer-portal-add-payment-methods.png)

###### Editing a payment method configuration

On the Payment methods page, you can edit
an existing payment method configuration. Select the arrow next to the
payment method configuration to open the Edit
configuration dialog. In the dialog, you can:

* Edit the configuration name
* Toggle payment methods on or off

Select the Update button to save your
changes or select the Cancel button to close out
of the dialog.

![Edit payment method configurations dialog on developer portal.](https://doc.toasttab.com/doc/media/developer-portal-edit-payment-methods.png)

##### Webhooks

The Webhooks page displays all your webhook
subscriptions and their statuses, webhook subscription GUIDs, webhook
event categories, and additional information. For more information about
webhooks, see [Webhooks reference](https://doc.toasttab.com/doc/devguide/apiWebhooksReference.html).

![Toast developer portal Webhooks page.](https://doc.toasttab.com/doc/media/developer-portal-webhooks-page.png)

On the Webhooks page, you add a new webhook
subscription or view and edit details of a webhook subscription.

###### Adding a new webhook subscription

Use the procedure below to add a new webhook
subscription.

**To add a new webhook subscription**

1. On the Webhooks page, select the
   + Add webhook button to open the
   Add webhook page.
2. On the Add webhook page, complete the
   following fields:

   * Event category: Select your event
     category from the drop-down menu. For more information, see
     [Webhooks reference](https://doc.toasttab.com/doc/devguide/apiWebhooksReference.html).
   * Webhook URL: Enter the URL of the
     webhook consumer service that receives the webhook
     events.
   * Webhook name: The name is
     automatically populated after you select the Event
     category.

     ![Toast developer portal add Webhooks page.](https://doc.toasttab.com/doc/media/developer-portal-add-webhook-page.png)
   * Notification email: The email
     address that messages and notifications are sent to if Toast
     experiences an outage, breakage, or delays with webhook
     endpoints.
3. Select the Save button to save your
   changes or the Cancel button to close out of
   the page.

###### Viewing webhook subscription details

On the Webhooks page, you can view details
about your webhook subscription. To view details, select the webhook
link or the View button. This opens the
Webhooks events page where you can view the
follow details:

* Webhook name
* Notification email address
* Webhook URL
* Webhook status
* Event category
* Secret key. For more information, see [Message signing](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html).

To view additional details about a webhook event, select the
webhook GUID link. This opens the Event details
dialog. In the Event details dialog, you can view
the following information:

* Webhook GUID: The identifier of the webhook. The GUID is
  unique per event subscription.
* Webhook URL: The URL of the webhook consumer service that
  receives the webhook events.
* Subscription GUID: This identifies the partner and the event
  category.
* Event category: The classification for the type of events
  the webhook sends.
* Event type: The name of the specific type of webhook
  event.
* Event GUID: The identifier of the webhook event. The GUID is
  unique per webhook event.
* Webhook event status.
* Date and time of the webhook event.
* Number of webhook attempts.
* Response code.
* Route key.
* Signature. For more information, see [Message signing](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html).
* Webhook request body.

  ![Toast developer portal Webhook event details page.](https://doc.toasttab.com/doc/media/developer-portal-webhook-event-details-page.png)

###### Filtering webhook subscription events

Use the procedure below to filter events associated with your
webhook subscription.

**To filter webhook events**

1. On the Webhooks events page, select the
   Filters button to open the
   Filters panel. You can filter by the
   following options:

   * Webhook event status:

     + All
     + Success
     + Pending
     + Not sent
     + Failure
   * Date range
   * Time period
2. Select the Apply filters button to
   apply the filters. This displays a list of webhook event results.
   Each webhook event result displays the following information and
   available actions:

   * Webhook GUID. This is the identifier of the webhook. The
     GUID is unique per event subscription.
   * Date and time the webhook event was initially sent to
     the webhook URL.
   * Number of webhook attempts. For more information about
     retry attempts, see [Retry support](https://doc.toasttab.com/doc/devguide/apiRetrySupport.html).
   * Webhook response code.
   * Webhook event status.
   * Replay button. This requests the
     webhook message be resent.

   ![Toast developer portal Webhook events page.](https://doc.toasttab.com/doc/media/developer-portal-webhooks-events-page.png)

###### Editing webhook subscription details

|  |
| --- |
| Note |
| You can edit webhook details on the Edit webhook page. You can navigate to the Edit webhook page by selecting the Edit button next to the webhook link on Webhooks page or by selecting the Edit webhook button on the Webhook events page. |

Use the procedure below to edit details about your webook
subscription or delete your subscription.

**To edit webhook details**

1. Navigate to the Edit webhook page from
   the Webhooks page or from the
   Webhooks events page.

   ![Toast developer portal Edit webhook page.](https://doc.toasttab.com/doc/media/developer-portal-edit-webhook-page.png)
2. On the Edit webhook page, you can edit
   the following fields:

   * Webhook URL
   * Webhook name
   * Notification email address

   |  |
   | --- |
   | Note |
   | The event category cannot be edited. |
3. Select the Save button to save your
   changes, the Cancel button to close out of
   the page, or the Delete button to be directed
   to open a support request with the Toast Developer Relations
   team.

   ![Toast developer portal Delete webhook dialog.](https://doc.toasttab.com/doc/media/developer-portal-delete-webhook-page.png)

##### Activity log

|  |
| --- |
| Note |
| The Activity Log page does not track user actions taken in Toast Web. |

The Activity Log page displays a list of the
instances when the client secret was rotated. You can rotate the client
secret on the [Credentials](https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html#apiDeveloperPortalCredentials) page.

![Toast developer portal Activity log page.](https://doc.toasttab.com/doc/media/developer-portal-activity-log-page.png)

You can filter your activity log by custom date range. To filter
by date range, select the date picker and enter your custom date range.
Select the Apply button to apply the custom date
range filter. The Activity Log displays a list of
activities that match your filter, or displays a message notifying you
that no activities match your filter.

##### Support and feedback

You can find help and provide feedback on the Toast developer
portal by selecting the Support or
Feedback tabs on the left navigation pane. The tabs
open the [Toast
Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics) where you can view support articles
or submit a request.

##### User guide

You can view the Developer guide by selecting the User
guide tab on the left navigation pane. The tab opens to the
[Toast
developer portal overview](https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html).


---

# Toast developer portal - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDeveloperPortalCustomIntegrations.html

### Toast developer portal

#### Developer portal overview

The Toast developer portal allows you to easily view and manage your
credentials and scopes, access technical documentation, and connect with
the Toast integration community.

To use the developer portal, you need:

* To be a Toast integration partner
* A production Toast developer portal account

  |  |
  | --- |
  | Note |
  | Your developer portal account is created by the Toast Developer Relations team during onboarding, once you are approved as a Toast integration partner. For more information, see [Integration partnership process](https://doc.toasttab.com/doc/devguide/integrationDevProcess.html).  For developer portal account assistance, visit the [Toast Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics) and open a support request with the Toast Developer Relations team. |

##### Activating your account

Once your developer portal account is created by the Toast Partner
Connect team, you will receive a welcome email from Toast with a link to
activate and set up your account.

**To activate your developer portal account**

1. In the developer portal account welcome email, select the
   Set up your account button. This opens the
   account activation page in the Toast developer portal.

   ![Toast developer portal welcome email.](https://doc.toasttab.com/doc/media/developer-portal-welcome-email.png)
2. Enter your password and select the
   Activate button to save your password and
   activate your developer portal account.

   ![Toast developer portal Account activation page.](https://doc.toasttab.com/doc/media/developer-portal-account-activation-page.png)
3. Select the Login now button. Your account
   is activated and you are logged into the developer portal. You can
   also log in to the developer portal through this [link](https://developer.toasttab.com/v1/home).

##### Using the developer portal

On the developer portal home page, you can:

* View API operational status
* View technical documentation

  + View cookbooks
  + View the Developer guide
  + View API references
  + View the Platform guide
  + View API and Platform release notes
* Visit the Toast Integrations Community Forum
* View and manage your credentials
* View your connected restaurants
* View and manage your Toast Partner Integrations marketplace
  listing
* View and manage your payment methods
* View and manage your webhooks
* Submit feedback and request support

![Toast developer portal Home page.](https://doc.toasttab.com/doc/media/developer-portal-home-page.png)

###### Environment selector

|  |
| --- |
| Note |
| To get access to the environment selector, open a support request with the Toast Developer Relations team. For more information, see [Getting help with your integration](https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html#apiDeveloperPortalMarketplaceListingHelpLinks). |

The environment selector allows you to manage
environment-specific data. You can switch between sandbox and
production [environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html) using the environment
selector dropdown menu. You can manage and view environment-specific
data on the following pages:

* Credentials
* Connected restaurants
* Marketplace listing
* Webhooks

The following image shows the environment selector on the Toast
developer portal page.

![The environment selector on the developer portal.](https://doc.toasttab.com/doc/media/developer-portal-environment-switcher.png)

###### API status

The API status button on the top navigation
bar opens the [Toast APIs status](https://status-dev.toasttab.com/)
and incident history page.

###### Documentation

The Documentation button on the top
navigation bar opens the [Technical
Documentation site](https://doc.toasttab.com/doc/devguide/index.html). The site has links to various
documentation resources useful for integration developers.

###### Community

The Community button on the top navigation
bar opens the [Toast
Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics). In the forum, you can read
announcements and news, ask questions, and submit feature
requests.

##### Credentials

The Credentials page contains your API
credentials. Your API credentials grant you access to Toast resources
and allow you to securely send API requests. For more information about
credentials, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html).

The Credentials page contains your
Client name, Client ID, and
Client secret.

![Toast developer portal Credentials page.](https://doc.toasttab.com/doc/media/developer-portal-credentials-page.png)

To copy your Client name or Client
ID, select the Copy button to copy the
information to your clipboard. To rotate your Client
secret, select the Rotate button to open
the Ready to rotate the client secret dialog. In
the Ready to rotate the client secret dialog,
confirm you want the existing client secret to expire and want to create
a new client secret. To confirm, type ROTATE SECRET
in the text field and then select the Continue
button.

![Toast developer portal Rotate secret dialog.](https://doc.toasttab.com/doc/media/developer-portal-rotate-secret-dialog-box.png)

|  |
| --- |
| Note |
| Rotating your client secret terminates the existing client secret for Toast API access and creates a new client secret to replace it. The active authentication token generated using your credentials is valid until it expires or is replaced with a new authentication token. |

###### Scopes

The Scopes page contains the API scopes
associated with your developer portal account. Access to Toast APIs,
specific endpoints, and specific API endpoint operations is controlled
by the scopes that are associated with your client credentials. For
more information, select the [Scope Descriptions](https://doc.toasttab.com/doc/devguide/apiScopes.html) link.

![Toast developer portal Scopes page.](https://doc.toasttab.com/doc/media/developer-portal-scopes-page.png)

###### API access endpoint

The API access endpoint page displays the endpoint you can use
to access Toast's production environment. For more information, see
[Environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html).

![Toast developer portal API access point page.](https://doc.toasttab.com/doc/media/developer-portal-access-point-page.png)

##### Connected restaurants

The Connected Restaurants page displays all
the restaurants that are connected to your integration.

You can filter your connected restaurants by custom date range. To
filter by date range, select the date picker and enter your custom date
range. Select the Apply button to apply the custom
date range filter. The Connected Restaurants page
displays a list of connected restaurants that match your filter.

You can also enter words into the search field to search for
connected restaurants. As you type, the developer portal automatically
searches and shows a list of connected restaurants that match the
entered characters. For example, if you search for "island", your search
results may display a restaurant located in Long Island, and another
with "island" in the restaurant name.

You can also export a report of your connected restaurants by
selecting the Export button. The report contains
the same information that is displayed on the Connected
Restaurants page.

![Toast developer portal Connected restaurants page.](https://doc.toasttab.com/doc/media/developer-portal-connected-restaurants-page.png)

##### Marketplace listing

The Toast Partner Integrations marketplace
listing page is where you can manage the details of your
Toast Partner Integrations listing. Your
marketplace listing provides information about your integration, such as
a description, logo, and support details. Toast Partner
Integrations is Toast's integration management portal. For
more information about Toast Partner Integrations,
see [Set
Up Toast Partner Integrations](https://central.toasttab.com/s/article/Toast-Partner-Connect-Setting-Up-Integrations-with-Toast).

You can edit your integrationâs sandbox or production marketplace
listing using the [environment
selector](https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html#apiDeveloperPortalEnvironmentSelector). Select the environment to edit that environmentâs
integration marketplace listing details and appearance.

![Toast developer portal Partner Integrations marketplace page.](https://doc.toasttab.com/doc/media/developer-portal-marketplace-listing.png)

On the Toast Partner Integrations marketplace
listing page, you can edit and view your integration listing
using the progress bar to guide you through the setup process. You can
edit how your integrationâs listing appears on Toast Partner
Integrations by selecting the Edit
details button.

**To edit your integration listing**

|  |
| --- |
| Note |
| You can proceed forward through the setup process by selecting the Continue button or go back to the previous section by selecting the Back button. |

1. On the Toast Partner Integrations marketplace
   listing page, select the Edit
   details button. This opens the About your
   app section. This is the first section of the integration
   setup process. Each section of the setup process is listed
   below:

   * About your app:

     + Onboarding email address: This is
       the email address that Toast uses to send integration
       communication requests to.
     + Categories: This field is
       automatically populated and cannot be edited. The categories
       listed correspond to categories listed on the Add
       Integrations page in Toast Web. To edit
       categories, select the open a ticket
       link to open a support request with the Toast Developer
       Relations team.
     + Available in: This field is
       automatically populated and cannot be edited. To edit your
       integrationâs country availability, select the
       open a ticket link to open a support
       request with the Toast Developer Relations team.
   * Support:

     + Support phone number: This is the
       phone number that directs Toast customers to contact if they
       need help with your integration.
     + Company website URL: This is the
       website URL of your integrationâs website.
     + Support email address: This is
       email address that directs Toast customers to contact if
       they need help with your integration.
   * Marketplace listing:

     |  |
     | --- |
     | Note |
     | A preview of your Toast Partner Integrations listing appears to the right of the Marketplace listing section. The preview displays your logo, short description, and categories. Buttons and links are disabled in the preview. Your integration's description and image are visible to all Toast customers who subscribe to Toast Partner Integrations. |

     + Application logo: Delete your
       application image, or upload or drag and drop a new image
       that will appear on your integrationâs Toast
       Partner Integrations listing.
     + Short description: Enter a short
       description for your integration. The description is visible
       to all Toast customers who have access to Toast
       Partner Integrations. The description cannot
       exceed 120 characters.
     + Primary action label: This field
       is automatically populated and cannot be edited. The primary
       action label appears on the action button on your
       integration's marketplace listing. To edit your primary
       action label, select the open a ticket
       link to open a support request with the Toast
       Developer Relations team.
     + Primary action reference: This
       field is automatically populated and cannot be edited. The
       primary action reference directs customers to an external
       link to either learn more about the integration, request a
       demo, or complete an action. To edit your primary action
       reference, select the open a ticket
       link to open a support request with the Toast Developer
       Relations team.

       |  |
       | --- |
       | Note |
       | You can also set optional secondary action labels and references that will appear on your Toast Partner Integrations listing. To edit your secondary action label or action reference, select the Open a support ticket link to open a support request with the Toast Developer Relations team. |
2. Select the Submit button to save your
   changes or the Back button to go back to the
   previous section.

###### Getting help with your integration

You can use the links to the right of the About your
app section to learn more about integrations or to open a
support request. Select the links to:

* Learn more about what happens when a [restaurant
  adds your integration](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html) in Toast Partner
  Integrations.
* Learn more about the [Partners webhook](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html) and how to use it to be notified
  when a restaurant adds your integration.
* Visit the [Toast
  Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics) and open a support request
  with the Toast Developer Relations team.

##### Payment methods

|  |
| --- |
| Important |
| This feature is in limited release. |

The Payment methods page displays your
payment method configurations and their statuses. On the
Payment methods page, you can also choose to add a
payment method configuration or edit an existing configuration.

![Payment method configurations page on developer portal.](https://doc.toasttab.com/doc/media/developer-portal-payment-methods-page.png)

###### Adding a payment method configuration

Use the procedure below to add a new payment method
configuration.

**To add a new payment method configuration**

1. On the Payment methods page, select the
   + Add a configuration button. This opens the
   Add configuration dialog.
2. In the Add configuration dialog, enter
   a name for the new configuration and toggle on or off the
   following payment methods: Apple Pay, Google Pay, and Keyed-in
   cards.
3. Select the Save button or select the
   Cancel button to close out of the
   dialog.

![Add payment method configurations dialog on developer portal.](https://doc.toasttab.com/doc/media/developer-portal-add-payment-methods.png)

###### Editing a payment method configuration

On the Payment methods page, you can edit
an existing payment method configuration. Select the arrow next to the
payment method configuration to open the Edit
configuration dialog. In the dialog, you can:

* Edit the configuration name
* Toggle payment methods on or off

Select the Update button to save your
changes or select the Cancel button to close out
of the dialog.

![Edit payment method configurations dialog on developer portal.](https://doc.toasttab.com/doc/media/developer-portal-edit-payment-methods.png)

##### Webhooks

The Webhooks page displays all your webhook
subscriptions and their statuses, webhook subscription GUIDs, webhook
event categories, and additional information. For more information about
webhooks, see [Webhooks reference](https://doc.toasttab.com/doc/devguide/apiWebhooksReference.html).

![Toast developer portal Webhooks page.](https://doc.toasttab.com/doc/media/developer-portal-webhooks-page.png)

On the Webhooks page, you add a new webhook
subscription or view and edit details of a webhook subscription.

###### Adding a new webhook subscription

Use the procedure below to add a new webhook
subscription.

**To add a new webhook subscription**

1. On the Webhooks page, select the
   + Add webhook button to open the
   Add webhook page.
2. On the Add webhook page, complete the
   following fields:

   * Event category: Select your event
     category from the drop-down menu. For more information, see
     [Webhooks reference](https://doc.toasttab.com/doc/devguide/apiWebhooksReference.html).
   * Webhook URL: Enter the URL of the
     webhook consumer service that receives the webhook
     events.
   * Webhook name: The name is
     automatically populated after you select the Event
     category.

     ![Toast developer portal add Webhooks page.](https://doc.toasttab.com/doc/media/developer-portal-add-webhook-page.png)
   * Notification email: The email
     address that messages and notifications are sent to if Toast
     experiences an outage, breakage, or delays with webhook
     endpoints.
3. Select the Save button to save your
   changes or the Cancel button to close out of
   the page.

###### Viewing webhook subscription details

On the Webhooks page, you can view details
about your webhook subscription. To view details, select the webhook
link or the View button. This opens the
Webhooks events page where you can view the
follow details:

* Webhook name
* Notification email address
* Webhook URL
* Webhook status
* Event category
* Secret key. For more information, see [Message signing](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html).

To view additional details about a webhook event, select the
webhook GUID link. This opens the Event details
dialog. In the Event details dialog, you can view
the following information:

* Webhook GUID: The identifier of the webhook. The GUID is
  unique per event subscription.
* Webhook URL: The URL of the webhook consumer service that
  receives the webhook events.
* Subscription GUID: This identifies the partner and the event
  category.
* Event category: The classification for the type of events
  the webhook sends.
* Event type: The name of the specific type of webhook
  event.
* Event GUID: The identifier of the webhook event. The GUID is
  unique per webhook event.
* Webhook event status.
* Date and time of the webhook event.
* Number of webhook attempts.
* Response code.
* Route key.
* Signature. For more information, see [Message signing](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html).
* Webhook request body.

  ![Toast developer portal Webhook event details page.](https://doc.toasttab.com/doc/media/developer-portal-webhook-event-details-page.png)

###### Filtering webhook subscription events

Use the procedure below to filter events associated with your
webhook subscription.

**To filter webhook events**

1. On the Webhooks events page, select the
   Filters button to open the
   Filters panel. You can filter by the
   following options:

   * Webhook event status:

     + All
     + Success
     + Pending
     + Not sent
     + Failure
   * Date range
   * Time period
2. Select the Apply filters button to
   apply the filters. This displays a list of webhook event results.
   Each webhook event result displays the following information and
   available actions:

   * Webhook GUID. This is the identifier of the webhook. The
     GUID is unique per event subscription.
   * Date and time the webhook event was initially sent to
     the webhook URL.
   * Number of webhook attempts. For more information about
     retry attempts, see [Retry support](https://doc.toasttab.com/doc/devguide/apiRetrySupport.html).
   * Webhook response code.
   * Webhook event status.
   * Replay button. This requests the
     webhook message be resent.

   ![Toast developer portal Webhook events page.](https://doc.toasttab.com/doc/media/developer-portal-webhooks-events-page.png)

###### Editing webhook subscription details

|  |
| --- |
| Note |
| You can edit webhook details on the Edit webhook page. You can navigate to the Edit webhook page by selecting the Edit button next to the webhook link on Webhooks page or by selecting the Edit webhook button on the Webhook events page. |

Use the procedure below to edit details about your webook
subscription or delete your subscription.

**To edit webhook details**

1. Navigate to the Edit webhook page from
   the Webhooks page or from the
   Webhooks events page.

   ![Toast developer portal Edit webhook page.](https://doc.toasttab.com/doc/media/developer-portal-edit-webhook-page.png)
2. On the Edit webhook page, you can edit
   the following fields:

   * Webhook URL
   * Webhook name
   * Notification email address

   |  |
   | --- |
   | Note |
   | The event category cannot be edited. |
3. Select the Save button to save your
   changes, the Cancel button to close out of
   the page, or the Delete button to be directed
   to open a support request with the Toast Developer Relations
   team.

   ![Toast developer portal Delete webhook dialog.](https://doc.toasttab.com/doc/media/developer-portal-delete-webhook-page.png)

##### Activity log

|  |
| --- |
| Note |
| The Activity Log page does not track user actions taken in Toast Web. |

The Activity Log page displays a list of the
instances when the client secret was rotated. You can rotate the client
secret on the [Credentials](https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html#apiDeveloperPortalCredentials) page.

![Toast developer portal Activity log page.](https://doc.toasttab.com/doc/media/developer-portal-activity-log-page.png)

You can filter your activity log by custom date range. To filter
by date range, select the date picker and enter your custom date range.
Select the Apply button to apply the custom date
range filter. The Activity Log displays a list of
activities that match your filter, or displays a message notifying you
that no activities match your filter.

##### Support and feedback

You can find help and provide feedback on the Toast developer
portal by selecting the Support or
Feedback tabs on the left navigation pane. The tabs
open the [Toast
Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics) where you can view support articles
or submit a request.

##### User guide

You can view the Developer guide by selecting the User
guide tab on the left navigation pane. The tab opens to the
[Toast
developer portal overview](https://doc.toasttab.com/doc/devguide/apiDeveloperPortal.html).


---

# Environments - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiEnvironments.html

### Environments

Toast maintains and provides continuous access to multiple,
independent service environments for use by API integration clients during
development, testing, and production. These environments are:

* **Sandbox -** used for integration
  testing. For more information, see [Sandbox environment](https://doc.toasttab.com/doc/devguide/apiEnvironments.html#apiSandboxEnvironment).
* **Production -** used for live
  transactions at active restaurants. For more information, see [Production environment](https://doc.toasttab.com/doc/devguide/apiEnvironments.html#apiProductionEnvironment).

The Toast integrations team periodically announces maintenance periods
for which a service may be read only or unavailable.

You must register a separate API client account for each environment.
See [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

#### Sandbox environment

The sandbox environment is intended for partner and custom
integration development and testing of Toast API integrations in a
realistic setting. As with production, sandbox environment public APIs are
versioned and fully functional. The sandbox environment has simulated
payment processing.

You need the hostname of the sandbox environment to send REST
requests to sandbox API services. You receive the hostname for the sandbox
environment from the Toast integrations team when you begin to build your
integration. When your integration is approved to go live, you receive the
hostname for the production environment.

The sandbox environment is always available from 9 a.m. to 6 p.m.
Eastern Time (UTC -5:00/-4:00). Outside of those hours, the sandbox
environment might be unavailable to complete upgrades and other
maintenance activities.

You can download a version of the Toast POS app installer (an
Android APK installer file) that is configured to connect to the sandbox
environment. The sandbox APK link changes periodically when the sandbox
environment is upgraded.

Use the link below to download the Toast POS app installer. Use the
installer version that is compatible with the Toast restaurants you are
testing your integration with. You can find the Toast POS app version for
a restaurant in the Required app version for
[restaurant] value at the bottom of Toast Web pages for the
restaurant.

* [Toast
  POS app version 2.87.2 for the sandbox environment](https://s3.amazonaws.com/toast-sandbox/static-content/apks/toast-android-pos-2.87.2.apk)
* Shortened URL: <https://bit.ly/3IlobYF>

|  |
| --- |
| Note |
| Sandbox environment access is limited to partner and custom integrations. Standard API access and analytics API access are only available in the production environment. For more information, see [Integration types](https://doc.toasttab.com/doc/devguide/apiIntegrationTypes.html). |

#### Production environment

The production environment is the live Toast platform environment.
You can use the production environment after your integration testing is
complete. Production environment API access is [rate
limited](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html).

To send REST requests to production API services, you need the
hostname of the production environment. You receive the hostname for the
production environment when your integration is approved to go
live.


---

# Environments - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiEnvironmentsCustomIntegrations.html

### Environments

Toast maintains and provides continuous access to multiple,
independent service environments for use by API integration clients during
development, testing, and production. These environments are:

* **Sandbox -** used for integration
  testing. For more information, see [Sandbox environment](https://doc.toasttab.com/doc/devguide/apiEnvironments.html#apiSandboxEnvironment).
* **Production -** used for live
  transactions at active restaurants. For more information, see [Production environment](https://doc.toasttab.com/doc/devguide/apiEnvironments.html#apiProductionEnvironment).

The Toast integrations team periodically announces maintenance periods
for which a service may be read only or unavailable.

You must register a separate API client account for each environment.
See [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).

#### Sandbox environment

The sandbox environment is intended for partner and custom
integration development and testing of Toast API integrations in a
realistic setting. As with production, sandbox environment public APIs are
versioned and fully functional. The sandbox environment has simulated
payment processing.

You need the hostname of the sandbox environment to send REST
requests to sandbox API services. You receive the hostname for the sandbox
environment from the Toast integrations team when you begin to build your
integration. When your integration is approved to go live, you receive the
hostname for the production environment.

The sandbox environment is always available from 9 a.m. to 6 p.m.
Eastern Time (UTC -5:00/-4:00). Outside of those hours, the sandbox
environment might be unavailable to complete upgrades and other
maintenance activities.

You can download a version of the Toast POS app installer (an
Android APK installer file) that is configured to connect to the sandbox
environment. The sandbox APK link changes periodically when the sandbox
environment is upgraded.

Use the link below to download the Toast POS app installer. Use the
installer version that is compatible with the Toast restaurants you are
testing your integration with. You can find the Toast POS app version for
a restaurant in the Required app version for
[restaurant] value at the bottom of Toast Web pages for the
restaurant.

* [Toast
  POS app version 2.87.2 for the sandbox environment](https://s3.amazonaws.com/toast-sandbox/static-content/apks/toast-android-pos-2.87.2.apk)
* Shortened URL: <https://bit.ly/3IlobYF>

|  |
| --- |
| Note |
| Sandbox environment access is limited to partner and custom integrations. Standard API access and analytics API access are only available in the production environment. For more information, see [Integration types](https://doc.toasttab.com/doc/devguide/apiIntegrationTypes.html). |

#### Production environment

The production environment is the live Toast platform environment.
You can use the production environment after your integration testing is
complete. Production environment API access is [rate
limited](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html).

To send REST requests to production API services, you need the
hostname of the production environment. You receive the hostname for the
production environment when your integration is approved to go
live.


---

# Example API requests - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiExampleRequests.html

### Example API requests

Toast provides a Postmanâ¢ API client collection
of API requests to help you test the APIs without writing any code.

|  |  |
| --- | --- |
| **1.** | **What is Postman, and where can I learn more about it?** |
|  | Postman is a tool for making ad hoc API calls. To learn more about this tool and to download it, see [the Postman website](https://www.getpostman.com/). |
| **2.** | **Where can I get the Postman collection?** |
|  | The Postman API client collection for Toast APIs can be found [here](https://doc.toasttab.com/doc/media/Toast_Postman_Collection.zip). |
| **3.** | **What initial setup should I do?** |
|  | Unzip the collection file in the link above. To import the collection, in Postman go to File > Import > Import from File.  Select each file from the unzipped collection file to import them.  For more information about using the Postman API client, see [the Postman documentation](https://learning.postman.com/).  To set up your Postman collection:  1. Click the eye icon at the top right of your Postman    window, then select the Sandbox environment. 2. In the Current Value column, add the    environment hostname, your API client credentials, and the    desired restaurant GUID. Do not add this information to the    Initial Value column. 3. Open a request from an API you will use in your    integration.  New integration partners often use the configuration API    to run their first API test.  Submit an API request to ensure you receive data in    return.  The pre-request script in each Postman collection    automatically requests a new authentication token.  To obtain hostnames and authentication credentials, contact Toast support.  If you are using a [partner API account](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apiPartnerApiClientAccounts), the [partners endpoint](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html) provides the list of restaurant GUIDs that you are able to poll. |
| **4.** | **How do I make an API call?** |
|  | After doing the initial collection setup above, open the desired API call on the left sidebar.  Verify that variables such as parameters and JSON bodies are correct.  To submit your API call and see the results, click send. |


---

# Handling Toast API downtime - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiHandlingDowntimes.html

### Handling Toast API downtime

While Toast strives to provide APIs that are reliable and highly
available, downtimes may occur due to both planned maintenance and unplanned
issues. The goal of this guide is to enable your platforms to handle these
situations gracefully and provide the best experience you can for our mutual
customers.

#### How to know when ordering functionality is unavailable

There are several ways to know if a restaurant is offline:

**HTTP code responses**
:   If the Toast platform is offline, you typically receive a 5XX
    response when you try to submit orders.

**Status page notifications**
:   To receive notifications about planned and unplanned outages,
    sign up for API status notifications at <http://status-dev.toasttab.com>.

**Release notes**
:   Sign up for Toastâs [API release note
    distribution list](https://doc.toasttab.com/doc/devguide/apiUpdatesEmailDistributionList.html).

    When Toast has planned maintenance windows, we send release
    note announcements in addition to updating our API status
    page.

#### General best practices for handling downtime

When your integration uses Toast API servers, use the following
recommended best practices to handle a downtime window:

* Programmatically evaluate the health of a Toast API in your
  error handling code. A high volume of 5XX errors within a short window
  of time often means that there is a temporary issue in one or more of
  the Toast APIs.

  For more information about Toast API error codes, see [HTTP status codes](https://doc.toasttab.com/doc/devguide/apiResponsesAndErrors.html#apiHttpStatusCodes).
* If you receive a 5XX error when you use a Toast API, reduce your
  polling frequency at an exponential rate. See this [information
  about exponential backoff processes](https://en.wikipedia.org/wiki/Exponential_backoff).
* If your integration retrieves information such as [orders](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html)
  or [time entries](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html)
  based on their last modification timestamp, use the timestamp of your
  last successful poll attempt when you evaluate how to backfill any
  missed data.

  The instant of the last successful data retrieval should be the
  start timestamp of your next attempt to retrieve data.
* If your integration relies on real-time data from the Toast
  platform, be sure you cache all necessary data so that your
  integration remains reliable even during an unexpected
  downtime.

#### Planned maintenance windows

Scheduled maintenance windows are announced in advance on <http://status-dev.toasttab.com>.
The maintenance windows for the Toast platform typically occur on the
United States Thanksgiving and Christmas holidays due to the low order
volume on these days. Toast support teams attempt to announce scheduled
maintenance windows with at least four weeks in advance.

During a planned maintenance window, consider implementing the
following approaches to your integration:

**When a Toast API is the server**
:   * Pause your read operations during the maintenance window.
      You cannot successfully retrieve information from the Toast
      platform during the downtime.
    * To minimize your integration's downtime, monitor the
      status notifications on <http://status-dev.toasttab.com>.
      The maintenance window may end sooner than expected. You can
      resume your integration as soon as the maintenance window is
      over.
    * If your authentication token expires during the
      maintenance window, retrieve a new authentication token after
      the maintenance window is over. For more information about
      authentication, see [Getting an authentication token](https://doc.toasttab.com/doc/devguide/authentication.html#getting-authentication-token) and [Refreshing authentication tokens](https://doc.toasttab.com/doc/devguide/apiAuthTokenRefresh.html).
    * Include an alternate handling method for maintenance
      windows in your workflow. The way you handle unexpected,
      temporary unavailability might be inefficient for a longer,
      planned maintenance window. For example, if your integration
      retries an API call five minutes after it receives a 5XX error,
      your integration will have many failed retries during a
      45-minute maintenance window.

      During a maintenance window, you need to halt the polling
      requests for your integration.

**When a Toast API is the client**
:   * If your integration with Toast involves webhooks or uses
      APIs in which Toast is the client (such as the gift card and
      loyalty APIs), your endpoint(s) will not see any activity during
      the downtime window. The Toast platform is unavailable during
      the downtime window.
    * If you have alerts that fire when there is abnormally low
      activity on your integration endpoints, suppress or ignore these
      alerts during the maintenance window.

#### Order injection during downtimes

If your integration submits orders into the Toast platform, you must
modify your order submission behavior if there is a Toast platform
maintenance window or unexpected downtime.

You should include a unique external identifier with each order you
submit so that you can ensure idempotence of the orders you submit. For
more information about using external identifiers, see [External identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html#apiExternalIdentifiers).

Here are recommended ways of handling order submission during
offline windows so that restaurants successfully receive orders from your
integration.

##### Planned downtime

When there is planned downtime:

* Prevent guests from [scheduling future
  orders](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html) during the planned maintenance window.
* Decide whether to allow guests to place ASAP orders during the
  maintenance window, to be submitted to the restaurant after the
  outage is over. If your ordering integration allows guests to place
  new orders during this window:

  + Allow restaurants to decide the specific time after the
    maintenance window when they should receive these orders.
  + Submit your orders to the Toast API at the time requested
    by the restaurant, after the maintenance window is over.
  + Ensure that your user interface clearly indicates to the
    guest that the restaurant will not see their order until after
    the maintenance window is over.

##### Unplanned downtime

If you receive a 5XX response when you try to submit an order,
Toast may be experiencing an unplanned issue. Here are steps to take if
you receive a 5XX response after an attempt to submit an order.

First, evaluate whether the order submission truly succeeded by
attempting to retrieve the order. For more information about retrieving
an order, see [Getting detailed information about one order](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html).

* If you are able to retrieve the order that you attempted to
  submit, the order was successfully submitted. You do not need to
  make additional order submission attempts.
* If you cannot retrieve the order, retry a few seconds later in
  case there was a transient issue.

  If you receive another 5XX error after this retry, ask the
  guest if they would still like to submit their order, or if they
  would like to cancel the order request.


---

# Checklist and test plans overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiIntegrationChecklists.html

### Checklist and test plans overview

The checklists are intended to help you build a thorough and robust
integration that avoids many anticipated issues. They are a guideline.
They are not a complete and comprehensive list of all things you need to
address before taking your integration live. When you do your development,
use your judgment and consider your integration's unique
functionality.

When you are ready to certify your integration, plan to review the
checklist content with the Toast integrations team and to discuss any
questions or concerns about it.

The checklists are available in CSV format. You can download the CSV
files from the links in the checklist sections.

If you have questions or feedback about checklist content, reach out
to the Toast integrations team.


---

# API overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOverview.html

### API overview

The Toast platform REST web service APIs make it easier and more
efficient to work with location data. This guide is intended for software
engineers, technical managers, and other staff responsible for integrating
third-party systems with the Toast platform.

Toast APIs support both read and write operations. Read access is
performed using `GET` requests. Write access includes
`POST`, `PUT`, `PATCH`, and
`DELETE` methods, as well as interaction with outbound APIs,
which send data from the Toast platform to your system and await your
response.

Access to the APIs is further classified by the integration type. To
determine what integration access type you have (partner integrations,
custom integrations, standard API access, or analytics API access), see
[Integration types](https://doc.toasttab.com/doc/devguide/apiIntegrationTypes.html).

|  |
| --- |
| Note |
| Partner and custom integration access is granted based on specific implementation requirements. While the methods listed represent the full range of possible access, actual permissions are limited to only what is necessary to support each integration's functionality. |

Toast provides the following APIs:

| API | Description | Supported Methods by Integration Type |
| --- | --- | --- |
| Analytics API (`era`) | The [analytics (`era`) API](https://doc.toasttab.com/openapi/analytics/overview/) provides access to information for reporting and performance.  For more information about using the analytics API, see [Analytics API overview](https://doc.toasttab.com/doc/devguide/apiAnalyticsOverview.html). | `GET`: Analytics API access  `POST`: Analytics API access |
| Cash management (`cashmgmt`) | The [cash management (`cashmgmt`) API](https://doc.toasttab.com/openapi/cashmanagement/overview/) provides access to information about cash drawer events such as cash received and cash paid out.  For information about using the cash management API, see [Cash management overview](https://doc.toasttab.com/doc/devguide/apiWorkingWithCashEntriesAndDeposits.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Configuration (`config`) | The [configuration (`config`) API](https://doc.toasttab.com/openapi/configuration/overview/) provides access to information about the configuration of a location. You can use the configuration API to get information about the revenue centers, dining options, payment options, and other aspects of a location.  The configuration API returns the Globally Unique Identifiers (GUIDs) that the Toast platform assigns to configuration objects. You can use these GUIDs to interact with other Toast APIs.  For information about using the configuration API, see [Getting menu information from the configuration API](https://doc.toasttab.com/doc/devguide/menu_information_config_api.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Credit cards (`ccpartner`) | The [credit cards (`ccpartner`) API](https://doc.toasttab.com/openapi/creditcards/overview/) authorizes credit card payments that you can apply to checks in the orders API.  For information about using the credit cards API, see [Credit card payments](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html). | `PUT`:  * Partner integrations * Custom integrations |
| Gift cards | The [gift cards API specification](https://doc.toasttab.com/openapi/giftcards/overview/) describes an API that you can implement to enable the Toast platform to process gift card transactions through your gift card provider service.  For information about implementing the gift card integration API, see [Gift card integration overview](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationOverview.html). | This API is outbound. You must host an HTTPS endpoint that accepts `POST` requests from the Toast platform and returns one of the predefined acceptable responses.  * Partner integrations * Custom integrations |
| Kitchen (`kitchen`) | The kitchen API provides access to kitchen prep station information.  For more information about the kitchen API, see [Kitchen API reference](https://doc.toasttab.com/openapi/kitchen/overview/). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Labor (`labor`) | The [labor API](https://doc.toasttab.com/openapi/labor/overview/) provides access to employment and work schedule configuration information. You can use the labor API to get information about and configure employee records, job types, scheduled work shifts, and work shift time entries.  For information about using the labor API, see [Getting all employees of a restaurant](https://doc.toasttab.com/doc/devguide/api_get_all_employees.html) and [Adding an employee](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access  `POST`, `PUT`, `PATCH`, `DELETE`:  * Partner integrations * Custom integrations |
| Loyalty | The [loyalty integration API specification](https://doc.toasttab.com/openapi/loyalty/overview/) describes an API that you can implement to enable the Toast platform to process loyalty program transactions through your loyalty service.  For information about implementing the loyalty integration API, see [Loyalty program integration overview](https://doc.toasttab.com/doc/devguide/apiLoyaltyProgramIntegrationOverview.html). | This API is outbound. You must host an HTTPS endpoint that accepts `POST` requests from the Toast platform and returns one of the predefined acceptable responses.  * Partner integrations * Custom integrations |
| Menus (`menus`) | The [menus API](https://doc.toasttab.com/openapi/menus/overview/) lets you retrieve a fully resolved set of menus for the location you specify. With this data, you can construct a menu that satisfies your business requirements.  For information about using the menus API, see [Menus API overview](https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Orders (`orders`) | The [orders API](https://doc.toasttab.com/openapi/orders/overview/) provides access to information about menu orders. You can use the `orders` API to get information about and create menu orders, checks, and payment.  For information about using the orders API, see [Orders API overview](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access  `POST`, `PATCH`:  * Partner integrations * Custom integrations |
| Order management configuration (`ordermgmt-config`) | The [order management configuration (`ordermgmt-config`) API](https://doc.toasttab.com/openapi/ordermgmt.configuration/overview/) provides information about a location's online ordering schedule.  For information about using the order management configuration API, see [Getting online ordering schedules](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Packaging configuration (`packaging`) | The [packaging configuration (`packaging`) API](https://doc.toasttab.com/openapi/packaging/overview/) provides information about a location's packaging preference configurations.  For information about using the packing configuration API, see [Packaging preferences](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Partners (`partners`) | The [partners API](https://doc.toasttab.com/openapi/partners/overview/) provides information about locations an API client has access to.  For information about using the partners API, see [Location access](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Restaurant availability (`restaurant-availability`) | The [restaurant availability API](https://doc.toasttab.com/openapi/rx.availability.service/overview/) provides access to information about a location's availability to accept online orders.  For more information about using the restaurant availability API, see [Getting a restaurant's online ordering availability](https://doc.toasttab.com/doc/devguide/apiGettingRxOnlineOrderingAvailability.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Restaurants (`restaurants`) | The [restaurants API](https://doc.toasttab.com/openapi/restaurants/overview/) provides access to configuration information for a location. You can use the restaurants API to get information such as location name, address, hours, and schedules.  For information about using the restaurants API, see [Restaurant information overview](https://doc.toasttab.com/doc/devguide/apiRestaurantInfo.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access |
| Stock (`stock`) | The [stock API](https://doc.toasttab.com/openapi/stock/overview/) provides access to information about inventory for menu items and modifier options at a location. You can use the stock API to determine whether a menu item or modifier option is in stock or what quantity is in stock.  For information about using the stock API, see [Stock overview](https://doc.toasttab.com/doc/devguide/apiStock.html). | `GET`:  * Partner integrations * Custom integrations * Standard API access  `POST`, `PUT`:  * Partner integrations * Custom integrations |
| Tender | The [tender integration API specification](https://doc.toasttab.com/openapi/tender/overview/) describes an API that you can implement to allow the Toast platform to provide information about tender transactions processed by the Toast POS system. Your tender system can use this data to maintain a complete record of payments, refunds, and other transaction activity.  For information about implementing the tender integration API, see [Tender provider integrations overview](https://doc.toasttab.com/doc/devguide/apiTenderProviderIntegrationsOverview.html). | This API is outbound. You must host an HTTPS endpoint that accepts `POST` requests from the Toast platform and returns one of the predefined acceptable responses.  * Partner integrations * Custom integrations |


---

# Partner integration overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiPartnerIntegrationOverview.html

### Partner integration overview

To extend the Toast platform with your company's technology, you can
build a partner integration using Toast APIs. Your API access is granted
through the Toast Partner Integrations program, which includes a formal
application and certification process. Once approved, you receive scoped API
access that enables you to read and write data on behalf of customers that
your company shares with Toast. As an integration partner, you're part of an
ecosystem that allows Toast to offer a wide range of third-party
capabilities.


---

# Location access - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html

### Location access

The partners webhook and partners API both provide information about
the restaurants you can access. With the partners webhook, the Toast
platform pushes updates to your system when a restaurant adds your
integration, removes your integration, or edits your integration's settings
in the Toast platform. This is the preferred method for getting information
about the restaurants you can access.

If you need to retrieve information about the restaurants you can
access independently of an event that triggers a webhook update, you can use
the `/restaurants` endpoint of the partners API.

The payload returned by both the partners webhook and the partners API
includes location and group identifiers. You can use these identifiers to
map restaurants in your system to Toast's restaurants and GUIDs. For more
information, see [Using location and group
identifiers](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html#apiPartnersLocationGroupIDs).

This information only applies if you use a [partner API
account](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apiPartnerApiClientAccounts). Integrations that use [restaurant management
group API accounts](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationReturnDataRestaurant) cannot use the partners webhook or partners
API.

#### Getting the restaurants you can access

Restaurant employees who have the Account Admin >
Manage Integrations access permission can add your integration
to their locations from Toast Partner Integrations, which is the Toast
integration marketplace, through their Toast Web account. Restaurant
employees with the Manage Integrations access
permission can also remove previously connected integrations from the
My Integrations page in Toast Web. For more
information about restaurant employee access permissions, see [Access permissions reference](https://doc.toasttab.com/doc/platformguide/adminPermissions.html).

When a restaurant employee selects your partner integration and
gives you access to integrate with that restaurant:

* Information about the restaurant is added to the JSON array that
  you get from the `/restaurants` endpoint of the partners
  API.
* A webhook update is sent to your webhook endpoint, if you have
  one configured.
* The Toast platform sends an automated email message to your
  onboarding email address. The message includes basic information about
  the new restaurant connections, including restaurant name, location
  name, location GUID, and email contact information for the restaurant
  employee who has added the integration. If a restaurant employee adds
  multiple locations at the same time, the Toast platform will include
  all the locations in a single email message.

When a restaurant adds your integration in Toast Partner
Integrations, the Toast platform does not directly connect the restaurant
to *your customer* account for that restaurant. This
action authorizes and grants your partner API account access to the
restaurant's data via API. As an integration partner, you are responsible
for mapping your own customer accounts to Toast location GUIDs.

For more information about how restaurant employees select
integration partners and enable integration access, see [Managing and using integrations and Toast Partner
Integrations](https://doc.toasttab.com/doc/platformguide/adminRestaurantServiceIntegrationsAndToastPartnerIntegrations.html).

##### Getting restaurant access updates from the partners webhook

To use the partners webhook, you must create a *webhook
endpoint*. This is the URL of a webhook consumer service that
is capable of receiving webhook events from the Toast platform.

Once you have a webhook endpoint, Toast support can create a
webhook subscription for your integration that associates your webhook
endpoint with the webhook updates that are triggered by restaurants
adding, removing, or reconfiguring your integration.

For general information on setting up and using Toast webhooks,
see [Webhook basics](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html).

For detailed information on the specific updates provided by the
partners webhook, including example payloads, see [Partners webhook](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html).

##### Using the partners API to get restaurant information

To get information about the Toast platform restaurants that your
partner API client account can access, you can use the
`/restaurants` or `/connectedRestaurants` endpoint
of the Toast partners API.

Only partner API accounts can use the `/restaurants`
and `/connectedRestaurants` endpoint. If you have a
restaurant management group API account, you can use the restaurants API
to get information about the restaurants in your group. For more
information about account types, see [Toast API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html). For more information about the
restaurants API, see the [restaurants
API reference documentation](https://doc.toasttab.com/openapi/restaurants/overview/).

The `/restaurants` endpoint returns an array of JSON
objects containing information about each restaurant that you have
access to. For more information, see the [partners
API reference documentation](https://doc.toasttab.com/openapi/partners/overview/).

The `/connectedRestaurants` endpoint returns the same
array of restaurant JSON objects as the `/restaurants`
endpoint. Using the `/connectedRestaurants` endpoint allows
you to navigate the response easier, especially if you are connected to
many restaurants.

The `/connectedRestaurants` endpoint uses pagination
and allows for additional query parameters. Each response page is also
tokenized using page tokens should you need to refer back to a specific
data snapshot. For more information on pagination see [Paginating response data](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html). For
more information on using the `/connectedRestaurants`
endpoint see [Get
connected restaurants](https://doc.toasttab.com/openapi/partners/operation/connectedRestaurantsGet/).

|  |
| --- |
| Note |
| The partners API updates the list of restaurants that you have access to immediately after a restaurant employee selects your integration.  For other Toast APIs, such as the orders API or the labor API, it can take up to 15 minutes from the time a restaurant employee gives your integration access before they update their access lists and allow your integration to perform operations at a restaurant. Please note that in some cases, even after the typical 15-minute delay, the Toast platform may require additional time before the newly-connected restaurants become available. |

If a restaurant removes a partner's integration, this restaurant
is no longer present in the `/restaurants` or
`/connectedRestaurants` endpoint return data. Consider
restaurant additions and removals when you review the results of this
endpoint.

###### How to make a request to /restaurants

Send a `GET` request to the `/restaurants`
endpoint of the Toast partners API.

```
https://[toast-api-hostname]/partners/v1/restaurants
```

|  |
| --- |
| Note |
| The `/restaurants` endpoint uses the same rate limiting functionality as other Toast API endpoints. For more information, see [Rate limiting](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html). |

**To get information about the restaurants you have access
to**

1. Authenticate with the Toast user management service using a
   partner API account. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html).
2. Send a `GET` request to the
   `/restaurants` endpoint of the partners API.

   Optionally, include the `lastModified` parameter
   to limit the return data to restaurants created or modified after
   a specific date and time. The date and time must be a UTC
   timestamp in ISO 8601 format, for example:
   `2020-03-01T00:00:00.000-0000`.

   You must URL encode the timestamp before sending it in a
   request. For example,
   `2020-03-01T00%3A00%3A00.000%2B0000`.
3. Review the information about each restaurant that you have
   access to in the JSON data that the `/restaurants`
   endpoint returns.

   The GUID for a restaurant is in the
   `restaurantGuid` value of the return data. The GUID is
   a unique identifier. You use the Toast platform GUID for a
   restaurant when you make Toast API requests for that
   restaurant.

###### Information in the /restaurants return data

For each restaurant, the `/restaurants` endpoint the
JSON response contains the following values:

| Value | Description |
| --- | --- |
| `restaurantGuid` | The unique Toast platform identifier for the restaurant. |
| `managementGroupGuid` | The unique Toast platform identifier for a group of restaurants. The management group GUID is the same for all restaurants in the same group.  If a restaurant location does not belong to a restaurant management group, then the management group GUID is null. |
| `restaurantName` | The human-readable name of the restaurant location. |
| `locationName` | The identifier of a specific restaurant location, set on the Restaurant Info screen of the Toast Web.  For example, a restaurant group might assign a location code such as `#1234` to a specific location. |
| `createdByEmailAddress` | The email address of the restaurant employee who connected the restaurant to the partner or who edited the connection details. |
| `externalGroupRef` | An identifier for the restaurant group that is recognized by the partner that made the request to the `/restaurants` endpoint.  This information is entered by the restaurant administrator. If you need information about the restaurant group in this data string, you instruct the restaurant administrator to enter it in the Toast platform configuration for the integration partner connection.  For more information, see [Using location and group identifiers](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html#apiPartnersLocationGroupIDs). |
| `externalRestaurantRef` | An identifier for the restaurant location that is recognized by the partner that made the request to the `/restaurants` endpoint.  This information is entered by the restaurant administrator. If you need information about the restaurant location in this data string, you instruct the restaurant administrator to enter it in the Toast platform configuration for the integration partner connection.  For more information, see [Using location and group identifiers](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html#apiPartnersLocationGroupIDs). |
| `isoCreatedDate` | The date and time that the partner connection was created, expressed in ISO 8601 format. |
| `isoModifiedDate` | The most recent date and time that the partner connection was edited, expressed in ISO 8601 format. |
| `createdDate` | The date and time that the partner connection was created, expressed in milliseconds from the UNIX epoch, January 1, 1970 00:00:00 UTC. |
| `modifiedDate` | The most recent date and time that the partner connection was edited, expressed in milliseconds from the UNIX epoch, January 1, 1970 00:00:00 UTC. |

###### Example /restaurants response

The following example shows the response data from the
`/restaurants` endpoint of the partners API.

**Response data from the /restaurants endpoint**

```
[
   {
      "restaurantGuid":"0001ac81-423c-a426-0008-02426ac8423c",
      "managementGroupGuid":"88f3cca5-39d9-4acc-8627-3116c748f344",
      "restaurantName":"The Good Restaurant",
      "locationName":null, 
      "createdByEmailAddress":"hester@goodrestaurant.com",
      "externalGroupRef":"goodRestaurant",
      "externalRestaurantRef":"East 25th Street",
      "modifiedDate": 1544022583582,
      "createdDate": 1544022583582,
      "isoModifiedDate": "2018-12-05T15:09:43.582Z",
      "isoCreatedDate": "2018-12-05T15:09:43.582Z"
   },
   {
      "restaurantGuid":"00034778-423c-a426-0008-02561ac81ce6",
      "managementGroupGuid":null,
      "restaurantName":"The Better Restaurant",
      "locationName":null,
      "createdByEmailAddress":"werner@betterrestaurant.com",
      "externalGroupRef": null,
      "externalRestaurantRef": null,
      "modifiedDate": 1544136793429,
      "createdDate": 1544136793429,
      "isoModifiedDate": "2018-12-06T22:53:13.429Z",
      "isoCreatedDate": "2018-12-06T22:53:13.429Z"
   },
   {
      "restaurantGuid":"00013478-1ce6-a426-0008-02561ac81ce6",
      "managementGroupGuid":"88f3cca5-39d9-4acc-8627-3116c748f344",
      "restaurantName":"The Best Restaurant",
      "locationName":null,
      "createdByEmailAddress":"berthoud@bestrestaurant.com",
      "externalGroupRef":"BEST_RESTAURANT",
      "externalRestaurantRef":"Sheffield_008",
      "modifiedDate": 1544626611217,
      "createdDate": 1544626611217,
      "isoModifiedDate": "2018-12-12T14:56:51.217Z",
      "isoCreatedDate": "2018-12-12T14:56:51.217Z"
   }
]
```

###### How to make a request to /connectedRestaurants

Send a `GET` request to the
`/connectedRestaurants` endpoint of the Toast partners
API.

```
https://{toast-api-hostname}/partners/v1/connectedRestaurants
```

|  |
| --- |
| Note |
| The `/connectedRestaurants` endpoint uses the same rate limiting functionality as other Toast API endpoints. For more information, see [Rate limiting](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html). |

**To get information about the restaurants you are connected
to**

1. Authenticate with the Toast user management service using a
   partner API account. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html).
2. Send a `GET` request to the
   `/connectedRestaurants` endpoint of the partners
   API.

   Optionally, include the `lastModified` parameter
   to limit the response data to connections created or modified
   after a specific date and time. The date and time must be a UTC
   timestamp in ISO 8601 format, for example:
   `2020-03-01T00:00:00.000-0000`.
3. Review the information about each restaurant that you have
   access to in the JSON data that the
   `/connectedRestaurants` endpoint returns.

###### Query parameters

You can query your response by adding the following
parameters:

* `page`: The specific page of the results. The
  response includes the `lastPageNum` field. Use this
  value to know how many pages there are total in the response for a
  more accurate `page` query.
* `pageSize`: The amount of records in the total
  response. 100 is is the `pageSize` default. You can use
  the `totalResultCount` value in the response to create
  a more accurate query but knowing how many results there are in
  total.

###### Information in the /connectedRestaurants response data

For each restaurant, the `/connectedRestaurants` JSON
response data contains the same values seen from the [`/restaurants`
response data](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html#apiGetRestaurantsReturnFieldList), as well as the following values:

| Value | Description |
| --- | --- |
| `currentPageNum` | The active page number from the return response. |
| `totalResultCount` | The total number of results in the response. This number matches `totalCount`. |
| `pageSize` | The active page size used when viewing the response data. This can be modified using the `pageSize` query parameter. |
| `currentPageToken` | The token for the current page information snapshot. Refer to this if you need to return to this exact dataset. |
| `nextPageToken` | The token for the next page information snapshot. Refer to this if you need to return to the next page's exact dataset. |
| `totalCount` | The total number of results in the response. This number matches `totalResultCount`. |
| `nextPageNum` | The next available page in the response. `Null` if you have come to the end of available pages. |
| `lastPageNumber` | The last available page in the response. |
| `previousPageNum` | The page number for the previous page in the response. `Null` when you are on the first page of the response. |

###### /connectedRestaurants example return data

The following example shows the return data from the
`/connectedRestaurants` endpoint of the partners
API.

**Return data from the /connectedrestaurants endpoint**

```
{
    "currentPageNum": 1,
    "results": [
        {
            "restaurantGuid": "a1fa1689-3ba1-43c2-ba31-300f3d7abe2c",
            "managementGroupGuid": "1606c177-9a18-45fb-b022-446ec6a80431",
            "restaurantName": "Astro Doughnuts and Fried Chicken",
            "locationName": "1819 7th ST NW",
            "createdByEmailAddress": "email@toasttab.com",
            "externalGroupRef": null,
            "externalRestaurantRef": null,
            "modifiedDate": 1644263179752,
            "createdDate": 1636044303499,
            "isoModifiedDate": "2022-02-07T19:46:19.752Z",
            "isoCreatedDate": "2021-11-04T16:45:03.499Z"
        },
        {
            "restaurantGuid": "7c0b44f7-e5fe-4ab7-a036-59e541fa93a8",
            "managementGroupGuid": "2a541c86-5da4-401b-a2f0-182c1459ee45",
            "restaurantName": "Test's Cafe",
            "locationName": "Boston",
            "createdByEmailAddress": "email@toasttab.com",
            "externalGroupRef": null,
            "externalRestaurantRef": null,
            "modifiedDate": 1654788101013,
            "createdDate": 1636743654371,
            "isoModifiedDate": "2022-06-09T15:21:41.013Z",
            "isoCreatedDate": "2021-11-12T19:00:54.371Z"
        },
        {
            "restaurantGuid": "b1139b0d-6014-4c56-966a-262770a69cbf",
            "managementGroupGuid": "b3cc3a6c-45d7-4ce4-96da-9b8c1bf05fcb",
            "restaurantName": "Astro Doughnuts and Fried Chicken",
            "locationName": "Catering DC",
            "createdByEmailAddress": "email@toasttab.com",
            "externalGroupRef": null,
            "externalRestaurantRef": null,
            "modifiedDate": 1644263179792,
            "createdDate": 1636365873198,
            "isoModifiedDate": "2022-02-07T19:46:19.792Z",
            "isoCreatedDate": "2021-11-08T10:04:33.198Z"
        }
    ],
    "totalResultCount": 33,
    "pageSize": 100,
    "currentPageToken": "cD0xLHM6MTAw",
    "nextPageToken": "cD9yLHM6MTAw",
    "totalCount": 33,
    "nextPageNum": null,
    "lastPageNum": 1,
    "previousPageNum": null
}
```

#### Using location and group identifiers

The **My Integrations** page contains
optional free-text Group ID and Location
ID fields, which you can use to map restaurants in your system
to Toast's restaurants.

For example, if a restaurant location has a numeric account number
in your system, they can add their account identifier to the
Location ID field. If a restaurant group has an
alphanumeric group identifier in your system, they can add their group
identifier to the Group ID field.

![Group ID and Location ID fields for a restaurant location](https://doc.toasttab.com/doc/media/externalIDs.png)

Location ID and group ID values are available in the partners API in
the `externalGroupRef` and `externalRestaurantRef`
fields.

```
[
   {
      "restaurantGuid":"10c8b667-36cf-4048-8a1c-7e48390768d0",
      "managementGroupGuid":"23a5cb86-8913-4f8f-bdea-bb478c058fac",
      "restaurantName":"Toast Grill & Tap",
      "locationName":"MA",
      "createdByEmailAddress":"werner@toasttrattoria.com",
      "externalGroupRef": "123#",
      "externalRestaurantRef": "ABC",
      "modifiedDate": 1544136793429,
      "createdDate": 1544136793429,
      "isoModifiedDate": "2019-12-06T22:53:13.429Z",
      "isoCreatedDate": "2019-12-06T22:53:13.429Z"
   }
]
```

If you use a [partner API account](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apiPartnerApiClientAccounts), Toast
support recommends that you include information in your onboarding
documentation instructing users on how to fill out these fields.

Integrations that use [restaurant management
group API accounts](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationReturnDataRestaurant) cannot use these fields.


---

# Rate limiting - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRateLimiting.html

### Rate limiting

To maintain the stability and availability of APIs for all client
applications, Toast APIs are rate-limited. This ensures that a single API
client cannot consume all API resources and deny service to other clients.
Requests that exceed a rate limit are denied with an HTTP status code 429
response.

#### Toast rate limit values

Here are the current rate limits for Toast APIs. These rate limits
are described in more detail in [How rate limiting works](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiRateLimitingOverview).

**Global rate limit**
:   20 requests per second, 10,000 requests per 15 minutes

    The global rate limit limits the total number of requests that
    an API client can make across all APIs collectively.

    For example, if your client makes 3 requests to the orders
    API, and 7 requests to the labor API, it made a total of 10 requests
    against the Toast APIs collectively.

**Default API rate limit**
:   20 requests per second, 10,000 requests per 15 minutes

    API rate limits are used to limit requests to individual Toast
    APIs.

    |  |
    | --- |
    | Note |
    | The global and default API rate limits are currently the same, but might differ in the future.  There are currently no custom API rate limits for specific APIs. |

**Endpoint-specific rate limits**
:   The `GET /menus` endpoint of the menus API uses an
    endpoint rate limit for each client of one request per second per
    location. Requests that your API client makes for one restaurant do
    not affect the client's rate limits for any other restaurant.

    The `GET /metadata` endpoint uses the default API
    rate limit of 20 requests per second, 10,000 requests per 15
    minutes.

    The `GET /ordersBulk` endpoint of the orders API
    uses an endpoint rate limit of five requests per client per location
    per second. Requests to the `/ordersBulk` endpoint for
    historical data using the `startDate` and
    `endDate` query parameters must not exceed intervals
    greater than one month with calls spaced at least 5-10 seconds
    apart.

    |  |
    | --- |
    | Note |
    | Toast support recommends using the [orders updated webhook](https://doc.toasttab.com/doc/devguide/devOrdersWebhookRef.html#apiOrdersWebhookOrderUpdated) to receive order updates as they occur instead of pulling order updates with the `/ordersBulk` endpoint. |

|  |
| --- |
| Note |
| An [API account](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apitypesOfToastApiAccounts) that integrates with many restaurant locations may have additional, account-specific rate limits. These account rate limits track the total number of requests the client integration makes to certain APIs or endpoints *across all restaurant locations*.  Toast support reaches out directly to integration providers to discuss the need for an account rate limit before putting the rate limit in place. See [Account rate limits](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiAccountRateLimits) for more information. |

#### How rate limiting works

This section provides an overview of Toast rate limiting
functionality.

##### Rate limiting is per restaurant or per IP address

When the `Toast-Restaurant-External-ID` header is
included in the request, then rate limiting is applied per restaurant
location.

If the `Toast-Restaurant-External-ID` header is absent,
then rate limiting is applied per IP address. For example, the partners
API does not require a restaurant context, and you do not provide
restaurant context for requests for an authorization token.

When rate limits are applied per restaurant location, requests
that your API client makes for one restaurant location do not affect the
client's rate limits for any other restaurant. In other words, if Client
A has reached its rate limit for Restaurant A, it can continue to make
requests for Restaurant B until it exhausts its rate limit for
Restaurant B.

|  |
| --- |
| Note |
| An [API account](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apitypesOfToastApiAccounts) that integrates with many restaurant locations may have additional, account-specific rate limits that track the total number of requests the client integration makes *across all restaurant locations*. For these API accounts, the Toast platform tracks both the number of requests made per location, as described above, *and* the total number of requests made across locations. Requests made for a restaurant location may impact the ability to make requests at other restaurant locations if the client integration has exceeded its account rate limit.  Toast support reaches out directly to integration providers to discuss the need for an account rate limit before putting the rate limit in place. See [Account rate limits](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiAccountRateLimits) for more information. |

##### Rate limits are a collection of limits

A rate limit is a collection of limits. For example, 20 requests
per second and 10,000 requests per fifteen minutes.

Toast APIs return header fields in response to each request that
report on the specific limit within a rate limit that is the closest to
being exceeded.

For more information, see [Rate limiting header fields](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiRateLimitingHeaderFieldsV2).

##### Rate limits use fixed time slices

Toast APIs use fixed time slices when they calculate whether the
[individual limits
within a rate limit](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiRateLimitesAreACollectionOfLimits) were reached.

In this approach, each individual limit is associated with a time
slice that has a fixed start and end time. For example, you are limited
to 20 requests in the 09:00:00 to 09:00:01 time slice, and 10,000
requests in the 09:00:00 to 09:15:00 time slice.

The Toast APIs track the requests made within each time slice
independently. When a time slice ends, the limits associated with that
time slice are reset.

To illustrate this concept, consider the following example:

1. Requests allowed:

   * 09:00:00 to 09:00:01 time slice: 20 requests
   * 09:00:00 to 09:15:00 time slice: 10,000 requests
2. At 09:00:00, a request is made.

   Requests remaining:

   * 09:00:00 to 09:00:01 time slice: 19
   * 09:00:00 to 09:15:00 time slice: 9999
3. At 09:00:01, the shorter time slice ends and a new one
   begins:

   Requests remaining:

   * 09:00:01 to 09:00:02 time slice: 20
   * 09:00:00 to 09:15:00 time slice: 9999

With each response, the Toast APIs return a header field that
tells you when the time slice for the limit that is closest to being
exceeded will be reset.

For more information, see [Rate limiting header fields](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiRateLimitingHeaderFieldsV2).

##### Rate limit types and priority

Toast APIs use the following rate limit types:

**Global rate limit**
:   This rate limit is applied to requests made across all Toast
    APIs collectively. For example, assuming a global rate limit of 20
    requests/second, your API client can make a total of 20 requests
    per second, regardless of which API those requests are sent to.
    So, sending 15 requests to the orders API and 5 requests to the
    labor API in the same second is acceptable but sending 20 requests
    to the orders API and 20 requests to the labor API in the same
    second is not.

**API rate limits**
:   API rate limits are applied to requests made against
    individual APIs, for example, the orders API or the labor API.
    Toast APIs have a default API rate limit.

    There are currently no custom rate limits for individual
    Toast APIs.

**Endpoint rate limits**
:   Endpoint rate limits apply to requests that are made to
    individual endpoints, such as requests to the
    `/orders/{guid}` endpoint of the orders API.

The global rate limit has the highest priority, followed by the
API rate limit, and then the endpoint rate limit.

When a rate limit with a higher priority is reached, the client
application is considered rate limited, even if rate limits with a lower
priority have not been reached yet.

To better understand how rate limit priority works, consider the
following example:

* **Global rate limit:** 20
  requests/second, 10,000 requests/15 minutes
* **Orders API rate limit:** 10
  requests/second
* **Time slice:** 09:00:00 -
  09:00:01

At 09:00:00, ClientA makes a request to the orders API service for
RestaurantA. After this request is made, the requests remaining on each
rate limit are:

* **Global requests remaining:** 19
  requests/second, 9,999 requests/15 minutes
* **Orders API requests
  remaining:** 9 requests/second

Between 09:00:00 and 09:00:01, ClientA makes an additional 19
requests for RestaurantA to services *other than the orders
API*. After these requests are made, the requests remaining on
each rate limit are:

* **Global requests remaining:** 0
  requests/second, 9,980 requests/15 minutes
* **Orders API requests
  remaining:** 9 requests/second

Because the global rate limit has the highest priority and its
rate limit has been reached, the client application is rate limited,
even though orders API requests are still available. ClientA can no
longer make requests until the next time slice starts at
09:00:01.

|  |
| --- |
| Note |
| An [API account](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apitypesOfToastApiAccounts) that integrates with many restaurant locations may have additional, account-specific rate limits. These account rate limits track the total number of requests the client integration makes to certain APIs or endpoints *across all restaurant locations*.  Toast support reaches out directly to integration providers to discuss the need for an account rate limit before putting the rate limit in place. See [Account rate limits](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiAccountRateLimits) for more information. |

##### Rate limiting header fields

The following header fields are returned for every request to
inform you of the rate limit that you are closest to exceeding. They
are:

`X-Toast-RateLimit-By`
:   The type of rate limit that the client application is
    closest to exceeding: `GLOBAL`, `API`, or
    `ENDPOINT`.

    The other header fields describe a specific limit within
    this rate limit.

    When this header field contains `API` or
    `ENDPOINT`, it may also contain `ACCOUNT` to
    indicate that an account rate limit on an API or endpoint is close
    to being exceeded. When `X-Toast-RateLimit-By` contains
    more than one value, the values are comma-separated. See [Account rate limits](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiAccountRateLimits) for
    more information.

`X-Toast-RateLimit-Remaining`
:   The number of requests left in the current time slice for
    the limit that is closest to being exceeded.

`X-Toast-RateLimit-Reset`
:   A timestamp, in UNIX epoch format, for when the next time
    slice for this limit begins and the request count is reset.

    This header field uses the UNIX epoch format because it is
    easiest to compare programmatically.

When a rate limit is exceeded, an additional header,
`Retry-After`, is provided in the 429 HTTP response to help
you to recover from the rate limited state. This header gives you the
number of seconds until the request count is reset for the rate limit
specified in `X-Toast-RateLimit-By`.

The header fields are in the context of the request. For example,
consider a `GET` request to the `/orders/{guid}`
endpoint:

* If the `X-Toast-RateLimit-By` header field returns
  `GLOBAL`, then the rate limit that is closest to being
  exceeded is the global rate limit.
* If the `X-Toast-RateLimit-By` header field returns
  `API`, then the rate limit that is closest to being
  exceeded is the orders API rate limit.
* If the `X-Toast-RateLimit-By` header field returns
  `ENDPOINT`, then the rate limit for the
  `/orders/{guid}` endpoint is closest to being
  exceeded.

The values in these header fields may change significantly as you
make API requests. They reflect the rate limit type and the individual
limit within that rate limit type that is closest to being exceeded.
These values change as requests are made.

|  |
| --- |
| Note |
| Rate limiting header fields are not included in authentication API responses. See [Authentication rate limit](https://doc.toasttab.com/doc/devguide/apiAuthenticationRateLimit.html) for more information. |

##### Handling being rate limited

Toast APIs return a 429 HTTP response code when an API client that
has been rate limited submits a request.

If your client receives a 429 response, it should stop making
requests and inspect the `X-Toast-RateLimit-Reset` or
`Retry-After` header field to determine when it can start
making requests again.

#### Programming a client for sustained time-sensitive requests

Toast API rate limits include both shorter and longer time slices to
support bursts of requests (20 per second) as well as sustained requests
over time (10,000 per 15 minutes). API clients that need to make sustained
requests for time-sensitive data, such as order status updates, must be
programmed to take both time slices into account so that they are not rate
limited when attempting to make a request for that time-sensitive
data.

To better understand why, consider the following example:

* A global rate limit of 20 requests/second and 10,000 requests
  per 15 minutes.
* All requests in the example are made within the same 15 minute
  time slice.

If an API client makes 20 requests per second, as allowed by the
shorter time slice, then in 8 minutes and 20 seconds, it will have made
10,000 requests and any subsequent requests will exceed the limit for the
15-minute time slice. The client must wait 6 minutes and 40 seconds for
the 15-minute time slice to reset before it can continue to make
requests.

To avoid this long delay, the client application should throttle its
requests so that it does not exceed either limit. Specifically, if the
client makes 11 requests per second, it does not exceed either limit
because this request frequency translates into 9,900 requests in 15
minutes (11 requests X 60 seconds X 15 minutes = 9,900).

#### Account rate limits

|  |
| --- |
| Important |
| The other rate limits described earlier in this chapter apply *to all client integrations*. Toast support applies the *account rate limits* described in this section to a small number of client integrations that make requests for a very large number of restaurants.  Toast support reaches out directly to integration developers to discuss the need for an account rate limit before putting the rate limit in place. If Toast support has not reached out to you about an account rate limit, then you can ignore the account rate limit information in this section. |

[API accounts](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apitypesOfToastApiAccounts) that
integrates with many restaurant locations may have additional
account-specific rate limits. Account rate limits are used to limit the
total number of requests an integration can make to an API or an endpoint
*across all restaurant locations* during a given time
slice. For these accounts, the Toast platform tracks both the number of
requests made per location and the total number of requests made across
locations within each time slice.

##### Account rate limit example

To understand how account rate limits work, consider the following
example:

* The orders API uses the default API rate limit of 20 requests
  per second and 10,000 requests per 15 minutes (the client cannot
  exceed either limit).
* Account A has 10,000 locations.

With the standard rate limits that apply to all API accounts, it
would be possible for Account A's integration to send 200,000 requests
to the orders API in a single second (20 requests per second X 10,000
locations), potentially overwhelming the service.

To avoid this situation, Toast support assigns Account A an
account rate limit of 20,000 requests per second for the orders API.
This means that:

* Account A's integration can make no more than 20,000 requests
  to the orders API per second *across all 10,000
  locations*.
* If Account A's integration makes 20 requests in a single
  second for 1,000 of its locations, as allowed by the standard rate
  limits, it will have used up its 20,000 requests in that second and
  it will be prevented from making requests for the other 9,000
  locations during that same second.

##### Account rate limits are per API or per endpoint

Account rate limits are applied per API or per endpoint. Requests
that your integration client sends to one API or endpoint do not affect
the client's rate limits for other APIs or endpoints. In other words, if
Client A has reached its account rate limit for an API during a given
time slice, it can still make requests to other Toast APIs during the
same time slice. This also holds true for endpoint requests. If Client A
has reached its account rate limit for an endpoint during a given time
slice, it can still make requests to other endpoints.

##### Account rate limit header field

The value `ACCOUNT` is added to the
`X-Toast-RateLimit-By` header field when an account rate
limit is the closest to being exceeded:

* This is the value of the `X-Toast-RateLimit-By`
  header field when the account rate limit for an API is closest to
  being exceeded:

  `X-Toast-Ratelimit-By: API, ACCOUNT`
* This is the value of the `X-Toast-RateLimit-By`
  header field when the account rate limit for an endpoint is closest
  to being exceeded:

  `X-Toast-Ratelimit-By: ENDPOINT, ACCOUNT`

##### Additional locations may affect the account rate limit

If you are an integration provider with an account rate limit, and
additional restaurant locations add your integration to their
restaurant, those additional locations will contribute to the total
number of requests your integration makes across all locations. This can
potentially cause the integration to exceed the account rate limit. For
this reason, as additional locations add your integration to their
restaurant, you may need to adjust how your integration handles
throttling to ensure it doesn't exceed its account rate limit.


---

# Paginating response data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html

### Paginating response data

[Some Toast API endpoints](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiResponsePaginationTypes)
paginate response data to limit the number of data objects they return, to
make the size of the endpoint response data more practical for your
integration. You can make additional requests to these endpoints to get data
objects that were excluded from the response to your first request.

For example, a restaurant might have a large number of discounts. An
endpoint that returns discount data objects might limit the number of
objects in a single response to ensure that the data size of the response
does not become too large.

If an endpoint paginates response data, the number of objects that it
returns in a single response is based on the data size of those objects. An
endpoint might return more or fewer objects in a single request depending on
the amount of data in each object.

#### Page token pagination

|  |
| --- |
| Important |
| The page token response data pagination described here is new Toast API functionality and replaces the previous response pagination parameters in the configuration API. The previous pagination query parameters for configuration API endpoints (`pageSize` and `page`) are deprecated and are removed from the configuration API endpoints. For more information about this and other changes to Toast APIs, see [API update announcements](https://doc.toasttab.com/doc/relnotes/apiReleaseNotesChangeDeployments.html). |

An endpoint that paginates response data provides an identifier
string for *the next set* of response data objects in
an HTTP response header field. The endpoint accepts that identifier string
as an optional query parameter in the following requests that you make and
returns the next set of response data objects.

##### Paginated response header field and query parameter

When you interact with an endpoint that has paginated results, you
use the following header field and query parameter:

`Toast-Next-Page-Token`
:   A response header field that identifies the following set of
    objects that the endpoint will return. This value is a string that
    you use in the `pageToken` query parameter in a
    following request.

`pageToken`
:   A query parameter that controls the first object that the
    endpoint returns in its response data. You get the string value of
    this parameter from the `Toast-Next-Page-Token` header
    field in the response to a previous request.

Some Toast API endpoints paginate responses in a way that returns
a fixed number of result data objects in each page. If the endpoint you
are using includes the `pageSize` and `page` query
parameters, the endpoint uses fixed-size response data pagination. For
more information, see [Fixed-size paginated responses](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiResponseDataPaginationFixedPageSize).

##### How to use paginated Toast API responses

The following procedure explains how to use paginated Toast API
responses.

**Using paginated Toast API responses**

1. Send a REST API request that returns a large number of data
   objects in its response. For example, `GET` requests to
   endpoints in the configuration API might return a large number of
   data objects for some restaurant configuration components.
2. Get the token string for the next set of response objects from
   the `Toast-Next-Page-Token` header field in the
   response.

   If the response does not include a
   `Toast-Next-Page-Token` field, there are no more data
   objects in the response for your endpoint request and there is no
   next page to return.

   The following example shows the
   `Toast-Next-Page-Token` field in the header of a Toast
   API response.

   ```
   Date: Tue, 31 Aug 2021 21:16:09 GMT
   Content-Type: application/json
   Transfer-Encoding: chunked
   Connection: keep-alive
   X-Toast-RateLimit-By: API
   X-Toast-RateLimit-Remaining: 19
   X-Toast-RateLimit-Reset: 1630444570
   toast-next-page-token: Yzp7Imxhc3RUeXBlIjoiTWVudUl0ZW0iLCJsYXN0RXZhbHVhdGVkS2V5
     Ijp7IkFjdGl2ZVZlcnNpb25QSyI6eyJzIjoiUFVCTElTSCM3NmNiMWIwNS1jYjFlLTRhZGYtODYzY
     S1iMmE5NGE1ZWNkY2YjTWVudUl0ZW0iLCJuIjpudWxsLCJiIjpudWxsLCJtIjpudWxsLCJsIjpudW
     xsLCJicyI6bnVsbCwibnVsbCI6bnVsbCwiYm9vbCI6bnVsbCwic3MiOm51bGwsIm5zIjpudWxsfSw
     iU0siOnsicyI6Ik1lbnVJdGVtI2MxOTdmNTE3LWFjZTQtNDZjOC1hYWU2LTJlZDBkN2QwNjUyYiIs
     Im4iOm51bGwsImIiOm51bGwsIm0iOm51bGwsImwiOm51bGwsImJzIjpudWxsLCJudWxsIjpudWxsL
     CJib29sIjpudWxsLCJzcyI6bnVsbCwibnMiOm51bGx9LCJBY3RpdmVWZXJzaW9uMiI6eyJzIjoiYz
     E5N2Y1MTctYWNlNC00NmM4LWFhZTYtMmVkMGQ3ZDA2NTJiIiwibiI6bnVsbCwiYiI6bnVsbCwibSI
     6bnVsbCwibCI6bnVsbCwiYnMiOm51bGwsIm51bGwiOm51bGwsImJvb2wiOm51bGwsInNzIjpudWxs
     LCJucyI6bnVsbH0sIlBLIjp7InMiOiJQVUJMSVNIIzc2Y2IxYjA1LWNiMWUtNGFkZi04NjNhLWIyY
     Tk0YTVlY2RjZiNGVUxMIzU5NyIsIm4iOm51bGwsImIiOm51bGwsIm0iOm51bGwsImwiOm51bGwsIm
     JzIjpudWxsLCJudWxsIjpudWxsLCJib29sIjpudWxsLCJzcyI6bnVsbCwibnMiOm51bGx9fSwiYWN
     0aXZlVmVyc2lvbkluZGV4IjoiQUNUSVZFX1ZFUlNJT05fMiIsInZlcnNpb24iOiJ2MSJ9
   vary: Accept-Encoding
   content-encoding: gzip
   Strict-Transport-Security: max-age=31536000; includeSubDomains
   CF-Cache-Status: DYNAMIC
   Expect-CT: max-age=604800, 
     report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
   Server: cloudflare
   CF-RAY: 6879473d0d6f1851-EWR
   ```
3. Include the token string in the `pageToken` query
   parameter of another request to the endpoint.

   The following example shows the `pageToken` query
   parameter with a token string value.

   ```
   https://[toast-api-hostname]/config/v2/discounts?pageToken=Yzp7Imxhc3RUeXBlIjoiT
     WVudUl0ZW0iLCJsYXN0RXZhbHVhdGVkS2V5Ijp7IkFjdGl2ZVZlcnNpb25QSyI6eyJzIjoiUFVCTEl
     TSCM3NmNiMWIwNS1jYjFlLTRhZGYtODYzYS1iMmE5NGE1ZWNkY2YjTWVudUl0ZW0iLCJuIjpudWxsL
     CJiIjpudWxsLCJtIjpudWxsLCJsIjpudWxsLCJzcyI6bnVsbCwibnMiOm51bGwsImJzIjpudWxsLCJ
     udWxsIjpudWxsLCJib29sIjpudWxsfSwiU0siOnsicyI6Ik1lbnVJdGVtIzhhYzViNGU1LTRkOWMtN
     GNmNy1hZDE4LTBjZDg0ZmI3ZjhjZSIsIm4iOm51bGwsImIiOm51bGwsIm0iOm51bGwsImwiOm51bGw
     sInNzIjpudWxsLCJucyI6bnVsbCwiYnMiOm51bGwsIm51bGwiOm51bGwsImJvb2wiOm51bGx9LCJBY
     3RpdmVWZXJzaW9uMiI6eyJzIjoiOGFjNWI0ZTUtNGQ5Yy00Y2Y3LWFkMTgtMGNkODRmYjdmOGNlIiw
     ibiI6bnVsbCwiYiI6bnVsbCwibSI6bnVsbCwibCI6bnVsbCwic3MiOm51bGwsIm5zIjpudWxsLCJic
     yI6bnVsbCwibnVsbCI6bnVsbCwiYm9vbCI6bnVsbH0sIlBLIjp7InMiOiJQVUJMSVNIIzc2Y2IxYjA
     1LWNiMWUtNGFkZi04NjNhLWIyYTk0YTVlY2RjZiNGVUxMIzU5NSIsIm4iOm51bGwsImIiOm51bGwsI
     m0iOm51bGwsImwiOm51bGwsInNzIjpudWxsLCJucyI6bnVsbCwiYnMiOm51bGwsIm51bGwiOm51bGw
     sImJvb2wiOm51bGx9fSwiYWN0aXZlVmVyc2lvbkluZGV4IjoiQUNUSVZFX1ZFUlNJT05fMiIsInZlc
     nNpb24iOiJ2MSJ9
   ```
4. Repeat [Step 2](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiPaginationGetPageTokenStep) and [Step 3](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiPaginationPageTokenStep)
   until the response you receive does not include a
   `Toast-Next-Page-Token` header field.

   When the response does not include the
   `Toast-Next-Page-Token` header field, you have received
   all the data objects in the endpoint response.

##### Managing 409 HTTP errors in paginated responses

A restaurant might change its configuration while your integration
client is retrieving paginated data for that restaurant. If a restaurant
that your client is retrieving paginated data for publishes any changes
to its configuration during the data retrieval, the Toast platform sends
a 409 HTTP error.

If your integration client receives a 409 error, it should
re-submit the request it is making, without the `pageToken`
query parameter, so that the response restarts from the first
page.

#### Fixed-size paginated responses

[Some Toast API endpoints](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiResponsePaginationTypes)
allow your client to control the number of objects in the response data. In
a Toast API endpoint that uses fixed page size response data pagination, you
specify:

* The number of objects in the response data.
* The first object that the endpoint will return.

|  |
| --- |
| Note |
| Most Toast APIs *do not* paginate responses using fixed page sizes. If the Toast API endpoint that you are using does not accept the `pageSize` and `page` query parameters, that endpoint uses the pagination functionality explained in [Page token pagination](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiPaginationPageToken). |

##### Query parameters for fixed page size pagination

For fixed page size pagination, you use the following query
parameters:

`pageSize`
:   The maximum number of objects that a Toast API endpoint will
    return in the response data for a single request.

`page`
:   The sequence number of the first set of objects that a Toast
    API endpoint will return in response data.

##### How to use a fixed page size paginated response

To use the paginated response of a Toast API endpoint that uses a
fixed page size, make a `GET` request to the endpoint. Inspect
the `Toast-Total-Result-Count` HTTP header field in the
response to determine the total number of objects the endpoint will
return.

|  |
| --- |
| Note |
| Currently, the `/ordersBulk` endpoint does not include the `Toast-Total-Result-Count` HTTP header field in its response. The Toast integrations team will announce when it becomes available in the API release notes. To sign up to receive API release note notifications, see [API status and updates](https://doc.toasttab.com/doc/devguide/apiUpdatesEmailDistributionList.html). |

In subsequent requests, use the `pageSize` and
`page` query parameters to specify the number of objects to
return per page and the sequence number of the page to return,
respectively.

Toast API endpoints that paginate responses to control the size of
response data also return URLs for the first, adjacent, and last sets of
objects in the `Link` HTTP header fields, as described in the
[proposed Internet
Engineering Task Force (IETF) web linking standard](https://tools.ietf.org/html/rfc5988). The value of
the *`rel`* parameter in the `Link` field
indicates the relationship of the URL to the current set of
objects.

The following example shows `Link` header fields in a
Toast API response.

**Link header fields with pagination information**

```
Link: <https://[toast-api-hostname]/config/v2/menus?pageSize=1>; rel="first"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
Link: <https://[toast-api-hostname]/config/v2/menus?pageSize=1&page=5>; rel="self"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
Link: <https://[toast-api-hostname]/config/v2/menus?pageSize=1&page=4>; rel="prev"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
Link: <https://[toast-api-hostname]/config/v2/menus?pageSize=1&page=6>; rel="next"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
Link: <https://[toast-api-hostname]/config/v2/menus?pageSize=1&page=10>; rel="last"![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#co-d1e46DF66837F-C33C-4DCD-9FF7-6D9DA64EC0D9) | The URL and query parameters that will return the first set of objects available from the API endpoint. |
| [2](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#co-d1e48DF66837F-C33C-4DCD-9FF7-6D9DA64EC0D9) | The URL and query parameters that will return the current set of objects from the API endpoint. |
| [3](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#co-d1e50DF66837F-C33C-4DCD-9FF7-6D9DA64EC0D9) | The URL and query parameters that will return the set of objects immediately preceding the current set from the API endpoint. |
| [4](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#co-d1e52DF66837F-C33C-4DCD-9FF7-6D9DA64EC0D9) | The URL and query parameters that will return the first set of objects immediately after the current set from the API endpoint. |
| [5](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#co-d1e54DF66837F-C33C-4DCD-9FF7-6D9DA64EC0D9) | The URL and query parameters that will return the last set of objects available from the API endpoint. |

#### Response pagination types used by Toast APIs

The following table identifies the pagination functionality used by
Toast API endpoints.

| API and endpoint | Response pagination used |
| --- | --- |
| Configuration API | All endpoints that return paginated response data use *page token pagination*. For more information, see [Page token pagination](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiPaginationPageToken).  |  | | --- | | Note | | Configuration API endpoints previously used fixed-size pagination for response data. The parameters for using fixed-size pagination are still supported, but fixed-size pagination is deprecated *for configuration API endpoints*.  As of 2021-12-06, configuration API endpoints no longer support fixed-size pagination and only support page token pagination. For more information about this and other changes to Toast APIs, see [API update announcements](https://doc.toasttab.com/doc/relnotes/apiReleaseNotesChangeDeployments.html). | |
| Kitchen API | All endpoints that return paginated response data use *page token pagination* for response data.  For more information, see [Page token pagination](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiPaginationPageToken). |
| Orders API `/ordersBulk` endpoint | The orders API `/ordersBulk` endpoint uses *fixed-size pagination*.  For more information, see [Fixed-size paginated responses](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiResponseDataPaginationFixedPageSize). |


---

# API responses and errors - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiResponsesAndErrors.html

### API responses and errors

For successful requests, the HTTP response code is usually 200. The
response body contains an API-specific object in JSON format. In certain
cases, other HTTP response codes might be used to indicate success.

If a request cannot be processed successfully, a
4*`xx`* HTTP response code is usually returned. The
response body is a serialized JSON `ErrorMessage` that contains
information about the error. For more information, see [ErrorMessage information](https://doc.toasttab.com/doc/devguide/apiResponsesAndErrors.html#apiErrorMessage).

Your Toast API integration client software must also be prepared to
handle 5*`xx`* response codes, which indicate a
potential problem in the Toast platform service.

Be aware that different APIs handle errors in different ways. If it
makes sense for the API call and implementation, it is acceptable to flag a
warning or even an error and continue processing a multi-step request to
completion.

#### Monitoring Toast API responses

Toast APIs return important information about the results of the
REST requests that you send. The Toast APIs return standard HTTP
responses, which include information about the result of the REST request
and information about any errors that occurred. When you develop an
integration with the Toast platform, your client software must monitor and
respond to those HTTP responses.

The Toast platform performs restaurant functions and returns
restaurant information in response to successful REST requests. The Toast
platform does not monitor the status of individual integration clients or
take any action when a client sends one or more unsuccessful requests.
Your Toast platform integration client software must react to unsuccessful
REST requests in a way that makes it possible for your organization to
correct any problems.

To get help correcting problems that result in unsuccessful Toast
API requests, contact Toast integration support.

#### HTTP status codes

Toast APIs use [HTTP status
codes](https://tools.ietf.org/html/rfc7231#section-6) to indicate the status of an API request. Toast APIs support
the following HTTP status codes.

Almost all APIs support the HTTP codes below and no additional HTTP
codes. If an API supports any HTTP codes other than the ones listed below,
[the reference
documentation for the API](https://doc.toasttab.com/openapi/) lists the additional supported
codes.

##### Success

| Status code | Name | Description |
| --- | --- | --- |
| 200 | OK | Successful response. The Toast platform was able to process the API request as expected. |
| 204 | No Content | The request was successful but there is no content to return. |

##### Client error

| Status code | Name | Description |
| --- | --- | --- |
| 400 | Bad Request | The API request triggered a known error.  A 400 status code often occurs when the syntax of the request is incorrect or the body of a `POST` request is not structured correctly.  You are responsible for evaluating the [error message](https://doc.toasttab.com/doc/devguide/apiResponsesAndErrors.html#apiErrorMessage) returned in the API error response in order for future API requests to avoid this error. |
| 401 | Unauthorized | The authentication token you submitted is not a recognized Toast API [authentication token](https://doc.toasttab.com/doc/devguide/authentication.html#getting-authentication-token).  It is possible that you are submitting an authentication token that has expired and you need to request a new token. |
| 403 | Forbidden | You are not permitted to access the resource that you are attempting to access.  This error often occurs when:  * You try to access a restaurant that is not [connected   to your integration](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html) (if using a [partner API   client](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationReturnDataPartner)). * You try to access a restaurant that is not [within the management   group you work with](https://doc.toasttab.com/doc/devguide/apiRestaurantsInGroup.html) (if using a [restaurant   management group client](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationReturnDataRestaurant)). * Your API credentials do not have the proper   authorization to use the API you are trying to use. |
| 404 | Not Found | You are attempting to access an unknown resource. This error often occurs if you send a request to an endpoint that does not exist. |
| 409 | Conflict | Your API request conflicts with the current state of Toast product data. For example, you might send a `PUT` request to update an employee's wage override for one of their jobs, but an earlier request removed the job from the employee.  This error is also returned if a restaurant publishes changes to its configuration while you are retrieving paginated data from that restaurant. See [Managing 409 HTTP errors in paginated responses](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html#apiPagination409HTTPErrors) for more information. |
| 422 | Unprocessable Entity | Your API request contains something that the Toast platform cannot process.  A 422 HTTP response often occurs when an external partner tries to authorize a credit card transaction with `amount` and `tipAmount` values that are both $0. |
| 429 | Too Many Requests | You have exceeded your [rate limit](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html) and must wait before sending more Toast API requests. |
| 499 | Client Closed Request | Your system closed the API request before the Toast platform was able to process the request. |

##### Server error

| Status code | Name | Description |
| --- | --- | --- |
| 500 | Internal Server Error | The Toast platform was unable to complete the request due to an unexpected internal server error. |
| 502 | Bad Gateway | The Toast platform experienced an internal gateway error when attempting to process the request. |
| 504 | Gateway Timeout | The Toast platform was unable to process the request because internal services took too long to complete processing actions (timeout). |

#### ErrorMessage information

Toast APIs return a JSON `ErrorMessage` object in the
HTTP response to an unsuccessful REST request. The
`ErrorMessage` object includes information that describes one
or more errors encountered during the processing of a request.

It contains the following values:

`status`
:   The HTTP status code.

`code`
:   Service-specific result code. For example, 10003.

`message`
:   A brief, user-friendly message that describes the
    error.

`messageKey`
:   This value is not used. It is included for future use.

`fieldName`
:   This value is not used. It is included for future use.

`link`
:   The URL of a Toast page that provides more information about
    the error.

`requestId`
:   The identifier of the HTTP request that generated the
    error.

`developerMessage`
:   Optional technical information that might be useful for a
    developer who is debugging the cause of the error.

`errors`
:   A list of JSON `ErrorMessage` objects.

`canRetry`
:   This value is not used. It is included for future use.

The following example shows the `ErrorMessage` object for
an unsuccessful Toast API REST request.

**ErrorMessage object**

```
{
  "status": 400,
  "code": 10025,
  "message": "Payment amount cannot be empty",
  "messageKey": null,
  "fieldName": null,
  "link": null,
  "requestId": "2ea769e2-7fcb-4148-ba75-8de77a248h21",
  "developerMessage": null,
  "errors": [],
  "canRetry": null
}
```

#### Common errors

| Error | Description |
| --- | --- |
| `ReadOnlyResource` | The resource is currently marked READ-ONLY and cannot be updated. |
| `InvalidRestaurant` | The specified restaurant is unknown or invalid. |
| `InvalidExternalIdentifier` | The specified shift external identifier is invalid for this restaurant. For example, it has an incorrect format, length, or other issue. |
| `UnauthorizedOperation` | The client is not authorized to perform this operation. |
| `VersionMismatch` | The client has attempted to use stale versions to update one or more domain objects. |


---

# Scopes - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiScopes.html

### Scopes

Access to Toast APIs, specific endpoints, and specific API endpoint
operations is controlled by the scopes that are associated with your [API account](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html).
Toast API scopes and their capabilities are described below.

To see the scopes associated with your API client, you must decrypt
the authentication token you receive after you request an authentication
token. For more information about the contents of a Toast API authentication
token, see [Authentication return data for a partner API client](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationReturnDataPartner) and [Authentication return data for a restaurant management group
API client](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationReturnDataRestaurant).

#### API client scope reference

The following table describes the scopes that determine what actions
your Toast API client has permission to perform.

| API | Scope Type | Scope Name | Description |
| --- | --- | --- | --- |
| Cash management | Read | `cashmgmt:read` | Allows reading from the [cash management API](https://doc.toasttab.com/openapi/cashmanagement/overview/). |
| Configuration | Read | `config:read` | Allows reading from the [configuration API](https://doc.toasttab.com/openapi/configuration/overview/). |
| Credit cards | Write | `credit_cards.authorization:write` | Allows authorization of payments through the [credit cards API](https://doc.toasttab.com/openapi/creditcards/overview/). |
| Kitchen | Read | `kitchen:read` | Allows reading from the[kitchen API](https://doc.toasttab.com/openapi/kitchen/overview/). |
| Labor | Read | `labor:read` | Allows reading all data except employees from the [labor API](https://doc.toasttab.com/openapi/labor/overview/). |
| Labor | Read | `labor.employees:read` | Allows reading employee information from the [labor API](https://doc.toasttab.com/openapi/labor/overview/). |
| Labor | Write | `labor.employees:write` | Allows updating employee information in the [labor API](https://doc.toasttab.com/openapi/labor/overview/). |
| Labor | Write | `labor.jobs:write` | Allows updating job information in the [labor API](https://doc.toasttab.com/openapi/labor/overview/). |
| Labor | Write | `labor.shifts:write` | Allows updating shift information in the [labor API](https://doc.toasttab.com/openapi/labor/overview/). |
| Menus | Read | `menus.channel:read` | Allows reading from the [menus API V3](https://doc.toasttab.com/openapi/menusv3/overview/).  |  | | --- | | Note | | Ordering partner integrations must use V3 of the menus API, which requires the `menus.channel:read` scope. Because V3 currently only supports ordering partner integrations, all other integration partners should continue to use menus API V2, which requires the `menus:read` scope. | |
| Menus | Read | `menus:read` | Allows reading from the [menus API V2](https://doc.toasttab.com/openapi/menus/overview/).  |  | | --- | | Note | | Because menus API V3 currently only supports ordering partner integrations, all other integration partners should continue to use menus API V2, which requires the `menus:read` scope. | |
| Order management configuration | Read | `digital_schedule:read` | Allows reading from the [order management configuration API](https://doc.toasttab.com/openapi/ordermgmt.configuration/overview/). |
| Orders | Read | `orders:read` | Allows reading from the [orders API](https://doc.toasttab.com/openapi/orders/overview/) with the exception of guest information.  If your API client creates orders, then to read orders, it must have both the `orders:read` scope and the `orders.channel:read` scope. |
| Orders | Read | `orders.channel:read` | Allows API clients that submit orders to the Toast platform to read from the [orders API](https://doc.toasttab.com/openapi/orders/overview/).  To read orders, the API client must have both the `orders:read` scope and the `orders.channel:read` scope.  API clients that have the `orders.channel:read` scope can only read the orders that they submitted. They cannot read orders from any other source. |
| Orders | Read | `delivery_info.address:read` | Allows reading guest delivery address information from the [orders API](https://doc.toasttab.com/openapi/orders/overview/). |
| Orders | Read | `guest.pi:read` | Allows reading guest and curbside pickup information from the [orders API](https://doc.toasttab.com/openapi/orders/overview/). |
| Orders | Write | `orders.delivery_info:write` | Allows updating delivery information from the [orders API](https://doc.toasttab.com/openapi/orders/overview/). |
| Orders | Write | `orders.discounts:write` | Allows adding discounts to orders using the [orders API](https://doc.toasttab.com/openapi/orders/overview/). |
| Orders | Write | `orders.items:write` | Allows adding items to orders using the [orders API](https://doc.toasttab.com/openapi/orders/overview/). |
| Orders | Write | `orders.orders:write` | Allows posting orders orders using the [orders API](https://doc.toasttab.com/openapi/orders/overview/). |
| Orders | Write | `orders.payments:write` | Allows adding payments and tips to existing orders using the [orders API](https://doc.toasttab.com/openapi/orders/overview/). |
| Orders | Void | `orders.channel:void` | Allows voiding an order using the [orders API](https://doc.toasttab.com/openapi/orders/overview/). |
| Packaging preferences | Read | `packaging:read` | Allows reading a restaurant's packaging preferences configuration using the [packaging configuration API](https://doc.toasttab.com/openapi/packaging/overview/). |
| Restaurant availability  Restaurants | Read | `restaurants:read` | Allows reading from the [restaurant availability API](https://doc.toasttab.com/openapi/rx.availability.service/overview/).  Allows reading from the [restaurants API](https://doc.toasttab.com/openapi/restaurants/overview/). |
| Stock | Read | `stock:read` | Allows reading from the [stock API](https://doc.toasttab.com/openapi/stock/overview/). |
| Stock | Write | `stock:write` | Allows updating stock status for menu items (and modifier option [item references](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference)) using the [stock API](https://doc.toasttab.com/openapi/stock/overview/). |

#### Getting API client scopes

The scopes that give your Toast API client permission to use APIs,
endpoints, and endpoint functions are assigned based on your
organization's business requirements. Some Toast API scopes are available
to all API clients and some scopes are assigned to clients after specific
certification of the integration function they are used for.

If your API client does not have the scope required to perform an
action, you can contact the Toast integrations team to learn about the
requirements for getting access to the scope. The business requirements of
your organization and the status of your integration affect the scopes
assigned your API client.


---

# Toast APIs and the enterprise module - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiToastApisAndTheEnterpriseModule.html

### Toast APIs and the enterprise module

Using Toast Web, you define configuration for
how your Toast platform behaves. This includes such tasks as defining menus,
kitchen set up, dining area set up, applied tax rates, and so on. You must
publish this configuration to make it available to the Toast POS devices
used throughout your restaurant. For information about how to publish
configuration changes, see [Publishing updates to restaurant configuration](https://doc.toasttab.com/doc/platformguide/platformPublishingOverview.html).

The enterprise module is an optional module that allows restaurant
chains with multiple locations to share configuration across locations, for
example, a common set of menu items. Core to the enterprise module's
functionality is the concept of versions, which allow your locations to
share some aspects of a configuration entity (a menu, menu item, discount
reason, tax rate, and so on) while maintaining the ability to override other
aspects. For example, your locations may share a Main Course menu group that
includes chicken, salmon, lobster, and steak menu items. One location may
not be able to serve lobster, so it would use a version of the Main Course
menu group that omits the lobster menu item.

When you publish a restaurant's configuration, the Toast platform
resolves which version of each configuration entity to use for each
location. The Toast platform stores these resolved entities in its published
data store. The published data store only ever includes one instance of each
versioned entity for a given location. The Toast APIs use the published data
store as their source of data. When you make a call to the Toast APIs, you
must specify the restaurant that you are making the call for. The data you
receive back from the data store is resolved for that location.

For more information on versions and how the Toast platform resolves
which version to use, see [Session restaurant](https://doc.toasttab.com/doc/platformguide/sessionRestaurant.html).

|  |
| --- |
| Note |
| Because they can be shared among locations, employees are managed somewhat differently than other configuration entities. Future documentation will cover how the Toast APIs behave with respect to employees. |


---

# API status and updates - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUpdatesEmailDistributionList.html

### API status and updates

To develop and maintain your Toast API integration, you need
information about the status of API services and changes to the APIs. You
can get this information from:

* The Toast [platform system status web
  page](https://status.toasttab.com/).

  The platform system status page describes the state of Toast
  platform services and features.
* The Toast [API
  status web page](https://status-dev.toasttab.com/).

  The API status web page describes the state of each public Toast
  API in the production environment. It also summarizes the state of all
  public APIs in the sandbox environment.
* The Toast API integration email distribution list.

  The Toast API integration email distribution list provides
  periodic communication of changes and other information about
  integrating with Toast products.
* The [API release notes](https://doc.toasttab.com/doc/relnotes/devPortalApiChangeLog.html).

  The API release notes provide the latest change information, a
  record of recent changes, and information about upcoming changes.

You can use the following form to sign up for the Toast API
integration email distribution list.


---

# Using REST APIs - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingRestApis.html

### Using REST APIs

Many Toast APIs are [Representational
State Transfer](https://developer.mozilla.org/en-US/docs/Glossary/REST) (REST) APIs. You can use REST APIs to connect your
software and information systems to the Toast platform. REST APIs can
perform functions including the following.

**REST APIs can:**

* Get information about business operations and product
  configuration from the Toast platform.
* Add new information about business operations to the Toast
  platform.
* Update existing Toast platform information about business
  operations and product configuration.
* Make information about business operations inactive, when you no
  longer need it.

REST APIs use [HyperText
Transfer Protocol](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/Overview) (HTTP) requests to perform functions. To use a REST
API function, you send an HTTP request to the REST API server. The server
sends you a response that tells you whether your request was successful and
includes information about the result of the operation.

When you visit a web page in your web browser, you are sending an HTTP
request to a server. The request you make is to get the contents of a
resource you name. That resource is the web page. To use REST API functions,
you make a request in the same way that your web browser does. In addition
to getting resources (a `GET` request), you can create new
resources using a `POST` request, update existing resources using
a `PUT` request, or inactivate a resource using a
`DELETE` request. The [HTTP
standard defines the methods](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Methods) (`GET`, `POST`,
`PUT`, `DELETE`, and others) that you can use.

An HTTP *client* sends requests to an HTTP
*server*. For example, a web browser is an HTTP client
that sends HTTP requests to a web server. You use an HTTP client to send
requests to Toast REST APIs. You can choose any HTTP client software that
suits your information technology environment and your goals for using Toast
APIs. The following list includes examples of HTTP client software.

**Example HTTP client software for REST API requests**

* The [curl command-line
  program](https://curl.se/). You can use curl to send HTTP
  requests to a REST API server. The examples in this documentation use
  the curl program. Using
  curl commands isn't a practical way to build
  a real API integration but it is an effective way to try requests and
  see what's in the communication between the client and the
  server.
* Open-source and commercial REST API client products. You can find
  many tools available for working with REST APIs on the web. You can
  install REST API client tools on a local computer or use online tools
  that run on the web. Find and use tools that meet your information
  technology requirements and meet your information technology security
  requirements.
* An HTTP library for the programming language you use to build an
  API integration with the Toast platform. Using a programming language is
  much more practical for building a real API integration. For example,
  the JavaÂ® programming language
  includes [an
  `HTTPClient` class](https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html) you can use to make HTTP requests
  in your program. This documentation does not provide information about
  using specific programming languages to use Toast REST APIs.


---

# Dates and timestamps - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/api_dates_and_timestamps.html

### Dates and timestamps

All Toast APIs use ISO 8601 string representation for dates and
timestamps and all such dates and timestamps are in UTC. Your Toast API
integration must convert dates and times to the appropriate time zone. For
example, your integration might convert a date and time value to the time
zone of a restaurant location.

#### Timestamp and time formats

Toast APIs include date and time values and time-only values.

* Date and time values (timestamps) use the [ISO
  8601](https://en.wikipedia.org/wiki/ISO_8601#Times) format:
  `yyyy-MM-ddâTâHH:mm:ss.SSSÂ±hhmm`.

  For example, this date and time are in Coordinated Universal
  Time (UTC): `2025-02-15T12:30:00.000+0000`. This date and
  time are in North American Pacific Standard time:
  `2025-02-15T12:30:00.000-0800`.

  To support specific integration requirements, some Toast API
  timestamp values use formats other than ISO 8601. Check the timestamp
  format used for specific values [in the API reference
  documentation](https://doc.toasttab.com/openapi/).

  Toast API timestamps are absolute with optional
  milliseconds.
* Time-only values specify a time of day. For example, a time-only
  value might indicate a time of day in relation to a recurring daily
  schedule.

  Many Toast API time values use ISO 8601 24-hour format:
  `HH:mm:ss.SSS`. Check the time format used for specific
  Toast API values [in the API reference
  documentation](https://doc.toasttab.com/openapi/).

When you include an ISO 8601 date in an endpoint URL query
parameter, you must URL encode the special characters "+" and "-" signs in
the date format.

For example, the "+" in the date
`2020-01-01T14:13:12.000+0400` must be escaped to
`2020-01-01T14:13:12.000%2B0400`.

For more information about URL encoding, see the [IETF
URI](https://tools.ietf.org/html/rfc3986#section-2.1) standard.

#### Daylight savings time

If you submit time-based information to the Toast platform, or you
interact with time-based configuration, you need to consider daylight
savings time when you do your development. Observe [state-specific
daylight savings practices](https://en.wikipedia.org/wiki/Daylight_saving_time_in_the_United_States#Local_DST_observance) when doing development related to
daylight savings time.

##### Submitting time-based information

UTC times are not affected by daylight savings time. If you submit
data to the Toast platform that includes timestamps, such as the
`openedDate` and `promisedDate` for an order or
the `inDate` and `outDate` of an employee shift,
your integration must consider and accommodate daylight savings time
when it determines timestamp values.

For example:

* Today is Saturday. Daylight savings time
  *begins* tomorrow, meaning that the clock jumps
  from 1:59 AM to 3:00 AM.

  A guest places a scheduled order to be fulfilled at 6:00 PM
  tomorrow.

  The `openedDate` and `promisedDate`
  should be set to the UTC equivalent of 5:00 PM local time today.
  Tomorrow, that timestamp will correspond to 6:00 PM local
  time.
* Today is Saturday. Daylight savings time
  *ends* tomorrow, meaning that the clock jumps
  from 1:59 AM back to 1:00 AM.

  If a guest places a scheduled order to be fulfilled at 6:00 PM
  tomorrow.

  The `openedDate` and `promisedDate`
  should be set to the UTC equivalent of 7:00 PM local time today.
  Tomorrow, this timestamp will correspond to 6:00 PM local
  time.

##### Time-based configuration

Certain configuration in the Toast platform is time-based. For
example, a restaurant may use a time-based menu, time-based pricing, or
a time-based discount to accommodate their happy hour.

[Menu
availability](https://doc.toasttab.com/openapi/menusv3/tag/Data-definitions/schema/Availability/), [time-based
prices](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#apiMenuItemWithATimeSpecificPrice_V2), and time-based discounts are all configured relative to
a restaurant's local time.

When your integration uses this time-based configuration
information, you must shift the times as needed when daylight savings
time begins and ends.

##### Using restaurant hours

The `closeoutHour` JSON value and
`schedules` object in the [restaurants API](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html) are both
relative to the restaurant's local time.

When interacting with these hours, shift them as needed when
daylight savings time begins and ends.


---

# Checklists for specific integration functionality - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/checklistsforSpecificIntegrationFunctionality.html

### Checklists for specific integration functionality

Toast provides the following integration checklists.

#### Reservation integration checklist

This section provides a checklist you can use to build a
reservation integration with the Toast POS system.

**This checklist is a guideline, not a
definitive list of what you need to do to build your
integration.** Please consider whether you need to incorporate
things into your integration that are not on this list, or whether any
items on this list do not apply to your integration.

You can [download a
CSV version of the checklist](https://doc.toasttab.com/doc/devguide/toast-api-integration-checklist-reservation.csv).

| Area | Task | Additional information |
| --- | --- | --- |
| Configuration Syncing | Retrieve employees from the labor API on a recurring basis.  [More information](https://doc.toasttab.com/openapi/labor/operation/employeesGet/) | If your reservation functionality assigns reservation orders to specific employees, you need to have up-to-date information about the employees at the restaurant. |
| Configuration Syncing | Retrieve restaurant tables from the configuration API on a recurring basis.  [More information](https://doc.toasttab.com/openapi/configuration/operation/tablesGet/) | If your reservation functionality reserves places at specific tables, you need to have up-to-date information about the tables at the restaurant. |
| Configuration Syncing | Retrieve restaurant hours from the restaurants API on a recurring basis.  [More information](https://doc.toasttab.com/openapi/restaurants/operation/restaurantsRestaurantGuidGet/) | Having current information about a restaurant's hours allows you to prevent guests from placing reservations at times when the restaurant is not open. |
| Configuration Syncing | Retrieve revenue centers from the configuration API on a recurring basis.  [More information](https://doc.toasttab.com/openapi/configuration/operation/revenueCentersGet/) | Including revenue centers on your orders allow restaurants to choose how to categorize your orders in their revenue reporting. |
| Configuration Syncing | Retrieve dining options from the configuration API on a recurring basis.  [More information](https://doc.toasttab.com/openapi/configuration/operation/diningOptionsGet/) | The dining option governs certain other elements of how an order should be structured.  To be accepted by the Toast platform, the order must contain the order dining option. |
| Order Placement | Develop the capability to place a reservation order at the reserved table at the reservation time.  Assign a revenue center and server to this order if appropriate.  [More information](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#apiOrdersCreateDinein) | By placing an order at a restaurant table at the time of a reservation, the restaurant can take the reserved party's order more quickly, and you can have a direct linkage between your reservation and its associated order.  Consider assigning a server so that the correct employee sees this order in their list of open orders.  Consider assigning a revenue center to the order so that it appears correctly on the restaurant's revenue reports. |
| Reporting | Retrieve all configuration data that you will use in your reporting and analytics.  Examples of configuration data that you may want include discounts, service charges, payment types, sales categories, menu items, and menu groups.  [More information](https://doc.toasttab.com/openapi/configuration/overview/) | If your reports allow users to see the names or other attributes of information that is associated with your reservation orders, you need to periodically poll the configuration or menus APIs for the associated data. |
| Reporting | Retrieve updates about orders associated with your reservations using using the `startDate`/`endDate` parameters of the `/orders` endpoint of the orders API.  [More information](https://doc.toasttab.com/openapi/orders/operation/ordersGet/) | By retrieving order status updates on a recurring basis, you can know the item selections placed on your order, that total amount spent, and other order data that you can use for your analytics and reporting. |


---

# Standard API access credentials - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devApiAccessCredentials.html

### Standard API access credentials

As a standard API access user, you can create and manage credentials
for a Toast location or locations in a management group. The level of
access you have to edit and view standard API access credentials depends
on whether:

* You created the credentials or another Toast user did.
* You have the 8.4 Manage Integrations
  permission to all of the locations associated with a set of
  credentials or only some of them.

There are three levels of access:

* Full access (no icon)
* Read-only access (warning icon)
* Locked access (lock icon)

| Permission | Ownership | |
| --- | --- | --- |
| 8.4 Manage Integrations permission | You created the credentials. | You did not create the credentials. |
| You have the 8.4 Manage Integrations permission enabled at every location linked to the credentials in the management group. | Full access  Allows for editing and reading of credentials. | Full access  Allows for editing and reading of credentials. |
| You do *not* have the 8.4 Manage Integrations permission enabled at every location linked to the credentials in the management group. | Read-only  Allows for reading of credentials. | Locked  Does not allow for editing or reading of credentials. |

On the Manage credentials page, a warning icon
next to a credentialâs name indicates you have read-only access, a lock
icon indicates that you cannot edit or view the credential, and no icon
indicates you have full access to the credential.

![Shows the various types of credentials access on the Manage credentials page.](https://doc.toasttab.com/doc/media/dev-api-access-credentials-page.png)

If you want to update your locked or read-only credentials to full
access, follow the procedures below. Each procedure is different depending
on if you have locked access or read-only access.

|  |
| --- |
| Note |
| Only a Toast user or restaurant operator with full-access credentials can enable the 8.4 Manage Integrations permission for other employees. |

**To update an employeeâs locked access to full access**

1. [Access Toast
   Web](https://doc.toasttab.com/doc/platformguide/adminAccessToastAdminBackend.html).
2. A Toast employee or restaurant operator with full-access goes to
   Employees > Employee management > Employees
   to open the Employees page.
3. The Toast employee or restaurant operator selects the employeeâs
   name to open the Permissions page.
4. The Toast employee or restaurant operator selects the
   Jobs & Permissions tab.
5. Scroll down to the Permissions section. The
   Permissions section lists all the locations in
   the management group.
6. Confirm that the 8.4 Manage Integrations
   permission is enabled for each location linked to the credentials.
   Repeat this step for every location linked to the credentials.

**To update your read-only access to full access**

1. [Access Toast
   Web](https://doc.toasttab.com/doc/platformguide/adminAccessToastAdminBackend.html).
2. Go to Integrations > Toast API access > Manage
   credentials to open the Manage
   credentials page.
3. On the Manage credentials page, select the
   credentials with the warning icon. This opens the
   Credentials page.
4. Select the link in the banner to open a dialog. The dialog
   displays a list of Toast locations you no longer have access to.
5. Ask a Toast employee or restaurant operator with full-access to
   go to Employees > Employee management >
   Employees to open the Employees page.
6. The Toast employee or restaurant operator selects the employeeâs
   name to open the Permissions page.
7. The Toast employee or restaurant operator selects the
   Jobs & Permissions tab.
8. Scroll down to the Permissions section. The
   Permissions section lists all the locations in
   the management group.
9. Confirm that the 8.4 Manage Integrations
   permission is enabled for each location linked to the credentials.
   Repeat this step for every location linked to the credentials.

Once you have the 8.4 Manage Integrations
permission at every location associated with the credentials you want to
edit, you will be able to edit those credentials as needed.

#### Creating standard API access credentials

The following procedure describes how to create standard API
access credentials in Toast Web.

|  |
| --- |
| Note |
| You can configure up to 100 sets of unique standard API access credentials per management group in Toast Web. |

**To create Standard API credentials**

1. [Access Toast
   Web](https://doc.toasttab.com/doc/platformguide/adminAccessToastAdminBackend.html).
2. Go to Integrations > Toast API access > Manage
   credentials to open the Manage
   credentials page.

   |  |
   | --- |
   | Note |
   | An active subscription to [Toast Restaurant Management Suite Essentials](https://www.toasttab.com/customers/shop/software-services/restaurant-management-suite?tier=Essentials) or higher is required for every location you want standard API access for. |
3. On the Manage credentials page, navigate
   to the Create new credentials button.
4. Select the down arrow and select Standard
   API. This opens the New Credentials
   page.

   ![Shows the Manage credentials page with the Standard API button emphasized.](https://doc.toasttab.com/doc/media/dev-api-access-manage-credentials-page.png)
5. On the New Credentials page, you
   can:

   * View a list of the APIs that you will have read-only
     access to.
   * View links to documentation.
   * Enter a credential name. Toast support recommends this be
     a name that you can easily reference.
   * Select the scopes for the actions you want your Toast API
     client to be allowed to perform. For more information, see
     [Standard API access scopes](https://doc.toasttab.com/doc/devguide/devApiAccessScopes.html).
   * Select the location(s) that you want read-only API access
     to. You can choose to select all the locations in your
     management group or use the dropdown menu to select individual
     locations. Select the Apply button to
     select your location(s).

     ![Shows the credential name, API scopes, and locations fields on the New Credentials page.](https://doc.toasttab.com/doc/media/dev-api-access-new-credentials-page.png)

     |  |
     | --- |
     | Note |
     | If a location displays a locked icon and is grayed out, this indicates that the location does not have access to Toast Restaurant Management Suite Essentials or higher. For more information, see this [Toast Central article](https://central.toasttab.com/s/article/Toast-Partner-Connect-Setting-Up-Integrations-with-Toast). |
6. Select the Confirm button. This navigates
   you to the Credentials page. You can view your
   new credentials on the Credentials table on the
   Manage Credentials page.

   ![Shows new credentials on the Manage credentials page.](https://doc.toasttab.com/doc/media/dev-api-access-new-credentials.png)

   An email is sent confirming that standard API access has been
   activated for your selected location(s). The email also includes the
   names and GUIDs of the location(s) you have standard API access
   credentials for and a link to view your credentials in Toast
   Web.

   |  |
   | --- |
   | Note |
   | You use the GUID to make Toast API requests. GUIDs are also referred to as the `Toast-Restaurant-External-ID` or `restaurantGuid`. You can retrieve GUIDs using the Partners API. |

#### Viewing standard API access credentials

You can view your standard API access credentials on the
Manage credentials page in Toast Web. The
Manage credentials page displays the following
information:

* Link to create new credentials
* Table of Toast API credentials with the following
  information:

  + Credential name
  + API access type
  + Number of locations with the API access type
  + Date and time the credentials were last updated
  + The email of the Toast user who last updated the
    credentials
  + Edit icon (pencil)
* Links to documentation

#### Managing standard API access credentials

You can manage your standard API access credentials on the
Manage credentials page in Toast Web. To view and
edit your credentials, select the edit icon
(pencil) next to the credential name to open the
Credentials page. On the
Credentials page, you can view information and
complete various actions. From the Credentials
page, you can:

* View the credential name
* View the number of locations included in the credentials
  set
* View the number of scopes included in the credentials
  set
* Edit credentials
* Delete credentials
* Edit group or location IDs
* View credentials in JSON format
* Copy API Access URL
* Copy Client ID
* Copy user access type
* Rotate client secret

![Shows credential details on the Credentials page.](https://doc.toasttab.com/doc/media/dev-api-access-manage-credentials.png)

##### Editing standard API access credentials

To edit your standard API access credentials, select the
Edit credentials button to open the
Edit credentials page. On the Edit
credentials page, you can edit your credential name and
change the location(s) the credentials have access to. Select the
Confirm button to confirm and save your
changes.

##### Editing group or location IDs

Group and location IDs are account numbers that you can use to
map restaurants in your integration. After populating a group or
location ID for the location, you can retrieve this value using the
restaurants API. For more information, see [Using location and group
identifiers](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html#apiPartnersLocationGroupIDs).

![Shows edit group or location ID dialog.](https://doc.toasttab.com/doc/media/dev-api-access-edit-ids.png)

##### Viewing standard API access credentials in JSON format

You can choose to view your credentials in JSON format. JSON is
short for JavaScript Object Notation. You can choose to copy your
credentials and include them in the header of your API
requests.

![Shows credentials in JSON format.](https://doc.toasttab.com/doc/media/dev-api-access-credentials-json.png)

##### Copying credentials and other information

You can choose to copy the following information to your
clipboard for easy reference. You can copy:

* API Access URL
* User access type
* Client ID

Select the Copy icon to copy the
information.

##### Rotating client secret

|  |
| --- |
| Note |
| Active authentication tokens generated using your credentials will continue to be valid until they expire or are replaced with new authentication tokens. |

A client secret is a private string assigned by Toast to verify
the identity of the partner application to the service API when the
application makes requests to Toast services. It is good security
practice to rotate your client secret to minimize the impact of
potential breaches and to reduce the possibility of compromised
credentials. For more information, see [Credential storage guidelines](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthTokenStorage).

|  |
| --- |
| Note |
| Rotating your client secret may cause disruptions to any integrations using the same credentials. |

**To rotate your client secret**

1. On the Credentials page, select the
   Rotate button. This opens the Ready
   to rotate the client secret dialog.
2. In the Ready to rotate the client
   secret dialog, confirm you want the existing client
   secret to expire and want to create a new client secret. To
   confirm, type ROTATE SECRET in the text
   field.
3. Select the Continue button. Your new
   client secret appears. Toast support recommends you copy and store
   your client secret in a secure location, such as a password
   manager. For more information, see [Credential storage guidelines](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthTokenStorage).
4. Select the I have copied and saved the client
   secret checkbox to finish rotating your client secret.
   The Credentials page displays the date and
   time your new client secret was created.

   An email is sent notifying you that your client secret has
   been rotated with the name of the Toast user who rotated the
   secret.

##### Deleting standard API access credentials

|  |
| --- |
| Note |
| Deleting standard API access credentials is permanent. You cannot restore deleted credentials. |

To delete your standard API access credentials, select the
Delete credentials button on the
Credentials page. This opens a confirmation
dialog. In the dialog, type DELETE SECRET in the
text field to confirm deletion of the credentials.


---

# Standard API access FAQs - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devApiAccessFAQs.html

### Standard API access FAQs

|  |  |
| --- | --- |
| **Q:** | Why is the "Manage Credentials" interface not visible? |
| **A:** | You must have the "Manage Integrations" permission to view the "Manage Credentials" interface. |

|  |  |
| --- | --- |
| **Q:** | How do I add new locations to my existing credentials? |
| **A:** | You can add new locations on the Edit credentials page. For information on how to edit which location(s) you have standard API access to, see [Editing standard API access credentials](https://doc.toasttab.com/doc/devguide/devApiAccessCredentials.html#devApiAccessEditingCredentials). |

|  |  |
| --- | --- |
| **Q:** | Why is there a lock next to a Toast POS location that is not available (appears dimmed)? |
| **A:** | If a location displays a lock and is displayed as not available (appears dimmed), that indicates that the location does not have access to Toast Restaurant Management Suite Essentials or higher. Every location you want to have standard API access to requires a subscription to Toast Restaurant Management Suite Essentials or higher.  Changes made to locations with an active subscription to Toast Restaurant Management Suite Essentials or higher may take a few minutes to be reflected in the Toast platform. |

|  |  |
| --- | --- |
| **Q:** | Why am I seeing a 401 error when making an API request? |
| **A:** | You may see a 401 error because you did not authenticate with valid credentials. For more information on authentication, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). For more information about error codes, see [API responses and errors](https://doc.toasttab.com/doc/devguide/apiResponsesAndErrors.html). |

|  |  |
| --- | --- |
| **Q:** | Why am I seeing a 403 error when making an API request? |
| **A:** | You may see a 403 error message when making an API request for any of the following reasons:  * You made a `POST` request. Standard API   access only supports `GET` requests. * You tried to access the `menus /v3`   endpoints. Standard API access only supports `menus   /v2` endpoints. * Your credentials do not include access to this   restaurant. For information on how to edit which location(s)   you have standard API access to, see [Editing standard API access credentials](https://doc.toasttab.com/doc/devguide/devApiAccessCredentials.html#devApiAccessEditingCredentials). * Your API client is missing the required scope for this   endpoint. For information on how to edit the scopes   configured for a client, see [Editing standard API access credentials](https://doc.toasttab.com/doc/devguide/devApiAccessCredentials.html#devApiAccessEditingCredentials).  |  | | --- | | Note | | This list is not exhaustive. For more information about error codes, see [API responses and errors](https://doc.toasttab.com/doc/devguide/apiResponsesAndErrors.html). | |

|  |  |
| --- | --- |
| **Q:** | Why don't I have access to create standard API access credentials? |
| **A:** | Confirm that you have the Manage Integrations permission for the location(s) you want to create credentials for. If you do not have permission, contact your restaurant or store team to have the permission assigned. |

|  |  |
| --- | --- |
| **Q:** | Why canât I see guest data in the JSON for an in-store order? |
| **A:** | Guest data is only provided for orders that have a dining behavior of either Takeout or Delivery. Guest data is not provided for in-store orders. |


---

# Standard API access requirements - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devApiAccessRequirements.html

### Standard API access requirements

The following are required to enable standard API access:

* You must be an active employee of that Toast location you are
  creating credentials for.
* An active subscription to [Toast
  Restaurant Management Suite (RMS) Essentials](https://www.toasttab.com/customers/shop/software-services/restaurant-management-suite?tier=Essentials) or higher. Sign in
  with your Toast Web credentials to be directed to Toast Shop where you
  can purchase RMS. RMS grants you access to the Toast Partner
  Integrations page in Toast Web.
* You must have the Manage Integrations
  permission for the locations you want to add standard API access
  credentials to. For more information, see [Account admin access permissions](https://doc.toasttab.com/doc/platformguide/adminPermissions.html#adminAccountAdminAccessPermissions).


---

# Standard API access resources - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devApiAccessResources.html

### Standard API access resources

For more information on using Toast APIs, see:

* [API status and updates](https://doc.toasttab.com/doc/devguide/apiUpdatesEmailDistributionList.html)
* [Authentication return data for a restaurant management group
  API client](https://doc.toasttab.com/doc/devguide/authentication.html#apiAuthenticationReturnDataRestaurant)
* [Example API requests](https://doc.toasttab.com/doc/devguide/apiExampleRequests.html)
* [How to build a Toast integration](https://doc.toasttab.com/doc/devguide/portalHowToBuildAToastIntegration.html)
* [Rate limiting](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html)
* [Toast
  Integrations Community Forum](https://toastintegrations.zendesk.com/auth/v2/login/signin?return_to=https%3A%2F%2Fdevelopers.toasttab.com%2Fhc%2Fen-us%2Fcommunity%2Ftopics&theme=hc&locale=en-us&brand_id=360004937871&auth_origin=360004937871%2Ctrue%2Ctrue)


---

# Standard API access scopes - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devApiAccessScopes.html

### Standard API access scopes

Scopes determine the actions that your Toast API client has
permission to perform, which is authenticated using the client ID and
secret created in Toast Web. For more information, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html).

Standard API access provides access to the following scopes:

| Scope | Toast API |
| --- | --- |
| `cashmgmt:read` | cash management API |
| `config:read` | configuration API |
| `delivery_info.address:read`  |  | | --- | | Note | | This scope exposes additional information in the `DeliveryInfo` object of the orders API. | | orders API |
| `digital_schedule:read` | order management configuration API |
| `guest.pi:read`  |  | | --- | | Note | | This scope to exposes additional information in the `Customer` object of the orders API. | | orders API |
| `kitchen:read` | kitchen API |
| `labor.employees:read` | labor API |
| `labor:read` | labor API |
| `menus:read` | menus v2 API |
| `orders:read` | orders API |
| `packaging:read` | packaging configuration API |
| `restaurants:read` | restaurant availability API, restaurants API |
| `stock:read` | stock API |


---

# Standard API access support - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devApiAccessSupportStandardApiAccess.html

### Standard API access support

Have additional questions? Visit our [Toast
Integrations Community Forum](https://developers.toasttab.com/hc/en-us/community/topics). Login or sign up for an account to
access the Toast Integrations Community Forum.

If your questions contain sensitive information, use this [form](https://tost.co/custom-api-support).

|  |
| --- |
| Note |
| Do not provide your client secret or authentication token in plain text if posting in the Toast Integrations Community Forum. |


---

# Standard API access overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devApiAccessUserGuide.html

### Standard API access overview

Standard API access provides you with credentials with read-only
access to Toastâs APIs, which you can use to read and review data from a
single location or multiple locations in your management group. Standard
API access allows you to:

* Generate multiple credential sets. Each set is configurable to
  grant read access to specific restaurants or stores.
* Use the credentials to read and review data from restaurants
  and stores included in your credential configuration.

|  |
| --- |
| Note |
| All API requests are location-specific. This means that you must make separate API requests for each location you want to read data from. |

The following is not included with Standard API access:

* Write access. Your integration can only read data from
  Toast.
* Sandbox access


---

# Standard API access webhook subscriptions - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devApiAccessWebhookSubscriptions.html

### Standard API access webhook subscriptions

|  |
| --- |
| Note |
| You must have standard API access to create and manage webhook subscriptions. For more information, see [Standard API access overview](https://doc.toasttab.com/doc/devguide/devApiAccessUserGuide.html). |

Webhook subscription access allows you to create and manage webhook
subscriptions in Toast Web. A webhook subscription allows you to receive
information about Toast platform events as they happen. You can manage
subscriptions for following webhooks:

* [Menus](https://doc.toasttab.com/doc/devguide/apiMenusWebhook.html)
* [Orders](https://doc.toasttab.com/doc/devguide/devOrdersWebhookRef.html)
* [Packaging preferences
  configuration](https://doc.toasttab.com/doc/devguide/apiPackagingPreferencesConfigWebhook.html)
* [Restaurant
  availability](https://doc.toasttab.com/doc/devguide/apiRxAvailabilityWebhook.html)
* [Restaurant online
  ordering schedule](https://doc.toasttab.com/doc/devguide/apiRxOnlineOrderingScheduleWebhook.html)
* [Stock](https://doc.toasttab.com/doc/devguide/apiStockWebhook.html)

#### Managing webhook subscriptions

|  |
| --- |
| Note |
| You must have the 8.4 Manage Integrations permission to create and manage webhook subscriptions. For more information, see [Access permissions reference](https://doc.toasttab.com/doc/platformguide/adminPermissions.html). |

As a standard API access user, the type of access you have to
create and manage your webhook subscriptions depends if you created the
credentials and if you have 8.4 Manage Integrations
permission enabled at all the locations associated with the credential.
For more information, see [Standard API access credentials](https://doc.toasttab.com/doc/devguide/devApiAccessCredentials.html). Webhook events are only generated
for Toast locations linked to your standard API access
credentials.

There are three levels of webhook subscription access:

* Full access: Allows for creating and
  editing of a webhook subscription for all locations that use the
  same set of standard API access credentials.
* View-only access (warning icon): Only
  allows for viewing of a webhook subscription. Your standard API
  access credentials are not linked to the location associated with
  the webhook subscription.
* Locked access (locked icon): Does not
  allow for editing or viewing of a webhook subscription.

##### Creating webhook subscriptions

|  |
| --- |
| Note |
| Full standard API access credentials and an active subscription to [Toast Restaurant Management Suite Essentials](https://www.toasttab.com/customers/shop/software-services/restaurant-management-suite?tier=Essentials) or higher is required for every location you want to include in a webhook subscription. |

**To create a webhook subscription**

1. [Access Toast
   Web](https://doc.toasttab.com/doc/platformguide/adminAccessToastAdminBackend.html).
2. Go to Integrations > Toast API access >
   Manage credentials to open the Manage
   webhooks page.
3. On the Manage webhooks page, select the
   + Add webhook button. This opens the
   Create webhook subscription page.
4. On the Create webhook subscription
   page, complete the following:

   * Select the credentials to associate with the webhook
     subscription. Webhook events will be sent for all locations
     linked to the credentials.

     |  |
     | --- |
     | Note |
     | You cannot change the credentials associated with the subscription after the subscription has been created and saved. |
   * Select the webhook event category. You can only select
     one webhook event category per subscription. For more
     information, see [Webhooks reference](https://doc.toasttab.com/doc/devguide/apiWebhooksReference.html).
   * Enter the webhook URL. This is the URL of the webhook
     consumer service that will receive the webhook events from the
     Toast platform. For more information, see [Webhook basics](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html).
   * Enter a name for the webhook subscription.
   * Enter an email address that will receive notifications
     if the subscription is stopped or restarted.

   ![Shows the Create webhook subscription page in Toast Web.](https://doc.toasttab.com/doc/media/dev-api-access-create-webhook-subscription.png)
5. Select the Save button to save your
   webhook subscription. This navigates you to the Webhook
   subscription page.

   You can view your new webhook subscription on the
   Manage webhooks page.

   ![Shows new webhook subscription on the Manage webhooks page in Toast Web.](https://doc.toasttab.com/doc/media/dev-api-access-created-webhook-subscription.png)

##### Viewing webhook subscriptions

You can view your webhook subscriptions on the Manage
webhooks page in Toast Web. The Manage
webhooks page displays the following information:

* Link to the webhook subscription
* Status of the webhook:

  + Active
  + Inactive
* Webhook event category
* The email of the Toast user who last updated the webhook
  subscription
* Date and time webhook details were last updated
* Link to view webhook details
* Link to the Edit webhook subscription
  page
* Link to documentation

To view webhook information, select the view icon on the
Manage webhooks page. This opens the
Webhook subscription page. On the
Webhook subscription page, you can view and
complete various actions:

* View the webhook subscription name
* View the webhook subscription GUID
* View the notification email address linked to the webhook
  subscription
* View the status of the webhook subscription
* View the webhook URL
* View and copy the [secret key](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html)
* View the webhook event category
* View the standard API credential name
* Delete the webhook subscription
* Edit the webhook subscription

![Shows the webhook subscription details on the Webhook subscription page in Toast Web.](https://doc.toasttab.com/doc/media/dev-api-access-view-webhook-subscription.png)

##### Editing webhook subscriptions

You can edit your webhook subscriptions from the
Manage webhooks page in Toast Web. To edit a
webhook subscription, select the edit icon next to the webhook
subscription name to open the Edit webhook
subscription page. On the Edit webhook
subscription, you can:

* Change the event category
* Change the webhook URL
* Change the webhook subscription name
* Change the notification email address
* Change the subscription status. Choose from:

  + Active
  + Inactive

Select the Save button to save your
changes.

##### Deleting webhook subscriptions

To delete your webhook subscription, select the
Delete button on the Webhook
subscription page. This opens a confirmation dialog. In the
dialog, type DELETE in the text field to confirm
deletion of the subscription.


---

# Integration partnership process - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/integrationDevProcess.html

### Integration partnership process

#### Overview

The following sections describe the required actions to become an
official Toast integration partner. This applies to:

* Newly approved Toast integration partners looking to build a new
  technical integration to support Toastâs customers.
* Current Toast integration partners looking to add new features
  or make enhancements to their technical integration.

|  |
| --- |
| Note |
| For custom integrators and developers who build integrations for specific restaurants, please have your restaurant customer contact their Toast representative to start the integration process. |

Each potential Toast integration partner must reach and complete the
milestones shown in the diagram below to partner with Toast.

|  |
| --- |
| Integration partner milestones |

#### Application

The first step to becoming a Toast integration partner is to apply
for partnership. During the application step, potential partners are
vetted to ensure a proper fit for a Toast partnership. If you have not
applied to become a Toast integration partner, select the card below to
get started.

[Apply to become a Toast integration partnerÂ

Start here.

![](https://doc.toasttab.com/doc/media/Solutions_Customer_Care_1.png)](https://pos.toasttab.com/partners/integration-partner-application)

Toast receives a high volume of applications for partnership and is
not able to integrate with all interested integration partners.

#### Discovery

During the discovery stage, business opportunity and a potential
partner's technical readiness is determined. If the Toast integration team
needs more information to assess your integration's functionality and
feasibility, they will contact you to schedule a discovery call.

Before moving forward into the development stage, the potential
integration partner must have:

* Approval from the Toast compliance, privacy, security, and legal
  teams.
* A signed partner agreement with Toast.
* A Toast integration team representative assigned.

#### Partner agreement

The partner agreement defines the details and business terms of the
partnership between the integration partner and Toast. At this stage,
business terms are presented by both the potential integration partner and
Toast. A partnership agreement must be signed before moving forward in the
integration development process.

#### Development kickoff

If you have met the requirements listed above, you enter the
development stage. In this stage, the Toast integrations team provides you
with your [partner API account](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apiPartnerApiClientAccounts)
authentication credentials, which can be used for testing in the [sandbox
environment](https://doc.toasttab.com/doc/devguide/apiEnvironments.html#apiSandboxEnvironment).

Once sandbox credentials are provided, you can begin to write and
test your code. As you build your integration, refer to our [integration
development checklists](https://doc.toasttab.com/doc/devguide/apiIntegrationChecklists.html).

#### Certification

When your integration is ready for live restaurants in the
production environment, contact your Toast integrations representative to
schedule a certification call. The goal of certifying your integration is
to ensure that you and the Toast integrations team feel comfortable
introducing your integration to pilot customers in the production
environment during the [beta phase](https://doc.toasttab.com/doc/devguide/integrationDevProcess.html#apiIntegrationDeveloperProcessBetaPhase). If
there are no issues, your integration is certified and enters the alpha
phase.

The certification call is a one-hour interactive demo-style review
of your integration workflows. The demo is meant to reproduce your
integration experience as accurately as possible in the production
environment while checking the following workflows:

* How you interact with each endpoint.
* How you poll historical data.
* How you send data to the Toast platform if applicable.
* How to retrieve restaurant reports, and how your Toast data and
  the Toast platform data align.

If problems or questions arise during the certification call, the
Toast integrations team sends you an email to communicate the issues. It
is your responsibility to resolve any issues before you can receive
production credentials. Once the certification call is complete, the Toast
integrations team certifies your integration and you move to the alpha
phase.

#### Alpha phase

After your integration is certified, the Toast integrations team
issues production credentials and your integration enters the alpha phase.
The alpha phase aims to ensure that there is nothing preventing the
integrationâs usage or negatively impacting restaurant operations.

During this phase, your integration is enabled for a single
restaurant as the alpha customer. After a week of usage, the Toast
integrations team checks your integration's performance logs and the alpha
customer can provide feedback.

#### Beta phase

After you have received your integration certification, production
credentials, and have completed a successful alpha test phase, your
integration enters the beta phase.

You choose 3-5 restaurants or restaurant groups to participate in
the beta phase. Each restaurant or restaurant group should use the
integration in the production environment for several weeks. This gives
them enough time to familiarize themselves with the integration and adopt
it into their daily workflows.

|  |
| --- |
| Note |
| Make sure restaurants understand they can become early adopters of the integration, on the condition that they provide feedback about their experience. |

The Toast integrations team contacts the beta restaurants to get
feedback. If any major issues arise, the Toast integrations team works
with you to address them.

You'll work with the Toast integration partner marketing team to
develop co-marketing strategies and integration marketing
materials.

#### General availability

If your beta customers are satisfied with the integration, and your
marketing materials are prepared, the Toast integrations team transitions
the integration to general availability. In general availability, your
integration is listed on the Toast platform [public integrations
site](https://pos.toasttab.com/integrations). Restaurants can now add your integration from the [My
Integrations page](https://doc.toasttab.com/doc/platformguide/adminRestaurantServiceIntegrationsAndToastPartnerIntegrations.html).

|  |
| --- |
| Note |
| If you have a gift card and/or loyalty integration, your integration will not be available via the My Integrations page. You and/or your restaurant customer will need to email the integrations support team to have the integration set-up. This is because gift card/loyalty integrations require additional Toast Web settings to be enabled that are not customer-facing. |


---

# Integration test plans - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/integrationTestPlans.html

### Integration test plans

You can use these test plans to validate your integrations.

#### Gift card integration test plan

You can use this test plan while you build your gift card
integration. Your integration should be able to successfully complete
all cases in this plan before it goes live.

You should also ensure that your integration successfully [authenticates](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationAuthentication.html)
the JSON objects you receive.

You can [download a CSV
version of this test plan](https://doc.toasttab.com/doc/devguide/toast-api-integration-checklist-giftcard.csv).

| Case number | Card type | Test case name | Steps | Expected results |
| --- | --- | --- | --- | --- |
| 1 | Non-Existent Card | Add Value | From the Toast POS app > New Order.  Tap Gift Cards > Add Value ($).  Enter any value, and click Next.  Swipe or enter a number not associated with a gift card at that restaurant. | Gift card cannot be found error message appears. |
| 2 | Non-Existent Card | Balance Inquiry | From the Toast POS app > New Order.  Tap Gift Cards > Balance Inquiry.  Swipe or enter a number not associated with a gift card at that restaurant. | Gift card cannot be found error message appears. |
| 3 | Non-Existent Card | Redeem | From the Toast POS app > New Order.  Add items to your order.  Click Pay.  Click Gift Card.  Swipe or enter a number not associated with a gift card at that restaurant. | Gift card cannot be found error message appears. |
| 4 | Non-Existent Card | Sell Card | From the Toast POS app > New Order.  Tap Gift Cards > Sell Card.  Enter any value, and click `Next`.  Swipe or enter a number not associated with a gift card at the restaurant. | Gift card cannot be found error message appears. |
| 5 | Inactive Card | Add Value | From the Toast POS app > New Order.  Tap Gift Cards > Add Value ($).  Enter any value, and click Next.  Swipe an inactive gift card. | The gift card is inactive error message appears. |
| 6 | Inactive Card | Balance Inquiry | From the Toast POS app > New Order.  Tap Gift Cards > Balance Inquiry.  Swipe an inactive gift card. | The gift card is inactive error message appears. |
| 7 | Inactive Card | Redeem | From the Toast POS app > New Order.  Add items to your order.  Click Pay.  Click Gift Card.  Swipe an inactive gift card. | The gift card is inactive error message appears. |
| 8 | Inactive Card | Sell Card | From the Toast POS app > New Order.  Tap Gift Cards > Sell Card.  Enter any value, and click Next.  Swipe inactive gift card. | The gift card should display as an item selection on the check, for the amount for which you sold it. |
| 9 | Inactive Card | Sell Card | Pay cash for the check you created in case 8, which contains the gift card. | You should be able to sell and pay for the gift card successfully. |
| 10 | Inactive Card | Sell Card | From the Toast POS app > New Order.  Tap Gift Cards > Balance Inquiry.  Swipe the gift card. | The gift card's balance should be the amount for which you sold it. |
| 11 | Inactive Card | Reverse Sell Card | Follow the steps from case 8.  From the Toast POS app, navigate to the Closed Orders tab.  Locate the check from your card sale.  Click Update, then Pay, then Void. Confirm the void operation.  In the overflow menu, click Void Order. Confirm the void operation.  Create a new order.  Click Gift Card.  Click Balance Inquiry.  Enter in the card number for the gift card you originally sold.  Click Done. | The gift card is inactive error message appears. |
| 12 | Active Card | Balance Inquiry | From the Toast POS app > New Order.  Tap Gift Cards > Balance Inquiry.  Swipe active gift card. | The balance should be the correct and expected balance on the card. |
| 13 | Active Card | Redeem Full Order | From the Toast POS app > New Order.  Add items to your order.  Ensure that the total amount due is less than the amount on the gift card.  Click Pay.  Click Gift Card.  Swipe an active gift card. | The order should go to the Paid Checks tab on the POS, and it should have a gift card payment for the full order amount. |
| 14 | Active Card | Redeem Full Order | Run a balance inquiry on the card used in case 13. | The balance should be decremented by the amount of the previous order. |
| 15 | Active Card | Redeem Partial Order | From the Toast POS app > New Order.  Add items to your order.  Ensure the total amount due is more than the amount on the gift card.  Click Pay.  Click Gift Card.  Swipe an active gift card. | The Payments screen will open.  Verify that there is a gift card payment for the full amount of the gift card in the payments list.  Verify that there is a balance due. |
| 16 | Active Card | Redeem Partial Order | Complete the order from case 15 with a second payment. | The order should appear on the Paid Checks tab. |
| 17 | Active Card | Redeem Partial Order | Run a balance inquiry on the card used in case 16. | The card balance should be $0. |
| 18 | Active Card | Reverse Redeem | On the Paid Checks tab, locate one of the orders created and paid for in one of the previous two tests.  Click Pay ($).  Note the card number you use to pay for this order, and the amount of money for which you redeem it.  Click each payment and press Remove / Void.  In the overflow menu, clock Void Order.  Create a new order.  Run a balance inquiry on the gift card for which you voided the payment. | The card balance should be incremented by the amount of the voided payment. |
| 19 | Active Card | Tip Without Digital Receipts | On the the Toast POS app home screen, navigate to the Setup section and click Device Setup.  Turn off digital receipts.  From the home screen, in the Mode section, click Payment Terminal.  Create an order worth less than the value of an active gift card.  Click Pay.  Click Gift Card.  On the Paid Checks tab, locate the previous check and click Pay ($).  Enter in a tip that the gift card has enough money to cover.  Click Update, and then Close. | The check should be moved to the Closed Checks tab. |
| 20 | Active Card | Tip Without Digital Receipts | Run a balance inquiry on the card used in case 19. | The balance on the card should be decremented by the amount of the check and tip. |
| 21 | Active Card | Tip With Digital Receipts | On the the Toast POS app home screen, navigate to the Setup section and click Device Setup.  Turn Digital Receipts on.  From the home screen, in the Mode section, click Payment Terminal.  Create an order worth less than the value on an active gift card.  Click Pay.  Click Gift Card.  When the tip dialog appears, select a tip amount less than the gift card balance. This dialog does not allow you to tip more than the balance on the card.  Complete the order. | The check should be moved to the Closed Checks tab. |
| 22 | Active Card | Tip With Digital Receipts | Get the balance of the card used in case 21. | The balance on the card should be decremented by the amount of the check and tip. |
| 23 | Active Card | Add Value | From the Toast POS app > New Order.  Tap Gift Cards > Add Value ($).  Enter any value, and click Next.  Swipe an active gift card. | Verify that Add Value ($) is added to the check for the correct amount. |
| 24 | Active Card | Add Value | Complete the order from case 23. | The check should move to the Closed Checks tab. |
| 25 | Active Card | Add Value | Run a balance inquiry on the card used in cases 23-24. | The card balance should be increased by the correct amount. |
| 26 | Active Card | Reverse Add Value | On the Closed Checks tab, find the order created in case 25.  Click Pay ($).  Void all payments.  In the overflow menu, click Void Order.  Confirm the void operation.  Create a new order.  Click Gift Card and then click Balance Inquiry.  Swipe the card whose Add Value action was voided. | The gift card balance should be decremented by the voided Add Value action. |

#### Loyalty integration test plan

You can use this test plan while you build your gift card
integration. Your integration should be able to successfully complete
all cases in this plan before it goes live.

You should also ensure that your integration successfully [authenticates](https://doc.toasttab.com/doc/devguide/apiLoyaltyIntegrationAuthentication.html)
the JSON objects that you receive.

You can [download a CSV
version of this test plan](https://doc.toasttab.com/doc/devguide/toast-api-integration-checklist-loyalty.csv).

| Case number | Category | Test case | Steps | Expected results |
| --- | --- | --- | --- | --- |
| 1 | Account Lookup | Card swipe | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Swipe a card associated with a loyalty account at that restaurant. | The expected loyalty account should appear. |
| 2 | Account Lookup | Card swipe | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Swipe a card NOT associated with a loyalty account at that restaurant. | The Invalid Account error message should appear. |
| 3 | Account Lookup | Card swipe | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Swipe a card that is NOT a loyalty account card. | The Card swiped is not a rewards card error message should appear. |
| 4 | Account Lookup | Keying in number | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Key in a card number associated with a loyalty account at that restaurant. | The expected loyalty account should appear. |
| 5 | Account Lookup | Scanning QR code | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer > Scan.  Scan a QR code associated with a loyalty account at that restaurant. | The expected loyalty account should appear. |
| 6 | Account Lookup | Scanning QR code | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer > Scan.  Scan a QR code NOT associated with a loyalty account at that restaurant. | The Invalid Account error message should appear. |
| 7 | Account Lookup | By email | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer > Lookup.  Key in an email address associated with a loyalty account at that restaurant. | The expected loyalty account should appear. |
| 8 | Account Lookup | By phone number | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer > Lookup.  Key in a phone number associated with a loyalty account at that restaurant. | The expected loyalty account should appear. |
| 9 | Account Lookup | By name | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer > Lookup.  Key in a name associated with a loyalty account at that restaurant. | The expected loyalty account should appear. |
| 10 | Account Inquiry | Unavailable rewards | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards. | The expected rewards value should display, but because the awards are unavailable for redemption, you should not be able to apply them to a check. |
| 11 | Account Inquiry | Available rewards | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards.  Add items that would trigger rewards to the check.  Tap Rewards > Look Up Customer. | The expected rewards should be available redemption.  A Redeem button should be present. |
| 12 | Account Inquiry | Rewards points | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards. | The expected rewards value should display on the dialog. |
| 13 | Account Inquiry | Invalidated rewards | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards.  Add items that would trigger rewards to the check.  Tap Rewards > Look Up Customer.  Remove the items from your check.  Tap Rewards > Look Up Customer. | The reward should be removed from the check.  The error message Changes to the check have voided applied rewards. Discounts that are no longer applicable have been removed should display. |
| 14 | Redemption | Item-level discount | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards.  Add items that would trigger rewards to the check.  Tap Rewards > Look Up Customer.  Tap Redeem to add a reward to the check. | The reward should apply to the target item on the check.  The amount discounted should be correct. |
| 15 | Redemption | Item-level discount | Tap Pay. | The reward discount should be correctly carried to the payment screen. |
| 16 | Redemption | Item-level discount | Complete payment on the check. | The payment should process successfully. |
| 17 | Redemption | Check-level discount | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards.  Add items that would trigger rewards to the check.  Tap Rewards > Look Up Customer.  Tap Redeem to add a reward to the check. | The reward should apply to the check.  The amount discounted should be correct. |
| 18 | Redemption | Check-level discount | Tap Pay. | The reward discount should be correctly carried to the payment screen. |
| 19 | Redemption | Check-level discount | Complete payment on the check. | The payment should process successfully. |
| 20 | Redemption | Buy one get one discount | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards.  Add items that would trigger rewards to the check.  Tap Rewards > Look Up Customer. | The expected reward should display, but should be unavailable for redemption. |
| 21 | Redemption | Buy one get one discount | Add items that would trigger rewards to the check.  Tap Rewards > Look Up Customer. | The expected rewards should be available redemption.  A Redeem button should be present. |
| 22 | Redemption | Buy one get one discount | Tap Redeem to add a reward to the check. | The reward should apply to the target item on the check.  The amount discounted should be correct. |
| 23 | Redemption | Buy one get one discount | Tap Pay. | The reward discount should be correctly carried to the payment screen. |
| 24 | Redemption | Buy one get one discount | Complete payment on the check. | The payment should process successfully. |
| 25 | Accrual and Reversal | Without reward applied to check | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards.  Add items to the check.  Tap Pay($). | The payment should process successfully.  You should see the expected accrual message. |
| 26 | Accrual and Reversal | Accrual reverse | On the Closed Checks tab, find the order placed in case 25.  Tap Pay($).  Void all payments.  In the overflow menu, clock Void Order.  Confirm the void operation. | The check should be successfully voided in Toast.  You should see the expected reversal message. |
| 27 | Accrual and Reversal | With reward applied to check | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards.  Add items that would trigger rewards to the check.  Tap Rewards > Look Up Customer.  Tap Redeem to add a reward to the check.  Tap Pay.  Complete payment on the check. | The payment should process successfully.  You should see the expected accrual and redeem messages. |
| 28 | Accrual and Reversal | Redemption reverse | On the Closed Checks tab, find the order placed in case 27.  Tap Pay($).  Void all payments.  In the overflow menu, click Void Order.  Confirm the void operation. | The check should be successfully voided in Toast,.  You should see the expected reversal messages. |
| 29 | Accrual and Reversal | With multiple rewards applied to check | From the Toast POS app > New Order.  Tap Rewards > Look Up Customer.  Look up a loyalty account that has associated rewards.  Add items that would trigger rewards to the check.  Tap Rewards > Look Up Customer.  Tap Redeem to add a reward to the check.  Repeat at least once in order to apply multiple rewards to the check.  Tap Pay.  Complete payment on the check. | The payment should process successfully.  You should see the expected accrual and redeem messages. |
| 30 | Accrual and Reversal | Partial redemption reverse | On the Closed Checks tab, find the order placed in case 29.  Tap Update.  Select a reward that was redeemed, and void it from the check.  Tap Pay.  Complete payment on the check. | The check should successfully close.  You should see the expected reversal messages. |


---

# How to build a Toast integration - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/portalHowToBuildAToastIntegration.html

### How to build a Toast integration

Welcome to the Toast integration community! Here's how to get started
building your Toast integration. We look forward to seeing what you
build!

#### Initial setup

##### Sign up for updates

Before you build your integration, be sure you're on the
distribution list for release notes and status updates.

Subscribe to updates on [this page](https://doc.toasttab.com/doc/devguide/apiUpdatesEmailDistributionList.html).

##### Download example API requests

To familiarize yourself with Toast APIs, download our collection
of [example
API requests](https://doc.toasttab.com/doc/devguide/apiExampleRequests.html).

To get an authentication token, plug in your credentials and the
sandbox hostname. You get your credentials and the sandbox hostname from
the Toast integrations team when you start to build your
integration.

For more information, see [Integration partnership process](https://doc.toasttab.com/doc/devguide/integrationDevProcess.html).

#### Authentication

##### Get an authentication token

Use [these instructions](https://doc.toasttab.com/doc/devguide/authentication.html#getting-authentication-token) to
use the authentication API to get your first authentication
token.

##### Refresh your authentication token

Your integration should request a new authentication token during
the last minute the original token is valid (less than 60 seconds before
the original token expires).

For more information, see [Refreshing authentication tokens](https://doc.toasttab.com/doc/devguide/apiAuthTokenRefresh.html).

#### Restaurant connections

##### If you use a [partner API client](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apiPartnerApiClientAccounts)

Contact the Toast integrations team with your URL for the [partners
webhook](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html#apiGettingRestaurantAccessUpdatesFromPartnersWebhook). Review the [webhook documentation](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html).

Use this webhook to receive real-time notifications when:

* Your integration is added or removed.
* Restaurants update the [location and group ID
  fields](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html#apiPartnersLocationGroupIDs) for your integration.

The webhook should be your primary mechanism to understand who is
connected to your integration, with the partners API as a backup.

If you receive a notification that a restaurant has removed your
integration, stop all API requests for that restaurant location.

In addition, poll the `/restaurants` endpoint of the
[partners API](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html#apiUsingPartnersApiToGetRestaurantInfo)
to retrieve a list of all restaurants connected to your integration.
Programmatically poll this endpoint a few times per day using the
`lastModified` query parameter to see if any new restaurants
have connected to your integration since you last evaluated the
list.

##### If you use a [restaurant management group API client](https://doc.toasttab.com/doc/devguide/apiClientAccounts.html#apiRestaurantManagementGroupApiAccounts)

Use the restaurant GUID and restaurant group GUID to retrieve from
the [/groups endpoint](https://doc.toasttab.com/doc/devguide/apiRestaurantsInGroup.html) a list of all
restaurants in your restaurant management group.

You get the restaurant GUID and the restaurant group GUID from the
Toast integrations team when you begin to build your integration.

If you add restaurants to your management group in the future, the
endpoint will include the new restaurant locations in the list.

#### Rate limits

##### Throttle for rate limits

To avoid receiving rate limit errors when you call Toast APIs,
throttle your requests so they stay within Toast API [rate
limits](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html).

#### Error management

##### Determine your error logging process

To resolve any issues in your integration, you must know when
errors occur and have information to help determine the causes of those
errors.

If you cannot successfully submit data to the Toast platform or
retrieve data from it, your integration may not function as intended,
which will frustrate users of your integration.

It is critical that you have a strong error management and
resolution process.

##### Use a halting mechanism

If you receive the same error when you make the same API request
multiple times, you should stop making that API request.

Your integration should have an error threshold, after which you
stop submitting the same API call repeatedly and instead raise an alert
in your own system to investigate the error.

##### Plan downtime procedures

After your integration goes live, you need to be equipped to
handle planned and unplanned downtimes of the Toast platform.

Use the [API downtime guidelines](https://doc.toasttab.com/doc/devguide/apiHandlingDowntimes.html) to
create your downtime procedures before you need them.

#### Write integration documentation

If there is an issue with the integration, instruct mutual customers
to contact your support team rather than the Toast support team. Because
you build and maintain your integration with Toast, we ensure a smooth
customer experience when mutual customers contact your team with questions
and issues about your integration.

Your documentation should also instruct restaurants about how to do
any necessary onboarding steps within your own administrative tools and
within Toast.


---

# Toast identifiers - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html

### Toast identifiers

When working with Toast APIs, you will encounter various identifiers
for Toast entities. For example, when you submit an order to the orders API,
you must provide identifiers for the menu items and modifiers that are
included in the order. In certain circumstances, the Toast platform has more
than one way to identify an entity. This section describes the different
types of Toast identifiers, their relationships to one another, and when to
use them.

#### multiLocationId and guid identifiers

Toast configuration entities are assigned both a
`multiLocationId` and a `guid` identifier.

##### Multi-location management and versioned entities

To understand these two identifiers, you have to understand some
core Toast concepts for multi-location restaurants.

Toast customers use the multi-location management module when they
want to share configuration among multiple restaurant locations. For
example, individual locations can share menus, dining options,
employees, job descriptions, and so on with other locations in a larger
restaurant group. The more configuration that multiple locations share,
the easier it becomes to maintain that configuration because Toast
customers are managing one instance of a shared entity used by multiple
locations, instead of separate instances across different
locations.

When a restaurant uses the multi-location management module, its
configuration entities (such as menu items, prep stations, and discount
reasons) can be [versioned](https://doc.toasttab.com/doc/platformguide/versions.html) and those versions can be
assigned to specific restaurant locations, or [groups
of locations](https://doc.toasttab.com/doc/platformguide/restaurantGroupsAndSubgroups.html). For example, a restaurant could have two versions
of a Breakfast Sandwich menu item, one for a Boston location and another
for a New York City location. Versioned entities share the majority of,
but not all of, their data. For example, the Boston version of the
Breakfast Sandwich has sausage, bacon, and cheese modifiers while the
New York City version only has bacon and cheese modifiers.

##### multilocationId value

To identify entities that are shared across locations, the Toast
APIs use a `multiLocationId` value. To continue the example
above, the Breakfast Sandwich for the Boston location has the same
`multiLocationId` as the Breakfast Sandwich for the New York
City location (`11111111` in the example below). These
matching `multiLocationId` values indicate that the two menu
items are related versions and represent the same overall item.

```
Menu data retrieved for the Boston location:
Breakfast Sandwich
  multiLocationId: 11111111

Menu data retrieved for the New York City location:
Breakfast Sandwich
  multiLocationId: 11111111
```

##### guid value

Within a set of versioned entities, however, each version
continues to have its own unique identifier. That unique identifier is
contained in the `guid` value. To continue the example from
above, each version of the Breakfast Sandwich has its own unique
`guid`.

```
Menu data retrieved for the Boston location:
Breakfast Sandwich
  multiLocationId: 11111111
  guid: aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa

Menu data retrieved for the New York City location:
Breakfast Sandwich
  multiLocationId: 11111111
  guid: bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb
```

##### Using multilocationId in API requests

To identify an entity in a request sent to a Toast API, you can
either:

* Include the entity's `multiLocationId`.

  In this case, the Toast platform uses the combination of the
  restaurant `guid` that is included in the request headers
  and the `multiLocationId` to resolve which version of the
  entity the request affects.
* Include the entity's `guid`.

  With the `guid` identifier, it is your
  integration's responsibility to pass the correct, unique
  `guid` for the restaurant location associated with the
  request.

To simplify your code and eliminate the need to keep track of
unique `guid`s, Toast support recommends that you use the
`multiLocationId` as the identifier for Toast entities and
allow the Toast platform resolve the version of the entity that the
request applies to.

To better understand this recommendation, consider the following
example for submitting an order to the orders API.

When you submit an order to the orders API, your integration must
include an identifier for each menu item that is included in the order.
This identifier can be either the menu item's `guid` or its
`multiLocationId`. To continue the example above, the
`guid` for the Boston version of the Breakfast Sandwich
(`aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa`) is different from
the `guid` for the New York City version of the Breakfast
Sandwich (`bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb`). This means
that if you use `guid`s as the identifiers in your
order:

* When your integration submits an order to the Boston location,
  it must use `aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa` to
  identify the Breakfast Sandwich.
* When your integration submits an order to the New York City
  location, it must use
  `bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb` to identify the
  Breakfast Sandwich.

The recommended approach is to use the
`multiLocationId`. Your integration can use the
`multiLocationId` of `11111111` to submit an order
for the Breakfast Sandwich to *either* the Boston or
the New York City location.

When you use the `multiLocationId` as the identifier
for the menu item, you eliminate the need to know which location the
menu item is being submitted to.

##### Additional notes about multi-location identifiers

Some additional notes about the `multiLocationId`
identifier:

* Toast APIs generate both `multiLocationId` and
  `guid` identifiers for the entities in all restaurants,
  whether they use the multi-location management module or not. This
  allows your integration to use the same code, regardless of whether
  a restaurant is part of a larger group. See [Using multiLocationId for single-location restaurants](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html#portalUsingMultiLocationIForSingleLocationRestaurants)
  for more information.
* The `multiLocationId` is new to the Toast APIs. Not
  all APIs support it yet. If an API does not expose the
  `multiLocationId` value, you must continue to use the
  `guid` as the identifier for a Toast entity. Currently,
  the following APIs support `multiLocationId`:

  + Menus API
  + Stock API
  + Orders API (for menu entities only)
* The menus API had an earlier version of the
  `multiLocationId` called `masterId`. The more
  appropriately named `multiLocationId` value replaces the
  `masterId` value and contains the same identifier as
  `masterId`. The `masterId` value has been
  deprecated.

#### Using multiLocationId for single-location restaurants

Toast APIs generate both `multiLocationId` and
`guid` identifiers for all restaurants, whether they use the
multi-location management module or not. This allows your integration to
use the same code, regardless of whether a restaurant is part of a larger
group. It also protects your integration from issues if a single-location
restaurant adds the multi-location management module in the future.

For single-location restaurants, each Toast entity has a single
version, and that single version is assigned `guid` and
`multiLocationId` identifiers. In this situation, the
`multiLocationId` identifier has a one-to-one relationship with
the `guid` identifier, because there are no other versions that
share the `multiLocationId`.

#### External identifiers

You can assign external identifiers to track Toast POS configuration
and order objects using identifier strings that match your other
information systems. For example, if your organization maintains employee
identifiers in a system other than the Toast POS, you can store the
employee identifier in the Toast POS record for an employee as an external
identifier. Custom external identifiers are optional. The preferred
identifier is the Toast Globally Unique Identifier (GUID). Toast APIs are
optimized for use with GUIDs.

An external identifier is a bundle of information that uniquely
identifies a particular domain object in an external system according to
some naming authority, across space and time.

The standard string representation of external identifiers is as
follows:

```
{authority-name}:{identifier}
```

* *`authority-name`*: the unique name
  assigned by Toast for the naming authority for this domain object.
  (required for clients, <= 16 characters)
* *`identifier`*: a string, number or
  combination thereof, that uniquely identifies a domain object in an
  external system (required, <= 256 characters)

For example, a partner named *`MyCompany`*
might schedule shifts for a restaurant in its own systems that are then
added to the Toast POS system through an integration process. Some shifts
might come from an older system that uses integer keys for such shifts,
while a newer web service might assign Globally Unique Identifiers (GUIDs)
to objects it creates.

In the above case, there would be three naming authorities:

* MYCOMPANY-OLD-SYSTEM
* MYCOMPANY-NEW-SYSTEM
* TOAST (implied for GUIDs)

and potentially three external identifiers assigned for a particular
shift:

* "MYCOMPANY-OLD-SYSTEM:1234â
* "MYCOMPANY-NEW-SYSTEM:1234â
* shift GUID: â3F2504E0-4F89-41D3-9A0C-0305E82C3301â (âTOASTâ
  implied)

Note that the identifier part of both external identifiers from
*`MyCompany`* use the exact same database
identifiers, but that the external identifiers are still unique by naming
authority.

Toast assigns the naming authority names and Toast GUIDs.

Client-assigned external identifiers are private. A particular
domain object may be created by one partner, updated by Toast, and read by
another partner. Toast APIs will always expose the Toast GUID and this
GUID can be used in any context, at any time, even in back channel
communications between partners. The client-assigned external identifiers,
however, will not be exposed to partners who did not create that
binding.

In addition to using the Toast labor API to set an
`externalId` for an employee and then `GET` the
employee with the `externalId`, another frequent use of
external Ids is in the orders API: you can `POST` an order with
an `externalId`, and then `GET` the order with that
`externalId`.

|  |
| --- |
| Note |
| The `externalId` values for the `Order`, `Check`, and `Selection` objects must be unique. If you submit an order containing an `externalId` that already exists for another `Order`, `Check`, or `Selection`, the request will fail. |


---

# Getting online ordering schedules - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html

### Getting online ordering schedules

To retrieve a restaurant location's online ordering schedule, send
a `GET` request to the `/orderingSchedule`
endpoint of the order management configuration API. This endpoint
returns a restaurant locationâs online ordering hours for takeout,
delivery, or both. The ordering schedule indicates the hours when a
guest can place orders for immediate or future fulfillment.

|  |
| --- |
| Important |
| Retrieve a restaurant's online ordering schedule at least once per day at the end of the business day. This ensures that you have up-to-date information about when online ordering hours begin and end on the next business day. [Future orders](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html) must fall within a restaurant's ordering hours. You are responsible for respecting the restaurantâs hours. The orders API will not validate against these hours. |

**Request for a restaurant's online ordering schedule**

In the following example, you send a `GET` request to
the `/orderingSchedule` endpoint with the
`Toast-Restaurant-External-ID` to retrieve a restaurant
location's online ordering schedule.

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)\
-H "Toast-Restaurant-External-ID: 27d35c6a-7068-49f7-bee0-25e654e1227a" ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png) \
"https://[toast-api-hostname]/ordermgmt-config/v1/published/orderingSchedule
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html#co-d1e88264BB8911-6D33-427B-B2BF-261630CB0B01) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [2](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html#co-d1e88464BB8911-6D33-427B-B2BF-261630CB0B01) | Specify the location GUID of the restaurant whose online ordering schedule you want to retrieve. |

  

**Response containing a restaurant's online ordering
schedule**

The following example shows a restaurant location's online
ordering schedule for both `DELIVERY` and
`TAKEOUT` dining option behaviors. The
`/orderingSchedule` endpoint returns an array of values
configured in the [Online ordering
hours](https://doc.toasttab.com/doc/platformguide/adminConfigureOnlineOrderingHoursOverview.html) section on the Takeout & delivery
page in Toast Web. Restaurant operators must have [first-party
delivery](https://central.toasttab.com/s/article/How-do-I-set-up-my-take-out-and-delivery-options-1492745822028) enabled in Toast Web to display DELIVERY hours.

|  |
| --- |
| Note |
| Online ordering hours can extend past midnight as long as they are before the [closeout hour](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html). The closeout hour is the business day cutoff, which is the hour of the day that ends the current business day and starts the next. Allow at least 15 minutes between the end of the online ordering hour and the closeout hour. To configure your closeout hours, contact Toast support. |

```
{
    "servicePeriods": [
        {
            "diningOptionBehavior": "DELIVERY" ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png),
            "dayPeriods": [
                {
                    "day": "MONDAY",
                    "timeRanges": [
                        {
                            "start": "11:00" ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png),
                            "end": "02:00"
                        }
                    ]
                },
                {
                    "day": "WEDNESDAY",
                    "timeRanges": [
                        {
                            "start": "11:00",
                            "end": "20:00"
                        }
                    ]
                },
                {
                    "day": "FRIDAY",
                    "timeRanges": [
                        {
                            "start": "11:00",
                            "end": "20:00"
                        }
                    ]
                },
                {
                    "day": "SATURDAY",
                    "timeRanges": [
                        {
                            "start": "12:00",
                            "end": "19:00"
                        }
                    ]
                }
            ]
        },
        {
            "diningOptionBehavior": "TAKE_OUT",
            "dayPeriods": [
                {
                    "day": "MONDAY",
                    "timeRanges": [
                        {
                            "start": "11:00",
                            "end": "02:00"
                        }
                    ]
                },
                {
                    "day": "WEDNESDAY",
                    "timeRanges": [
                        {
                            "start": "11:00",
                            "end": "20:00"
                        }
                    ]
                },
                {
                    "day": "FRIDAY",
                    "timeRanges": [
                        {
                            "start": "11:00",
                            "end": "20:00"
                        }
                    ]
                },
                {
                    "day": "SATURDAY",
                    "timeRanges": [
                        {
                            "start": "10:00",
                            "end": "19:00"
                        }
                    ]
                }
            ]
        }
    ],
    "overrides": ![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png) [
        {
            "description": "New operating hours",
            "diningOptionBehavior": ![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png) [
                "DELIVERY",
                "TAKE_OUT"
            ],
            "businessDate": 20211004,
            "timeRanges": [
                {
                    "start": "13:00",
                    "end": "16:00"
                }
            ]
        }
    ],
    "scheduledOrderMaxDays": 21 ![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html#co-d1e1163EA94E75-C09B-4686-82C8-0754D4415861) | The [diningOptionBehavior](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#apiOrdersDiningOptionTypes) the online ordering schedule is returned for. |
| [2](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html#co-d1e1183EA94E75-C09B-4686-82C8-0754D4415861) | The local time in HH:MM format. |
| [3](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html#co-d1e1203EA94E75-C09B-4686-82C8-0754D4415861) | Returns scheduled overrides. Scheduled overrides are temporary periods of time (customizable increments of 15 minutes) when a restaurant can adjust their online ordering schedule for a selected date or date range. For more information, see [Configuring overrides](https://doc.toasttab.com/doc/platformguide/adminConfigureOnlineOrderingHoursOverview.html#adminConfigureOverridesOnOnlineOrderingHours). |
| [4](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html#co-d1e1223EA94E75-C09B-4686-82C8-0754D4415861) | Indicates which `diningOptionBehavior` the override applies to. |
| [5](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html#co-d1e1243EA94E75-C09B-4686-82C8-0754D4415861) | The [maximum number of days in the future](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html) a guest can schedule an online order. You should not place orders more than the `scheduledOrderMaxDays`. This value can be configured in the Online ordering section on the Takeout & delivery page in Toast Web. |

  

The values returned are organized by
`diningOptionBehavior`.

* If the restaurants you work with manage their own delivery,
  use `DELIVERY` hours. For more information on how to
  configure self-delivery, see [Set
  Up Delivery Using Your Own Drivers](https://central.toasttab.com/s/article/How-do-I-set-up-my-take-out-and-delivery-options-1492745822028#Enabling).
* If you or the restaurants you work with offer third-party
  orders and pickup, use `TAKE_OUT` hours.
* To display general restaurant availability, use
  `TAKE_OUT` hours.

**Determining if a restaurant accepts online orders**

In the following example, the response returns an empty array.
This means the restaurant location has not configured their online
ordering hours in Toast Web. We recommend you contact the restaurant
location prior to going live to confirm online ordering hours have
been configured.

```
{
    "servicePeriods": [],
    "overrides": [],
    "scheduledOrderMaxDays": 0
}
```


---

# Getting a restaurant's online ordering availability - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGettingRxOnlineOrderingAvailability.html

### Getting a restaurant's online ordering availability

Send a `GET` request to the
`/restaurant-availability/v1/availability` endpoint of the
restaurant availability API to retrieve a restaurantâs availability to
accept online orders. The `restaurant_availability` webhook
sends a message when the restaurantâs Toast Autofireâ¢ device
has stopped approving online orders.

This is the [fallback endpoint](https://doc.toasttab.com/doc/cookbook/apiWebhookUsageChecklist.html) for the
`restaurant_availability
webhook`. Toast support recommends using both the API and
the webhook.

Toast support recommends querying this API endpoint every ten
minutes to ensure you have consistently accurate information about
restaurants' availability to accept online orders. Failure to query the
restaurant availability API endpoint could result in restaurants being
offline for a longer period of time in the event of a missed webhook
event.

For more information, see `restaurant_availability
webhook`.

**Get a restaurant's online ordering availability**

In the following example, you send a `GET` request to
the `/restaurant-availability/v1/availability` endpoint
with the `Toast-Restaurant-External-ID` to retrieve a
restaurant location's online ordering availability.

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Toast-Restaurant-External-ID: 27d35c6a-7068-49f7-bee0-25e654e1227a"  \ ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
"https://[toast-api-hostname]/restaurant-availability/v1/availability
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGettingRxOnlineOrderingAvailability.html#co-d1e672109AB21-78E4-4FF7-8E28-AA98325F0F63) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [2](https://doc.toasttab.com/doc/devguide/apiGettingRxOnlineOrderingAvailability.html#co-d1e692109AB21-78E4-4FF7-8E28-AA98325F0F63) | Specify the location GUID of the restaurant whose online ordering availability you want to retrieve. |

  

**Ordering availability response for an online restaurant**

The following example shows an online restaurant location's
ordering availability.

```
{
    "restaurantGuid": "00000000-05f4-55a4-0000-0000020f4be3",
    "status": "ONLINE",
    "reasonKey": "AVAILABILITY_ONLINE",
    "reason": "Restaurant is approving online orders"
  }
```

  

**Ordering availability response for an offline
restaurant**

The following example shows an offline restaurant location's
ordering availability.

```
{
    "restaurantGuid": "00000000-05f4-55a4-0000-0000020f4be3",
    "status": "OFFLINE",
    "reasonKey": "AVAILABILITY_OFFLINE",
    "reason": "Restaurant cannot accept online orders"
  }
```


---

# Restaurant closeoutHour and business dates - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRestaurantBusinessDate.html

### Restaurant closeoutHour and business dates

The restaurant API's `closeoutHour` determines your
restaurant's `businessDate` value in other Toast APIs. The
`closeoutHour` is a value from 0-12 (midnight (0) to noon
(12)), which represents your restaurant's Business Day
Cutoff configuration in Toast Web. For example, if your
restaurant's Business Day Cutoff field is set to
4 AM, the `closeoutHour` value will be
`4`. The time zone for the Business Day
Cutoff is determined by your restaurant's Time
Zone configuration in Toast Web.

|  |
| --- |
| Note |
| Your restaurant's Business Day Cutoff and Time Zone configurations can only be updated by Toast Support. |

#### Toast Web business closeout operations

When your restaurant's `closeoutHour` time has been
reached, the following operations occur in Toast Web:

* Any employees who are still clocked in are automatically
  clocked out.
* Card payments that have not been captured yet are
  automatically captured. This is typically the entire day's card
  payments.

|  |
| --- |
| Note |
| The Toast platform will not close unpaid orders. Unpaid orders remain open until they are resolved either by being paid or voided. |

#### Toast API business closeout operations

When your restaurant's `closeoutHour` time has been
reached, the following operations occur in Toast APIs.

Orders APIÂ

* `closeDate`: The `closeDate` value
  is set to a time after the `closeoutHour`.
* `modifiedDate`: The `modifiedDate`
  value is set to a time after the
  `closeoutHour`.

For more information about the orders API, see [Toast
orders API](https://doc.toasttab.com/openapi/orders/overview/).

Labor APIÂ

* `outDate`: Any time entries without an
  `outDate` value are automatically closed and the
  `outDate` value is set to the business cut-off
  time.
* `modifiedDate`: The `modifiedDate`
  value is set to the business cut-off time for any time entries
  closed at the business cut-off time.

For more information about the labor API, see
[Toast
labor API](https://doc.toasttab.com/openapi/labor/overview/).


---

# Getting information about a specific restaurant - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html

### Getting information about a specific restaurant

Send a `GET` request to the
`/restaurants/v1/restaurants/{restaurantGUID}` endpoint of
the restaurants API to obtain configuration information for a specific
restaurant. The endpoint returns a `RestaurantInfo` object
that contains the following objects and their information:

* `General` object: general
  information about the restaurant:

  + `name` is the restaurant's guest-facing name.
    For example: `West End Grille`.
  + `locationName` is a name used externally to
    differentiate multiple locations. For example, `Davis
    Square` might be the location of one of the restaurants in
    a restaurant group in a city.
  + `locationCode` is a code used internally to
    differentiate multiple locations. It is typically a three or
    four letter code.
  + `description` is a description of the
    restaurant. This description appears on Toast's website.
  + `timeZone` is the name of the restaurant's time
    zone in the IANA (Internet Assigned Numbers Authority) time zone
    database.
  + `closeoutHour` is the business day cutoff,
    which is the hour of the day that ends the current business day
    and starts the next. The value is 0-12 (midnight to noon) and is
    in the restaurant's time zone. For example, a value of
    `4` means that 4:00 AM is the close of the current
    business day. Note that this value is different from the
    `closeTime` value for a day schedule.
  + `managementGroupGuid` is the GUID of the
    restaurant management group.
  + `archived` indicates whether the restaurant has
    been made inactive on the Toast platform. An example reason that
    a restaurant is archived is that it was created in error.

  Note that the `name`, `timeZone`, and
  `closeoutHour` values are always populated, but the other
  values may be null.
* `URLs` object: web addresses
  for the restaurant:

  + `website` is the restaurant's primary
    (independently-hosted) website.
  + `facebook` is the restaurant's Facebook
    page.To
  + `twitter` is the restaurant's Twitter
    feed.
  + `orderOnline` is the restaurant's online
    ordering page, where guests can place takeout or delivery
    orders.
  + `purchaseGiftCard` is the restaurant's website
    where guests can purchase gift cards. This value is populated
    only if the location has Toast gift cards (not a gift card
    integration).
  + `checkGiftCard` is the restaurant's website
    where guests can find balances and other information about gift
    cards. This value is populated only if the location has Toast
    gift cards (not a gift card integration).
* `Location` object:
  information about the physical location of the restaurant:

  + `address1` is the first line of the
    restaurant's street address.
  + `address2` is the second line of the
    restaurant's street address.
  + `city` is the restaurant's city or town.
  + `stateCode` is the two-letter abbreviation of
    the restaurant's state, such as `CA` for
    California.
  + `zipCode` is the restaurant's ZIP or postal
    code.
  + `country` is the two-letter abbreviation of the
    restaurant's country, such as `US` for United
    States.
  + `phone` is the restaurant's 10-digit phone
    number.
  + `latitude` is the restaurant's north/south
    geographical coordinate in decimal degrees.
  + `longitude` is the restaurant's east/west
    geographical coordinate in decimal degrees.
* `Schedules` object:
  information about the restaurant services (such as lunch and dinner)
  and the schedules for those services over a one-week period. For
  details on the `Schedules` object, see [Restaurant configuration settings that affect order wait
  time](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#apiRestaurantTimeConfigurationSettings).
* `Delivery` object:
  information about the Toast delivery service provided by the
  restaurant:

  + `enabled` indicates whether the restaurant
    provides a Toast delivery service.
  + `minimum` is minimum order price that qualifies
    for delivery.
  + `area` is the geographic area in which the
    restaurant provides delivery service. The delivery area is
    represented by an encoded set of latitude and longitude
    coordinates that describe a polygon area on a map. The
    coordinates are encoded using the Google maps encoded polyline
    algorithm format.
* `OnlineOrdering`
  object: information about the restaurant's online ordering service,
  including payment options for online orders. For details on the
  `OnlineOrdering` object, see [Online ordering configuration](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html).
* `PrepTimes` object:
  information about the scheduled availability of dining options that
  are provided by the restaurant. For details on the
  `PrepTimes` object, see [Restaurant configuration settings that affect order wait
  time](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#apiRestaurantTimeConfigurationSettings).

The following example **curl** command sends a
`GET` request to the
`/restaurants/v1/restaurants/{restaurantGUID}`
endpoint.

**Get configuration of a specific restaurant**

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
https://[toast-api-hostname]/restaurants/v1/restaurants/76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e619B3F37BA5-CBF8-4BF9-B6F3-68E222AD450D) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant from which to retrieve configuration information. |
| [2](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e624B3F37BA5-CBF8-4BF9-B6F3-68E222AD450D) | Use the same restaurant GUID in the `/restaurants/v1/restaurants/{restaurantGUID}` endpoint. |

  

The following example shows the JSON response data for a GET
request to the `/restaurants/v1/restaurants/{restaurantGUID}`
endpoint.

**Get restaurant configuration return data**

```
{
  "guid": "76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "general": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "archived": false,
    "name": "Trattoria Roma",
    "locationName": Fenway,
    "locationCode": "",
    "description": "Italian food in a casual atmosphere",
    "timeZone": "America/New_York",
    "closeoutHour": 6,
    "managementGroupGuid": "ae6c32fe-f4d2-4dcc-aa82-f30edac96296"
  },
  "urls": {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "website": "https://www.example.com",
    "facebook": "",
    "twitter": "https://twitter.com/",
    "orderOnline": "https://www.toasttab.com/trattoria-roma/onlineorders",
    "purchaseGiftCard": "https://www.toasttab.com/trattoria-roma/giftcards",
    "checkGiftCard": "https://www.toasttab.com/trattoria-roma/findcard"
  },
  "location": {![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "address1": "401 Park Drive",
    "address2": "",
    "city": "Boston",
    "stateCode": "MA",
    "zipCode": "02215",
    "country": "US",
    "phone": "1112223333",
    "latitude": 42.344552,
    "longitude": -71.102756
  },
  "schedules": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    "daySchedules": {
      "1495000000000023": {
        "scheduleName": "Weekdays",
        "services": [
          {
            "name": "Lunch",
            "hours": {
              "startTime": "12:00:00.000",
              "endTime": "15:59:00.000"
            },
            "overnight": false
          },
          {
            "name": "Dinner",
            "hours": {
              "startTime": "16:00:00.000",
              "endTime": "22:00:00.000"
            },
            "overnight": false
          }
        ],
        "openTime": "12:00:00.000",
        "closeTime": "22:00:00.000"
      },
      "1495000000000024": {
        "scheduleName": "Weekends",
        "services": [
          {
            "name": "Lunch",
            "hours": {
              "startTime": "12:00:00.000",
              "endTime": "15:59:00.000"
            },
            "overnight": false
          },
          {
            "name": "Dinner",
            "hours": {
              "startTime": "16:00:00.000",
              "endTime": "22:00:00.000"
            },
            "overnight": false
          }
        ],
        "openTime": "12:00:00.000",
        "closeTime": "22:00:00.000"
      }
    },
    "weekSchedule": {
      "monday": "1495000000000023",
      "tuesday": "1495000000000023",
      "wednesday": "1495000000000023",
      "thursday": "1495000000000023",
      "friday": "1495000000000023",
      "saturday": "1495000000000024",
      "sunday": "1495000000000024"
    }
  },
  "delivery": {![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
    "enabled": true,
    "minimum": null,
    "area": ""
  },
  "onlineOrdering": {![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
    "enabled": true,![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
    "scheduling": false,
    "specialRequests": true,
    "specialRequestsMessage": "No substitutes",
    "paymentOptions": {
      "delivery": {
        "cash": true,
        "ccSameDay": true,
        "ccFuture": false
      },
      "takeout": {
        "cash": true,
        "ccSameDay": true,
        "ccFuture": false,
        "ccInStore": true
      },
      "ccTip": true
    }
  },
  "prepTimes": {![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
    "deliveryPrepTime": 60,
    "deliveryTimeAfterOpen": 0,
    "deliveryTimeBeforeClose": 0,
    "takeoutPrepTime": 30,
    "takeoutTimeAfterOpen": 0,
    "takeoutTimeBeforeClose": 0,
    "takeoutThrottlingTime": 0,
    "deliveryThrottlingTime": 0
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e566EA079BAD-EBC7-4074-A78B-E75704C9760F) | The GUID of the restaurant from which configuration information is retrieved. |
| [2](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e568EA079BAD-EBC7-4074-A78B-E75704C9760F) | [General information](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#restInfoGeneral) about the restaurant. The name of this sample restaurant is `Trattoria Roma`. |
| [3](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e570EA079BAD-EBC7-4074-A78B-E75704C9760F) | The [web addresses](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#restInfoURLs) for the restaurant. |
| [4](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e572EA079BAD-EBC7-4074-A78B-E75704C9760F) | The [physical location](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#restInfoLocation) of the restaurant. |
| [5](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e574EA079BAD-EBC7-4074-A78B-E75704C9760F) | The [schedules and services](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#restInfoSchedules) provided by the restaurant. This sample restaurant has two day schedules, named `Weekdays` and `Weekends`. Each day schedule has an `openTime` value that designates when the first service of the day begins and a `closeTime` value for when the last service of the day ends. |
| [6](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e577EA079BAD-EBC7-4074-A78B-E75704C9760F) | The [delivery service](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#restInfoDelivery) of the restaurant. In this sample restaurant, a delivery service is available. |
| [7](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e579EA079BAD-EBC7-4074-A78B-E75704C9760F) | The [online ordering service](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#restInfoOnlineOrdering) provided by the restaurant. In this sample restaurant, a delivery service is available, orders are fulfilled as soon as possible, and both cash and credit card payments are accepted for takeout and delivery orders. |
| [8](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#apiRestaurantEnabled) | The `enabled` value in the `OnlineOrdering` object will always be `true` after the restaurant does their initial setup for Toast Online Ordering. |
| [9](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#co-d1e581EA079BAD-EBC7-4074-A78B-E75704C9760F) | The [scheduled availability of the dining options](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html#restInfoPrepTimes) provided by the restaurant. |


---

# Online ordering configuration - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html

### Online ordering configuration

The return data from a `GET` request to the
`/restaurants/{restaurantGUID}` endpoint of the restaurants
API includes an `OnlineOrdering` object with the
configuration for the restaurant's Toast Online Ordering service. If the
restaurant has the Toast Online Ordering feature, restaurant employees
configure these settings on the Takeout & delivery >
Toast online ordering > Toast Online Ordering page in the
Toast Web.

The following example shows the online ordering configuration
values in the return data from a `GET` request to
the `/restaurants/{restaurantGUID}` endpoint of the
restaurants API.

**Online ordering configuration in the restaurants API**

```
  "onlineOrdering": {
    "enabled": true,![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "scheduling": true,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "specialRequests": true,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "specialRequestsMessage": "No substitutes. Additions may be charged extra.",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "paymentOptions": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "delivery": {![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
        "cash": true,![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
        "ccSameDay": true,![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
        "ccFuture": true![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
      },
      "takeout": {![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
        "cash": true,
        "ccSameDay": true,
        "ccFuture": true,
        "ccInStore": true![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
      },
      "ccTip": true![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
    }
  }
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e709B5CC56A8-7562-434E-9596-72D2B0334CE4) | Indicates whether the restaurant accepts online orders from the Toast Online Ordering service. |
| [2](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e711B5CC56A8-7562-434E-9596-72D2B0334CE4) | A value of `true` means that guests can schedule orders to be fulfilled in the future, while a value of `false` means that scheduled orders cannot be placed and instead are fulfilled as soon as possible. If `true`, the restaurant can configure the maximum number of days in the future that scheduled orders can be placed. |
| [3](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e713B5CC56A8-7562-434E-9596-72D2B0334CE4) | Whether guests can add instructions to their online orders. |
| [4](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e715B5CC56A8-7562-434E-9596-72D2B0334CE4) | If `specialRequests` is `true`, provides a message to guests in the special requests dialog box where guests add their instructions. For example, the message might list order limitations for guest requests. |
| [5](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e717B5CC56A8-7562-434E-9596-72D2B0334CE4) | Information on the forms of payments that the restaurant accepts for delivery and takeout online orders. |
| [6](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e720B5CC56A8-7562-434E-9596-72D2B0334CE4) | Information on the forms of payments that the restaurant accepts for online delivery orders. |
| [7](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e722B5CC56A8-7562-434E-9596-72D2B0334CE4) | Whether cash is accepted as payment for the order. |
| [8](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e724B5CC56A8-7562-434E-9596-72D2B0334CE4) | Whether the restaurant accepts online credit card payment for orders that are delivered on the same day. |
| [9](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e726B5CC56A8-7562-434E-9596-72D2B0334CE4) | Whether the restaurant accepts online credit card payment for scheduled (future) orders. |
| [10](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e728B5CC56A8-7562-434E-9596-72D2B0334CE4) | Information on the forms of payments that the restaurant accepts for online takeout orders. The `cash`, `ccSameDay`, and `ccFuture` values have the same meaning as the `delivery` versions. |
| [11](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e730B5CC56A8-7562-434E-9596-72D2B0334CE4) | Whether the restaurant accepts credit card payment when the guest picks up the takeout order in the restaurant. If `false`, the guest must pay online. |
| [12](https://doc.toasttab.com/doc/devguide/apiRestaurantOnlineOrderingInfo.html#co-d1e733B5CC56A8-7562-434E-9596-72D2B0334CE4) | Whether guest who order online are allowed to add tips to the order when paying by credit card. |


---

# Getting all restaurants in a management group - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRestaurantsInGroup.html

### Getting all restaurants in a management group

Send a `GET` request to the
`/restaurants/v1/groups/{managementGroupGUID}/restaurants`
endpoint of the restaurants API to get a list of the restaurants in a
restaurant management group. The endpoint returns a JSON array of
`Restaurant` objects. Each `Restaurant` object
contains the GUID of a restaurant in the restaurant management
group.

You can get a restaurant management group's GUID from either of
these resources:

* The `/restaurants/v1/restaurants/{restaurantGUID}`
  endpoint of the restaurants API. See [Getting information about a specific restaurant](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html).
* The `/partners/v1/restaurants` endpoint of the
  partners API (if you have partner-level credentials). See [Location access](https://doc.toasttab.com/doc/devguide/apiPartnersGettingAccessibleRestaurants.html).

The following example **curl** command sends a
`GET` request to the
`/restaurants/v1/groups/{managementGroupGUID}/restaurants`
endpoint.

**Get all restaurants of a management group**

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
https://[toast-api-hostname]/restaurants/v1/groups/ae6c32fe-f4d2-4dcc-aa82-f30edac96296/restaurants![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiRestaurantsInGroup.html#co-d1e84161282B4-F46D-4270-AE0F-A6973EF18C80) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of one restaurant location in the restaurant management group. |
| [2](https://doc.toasttab.com/doc/devguide/apiRestaurantsInGroup.html#co-d1e89161282B4-F46D-4270-AE0F-A6973EF18C80) | Specify the GUID of the restaurant management group from which to retrieve its restaurant locations. |

  

The following example shows the JSON response data for a GET
request to the
`/restaurants/v1/groups/{managementGroupGUID}/restaurants`
endpoint.

**Get all restaurants return data**

```
[
  {
    "guid": "34ac7aaf-7178-4c6f-af63-c42ebc7e91f7"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  },
  {
    "guid": "76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf"
  },
  {
    "guid": "3eb63e0d-57b1-4c9f-a1b7-5722ae4ef801"
  },
  {
    "guid": "27ffe323-1449-49c6-8d9d-347eafb03d58"
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiRestaurantsInGroup.html#co-d1e106161282B4-F46D-4270-AE0F-A6973EF18C80) | The `guid` value contains the unique Toast POS identifier for a restaurant location in the restaurant management group. In this example, the request returns four restaurant locations. |


---

# Updating stock - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html

### Updating stock

You can use the [stock
API](https://doc.toasttab.com/openapi/stock/overview/) to update stock inventory information for menu items and
modifiers (via their underlying menu item references).

|  |
| --- |
| Note |
| For information on getting inventory information, see [Getting stock using the stock webhook](https://doc.toasttab.com/doc/devguide/apiUsingTheStockWebhook.html) and [Getting stock information using the stock API](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html). |

To update inventory information for menu items, submit a
`PUT` request to the stock API's `/inventory/update`
endpoint. The message body of the `PUT` request must contain an
array of objects that provide information about the menu items to
update.

The following example **curl** command sends a
`PUT` request to the `/inventory/update`
endpoint.

**Update menu item inventory information**

```
curl -X PUT \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: e4c1f40d-3247-4b8b-9891-52f445930fa3" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Content-Type: application/json" \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
-d @my-item-inventory-data.json \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
https://[toast-api-hostname]/stock/v1/inventory/update
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e1511646327542) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant you want to update inventory for. The GUID must be for an individual restaurant location, not the GUID for a restaurant group or management group. |
| [2](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e1531646327542) | Specify the data type of the message body in the Content-Type header field. The value must be `application/json`. |
| [3](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e1551646327542) | Include the array of menu items to update in the message body of the `PUT` request. This example **curl** command sends message body data from the contents of the `my-item-inventory-data.json` file. |

  

For each menu item to update, include a `MenuItemInventory`
object in the message body with the following values:

* An identifier for the menu item. This may be either the menu
  item's `multiLocationId` or its `guid`.

  If you use a `multiLocationId`, then the Toast platform
  will use that ID along with the restaurant GUID in the request header to
  resolve which menu item version is affected by the update.

  See [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html) for more information on these two
  identifier types.
* The status for the menu item, which must be one of the
  following:

  + `IN_STOCK`
  + `OUT_OF_STOCK`
  + `QUANTITY`
* For menu items with a stock status of `QUANTITY`, you
  must also provide a `quantity` value. This number should be
  greater than 0 (such as 0.5, 7.0, or 10.75). Note that if you provide 0
  as the `quantity` for a menu item that has a
  `QUANTITY` stock status, the stock API will accept this value
  but it will set the menu item's stock status to
  `OUT_OF_STOCK`.

  *Do not* include a `quantity` value
  for menu items with a status of `IN_STOCK` or
  `OUT_OF_STOCK`.

The following example shows a JSON message body data that provides
information about the menu items to update.

**JSON message body content to update menu items**

```
[
    {
        "multiLocationId": "100000000171238879",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
        "status": "IN_STOCK"
    },
    {
        "multiLocationId": "100000000171239701",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "status": "QUANTITY",
        "quantity": 5.0
    },
    {
        "guid": "88521da5-198e-435b-a5ba-a09983525cf9",
        "status": "OUT_OF_STOCK"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    },
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e2911646327542) | This object uses a `multiLocationId` to identify the menu item to update and sets the menu item's stock status to `IN_STOCK`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e2951646327542) | This object uses a `multiLocationId` to identify the menu item to update. It sets the menu item's stock status to `QUANTITY` and specifies in the `quantity` value that there are five units of the menu item in stock. |
| [3](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e2971646327542) | This object uses a `guid` to identify the menu item to update and sets the menu item's stock status to `OUT_OF_STOCK`. |

  

The response for an update request includes a [`MenuItemInventory`
object](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#portalMenuItemInventoryObject) with the inventory information for each menu item identifier
you submitted in the request. The stock API sets the
`itemGuidValidity` value of each `MenuItemInventory`
object to indicate whether it found a matching menu item and made the
update. `VALID` indicates a matching item was found and its stock
status was updated. `INVALID` indicates no matching item was
found and no action was taken for that identifier. If a menu item's status
is `INVALID`, your integration should update the list of menu
items it associates with the restaurant location.

|  |
| --- |
| Note |
| You can use the [menus API](https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html) to retrieve a fully resolved set of menus for each restaurant location, including identifiers for all of the location's menu items. |

The following example shows the JSON response data for a PUT request
to the `/inventory/update` endpoint.

**Inventory update response**

```
[
    {
        "guid": "7d850cd0-c014-46f0-bfa6-b1f920c03743",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png) 
        "itemGuidValidity": "VALID",
        "status": "IN_STOCK",
        "quantity": null,
        "multiLocationId": "100000000171238879",
        "versionId": "7d850cd0-c014-46f0-bfa6-b1f920c03743"
    },
    {
        "guid": "79977142-e076-4727-9b69-9176726b1603",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "itemGuidValidity": "VALID",
        "status": "QUANTITY",
        "quantity": 5.0,
        "multiLocationId": "100000000171239701",
        "versionId": "79977142-e076-4727-9b69-9176726b1603"
    },
    {
        "guid": "88521da5-198e-435b-a5ba-a09983525cf9",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
        "itemGuidValidity": "VALID",
        "status": "OUT_OF_STOCK",
        "quantity": null,
        "multiLocationId": "100000000171241912",
        "versionId": "88521da5-198e-435b-a5ba-a09983525cf9"
    },
    {
        "guid": "78271a25-cce4-4317-be6e-67be12722d20",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
        "itemGuidValidity": "INVALID",
        "status": "OUT_OF_STOCK",
        "quantity": null,
        "multiLocationId": "null",
        "versionId": "78271a25-cce4-4317-be6e-67be12722d20"
    },
    {
        "guid": "null",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        "itemGuidValidity": "INVALID",
        "status": "OUT_OF_STOCK",
        "quantity": null,
        "multiLocationId": "400000000861576949",
        "versionId": "null"
    }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e5391724334607) | Return data for a menu item whose status was set to `IN_STOCK`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e5411724334607) | Return data for a menu item whose status was set to `QUANTITY` and whose quantity was set to `5.0`. |
| [3](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e5431724334607) | Return data for a menu item whose status was set to `OUT_OF_STOCK`. |
| [4](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e5451724334607) | Return data for a menu item `guid` that does not have a matching menu item in the restaurant location's menu configuration. Your integration should update the list of menu items it associates with the restaurant location to remove this menu item. |
| [5](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html#co-d1e5471724334607) | Return data for a menu item `multiLocationId` that does not have a matching menu item in the restaurant location's menu configuration. Your integration should update the list of menu items it associates with the restaurant location to remove this menu item. |

  

Note that, if your integration also uses the [stock webhook](https://doc.toasttab.com/doc/devguide/apiStockWebhook.html),
your webhook endpoint receives a message indicating that an inventory update
has occurred whenever updates are made using the stock API.


---

# Getting stock information using the stock API - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html

### Getting stock information using the stock API

You can use the [stock
API](https://doc.toasttab.com/openapi/stock/overview/) to retrieve stock inventory information for menu items and
modifiers (via their underlying menu item references).

The stock API has the following endpoints for retrieving inventory
information:

* `/inventory` retrieves inventory information for
  all menu items in a restaurant that have an stock status of
  `OUT_OF_STOCK` or `QUANTITY`. This endpoint
  ignores menu items that have a stock status of `IN_STOCK`
  because these items are not considered at risk of going out of
  stock.

  An optional `status` query parameter lets you
  retrieve inventory information for menu items that have a specified
  stock status of either `OUT_OF_STOCK` or
  `QUANTITY`.
* `/inventory/search` retrieves inventory information
  for the menu items in a list that you provide in the request body.
  The returned information for each menu item in the list will have a
  stock status of `OUT_OF_STOCK`, `QUANTITY`, or
  `IN_STOCK`.

The inventory information
for each menu item is returned in a `MenuItemInventory`
object, which has the following properties:

* `guid`: The unique GUID assigned to the menu item
  by the Toast platform.
* `status`: The stock status of the menu item. This
  value is one of the following:

  + `OUT_OF_STOCK`: The menu item is not in stock
    in the restaurant.
  + `QUANTITY`: The menu item is in limited supply
    (1 or more items left).
  + `IN_STOCK`: The menu item is in stock in the
    restaurant. Note that no quantity is associated with the menu
    item but it is considered available and not at risk of going out
    of stock.
* `quantity`: The amount of stock remaining for the
  menu item.

  + For menu items with a stock status of
    `QUANTITY`, the `quantity` value is a
    number that is greater than 0 (such as 0.5, 7.0, or
    10.75).
  + For menu items with a stock status of
    `IN_STOCK` or `OUT_OF_STOCK`, the
    `quantity` value is `null`.

    The `null` value for `IN_STOCK`
    items indicates that there is no specific quantity associated
    with the item but it is assumed to be available.
* `multiLocationId`: A consistent identifier that
  applies to all versions of a menu item that is shared across
  locations.

  Toast support recommends that requests sent to Toast APIs use
  a combination of a restaurant location's GUID and the
  `multiLocationId` to identify a menu item (instead of the
  menu item's `guid` value). Integration clients can
  extract the `multiLocationId` from menus API or stock API
  responses and use it in subsequent requests to Toast APIs. See
  [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html)
  for more information.
* `itemGuidValidity`: Indicates whether a menu item
  identifier that you included in your request is valid or not.

  No identifiers are submitted for requests to the
  `/inventory` endpoint, so `itemGuidValidity`
  is always `VALID` in responses from this endpoint.

  For requests to the `/inventory/search` and
  `/inventory/update`
  endpoints, the stock API sets the `itemGuidValidity`
  value to `VALID` if it finds a match for the menu item.
  If the stock API does not find a match, either because the menu item
  does not exist at the location or because it has been archived, it
  sets `itemGuidValidity` to `INVALID` for that
  menu item. If a menu item is invalid, your integration should update
  the list of menu items it associates with the restaurant location to
  remove that menu item.

  For an invalid menu item, the stock API sets the following
  placeholders for the other JSON values:

  + The `status` value is set to
    `OUT_OF_STOCK`.
  + The `quantity` value is set to
    `null`.
  + If the request included a `guid` as the
    identifier for the menu item, that unmatched `guid`
    is retained in the `guid` value but the
    `multiLocationId` value is set to `null`
    because the stock API is unable to resolve it.
  + If the request included a `multiLocationId` as
    the identifier for the menu item, that unmatched
    `multiLocationId` is retained in the
    `multiLocationId` value but the `guid` is
    set to `null` because the stock API is unable to
    resolve it.

  |  |
  | --- |
  | Note |
  | You can use the [menus API](https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html) to retrieve a fully resolved set of menus for each restaurant location, including identifiers for all of the location's menu items. |
* `versionId`: This value is reserved for future
  use.

The following sections provide more information about retrieving
inventory information for menu items.

|  |
| --- |
| Note |
| For more information on how to change a menu item's inventory information using the stock API's `/inventory/update` endpoint, see [Updating stock](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html). For more information on how to change a menu item's inventory status using Toast Web, see [Menu item inventory overview](https://doc.toasttab.com/doc/platformguide/adminMenuItemInventoryOverview.html). |

#### Getting all stock information for a location

Send a `GET` request to the
`/inventory` endpoint of the stock API to get inventory
information for the menu items of a restaurant. The request returns a
JSON array of `MenuItemInventory` objects containing
information on the stock status and quantity of the menu items.

Information is returned only for menu items that have an
inventory status of `QUANTITY` or
`OUT_OF_STOCK`.

Inventory information is not returned for menu items that have
an `IN_STOCK` status, because these items are not
considered at risk for going out of stock.

The following example **curl** command sends a
`GET` request to the `/inventory`
endpoint.

**Get all menu item inventory for a location**

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
https://[toast-api-hostname]/stock/v1/inventory
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e5167BA284E-76D4-4301-9E9B-45B74A4CCEF9) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant from which to retrieve menu item inventories. The GUID must be for an individual restaurant, not the GUID for a restaurant group or management group. |

  

The following example shows the JSON response data for a GET
request to the `/inventory` endpoint.

**Get all inventory return data**

```
[![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    {
        "guid": "79977142-e076-4727-9b69-9176726b1603",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "status": "OUT_OF_STOCK",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
        "quantity": null,
        "multiLocationId": "100000000171238879",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
        "versionId": "79977142-e076-4727-9b69-9176726b1603"
    },
    {
        "guid": "a4ccc387-912a-4b1d-8062-26b44eed7216",
        "status": "QUANTITY",
        "quantity": 25.0,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        "multiLocationId": "100000000171239701",
        "versionId": "a4ccc387-912a-4b1d-8062-26b44eed7216"
    },
    {
        "guid": "8a2f952d-4dca-4eb0-b867-445f3a674bad",
        "status": "QUANTITY",
        "quantity": 10.75,
        "multiLocationId": "100000000171239569",
        "versionId": "8a2f952d-4dca-4eb0-b867-445f3a674bad"
    }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e4531646253216) | The `GET` request returns a JSON array of menu item inventory objects containing information on menu items with a status of `QUANTITY` or `OUT_OF_STOCK`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e4551646253216) | The `guid` value contains the unique Toast platform identifier for the menu item. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e4571646253216) | The `status` value is `QUANTITY` or `OUT_OF_STOCK`. The `/inventory` endpoint only returns information for menu items that have a stock status of `QUANTITY` or `OUT_OF_STOCK`. The endpoint does not return information for menu items that have an `IN_STOCK` status. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e4591646253216) | The `multiLocationId` value for the menu item.  Toast support recommends using a combination of a menu item's `multiLocationId` and a restaurant location's GUID, instead of the menu item's `guid`, to identify menu items in subsequent requests. See [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html) for more information. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e4611646253216) | The `quantity` value indicates the amount of stock remaining for menu items with an inventory status of `QUANTITY`. The `quantity` value is `null` for menu items with an `OUT_OF_STOCK` inventory status. |

#### Getting inventory by status

You can restrict menu items in the response to those with either
a `QUANTITY` or `OUT_OF_STOCK` status by using
the `status` query parameter of the `/inventory`
endpoint. The format of the `status` request parameter is
one of the following:

* Use a value of `QUANTITY` to get all menu items
  with an inventory status of `QUANTITY`:

  ```
  https://[toast-api-hostname]/stock/v1/inventory?status=QUANTITY
  ```
* Use a value of `OUT_OF_STOCK` to get all menu
  items with an inventory status of
  `OUT_OF_STOCK`:

  ```
  https://[toast-api-hostname]/stock/v1/inventory?status=OUT_OF_STOCK
  ```

The request returns a JSON array of
`MenuItemInventory` objects containing inventory
information for the menu items. Information is returned only for menu
items that have the requested inventory status.

The following example **curl** command sends a
`GET` request to the `/inventory`
endpoint with a `status` query parameter of
`OUT_OF_STOCK`.

**Get inventory by status**

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
https://[toast-api-hostname]/stock/v1/inventory?status=OUT_OF_STOCK![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e26752197B25-7CA6-4B16-9886-FB07C124CEF3) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant from which you want to retrieve menu item inventories by status. The GUID must be for an individual restaurant, not the GUID for a restaurant group or management group. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e27252197B25-7CA6-4B16-9886-FB07C124CEF3) | Specify `status=OUT_OF_STOCK` to retrieve menu items that are not in stock. |

  

The following example shows the JSON response for the
`GET` request.

**Get inventory by status return data**

```
[![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    {
        "guid": "88521da5-198e-435b-a5ba-a09983525cf9",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "status": "OUT_OF_STOCK",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
        "quantity": null,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
        "multiLocationId": "100000000171238879",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        "versionId": "88521da5-198e-435b-a5ba-a09983525cf9"
    },
    {
        "guid": "79977142-e076-4727-9b69-9176726b1603",
        "status": "OUT_OF_STOCK",
        "quantity": null,
        "multiLocationId": "100000000171239701",
        "versionId": "79977142-e076-4727-9b69-9176726b1603"
    }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e7091646253216) | This `GET` request returns a JSON array of menu item inventory objects for menu items with a status of `OUT_OF_STOCK`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e7111646253216) | The `guid` value contains the unique Toast platform identifier for the menu item. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e7131646253216) | The `status` value is `OUT_OF_STOCK` for the menu item. The `status` value would be `QUANTITY` if you had specified `status=QUANTITY` as the request parameter. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e7151646253216) | The `quantity` value indicates the amount of stock remaining for menu items with an inventory status of `QUANTITY`, and is `null` for menu items with an `OUT_OF_STOCK` inventory status. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e7171646253216) | The `multiLocationId` value for the menu item.  Toast support recommends using a combination of a menu item's `multiLocationId` and a restaurant location's GUID, instead of the menu item's `guid`, to identify menu items in subsequent requests. See [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html) for more information. |

#### Searching inventory for specific menu items

To retrieve inventory information for a list of menu items, you
send a `PUT` request to the
`/inventory/search` endpoint. The request must include a
message body that contains an `InventorySearchRequest`
object with one or both of these values:

* A `multiLocationIds` value that contains an array
  of menu item multi-location IDs to search for.
* A `guids` value that contains an array of menu
  item GUIDs to search for.

For information on these two identifier types, see [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html).

The following example shows the message body for a
`POST` request to the
`/inventory/search` endpoint using both
`multiLocationIds` and `guids`.

**JSON message body content to search inventory by menu
items**

```
{
    "multiLocationIds": [
        "100000000171238879",
        "100000000171239701"
    ]
    "guids": [
        "88521da5-198e-435b-a5ba-a09983525cf9"
    ]
}
```

  

The resource returns a JSON array of
`MenuItemInventory` objects containing inventory
information for the requested menu items. Inventory information is
returned for all menu items on the list, regardless of their inventory
status (`QUANTITY`, `OUT_OF_STOCK`, or
`IN_STOCK`).

For requests to the `/inventory/search` endpoint, the
stock API sets the `itemGuidValidity` value of the
`MenuItemInventory` object to `VALID` if it
finds a match for the menu item during the search. If the stock API
does not find a match, it sets `itemGuidValidity` to
`INVALID` for that menu item. If a menu item is invalid,
your integration should update the list of menu items it associates
with the restaurant location to remove that menu item.

For an invalid menu item, the stock API sets the following
placeholders for the other JSON values:

* The `status` value is set to
  `OUT_OF_STOCK`.
* The `quantity` value is set to
  `null`.
* If the search request included a `guid` as the
  identifier for the menu item, that unmatched `guid` is
  retained in the `guid` value but the
  `multiLocationId` value is set to `null`
  because the stock API is unable to resolve it.
* If the search request included a
  `multiLocationId` as the identifier for the menu item,
  that unmatched `multiLocationId` is retained in the
  `multiLocationId` value but the `guid` is
  set to `null` because the stock API is unable to
  resolve it.

If a valid menu item went out of stock and then came back in
stock, its inventory status is returned as
`IN_STOCK`.

The following example **curl** command sends a
`POST` request to the
`/inventory/search` endpoint.

**Search inventory by menu items**

```
curl -X POST \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Content-Type: application/json" \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
-d @my-item-search-data.json \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
https://[toast-api-hostname]/stock/v1/inventory/search
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e41779DA0981-6707-46FB-8E99-12EF303F8E00) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant from which you want to retrieve menu item inventories by status. The GUID must be for an individual restaurant location, not the GUID for a restaurant group or management group. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e41979DA0981-6707-46FB-8E99-12EF303F8E00) | Specify the data type of the message body in the Content-Type header field. The value must be `application/json`. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e42179DA0981-6707-46FB-8E99-12EF303F8E00) | Include the menu item list in the message body of the `POST` request. This example **curl** command sends message body data from the contents of the `my-item-search-data.json` file. |

  

The following example shows the JSON response data for a
`POST` request to the
`/inventory/search` resource.

**Search inventory by menu items response**

```
[![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    {
        "guid": "2f91e217-ec31-4659-a7ba-dc66d76a1b5b",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "itemGuidValidity": "VALID",
        "status": "IN_STOCK",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
        "quantity": null,
        "multiLocationId": "100000000171238879",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
        "versionId": "2f91e217-ec31-4659-a7ba-dc66d76a1b5b"
    },
    {
        "guid": "ad4d928d-0740-4617-96db-bd2a4b1ae1e5",
        "itemGuidValidity": "VALID",
        "status": "QUANTITY",
        "quantity": 100.0,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        "multiLocationId": "100000000171239701",
        "versionId": "ad4d928d-0740-4617-96db-bd2a4b1ae1e5"
    },
    {![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
        "guid": "88521da5-198e-435b-a5ba-a09983525cf9",
        "itemGuidValidity": "INVALID",
        "status": "OUT_OF_STOCK",
        "quantity": null,
        "multiLocationId": "null",
        "versionId": "88521da5-198e-435b-a5ba-a09983525cf9"
    },
    {![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
        "guid": "null",
        "itemGuidValidity": "INVALID",
        "status": "OUT_OF_STOCK",
        "quantity": null,
        "multiLocationId": "400000000861576949",
        "versionId": "null"
    }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e11941724334625) | The `GET` request returns a JSON array of menu item inventory objects for the requested menu items. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e11961724334625) | The `guid` value contains the unique Toast platform identifier for the menu item. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e11981724334625) | The `status` value is one of `QUANTITY`, `OUT_OF_STOCK`, or `IN_STOCK`. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e12001724334625) | The `multiLocationId` value for the menu item.  Toast support recommends using a combination of a menu item's `multiLocationId` and a restaurant location's GUID, instead of the menu item's `guid`, to identify menu items in subsequent requests. See [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html) for more information. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e12021724334625) | The `quantity` value indicates the amount of stock remaining for menu items with an inventory status of `QUANTITY`, and is `null` for `OUT_OF_STOCK` and `IN_STOCK` menu items. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e12051724334625) | An example of a `guid` search for a menu item that does not exist at the restaurant being queried or has been archived. Your integration should update the list of menu items it associates with the restaurant location to remove this menu item. |
| [7](https://doc.toasttab.com/doc/devguide/apiUsingTheStockApi.html#co-d1e12071724334625) | An example of a `multiLocationId` search for a menu item that does not exist at the restaurant being queried or has been archived. Your integration should update the list of menu items it associates with the restaurant location to remove this menu item. |


---

# Getting stock using the stock webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingTheStockWebhook.html

### Getting stock using the stock webhook

To use the stock webhook, you must create a *webhook
endpoint*. This is the URL of a webhook consumer service that
can receive webhook events from the Toast platform. Once you have a
webhook endpoint, Toast support can create a webhook subscription for
your integration that associates your webhook endpoint with stock
webhook events.

For general information on setting up and using Toast webhooks,
see [Webhook basics](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html).

For detailed information on the updates provided by the stock
webhook, including example payloads, see [Stock webhook](https://doc.toasttab.com/doc/devguide/apiStockWebhook.html).


---

# Scheduling future orders - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html

### Scheduling future orders

When you use the orders API to create an order, you can schedule the
order to be fulfilled in the future. For example, you might send a request
in the morning to schedule a takeout order for dinner, or set up a large
delivery order a few days in advance.

|  |
| --- |
| Important |
| Do not set the `promisedDate` value to a date and time earlier than the `openedDate` value. Orders submitted to the orders API where the `promisedDate` is earlier than the `opendDate` will be rejected. |

#### Setting promisedDate for a future order

The `promisedDate` value for an order sets the date and
time to fulfill the order. When you include the `promisedDate`
value, the order you create is scheduled for that date and time.

If you do not include a `promisedDate` value, the Toast
platform creates an as soon as possible (ASAP) order for immediate
fulfillment.

When you set `promisedDate`, make sure that the date and
time reflects the required preparation times and the restaurant hours. For
restaurants that use Toast Online Ordering, you must also consider the
specific time frames when the restaurant accepts online orders. A
restaurant can also limit how far in the future you can schedule an
order.

For example, if an order takes 45 minutes to prepare, do not set
`promisedDate` for a delivery order to 15 minutes after the
restaurant starts to accept delivery orders.

For information on how to estimate the wait time for an order, see
[Calculating order wait time](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html).

#### Setting openedDate for a future order

The `openedDate` value for an order is the date and time
when the order was opened. `openedDate` is used to set the
business date of an order. The business date determines when an order is
added to the open orders report. A scheduled order should not appear in
the open orders report until the day that it is scheduled to fire.

To ensure that the order appears in the open orders report on the
correct date, set `openedDate` to match
`promisedDate`.

If you do not include an `openedDate` value, then
`openedDate` is set to the current date and time. The order
business date is then set to the corresponding day. In other words, the
business date reflects when the order was received, instead of when it was
fulfilled.

For example, on March 1 at 10:00 AM, you create an order that is
scheduled to be fulfilled on March 5 at 4:00 PM. When you create the
order, you set both `promisedDate` and `openedDate`
to the timestamp for March 5 at 4:00 PM.

#### Setting paidDate for a payment on a future order

If the request for the future order includes a payment, set the
`paidDate` for the payment to the timestamp when the payment is
placed. The `paidDate` cannot be more than 7 days from the date
the guest presented the credit card payment.

#### Example Order object for a scheduled order

The `Order` object in the following example creates an
order that is scheduled for future fulfillment.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "23fc2559-fc37-46ce-a963-cc5fdb88af0c",
    "entityType": "DiningOption"
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec"
          },
          "quantity": 1,
          "modifiers": []
        }
      ],
      "payments": [
        {
          "paidDate": "2022-03-01T10:00:00.000+0000",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
          "type": "OTHER",
          "otherPayment": {
            "guid": "b9ba25d1-519a-4ea8-ba05-ed1d952b28bf"
          },
          "amount": 8.63,
          "tipAmount": 1.02
        }
      ]
    }
  ],
  "promisedDate": "2022-03-05T16:00:00.000+0000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "openedDate": "2022-03-05T16:00:00.000+0000"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html#orderPaidDate) | If you submit a payment with the order, the `paidDate` for the payment should be the timestamp when the payment is placed. |
| [2](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html#co-d1e23837FED323-B0BC-404F-B11C-A782AC1FBA48) | The `promisedDate` value specifies the date and time when the order will be fulfilled. |
| [3](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html#apiFutureOrderExampleOpenedDate-co) | The `openedDate` value specifies the business date of the order. If you do not include an `openedDate` value, the business date of the order is set to the restaurant business day that corresponds to the current date and time. This `openedDate` value matches the `promisedDate` value. |


---

# Authenticating outbound API requests - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAuthenticatingRequestsFromToastApiClients.html

### Authenticating outbound API requests

Your Toast outbound API integration can verify the authenticity of the
REST API requests you receive from the Toast platform. When you implement
[a Toast
outbound API integration](https://doc.toasttab.com/doc/devguide/apiUsingToastOutboundApis.html), the Toast platform sends REST requests to
your server. To maintain security of your integration, you must verify that
each request was sent from the Toast platform client.

#### About the outbound API authentication process

When you implement an integration with a Toast outbound API, you
supply a static API key string that the Toast API client will include in
the HTTP `Authorization` header field with each request. You
can define any static API key that meets the authentication requirements
of your integration. You provide the key string to the Toast integrations
support team when you configure your integration. For more information
about static API keys, see [Using static API keys](https://doc.toasttab.com/doc/devguide/apiAuthenticatingRequestsFromToastApiClients.html#apiUsingStaticApiKeys).

The following diagram shows a Toast platform API client presenting
the static API key string that you supply in the HTTP
`Authorization` header field for an API request.

![A diagram showing an organization's Toast outbound API implementation providing a static API key to Toast. The Toast platform includes that static API key in the authentication header parameter for each API request.](https://doc.toasttab.com/doc/media/toast-outbound-api-authentication.png)

#### HTTP Authorization header field example

The following example shows the HTTP `Authorization`
header field for a Toast platform API client request.

**HTTP `Authorization` header field for a Toast platform
API client request**

```
Authorization: c75a2aa085d30a90308841d388fc7828f1a28e29bdd2c82150a30cf356d4d87f![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAuthenticatingRequestsFromToastApiClients.html#co-d1e46506D541D-DE75-41D1-8E80-09960B9A3502) | The string value of the HTTP header `Authorization` field is the static API key that you supply to Toast when you implement your integration. For more information, see [Using static API keys](https://doc.toasttab.com/doc/devguide/apiAuthenticatingRequestsFromToastApiClients.html#apiUsingStaticApiKeys). |

#### Using static API keys

You provide the static API key that a Toast platform API client
includes in the HTTP header `Authorization` field. You can
choose the static API key content to meet the requirements of the
authentication implementation in your Toast API integration.

The maximum length of a static API key is 255 characters.

When you have the static API key string that your integration will
use to authenticate Toast platform API client requests, you contact the
Toast integrations team to securely transfer the key string.

Your authentication implementation should use different static API
keys for the product and sandbox environments of the Toast platform. Using
different static API keys ensures that requests meant for integration
testing in the sandbox environment cannot affect the live restaurant
operations in the production environment. For more information, see [Environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html).

#### Rotating static API keys

To revoke and replace the static API key that a Toast platform API
client includes in the HTTP header `Authorization` field you
contact the Toast integrations team to coordinate a key rotation for your
integration. The Toast integrations team can replace an existing static
API key for your integration with a new static API key. Your integration
must perform a coordinated replacement of the authentication configuration
that you use to evaluate the authenticity of Toast API requests.

|  |
| --- |
| Note |
| If your integration and the Toast API client configuration are not coordinated when you rotate static API keys, API requests for your integration will fail. Make sure you coordinate static API key rotation with the Toast integrations team. |


---

# Gift card integration authentication - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationAuthentication.html

### Gift card integration authentication

|  |
| --- |
| Important |
| The authentication method described in this section is deprecated. The preferred authentication method for the Toast gift card API is static API key authentication. For information about using static API authentication, see [Authenticating outbound API requests](https://doc.toasttab.com/doc/devguide/apiAuthenticatingRequestsFromToastApiClients.html). |

You can verify that gift card transaction requests are from the
Toast platform by validating the JSON Web Token (JWT) in the header of
every request. Each gift card transaction request includes a JWT in the
`Authorization` header field.

You can validate the JWT for a request with a public key that you
get from the Toast API user management service.

You use the public key that matches the Toast environment that you
are integrating with. For information about Toast API environments, see
[Environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html).

* For the production environment (real transactions) send a
  `GET` request to the following endpoint.

  ```
  https://[toast-production-api-hostname]/usermgmt/v1/oauth/token_key
  ```
* For the sandbox environment (testing transactions) send a
  `GET` request to the following endpoint.

  ```
  https://[toast-sandbox-api-hostname]/usermgmt/v1/oauth/token_key
  ```

|  |
| --- |
| Note |
| The Toast integrations team supplies the host names for Toast API environments during your integration process. |

#### Public keys

A Toast public key for partner API authentication is an X.509
Public Key encoded in DER in PEM format.

The following example shows the public key string in the JSON
response from the `usermgmt/v1/oauth/token_key` endpoint. The
JSON value named `value` contains the public key string. The
key string in this example is not functional.

**Example public key for partner API authentication**

```
{![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
   "alg":"SHA256withRSA",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
   "value":"-----BEGIN PUBLIC KEY-----\nnub\nvwIDAhqhkiG9w0BAQEJ9tKko/3jXqdzI/NO4n![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
sAt0WZjpyovan2xPIkCv2z\nuaBBVUrOiJ6JeoJ9tKko/3jXqdzI/NO4nsLW5wq5UrPXsvbdXLZzMhu3b3
sNmFJ9tKko/3jX5AEBaf5vXZCOfBVFnWnhLX61/KkI2dxwhS7fkxnjQ8wlfrh4tp3fKjDkI\nMgxTk1teh
fWY0O3mKyKtnYvqvDSRvsZ03URzyEPddVYDYZjpyovan2xPypKRvBlxz\nxhM74p8dOhEp6zAh4pENVNyp
o+xVj/7Ko9Ie3fKjDkI\nMgxTk1tehCcNP1G/8UK\nE6oPta6r3e1Fi77K\nE6oPta66HP5KCur3mf3jQ6
Qc99xVQ8wlfrh4tp56yjRnub\nvwIDAQAB\n-----END PUBLIC KEY-----\n"
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationAuthentication.html#co-d1e581CC3353FE-F616-4AA1-97F1-00D3437AB330) | The `/oauth/token_key` endpoint returns a JSON object that contains multiple values. One of the values provides the public key string. |
| [2](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationAuthentication.html#co-d1e583CC3353FE-F616-4AA1-97F1-00D3437AB330) | The `alg` value indicates the encryption algorithm used for the public key. |
| [3](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationAuthentication.html#co-d1e585CC3353FE-F616-4AA1-97F1-00D3437AB330) | The `value` value includes the public key string. You can use the string supplied in the `value` value to validate the authentication tokens in a Toast platform gift card transaction request. |

#### Using the public key to validate JWTs

You can validate JSON Web Tokens (JWTs) using several libraries
for common programming languages. For more information about working
with JWTs, see <https://jwt.io/>. The JWT web site
also includes a tool that you can use to verify a token manually.

#### Refreshing the public key

Typically, the Toast integrations team does not change the key
pair used to sign JWTs. You can cache the public key that you get from
the Toast API user management service. You do not need to get a new copy
of the public key every time you verify an incoming request.

To maintain security, the Toast integrations team may replace the
key pair at any time. When the key pair changes, you must get a new
public key from the user management service.

To make your integration more flexible when the Toast integrations
team replaces the key pair, get and cache a new copy of the public key
each time you start your service. When the Toast integrations team
replaces the key pair, you can stop and restart your service to refresh
the public key.


---

# Example gift card transaction request - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html

### Example gift card transaction request

The following example shows an example gift card integration API
request.

**Gift card integration API transaction request**

```
> Content-Type: application/json![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
> Toast-Transaction-Type: GIFTCARD_REDEEM![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
> Toast-Restaurant-External-ID: 76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
> Toast-Transaction-GUID: 63fdc064-c97e-431f-9cb2-0699c6488237![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
> Authorization: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxM
   jM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.Sf
   lKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
{![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
  "redeemTransactionInformation":{![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
    "redeemedValue":11.80,![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
    "giftCardIdentifier":"231952736",![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
    "checkIdentifier":"41531b0c-ad11-4c11-9ad6-29ba76925a13",
    "isCashOut":false
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7809F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | This header parameter indicates the MIME type of the message body data. |
| [2](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7829F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | This header parameter indicates the type of gift card transaction. For more information, see [Gift card transaction types](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationTransactionTypes). |
| [3](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7849F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | This header parameter supplies the identifier of the restaurant that processed the gift card transaction. The identifier is defined by the Toast platform. You receive the identifiers for Toast platform restaurants from the Toast integrations team when you implement your gift card integration. |
| [4](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7869F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | This header parameter supplies an identifier for the specific transaction request. You must keep this identifier in your integration implementation. The Toast platform may refer to the transaction identifier in a future `GIFTCARD_REVERSE` transaction. For more information, see [Gift card transaction types](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationTransactionTypes). |
| [5](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7889F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | This header parameter supplies the JWT authentication token that you can use to verify that the request is from the Toast platform and that the request has not been altered. For more information, see [Gift card integration authentication](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationAuthentication.html). |
| [6](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7919F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | The message body of a gift card transaction request includes a JSON `GiftCardTransaction` object. For information about the values in a `GiftCardTransaction` object, see the [gift card integration API reference documentation](https://doc.toasttab.com/openapi/giftcards/overview/). |
| [7](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7939F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | Because this gift card transaction type is `GIFTCARD_REDEEM`, the `GiftCardTransaction` object includes a `redeemTransactionInformation` value. |
| [8](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7959F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | Indicates the amount of money that the restaurant guest redeemed from the the gift card balance. For example, the restaurant guest might have used the gift card as a form of payment for a restaurant purchase. |
| [9](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e7979F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | Indicates the identifier of the specific gift card account. |

  

The following example shows an example gift card integration API
response.

**Gift card integration API transaction response**

```
{![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "transactionStatus":"ACCEPT",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "redeemResponse":{![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "currentBalance":60.29,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "redeemedValue":1![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e8119F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | Your gift card integration API implementation returns a JSON `GiftCardTransactionResponse` object in the HTTP response to a gift card transaction request from the Toast platform. For information about the values in a `GiftCardTransactionResponse` object, see the [gift card integration API reference documentation](https://doc.toasttab.com/openapi/giftcards/overview/). |
| [2](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e8139F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | Indicates the result of your attempt to process the transaction. For more information about the `transactionStatus` value, see [Response status types](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationResponseTypes). |
| [3](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e8159F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | Because this gift card transaction type is `GIFTCARD_REDEEM`, the `GiftCardTransaction`Response object includes a `redeemResponse` value. |
| [4](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e8179F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | Indicates the amount of money available on the gift card after the transaction. |
| [5](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationExampleTransactionRequests.html#co-d1e8199F9FF995-7EA4-424B-B7ED-3C6FDAD1DB2F) | Indicates the amount of money that the transaction deducted from the gift card balance. |


---

# Gift card integration overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationOverview.html

### Gift card integration overview

This section explains how to implement an integration with the Toast
platform that allows the Toast POS to process gift card transactions using
your gift card provider service.

You can integrate your gift card provider service with the Toast
platform by implementing an API that can handle REST HTTP requests that
the Toast platform sends to it. The Toast gift card API specification
describes the required functionality of a REST web service that will
handle Toast POS gift card transactions. For more information, see
reference documentation in the [gift
card integration API reference documentation](https://doc.toasttab.com/openapi/giftcards/overview/).

|  |
| --- |
| Note |
| Toast Gift Card balances cannot be retrieved using the Toast APIs. |

When a restaurant employee processes a gift card transaction, the
Toast platform sends one or more REST HTTP requests to your integration
API implementation. The requests include information about the
transaction. Your integration API implementation attempts to process the
transaction and returns information about the result of that attempt in
the HTTP response to the request. The Toast platform continues processing
the gift card transaction based on the information your implementation
sends.

The following diagram shows the relationship between the Toast
platform and a gift card provider when processing gift card
transactions.

![A diagram showing the REST HTTP request and response interactions between the Toast platform and a gift card provider.](https://doc.toasttab.com/doc/media/gift-card-integration-overview.png)

|  |
| --- |
| Important |
| Your gift card API implementation must use HTTPS for all REST requests and responses. |

|  |
| --- |
| Note |
| Toast Online Ordering functionality supports gift card integrations only if your integration supports verification codes (PINs). For more information, see [Verification Codes (PINs)](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationVerificationsCodes). |


---

# Reference gift card API implementation - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationReferenceApiImplementation.html

### Reference gift card API implementation

You can use an example implementation of the Toast gift card
integration API to help plan your own implementation of the API. The
example implementation is available from the following public
GitHubâ¢ repository: <https://github.com/toasttab/GC-API-example-implementation>.


---

# Gift card integration workflow - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html

### Gift card integration workflow

The Toast platform sends requests to your gift card API
implementation when it processes gift card transactions at restaurants
that use your gift card provider service. Your implementation of the gift
card API must return information about the results of your attempt to
process the transaction.

The following sections provide more information about the gift card
transaction workflow in a Toast platform gift card integration.

* [Single endpoint](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationSingleEndpoint)
* [HTTP required for REST requests and responses](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationHttpsRequired)
* [Gift card transaction types](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationTransactionTypes)
* [Verification Codes (PINs)](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationVerificationsCodes)
* [Response status types](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationResponseTypes)
* [Multiple requests for a gift card transaction](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationMultipleRequestsForTransaction)
* [Cash out transactions](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardApiCashOutRedeem)

#### Single endpoint

The Toast gift card API specification includes a single endpoint.
The Toast platform sends information about all gift card transaction
types to that endpoint. The information in the HTTP request indicates
the type of transaction and provides details about it.

You can name the single endpoint of your gift card integration API
anything that you want. For example, the REST path in the URL for your
API might be `https://my-host-name/v1/myTransactions`. You
define every part of that URL. During the integration process, the Toast
integrations team will configure the REST path to your endpoint in the
Toast platform.

The Toast platform indicates the type of each transaction request
by including a transaction type identifier in the
`Toast-Transaction-Type` HTTP header parameter. For
information about gift card transaction type identifiers see [Gift card transaction types](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationTransactionTypes).

The Toast platform includes a set of values that provide
information about the gift card transaction in the JSON
`GiftCardTransaction` object in the message body parameter
for each request.

Your single endpoint must return a JSON
`GiftCardTransactionResponse` object in the message body of
the HTTP response to each request. The
`GiftCardTransactionResponse` object indicates the success or
failure of transaction processing and provides information about the
state of the gift card after the transaction is processed. The
`transactionStatus` value of the
`GiftCardTransactionResponse` object includes a status
identifier. For information about `transactionStatus` values,
see [Response status types](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationResponseTypes).

|  |
| --- |
| Important |
| Your gift card API implementation must use HTTPS for all REST requests and responses. |

#### HTTP required for REST requests and responses

Your gift card API implementation must use HTTPS for all REST
requests and responses. HTTPS uses Transport Layer Security (TLS) to
encrypt and secure communications between the API client and
server.

#### Gift card transaction types

The following table describes the transaction types that the Toast
platform sends to your gift card provider service. The Toast platform
includes the transaction type identifier in the
`Toast-Transaction-Type` header parameter for each gift card
transaction API request.

| Transaction type | Description |
| --- | --- |
| `GIFTCARD_ACTIVATE` | Activates a new gift card.  For example, the Toast platform sends a `GIFTCARD_ACTIVATE` request when it handles a gift card sale transaction.  OptionalÂ  Your gift card implementation can either handle requests with this transaction type or may return a `ERROR_TOAST_TRANSACTION_TYPE_NOT_SUPPORTED` response status. |
| `GIFTCARD_ADD_VALUE` | Increases the amount of money available on a gift card.  For example, the Toast platform sends a GIFTCARD\_ADD\_VALUE request when it handles a gift card sale (initial balance) or when a restaurant guest purchases additional value to add to a gift card balance.  OptionalÂ  Your gift card implementation can either handle requests with this transaction type or may return a `ERROR_TOAST_TRANSACTION_TYPE_NOT_SUPPORTED` response status. |
| `GIFTCARD_GET_BALANCE` | Requests the amount of money that is available for purchases on a gift card.  For example, the Toast platform sends a `GIFTCARD_GET_BALANCE` request when a restaurant guest asks a restaurant employee to check the amount of money that is available.  |  | | --- | | Note | | In some situations, the Toast platform might send a `GIFTCARD_GET_BALANCE` request to verify that a gift card is not active or that it has a zero balance. For example, the Toast platform might send a `GIFTCARD_GET_BALANCE` request to verify that a card is not already active during a gift card sale. |  RequiredÂ  Your gift card implementation must handle requests with this transaction type. |
| `GIFTCARD_REDEEM` | Decreases the amount of money available on a gift card.  For example, the Toast platform sends a `GIFTCARD_REDEEM` request when a restaurant guest makes a purchase using a gift card as a form of payment.  If the redeem request is for a cash-out transaction, the `isCashOut` value of the `TransactionInformationRedeem` object is `true`. In a cash-out gift card redeem transaction, the guest receives cash instead of using gift card funds for a purchase. For more information about cash-out redeem transactions, see [Cash out transactions](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardApiCashOutRedeem).  OptionalÂ  Your gift card implementation can either handle requests with this transaction type or may return a `ERROR_TOAST_TRANSACTION_TYPE_NOT_SUPPORTED` response status. |
| `GIFTCARD_REVERSE` | Undoes a previous gift card transaction.  For example, the Toast platform sends a `GIFTCARD_REVERSE` request when a restaurant employee voids a purchase made with a gift card.  RequiredÂ  Your gift card implementation must handle requests with this transaction type. |

#### Verification Codes (PINs)

All transaction types can support verification codes (also known
as PINs). You may choose to support verification codes (PINs) for your
Toast gift card API implementation. If youâd like to add this to your
existing Toast gift card API implementation, reach out to the Developer
Relations team to inquire about adding Verification Code (PIN) support
to your Toast API implementation scope.

If a user enters a verification code, the Toast platform sends it
as part of any of the transactions listed below. The Toast platform also
indicates if the card number is entered via swipe, manual entry (keyed),
or scan (1D or 2D barcode). The provider must validate the verification
code and use the corresponding response type. If a verification code is
not entered but is required, the provider can choose to respond with
âERROR\_VERIFICATION\_REQUIREDâ to indicate the user must resubmit using a
verification code (PIN).

#### Response status types

The following table describes the response status types that your
gift card provider service can send to the Toast platform. Your gift
card integration API implementation returns a transaction status
identifier in the `transactionStatus` value of the
GiftCardTransactionResponse object.

| Transaction status | Description |
| --- | --- |
| `ACCEPT` | The transaction was handled successfully. |
| `ERROR_TOAST_TRANSACTION_TYPE_NOT_SUPPORTED` | Your implementation does not handle the optional transaction type that was supplied in the request.  Return this response status type when the request transaction type *is one of the types defined* by the gift card integration API specification but you have decided not to support it. |
| `ERROR_INVALID_TOAST_TRANSACTION_TYPE` | The transaction type identifier supplied in the `Toast-Transaction-Type` header parameter of the request is not one of the recognized transaction types.  Return this response status type when the request transaction type *is not one of the types defined* by the gift card integration API specification. |
| `ERROR_CARD_ALREADY_ACTIVATED` | The transaction attempted to activate a gift card that is already active. |
| `ERROR_CARD_NOT_ACTIVATED` | The gift card is not active.  |  | | --- | | Note | | In some situations, the Toast platform might make a transaction request to verify that a gift card is not already active. In this situation, the Toast platform expects to receive a `ERROR_CARD_NOT_ACTIVATED` transaction status. For more information, see [Multiple requests for a gift card transaction](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationWorkflow.html#apiGiftCardIntegrationMultipleRequestsForTransaction). | |
| `ERROR_CARD_INVALID` | The gift card identifier is not in the set of identifiers that correspond to the current restaurant.  For example, if a gift card identifier is entered incorrectly or if the gift card identifier corresponds to a different restaurant location, your implementation returns this status. |
| `ERROR_INVALID_INPUT_PROPERTIES` | The values that the Toast platform supplied in the `GiftCardTransaction` object in the request message body do not match the requirements of the transaction type. |
| `ERROR_TRANSACTION_DOES_NOT_EXIST` | The transaction specified by a `GIFTCARD_REVERSE` type request does not exist. |
| `ERROR_INVALID_TOKEN` | The authentication token supplied in the `Authorization` header parameter is invalid or cannot be validated. For information about request authentication, see [Gift card integration authentication](https://doc.toasttab.com/doc/devguide/apiGiftCardIntegrationAuthentication.html). |
| `ERROR_TRANSACTION_CANNOT_BE_REVERSED` | The transaction specified by a `GIFTCARD_REVERSE` type request cannot be reversed. The following transaction types cannot be reversed:  * `GIFTCARD_GET_BALANCE` * `GIFTCARD_REVERSE` * Transactions that have already been reversed |
| `ERROR_INVALID_RESTAURANT` | The restaurant identifier included in the `Toast-Restaurant-External-ID` header parameter of the request is not recognized by the gift card provider integration implementation.  You receive the identifiers for Toast platform restaurants from the Toast integrations team when you implement your gift card integration. |
| `ERROR_VERIFICATION_FAILED` | The verification code (PIN) data specified by the JSON body is invalid. |
| `ERROR_VERIFICATION_REQUIRED` | Verification code (PIN) data is necessary to complete the transaction but the data is missing or `null` in the JSON body. |
| `ERROR_VERIFICATION_NOT_SUPPORTED` | Verification code (PIN) data is provided by the JSON body but the provider doesn't support verification code. |

#### Multiple requests for a gift card transaction

The Toast platform may send multiple requests to your gift card
integration API implementation when it processes a gift card
transaction.

For example, when a restaurant employee sells a new gift card to a
guest:

* First, the Toast platform sends a balance inquiry request to
  verify that the new gift card is not already active and that it does
  not have an existing balance
* Then the Toast platform sends an activate request to add value
  and make the card usable for transactions.

The following procedures describe the sequence of integration API
requests that the Toast platform sends to a gift card integration API
implementation to handle common gift card transaction types.

|  |
| --- |
| Note |
| The sequence of requests is described here to show the way that the Toast platform combines request types for a transaction. The specific sequence of requests is determined by the internal implementation of the Toast platform software. *Make sure that your integration API implementation does not rely on any specific sequence of requests. The specific sequence of requests will change without notice.* |

**Selling a new gift card, successful result**

1. Toast platform sends a `GIFTCARD_GET_BALANCE`
   request for the new gift card.
2. Gift card provider sends a
   `ERROR_CARD_NOT_ACTIVATED` transaction status in the
   `GiftCardTransactionResponse`.
3. Toast platform sends a `GIFTCARD_ACTIVATE` request
   for the new gift card.
4. Gift card provider sends an `ACCEPT` transaction
   status in the `GiftCardTransactionResponse`.

**Selling a new gift card, failure**

1. Toast platform sends a `GIFTCARD_GET_BALANCE`
   request for the new gift card.
2. Gift card provider sends an `ACCEPT` transaction
   status and information about the card balance in the
   `GiftCardTransactionResponse`.
3. Toast platform reports that the gift card is already active to
   restaurant employee and takes no further action.

**Adding value to a gift card, successful result**

1. Toast platform sends a `GIFTCARD_GET_BALANCE`
   request for the new gift card.
2. Gift card provider sends an `ACCEPT` transaction
   status and information about the card balance in the
   `GiftCardTransactionResponse`.
3. Toast platform sends a `GIFTCARD_ADD_VALUE` request
   for the new gift card.
4. Gift card provider sends an `ACCEPT` transaction
   status in the `GiftCardTransactionResponse`.

**Adding value to a gift card, failure**

1. Toast platform sends a `GIFTCARD_GET_BALANCE`
   request for the new gift card.
2. Gift card provider sends an
   `ERROR_CARD_NOT_ACTIVATED` transaction status in the
   `GiftCardTransactionResponse`.
3. Toast platform reports that the gift card is not active to
   restaurant employee and takes no further action.

#### Cash out transactions

Restaurant locations that use the Toast gift card provider
integration can give guests cash as a gift card redeem transaction when
applicable regulations require cash-out transactions. For example, some
gift-card regulations require that guests can withdraw all remaining
funds available on a gift card when the balance is below a specific
threshold. A cash-out redeem transaction deducts funds from the gift
card account and the guest receives the funds directly in cash. A guest
must cash out the entire available balance of a gift card account. A
cash out transaction leaves the gift card account with a 0.00 currency
balance and you should update the card's balance to zero in your system.
See [this
article](https://central.toasttab.com/s/article/Cashing-Out-the-Remaining-Balance-of-a-Gift-Card) for more information about cash out transactions.

If a gift card redemption is a cash out, the
`isCashOut` value on the transaction will be
`true`. Otherwise, `isCashOut` will be
`false`.

Some restaurant locations are subject to regulations that require
that guests be allowed to redeem gift card balances in cash.

Restaurant locations can enable or disable cash-out transactions
for the gift card integration. Restaurant locations can set a maximum
currency amount for cash-out transactions. If a gift card balance is
greater than the cash-out transaction threshold, the Toast platform does
not allow the cash-out redeem transaction.


---

# Reward offers processing - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyDiscountProcessing.html

### Reward offers processing

Loyalty reward offer redemptions are handled entirely by your
organization. Your loyalty program is responsible for accepting or
rejecting the redemptions as requested by the Toast platform and the POS
will honor them as reported from your loyalty program integration. The
Toast POS applies reward redemptions as discounts.

* When the Toast POS sends an inquire request to your loyalty
  program integration, it includes all of the discounts that are
  currently applied to a check. Your loyalty program integration can use
  these to determine whether those discounts affect the applicability of
  your loyalty reward discount.
* The Toast platform will honor the response from your loyalty
  program that indicates whether or not to apply a loyalty redemption.
  Any validation done by the Toast platform is minimal (such as ensuring
  a check or item price is not brought below zero).
* `Inquire` calls are made whenever the list of offers
  is loaded (if the contents of the check have changed since the last
  inquire call) to get the list of offers currently applicable to the
  check. The restaurant employee can subsequently select which offer to
  redeem by selecting from the list.
* `Inquire` is also called at the end of the POS
  workflow during payment. At this point, all redemptions attached to
  the check have a final opportunity to be verified. Your loyalty
  program integration can either *accept* or
  *reject* each redemption. Prior to the final
  inquire call, the POS will verify Toast domain configured discounts
  and Promotion service integration discounts (in that order).

#### Check-level reward offers

There is no additional validation done by the POS for check-level
rewards. Check-level rewards are entirely validated by your loyalty
program. If applied, the POS will recalculate the check total.

#### Item-level reward offers

Minimal validation occurs in the POS when an item-level reward
offer is selected. The offer must include a selection GUID to which the
reward can apply. If the reward is applied by the restaurant employee,
the POS will attach the reward to the item selection with the matching
GUID.

The array of rewards returned to the POS is in a
`ResponseCheck` object. Each item-level offer contains a
`selectionIdentifier` value. This is a Toast POS-defined GUID
and is the way your loyalty program integration can specify which item
an offer may apply to.

1. Your loyalty program integration must retrieve menu
   information from Toast. The recommended approach is to use the menus
   API to retrieve a list of all menu items. See [Menus API overview](https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html).
2. Specific top level items which offers apply to is optionally
   returned in the loyalty API response to an inquire request:

   A `ResponseCheck` object contains an
   `offers` value which contains an array of
   `Offer` objects. If an offer is of
   `selectionType` `ITEM` and a
   `selectionIdentifier` is specified, then that is the menu
   item for which the offer can be applied. All offers are expected to
   have the `applicable` boolean value set to
   `true` if the offer can be applied to the check submitted
   with the request, false otherwise

   The `Check` contains a list of
   `Selection` objects representing items on the check. Each
   `Selection` has a reference to the corresponding menu
   item. Menu items have GUIDs assigned to it. These are the IDs used
   to match against item level offers specified in the
   `selectionIdentifier` returned from an inquiry
   request.

#### Discount limitations

You can only apply a single item-level discount to a menu item
selection in a check. If a restaurant employee applies a discount
configured in the Toast platform to a menu item selection, you cannot
apply an additional item-level discount based on loyalty program
rewards.

There is no limit to the number of check-levels that you can apply
to an entire check. You can apply an item-level discount to an item and
check-level discounts at the same time.

The Toast platform does not apply discounts directly to modifiers.
You can apply item-level discounts to menu item selections that include
modifiers. The discount applies to the total price of the item, which
includes the modifier price.

The `MULTI_ITEM` discount type applies to multiple
different items or to two instances of the same item in separate
`Selection` objects within a `Check`. For the
discount to work, each item must be in an individual
`Selection` object with a `quantity` of 1. A
single `Selection` object with a `quantity` of 2
or more of the same item will not qualify for a `MULTI_ITEM`
discount.

For more information about Toast platform discount functionality,
see [Discounts overview](https://doc.toasttab.com/doc/platformguide/platformDiscountsOverview.html).


---

# Error handling - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyErrorHandling.html

### Error handling

Your Toast POS loyalty integration interface implementation must
return the following HTTPS responses to the requests that it receives from
the Toast platform.

200 means OK and has predefined success status in the
response

* `ACCEPT` - The loyalty service provider processed the
  transaction successfully.

400 has predefined errors in the response status

* `ERROR_INVALID_TOAST_TRANSACTION_TYPE` - The
  requested `Toast-Transaction-Type` is not valid.
* `ERROR_ACCOUNT_INVALID` - The loyalty account is not
  recognized or is not valid at the current restaurant.
* `ERROR_INVALID_INPUT_PROPERTIES` - The specified JSON
  properties in the request body are not valid.
* `ERROR_TRANSACTION_DOES_NOT_EXIST` - The transaction
  that is being requested to be reversed does not exist. Only occurs on
  a `LOYALTY_REVERSE` transaction.
* `ERROR_INVALID_TOKEN` - The token supplied in the
  `Authorization` header field is invalid or cannot be
  validated.
* `ERROR_TRANSACTION_CANNOT_BE_REVERSED` - The
  specified transaction cannot be reversed. Only
  `LOYALTY_REDEEM` and `LOYALTY_ACCRUE`
  transactions can be reversed.
* `ERROR_INVALID_RESTAURANT` - The restaurant specified
  by the `Toast-Restaurant-External-ID` is invalid.
* `ERROR` - The request cannot be processed for a
  reason that is not described by any of the other error states. You can
  include a `message` value in the
  `LoyaltyTransactionResponse` object to display a custom
  error message string to the restaurant employee. For more information,
  see [Custom error messages](https://doc.toasttab.com/doc/devguide/apiLoyaltyErrorHandling.html#apiLoyaltyIntegrationCustomErrorMessages).

500 unexpected error

#### Custom error messages

To include a custom error
message, you add a `message` value to the
`LoyaltyTransactionResponse` object that you return to the
Toast platform.

|  |
| --- |
| Note |
| The error message you submit does not appear on the Toast POS. Submitting a custom message allows your team and the Toast team to understand error trends in logs, but servers and guests will not see this message. |

**LoyaltyTransactionResponse object that includes a custom error
message**

```
{
  "transactionStatus": "ERROR",
  "message": "This is my helpful message about the error condition."
}
```


---

# Loyalty integration authentication - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyIntegrationAuthentication.html

### Loyalty integration authentication

|  |
| --- |
| Important |
| The authentication method described in this section is deprecated. The preferred authentication method for the Toast loyalty API is static API key authentication. For information about using static API authentication, see [Authenticating outbound API requests](https://doc.toasttab.com/doc/devguide/apiAuthenticatingRequestsFromToastApiClients.html). |

You can verify that loyalty transaction requests are from the Toast
platform by validating the JSON Web Token (JWT) in the header of every
request. Each loyalty transaction request includes a JWT in the
`Authorization` header field.

You can validate the JWT for a request with a public key that you
get from the Toast API user management service.

You use the public key that matches the Toast environment that you
are integrating with. For information about Toast API environments, see
[Environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html).

* For the production environment (real transactions) send a
  `GET` request to the following endpoint.

  ```
  https://[toast-production-api-hostname]/usermgmt/v1/oauth/token_key
  ```
* For the sandbox environment (testing transactions) send a
  `GET` request to the following endpoint.

  ```
  https://[toast-sandbox-api-hostname]/usermgmt/v1/oauth/token_key
  ```

|  |
| --- |
| Note |
| The Toast integrations team supplies the host names for Toast API environments during your integration process. |

#### Public keys

A Toast public key for partner API authentication is an X.509
Public Key encoded in DER in PEM format.

The following example shows the public key string in the JSON
response from the `/usermgmt/v1/oauth/token_key` endpoint. The
JSON value named `value` contains the public key string. The
key string in this example is not functional.

**Example Public Key for Partner API Authentication**

```
{![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
   "alg":"SHA256withRSA",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
   "value":"-----BEGIN PUBLIC KEY-----\nnub\nvwIDAhqhkiG9w0BAQEJ9tKko/3jXqdzI/NO4n![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
sAt0WZjpyovan2xPIkCv2z\nuaBBVUrOiJ6JeoJ9tKko/3jXqdzI/NO4nsLW5wq5UrPXsvbdXLZzMhu3b3
sNmFJ9tKko/3jX5AEBaf5vXZCOfBVFnWnhLX61/KkI2dxwhS7fkxnjQ8wlfrh4tp3fKjDkI\nMgxTk1teh
fWY0O3mKyKtnYvqvDSRvsZ03URzyEPddVYDYZjpyovan2xPypKRvBlxz\nxhM74p8dOhEp6zAh4pENVNyp
o+xVj/7Ko9Ie3fKjDkI\nMgxTk1tehCcNP1G/8UK\nE6oPta6r3e1Fi77K\nE6oPta66HP5KCur3mf3jQ6
Qc99xVQ8wlfrh4tp56yjRnub\nvwIDAQAB\n-----END PUBLIC KEY-----\n"
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiLoyaltyIntegrationAuthentication.html#co-d1e1145C7E95702-B765-4E3D-A3BE-E61D205ED051) | The `/oauth/token_key` endpoint returns a JSON object that contains multiple values. One of the values provides the public key string. |
| [2](https://doc.toasttab.com/doc/devguide/apiLoyaltyIntegrationAuthentication.html#co-d1e1147C7E95702-B765-4E3D-A3BE-E61D205ED051) | The `alg` value indicates the encryption algorithm used for the public key. |
| [3](https://doc.toasttab.com/doc/devguide/apiLoyaltyIntegrationAuthentication.html#co-d1e1149C7E95702-B765-4E3D-A3BE-E61D205ED051) | The `value` value includes the public key string. You can use the string supplied in the `value` value to validate the authentication tokens in a Toast platform loyalty transaction request. |

#### Using the public key to validate JWTs

You can validate JSON Web Tokens (JWTs) using several libraries
for common programming languages. For more information about working
with JWTs, see <https://jwt.io/>. The JWT web site
also includes a tool that you can use to verify a token manually.

#### Refreshing the public key

Typically, the Toast integrations team does not change the key
pair used to sign JWTs. You can cache the public key that you get from
the Toast API user management service. You do not need to get a new copy
of the public key every time you verify an incoming request.

To maintain security, the Toast integrations team may replace the
key pair at any time. When the key pair changes, you must get a new
public key from the user management service.

To make your integration more flexible when the Toast integrations
team replaces the key pair, get and cache a new copy of the public key
each time you start your service. When the Toast integrations team
replaces the key pair, you can stop and restart your service to refresh
the public key.


---

# Network failure and idempotence - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyIntegrationNetworkFailureAndIdempotence.html

### Network failure and idempotence

The Toast loyalty integration API will retry a request if it does
not receive a response from your API implementation (for example, because
of a network failure). The Toast API does not indicate that the request is
a duplicate of an earlier transaction request. When the Toast loyalty
integration API sends a duplicate request, your API implementation must
return a cached, duplicate response containing the result of the
operation.

Toast's retry logic varies by transaction type:

* If your endpoint returns a failure response to a
  `LOYALTY_REVERSE` request, the Toast loyalty integration
  API will retry the request and will send the same
  `Toast-Transaction-GUID` as the original request.
* If your endpoint returns a failure response to a
  `LOYALTY_ACCRUE` request, the Toast loyalty integration API
  will retry the request and will send a different
  `Toast-Transaction-GUID` than the original request.
* If your endpoint returns a failure response to a
  `LOYALTY_REDEEM` request, the Toast loyalty integration API
  will not retry the request.


---

# Loyalty integration implementation - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyIntegrationOverview.html

### Loyalty integration implementation

You can integrate your loyalty program with the Toast platform by
implementing an API that can handle REST HTTPS requests that the Toast
platform sends to it. The Toast loyalty integration API specification
describes the required functionality of a REST web service that will
handle Toast platform loyalty program transactions. For more information,
see reference documentation in the [loyalty
integration API reference documentation](https://doc.toasttab.com/openapi/loyalty/overview/).

When a Toast platform restaurant employee handles a sale
transaction, the employee can use a Rewards function
to find the guest's loyalty account. Once the Toast platform has the
account for the guest, it exchanges information with your loyalty program
service to present rewards offers and perform other operations. For
information about the web services requests that the Toast platform sends
for loyalty program transactions, see [Transaction types](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html "Transaction types").

In your implementation of the Toast loyalty integration API, you
create a single HTTPS REST endpoint, named in any way you choose. For
example:
`https://myapi.mycompany.com/myendpointname`.
The Toast platform sends requests to that single endpoint (host name and
path) for all loyalty program transactions. You can identify the requests
for specific transaction types using the
*`Toast-Transaction-Type`* HTTP header parameter for
each request that you receive.


---

# Kiosk workflow - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyKioskWorkflow.html

### Kiosk workflow

This section describes the user interface workflow for loyalty
transactions in Toast Kiosk.

1. On the Kiosk device, the guest taps the
   START button.
2. The guest adds items to their order. For more information, see
   the [Toast
   Central article](https://central.toasttab.com/s/article/Kiosk-Placing-Orders-Making-Payments-and-Tipping) about placing an order using Toast Kiosk.

   |  |
   | --- |
   | Note |
   | The guest can add rewards to their order at any point before checkout. |
3. On the bottom right of the screen, the guest taps the
   + Add rewards button.

   ![](https://doc.toasttab.com/doc/media/loyalty-kiosk-workflow-1.png)
4. On the Loyalty + Rewards screen, the
   guest can do one of the following:

   * Tap the SCAN CODE button and scan
     the QR code on a loyalty card or app.
   * Swipe a loyalty card.

   Your integration will receive a `LOYALTY_INQUIRE`
   request.
5. Next to the discount they want to apply, the guest taps
   Redeem. Offers that are not eligible for
   redemption on the current check are disabled and the
   Redeem button is shaded gray.

   |  |
   | --- |
   | Important |
   | Partners are responsible for confirming which offers are eligible for redemption, using the `applicable` boolean in the `Offer` object. |

   ![](https://doc.toasttab.com/doc/media/loyalty-kiosk-workflow-3.png)

   The reward is added to the check as a discount.

   ![](https://doc.toasttab.com/doc/media/loyalty-kiosk-workflow-4.png)
6. The guest continues adding items to their order, or checkout.
   When the payment process starts, your integration will receive a
   `LOYALTY_REDEEM` request. Once the payment is completed,
   your integration will receive a `LOYALTY_ACCRUE`
   request.


---

# Latency requirements - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyLatencyRequirements.html

### Latency requirements

The Toast platform expects a 500ms average response time from your
loyalty program integration. The maximum response time must be 5s seconds,
after which point the Toast platform may close the socket and send another
request.

Response times should be as short as possible because during a
loyalty program transaction, a restaurant employee is at a Toast POS
device and waiting for the loyalty response.


---

# POS workflow - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyPosWorkflow.html

### POS workflow

This section describes the user interface workflow for loyalty
transactions in the Toast POS app.

1. The Rewards button is listed as a menu
   group. When you open the Rewards group, you see
   the Lookup Customer button.

   ![](https://doc.toasttab.com/doc/media/image1.png)
2. The Lookup button opens a dialog box that a
   restaurant employee uses to key in, swipe, scan, or search (by name,
   email, or phone) to find the loyalty program account for a restaurant
   guest.

   ![](https://doc.toasttab.com/doc/media/loyalty_lookup.png)
3. After the employee finds the loyalty program account for the
   guest, a list of loyalty program offers is displayed. If an offer is
   item-level, it specifies the Toast POS identifier for the selection
   (GUID). If that selection is not in the check, it is disabled.

   ![](https://doc.toasttab.com/doc/media/image4.png)
4. After adding items to the check, the restaurant employee returns
   to the rewards screen (using the Look Up Customer
   button). Additional offers may be eligible.

   The restaurant employee selects the Redeem
   button to add an offer to the check. Offers that are not eligible for
   redemption on the current check are disabled and the redeem button
   will not be shown.

   Offers will display on the POS alphabetically by name.

   ![](https://doc.toasttab.com/doc/media/image2.png)
5. The rewards is added to the check as a discount.


---

# Loyalty program integration overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyProgramIntegrationOverview.html

### Loyalty program integration overview

You can use the Toast loyalty integration API to integrate your
loyalty program with the Toast platform.

**Integration overview**

* Toast POS restaurant employees can select a
  Rewards button while processing a guest
  transaction. The Rewards button prompts the
  employee to find the guest's loyalty account. Employees can manually
  enter a guest's loyalty account identifier, swipe a guestâs rewards
  card, scan a QR code, or search for a loyalty account by name, phone
  number, or email.
* After the employee finds a guest's loyalty account, rewards that
  are available are displayed along with a Redeem
  button.
* The employee selects the Redeem button for
  a reward. The reward appears as a negative amount in the check
  price.

  The employee selects Redeem for additional
  rewards if the guest wants to redeem them.
* Rewards can apply either check-level or item-level
  discounts.
* You manage all validation logic and discount totals on behalf of
  your restaurant client.
* Accruing rewards happens asynchronously after the restaurant
  guest pays the check.
* You provide information about loyalty program use to the
  restaurants you work with. For example, information about rewards
  offers used and sales information related to those offers.

|  |
| --- |
| Note |
| Toast loyalty integration API integrations are not supported when a restaurant experiences an Internet outage or other network disruption. When a restaurant does not have a functioning network, it is in *offline mode*. For more information, see [Offline mode overview](https://doc.toasttab.com/doc/platformguide/adminOfflineModeOverview.html). |

|  |
| --- |
| Note |
| Toast Loyalty balances cannot be retrieved using the Toast APIs. |


---

# Transaction types - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html

### Transaction types

This section provides information about the way the Toast loyalty
integration API transactions correspond to Toast platform
transactions.

The Toast platform sends requests to your integration API when
restaurant employees perform loyalty program transactions at a restaurant.
You can identify the transaction type for each request using the
*`Toast-Transaction-Type`* HTTP header parameter. The
information that you receive in the request body depends on the
transaction type. Your integration service must return response data
synchronously. Your response includes information such as the offers
available to a loyalty program member and error codes that are defined by
the integration API specification.

The loyalty integration API supports the following transaction
types:

* `LOYALTY_SEARCH`: Retrieve a list of loyalty accounts
  that match search criteria.
* `LOYALTY_INQUIRE`: Retrieve list of available offers
  for a loyalty member, as well as verify offers that have been applied
  to the check.
* `LOYALTY_REDEEM`: Redeem the offers applied to a
  check.
* `LOYALTY_ACCRUE`: Describe the member's purchases to
  earn credit for future rewards.
* `LOYALTY_REVERSE`: Reverse a previous
  `LOYALTY_REDEEM` or `LOYALTY_ACCRUE`
  transaction.

The following sections provide information about Toast loyalty
integration transaction types.

#### LOYALTY\_SEARCH

The search workflow occurs when a restaurant employee selects the
Rewards button in the Toast POS app and the
restaurant guest has not already provided an identifying card or other
form of loyalty program account identification.

**Search workflow**

1. The restaurant employee selects the
   Rewards button in the Toast POS app and enters
   identifying information (name, email address, or phone number) about
   a restaurant guest.
2. The POS sends a search request to your loyalty program
   integration. The request body includes a
   `TransactionInformationSearch` object holding identifying
   information about the restaurant guest.
3. Your loyalty program integration responds to the search
   request. The request body includes a `ResponseSearch`
   object holding list of loyalty accounts that match the search
   criteria. The HTTP header for the response includes a 200 HTTP
   response code if there is at least one account found or a 404 HTTP
   response code if there are no accounts found.
4. The restaurant employee selects the correct account or cancels
   the workflow.

**Loyalty account search request**

```
{
  "toastTransactionType":"LOYALTY_SEARCH",
  "searchTransactionInformation":{
    "searchCriteria":{
      "firstName":"James",
      "lastName":"Smith",
      "email":null,
      "phone":null
    }
  },
  "checkTransactionInformation":null,
  "reverseTransactionInformation":null
}
```

  

**Successful loyalty account search response (200 HTTP
code)**

```
{
  "searchResponse":{
    "accounts":[
      {
        "identifier":"1",
        "firstName":"james",
        "lastName":"smith",
        "phone":"1111111111",
        "email":"a1@toasttab.com",
        "pointsBalance":40![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
      }
    ]
  },
  "transactionStatus":"ACCEPT"
}
```

  

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html#loyaltySearchPoints) | You may return a `pointsBalance` in your response to a `LOYALTY_SEARCH` request, but this balance will not display on the POS. The points balance only displays on the POS in response to `LOYALTY_INQUIRE` requests. |

**Loyalty account search response with no accounts found (404
HTTP code)**

```
{
  "transactionStatus":"ERROR_ACCOUNT_INVALID"
}
```

#### LOYALTY\_INQUIRE

The inquire workflow occurs when a restaurant employee selects the
Rewards button in the Toast POS app if a restaurant
guest's loyalty account has already been found. The Toast platform might
send multiple inquire transactions while handling a single purchase
interaction for a restaurant guest.

**Inquire workflow**

1. The restaurant employee selects a guest's loyalty account from
   search results or scans, swipes, or keys in the loyalty account
   identifier in the Toast POS app.
2. The POS sends an inquire request to your loyalty program
   integration. The request body includes a
   `TransactionInformationCheck` object holding the
   following information:

   * The loyalty program account information that identifies
     the guest.
   * The restaurant check for the guest. The check might
     include menu item selections or have no selections. The check
     might include loyalty program offers that have already been
     applied (redemptions).
3. Your loyalty program integration responds to the inquire
   request. The request body includes a `ResponseCheck`
   object holding the following information:

   * A list of available offers. You determine which offers to
     include in the list. If an item-level offer is available, you
     must specify the item GUID so the POS knows which item it
     applies to.

     Each offer contains a boolean value indicating whether the
     offer is applicable based on the current check contents. If the
     offer is not applicable, the POS will display the offer with
     formatting to indicate that it is not available (for example,
     light gray text) and without a Redeem
     button.
   * A list of offers that are currently applied to the check
     that *are not valid*. The POS will remove
     those offers from the check.
   * A list of offers that are currently applied to the check
     (redemptions) that *are valid*.
   * A `ResponseCheck` object must include an
     `accountInfo` value.
   * If you include a numeric `pointsBalance` on
     your `ResponseCheck` object, the points balance will
     display on the POS.
4. The restaurant employee might make changes to the check. For
   example:

   * Apply and remove loyalty program offers based on the
     offers that the guest chooses. Each time the employee selects
     the Rewards button, the Toast platform
     sends an inquire request.
   * Add and remove items from the check.
   * Apply and remove discounts that are not associated with
     the loyalty program to and from the check.
5. The restaurant employee finishes entering the guest's order
   and enters the payment screen of the POS.
6. The POS sends another inquire request. This request repeats
   step [Step 2](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html#apiLoyaltyInquireStepInquire "Step 2").
7. Your loyalty program integration responds to the inquire
   request. This response repeats step [Step 3](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html#apiLoyaltyInquireStepRespond "Step 3").
8. The POS processes the payment and completes the guest
   transaction.

When discounts display on the POS, all applicable discounts
display first, followed by all discounts that are not applicable. Within
each type of discount (applicable and non-applicable), discounts are
ordered by name alphabetically.

In all scenarios, response contains a list of accepted and
rejected redemptions, if any.

* If ACCEPTED, redemption is added to check as a
  discount.
* If REJECTED, redemption is removed from the check with an
  error message.

  This is still possible if the check changes. For example, add
  two pizzas to the order and apply a BOGO discount, buy two pizzas
  and get a pizza for free. Then remove one of the pizzas. The next
  inquire will indicate that the offer which was previously applied is
  rejected because the check does not have the items that are needed
  to qualify for the offer.

|  |
| --- |
| Note |
| The Toast platform changes the `tabName` of the check with the `firstName` and `lastName` from the `accountInfo` object that is in the loyalty program integration response to the inquire request. |

**Loyalty inquire request**

```
{
  "toastTransactionType":"LOYALTY_INQUIRE",
  "searchTransactionInformation":null,
  "checkTransactionInformation":{
    "loyaltyIdentifier":"1",
    "check":{
      "guid":"5728df00-d770-4aeb-a4c9-53226a104ac0",
      "entityType":null,
      "externalId":null,
      "displayNumber":"3001",
      "payments":[],
      "appliedDiscounts":[],
      "lastModifiedDevice":null,
      "voidDate":null,
      "paidDate":null,
      "appliedLoyaltyInfo":null,
      "voided":false,
      "paymentStatus":"OPEN",
      "amount":97.42,
      "tabName":null,
      "taxExempt":false,
      "openedDate":"2019-08-24T14:15:22Z",
      "totalAmount":103.51,
      "selections":[
        {
          "guid":"5e4fa4aa-4269-4383-9bbd-774591bbfb3c",
          "entityType":null,
          "externalId":null,
          "deferred":false,
          "preDiscountPrice":87.92,
          "voidReason":null,
          "optionGroup":null,
          "displayName":"Crab Cakes",
          "appliedDiscounts":[],
          "modifiers":[],
          "voidDate":null,
          "fulfillmentStatus":"NEW",
          "salesCategory":null,
          "selectionType":null,
          "price":87.92,
          "voided":false,
          "appliedTaxes":[
            {
              "guid":null,
              "entityType":"AppliedTaxRate",
              "taxRate":{
                "guid":"78aca305-6fbc-42ea-a85b-1671c52367eb",
                "entityType":"TaxRate"
              },
              "rate":0.0625,
              "name":"MA Tax",
              "taxAmount":5.49612811,
              "type":"PERCENT"
            }
          ],
          "itemGroup":{
            "guid":"15694864-225d-4b47-a60b-b9c20986b0af",
            "entityType":"MenuGroup",
            "externalId":"100000000100004070"
          },
          "item":{
            "guid":"5abf524e-31b5-4c1b-a797-7a44d888d071",
            "entityType":"MenuItem",
            "externalId":"100000000100004071"
          },
          "taxInclusion":null,
          "quantity":8.0,
          "unitOfMeasure":null,
          "tax":5.49612811,
          "diningOption":null,
          "voidBusinessDate":null,
          "createdDate":null,
          "preModifier":null,
          "modifiedDate":null
        },
        {
          "guid":"c4c6cd98-d1ba-42f6-87c0-4d8af7486be7",
          "entityType":null,
          "externalId":null,
          "deferred":false,
          "preDiscountPrice":9.5,
          "voidReason":null,
          "optionGroup":null,
          "displayName":"BBQ Pulled Pork Sliders",
          "appliedDiscounts":[],
          "modifiers":[],
          "voidDate":null,
          "fulfillmentStatus":"NEW",
          "salesCategory":null,
          "selectionType":null,
          "price":9.5,
          "voided":false,
          "appliedTaxes":[
            {
              "guid":null,
              "entityType":"AppliedTaxRate",
              "taxRate":{
                "guid":"78aca305-6fbc-42ea-a85b-1671c52367eb",
                "entityType":"TaxRate"
              },
              "rate":0.0625,
              "name":"MA Tax",
              "taxAmount":0.59387189,
              "type":"PERCENT"
            }
          ],
          "itemGroup":{
            "guid":"15694864-225d-4b47-a60b-b9c20986b0af",
            "entityType":"MenuGroup",
            "externalId":"100000000100004070"
          },
          "item":{
            "guid":"a1a96ffc-fb39-422b-93bd-44f15692f707",
            "entityType":"MenuItem",
            "externalId":"100000000100004072"
          },
          "taxInclusion":null,
          "quantity":1.0,
          "unitOfMeasure":null,
          "tax":0.59387189,
          "diningOption":null,
          "voidBusinessDate":null,
          "createdDate":null,
          "preModifier":null,
          "modifiedDate":null
        }
      ],
      "voidBusinessDate":null,
      "deleted":false,
      "createdDevice":null,
      "closedDate":null,
      "deletedDate":null,
      "modifiedDate":null,
      "taxAmount":6.09,
      "appliedServiceCharges":[],
      "customer":null
    },
    "redemptions":[]
  },
  "reverseTransactionInformation":null
}
```

  

**Successful loyalty inquire response**

```
{
  "checkResponse":{
    "accountInfo":{
      "identifier":"1",
      "firstName":"james",
      "lastName":"smith",
      "phone":"1111111111",
      "email":"a1@gmail.com"
    },
    "offers":[
      {
        "identifier":"4",
        "name":"reward 3",
        "applicable":false,
        "selectionType":"ITEM",
        "amount":"10",
        "quantity":2
      }
    ],
    "rejectedRedemptions":[],
    "appliedRedemptions":[],
    "userMessage":"Visit http://www.website.com to check your points balance."
  },
  "transactionStatus":"ACCEPT"
}
```

#### LOYALTY\_REDEEM

The redeem workflow occurs when the Toast platform processes a
guest payment and completes a purchase transaction.

The redeem transaction follows the final inquire transaction
during the payment process of the guest purchase transaction.

**Redeem workflow**

1. The POS sends a redeem request. The request body includes a
   `TransactionInformationCheck` object holding the
   following information:

   * The loyalty program account information that identifies
     the guest.
   * The restaurant check for the guest. The check might
     include menu item selections or have no selections. The check
     might include loyalty program offers that have been
     applied.
2. Your loyalty program integration responds to the redeem
   request. The request body might include a `ResponseCheck`
   object holding the following information:

   * A list of offers that are currently applied to the check
     that *are not valid*. The POS will remove
     those offers from the check.
3. The POS processes the payment and completes the guest
   transaction.

|  |
| --- |
| Note |
| The Toast platform does not process rewards offer redemptions when a restaurant experiences an Internet outage or other network disruption. When a restaurant does not have a functioning network, it is in *offline mode*. For more information, see [Offline mode overview](https://doc.toasttab.com/doc/platformguide/adminOfflineModeOverview.html). |

**Loyalty redeem request**

```
{
  "toastTransactionType":"LOYALTY_REDEEM",
  "searchTransactionInformation":null,
  "checkTransactionInformation":{
    "loyaltyIdentifier":"3",
    "check":{
      "guid":"c79ecf26-1540-486c-9aee-e10ef34e228e",
      "entityType":null,
      "externalId":null,
      "displayNumber":"3002",
      "payments":[],
      "appliedDiscounts":[
        {
          "guid":"5318bf86-505a-43fe-91ad-feb6fe6e0ad2",
          "entityType":"AppliedLoyaltyProviderDiscount",
          "approver":{
            "guid":"915ae2ef-a59a-44dd-bea3-a23977cf5e26",
            "entityType":"RestaurantUser",
            "externalId":"100000000100005200"
          },
          "processingState":"PENDING_APPLIED",
          "loyaltyDetails":{
            "vendor":null,
            "referenceId":"1"
          },
          "name":"reward 1",
          "comboItems":[],
          "discountAmount":5,
          "discount":{
            "guid":"e7b9fc51-bb27-47c5-b3e8-c5c47600380e",
            "entityType":"CustomDiscount"
          },
          "nonTaxDiscountAmount":null,
          "triggers":[],
          "appliedPromoCode":null
        }
      ],
      "lastModifiedDevice":null,
      "voidDate":null,
      "paidDate":null,
      "appliedLoyaltyInfo":{
        "guid":null,
        "entityType":null,
        "accrualText":null,
        "accrualFamilyGuid":null,
        "vendor":null,
        "loyaltyIdentifier":"3"
      },
      "voided":false,
      "paymentStatus":"OPEN",
      "amount":38.96,
      "tabName":"jack williams",
      "taxExempt":false,
      "openedDate":"2019-08-24T14:15:22Z",
      "totalAmount":41.4,
      "selections":[
        {
          "guid":"dfa59529-c3d1-4dff-967d-12e19525f749",
          "entityType":null,
          "externalId":null,
          "deferred":false,
          "preDiscountPrice":43.96,
          "voidReason":null,
          "optionGroup":null,
          "displayName":"Crab Cakes",
          "appliedDiscounts":[],
          "modifiers":[],
          "voidDate":null,
          "fulfillmentStatus":"SENT",
          "salesCategory":null,
          "selectionType":null,
          "price":38.96,
          "voided":false,
          "appliedTaxes":[
            {
              "guid":null,
              "entityType":"AppliedTaxRate",
              "taxRate":{
                "guid":"78aca305-6fbc-42ea-a85b-1671c52367eb",
                "entityType":"TaxRate"
              },
              "rate":0.0625,
              "name":"MA Tax",
              "taxAmount":2.44,
              "type":"PERCENT"
            }
          ],
          "itemGroup":{
            "guid":"15694864-225d-4b47-a60b-b9c20986b0af",
            "entityType":"MenuGroup",
            "externalId":"100000000100004070"
          },
          "item":{
            "guid":"5abf524e-31b5-4c1b-a797-7a44d888d071",
            "entityType":"MenuItem",
            "externalId":"100000000100004071"
          },
          "taxInclusion":null,
          "quantity":4,
          "unitOfMeasure":null,
          "tax":2.44,
          "diningOption":null,
          "voidBusinessDate":null,
          "createdDate":null,
          "preModifier":null,
          "modifiedDate":null
        }
      ],
      "voidBusinessDate":null,
      "deleted":false,
      "createdDevice":null,
      "closedDate":null,
      "deletedDate":null,
      "modifiedDate":null,
      "taxAmount":2.44,
      "appliedServiceCharges":[],
      "customer":null
    },
    "redemptions":[
      {
        "identifier":"1",
        "itemId":null,
        "selectionGuid":null,
        "amount":5,
        "quantity":2
      }
    ]
  },
  "reverseTransactionInformation":null
}
```

  

**Successful loyalty redeem response**

```
{
  "checkResponse":{
    "accountInfo":{
      "identifier":"3",
      "firstName":"jack",
      "lastName":"williams",
      "phone":"1111111113",
      "email":"a3@gmail.com"
    },
    "offers":[
      {
        "identifier":"1",
        "name":"reward 1",
        "applicable":true,
        "selectionType":"CHECK",
        "amount":"5",
        "quantity":4
      },
      {
        "identifier":"3",
        "name":"reward 3",
        "applicable":false,
        "selectionType":"ITEM",
        "amount":"10",
        "itemApplication":[
          {
            "selectionIdentifier":"undefined",
            "amount":"10"
          }
        ],
        "quantity":10
      }
    ],
    "rejectedRedemptions":[],![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "appliedRedemptions":[![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      {
        "identifier":"1",
        "itemId":null,
        "selectionGuid":null,
        "amount":5,
        "quantity":2![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
      }
    ],
    "userMessage":"Visit http://www.website.com to check your points balance"
  },
  "transactionStatus":"ACCEPT"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html#co-d1e567AF91922A-2326-4F0A-85C0-B78A7775B987) | The `rejectedRedemptions` array is empty because your loyalty program service determined that all of the redeemed reward offers in the redeem request are valid. If your loyalty program service determines that a redeemed reward is not valid, you must include a `RejectedRedemption` object in this array. For more information, see [Handling redeemed offers that are not valid](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html#apiLoyaltyIntegrationHandlingRedeemOfferNotValid). |
| [2](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html#co-d1e569AF91922A-2326-4F0A-85C0-B78A7775B987) | The `appliedRedemptions` array includes a `Redemption` object for each rewards offer that your loyalty program service determines is valid for the loyalty account and the current guest check. |
| [3](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html#apiLoyaltyQuantity) | In this example, since the `quantity` of the applied redemption is 2 and the `amount` is 5, the total amount discounted will be 10. |
| [4](https://doc.toasttab.com/doc/devguide/apiLoyaltyTransactionDescriptions.html#co-d1e571AF91922A-2326-4F0A-85C0-B78A7775B987) | Set the `transactionStatus` to `ACCEPT` to indicate that your service has successfully processed the request. The status is `ACCEPT` even when you determine that some redeemed rewards offers are not valid. |

  

##### Handling redeemed offers that are not valid

Each time a restaurant guest chooses to redeem a reward offer,
the Toast platform sends a redeem request. If you determine that the
reward offer is no longer valid:

* Include `ACCEPT` in the
  `transactionStatus` value of the
  `LoyaltyTransactionResponse` object you return to the
  Toast platform.
* Include a `RejectedRedemption` object for each
  reward offer that is no longer valid in the
  `rejectedRedemptions` value of the
  `LoyaltyTransactionResponse` object. Each
  `RejectedRedemption` object is required to include a
  `Redemption` object with the
  `appliedDiscountGuid` value to identify the rejected
  reward.
* The Toast platform updates the check. If the guest chooses
  to redeem another reward offer, the POS sends another redeem
  request.

#### LOYALTY\_ACCRUE

|  |
| --- |
| Note |
| The Toast platform does not send accrue requests when a restaurant experiences an internet outage or other network disruption. A Toast POS device stores payments and sends accrue requests for them when the device is connected to the network again. When a restaurant does not have a functioning network, it is in *offline mode*. For more information, see [Offline mode overview](https://doc.toasttab.com/doc/platformguide/adminOfflineModeOverview.html). |

The accrue workflow occurs as an asynchronous process after a
guest pays for a check. The Toast platform sends a
`LOYALTY_ACCRUE` request regardless of the presence of a
`loyaltyIdentifier`.

**Accrue workflow**

1. The POS sends an accrue request. The request body includes a
   `TransactionInformationCheck` object holding the
   following information:

   * The loyalty program account information that identifies
     the guest.
   * The restaurant check for the guest. The check might
     include menu item selections or have no selections. The check
     might include loyalty program offers that have been
     applied.
2. Your loyalty program integration responds to the accrue
   request. The request body might include a `ResponseCheck`
   object holding the following information:

   * A list of offers that are currently applied to the check
     that *are not valid*. The POS will remove
     those offers from the check.

**Loyalty accrue request**

```
{
  "toastTransactionType":"LOYALTY_ACCRUE",
  "searchTransactionInformation":null,
  "checkTransactionInformation":{
    "loyaltyIdentifier":null,
    "check":{
      "guid":"5728df00-d770-4aeb-a4c9-53226a104ac0",
      "entityType":"Check",
      "externalId":null,
      "displayNumber":"183",
      "payments":[
        {
          "guid":"8b251345-3cda-486e-91c9-cd760c6087c6",
          "entityType":"OrderPayment",
          "externalId":null,
          "originalProcessingFee":null,
          "amount":8.69,
          "tipAmount":0,
          "amountTendered":9,
          "cashDrawer":{
            "guid":"404a8efc-3eda-471a-a11d-f69358d54084",
            "entityType":"CashDrawer",
            "externalId":null
          },
          "cardType":null,
          "lastModifiedDevice":{
            "id":"f51c0a6ce7da722c"
          },
          "refundStatus":"NONE",
          "houseAccount":null,
          "type":"CASH",
          "voidInfo":null,
          "otherPayment":null,
          "mcaRepaymentAmount":null,
          "createdDevice":{
            "id":"f51c0a6ce7da722c"
          },
          "paidDate":"2019-04-08T21:16:46.738+0000",
          "cardEntryMode":null,
          "paymentStatus":"CAPTURED",
          "paidBusinessDate":20190408,
          "last4Digits":null,
          "refund":null
        }
      ],
      "appliedDiscounts":[],
      "lastModifiedDevice":{
        "id":"f51c0a6ce7da722c"
      },
      "voidDate":null,
      "paidDate":"2019-04-08T21:16:46.767+0000",
      "appliedLoyaltyInfo":null,
      "voided":false,
      "paymentStatus":"CLOSED",
      "amount":8,
      "tabName":"A",
      "taxExempt":false,
      "openedDate":"2019-08-24T14:15:22Z",
      "totalAmount":8.69,
      "selections":[
        {
          "guid":"c3283098-44c1-4712-866a-2b53cdc39b25",
          "entityType":"MenuItemSelection",
          "externalId":null,
          "deferred":false,
          "preDiscountPrice":8,
          "voidReason":null,
          "optionGroup":null,
          "displayName":"Hop Particle Double Ipa",
          "appliedDiscounts":[],
          "modifiers":[],
          "voidDate":null,
          "fulfillmentStatus":"SENT",
          "salesCategory":{
            "guid":"c6909137-0deb-4197-9003-3092294fe1a3",
            "entityType":"SalesCategory",
            "externalId":null
          },
          "selectionType":"NONE",
          "price":8,
          "voided":false,
          "appliedTaxes":[
            {
              "guid":"92894bfa-e56c-4638-9fa9-88e4d24190a3",
              "entityType":"AppliedTaxRate",
              "taxRate":{
                "guid":"9164a65c-5f25-4cb9-8fb9-b55cace11445",
                "entityType":"TaxRate"
              },
              "rate":0.086,
              "name":"State Tax",
              "taxAmount":0.69,
              "type":"PERCENT"
            }
          ],
          "itemGroup":{
            "guid":"e8cee39c-7ff2-4ef1-9de9-e4ab0ee777f0",
            "entityType":"MenuGroup",
            "externalId":null
          },
          "item":{
            "guid":"859d3db8-9dd4-42ab-9f6a-374d09e27825",
            "entityType":"MenuItem",
            "externalId":null
          },
          "taxInclusion":"NOT_INCLUDED",
          "quantity":1,
          "unitOfMeasure":"NONE",
          "tax":0.69,
          "diningOption":{
            "guid":"29481dc5-7a77-4b57-81ba-75710c5b39c8",
            "entityType":"DiningOption",
            "externalId":null
          },
          "voidBusinessDate":null,
          "createdDate":"2019-04-08T21:16:46.345+0000",
          "preModifier":null,
          "modifiedDate":"2019-04-08T21:16:46.361+0000"
        }
      ],
      "voidBusinessDate":null,
      "deleted":false,
      "createdDevice":{
        "id":"f51c0a6ce7da722c"
      },
      "closedDate":"2019-04-08T21:16:46.767+0000",
      "deletedDate":"1970-01-01T00:00:00.000+0000",
      "modifiedDate":"2019-04-08T21:16:48.028+0000",
      "taxAmount":0.69,
      "appliedServiceCharges":[],
      "customer":null
    },
    "redemptions":[]
  },
  "reverseTransactionInformation":null
}
```

  

**Successful loyalty accrue response**

```
{
  "transactionStatus":"ACCEPT"
}
```

  

##### Enabling loyalty messages and QR codes on guest receipts

If your loyalty program integration allows guests to earn points
by scanning a QR code on their receipt, the Toast platform will print
the QR code if both of the following conditions are met:

* No loyalty account is associated with the check
* The check is in the `CLOSED` state

If both conditions are met, Toast prints the guest receipt with
a QR code. When your guest scans the QR code, a pop-up banner appears
with the `LOCATION_GUID:ORDER_GUID:CHECK_GUID`. This
information is used to look up the guestâs order and apply points to
their loyalty account in your integration.

|  |
| --- |
| Note |
| If a guest receipt needs to be reprinted after the check has been closed and the QR code has been printed, the receipt must be reprinted from the Payment Terminal screen on the Toast POS device. For more information, see [Reprint and Resend Receipts](https://central.toasttab.com/s/article/Reprint-and-Resend-Receipt-from-Payment-Terminal). |

Additionally, you can choose to print an optional customizable
message on your guestâs receipt by populating the
`userMessage` field in a `LOYALTY_ACCRUE`
transaction. For more information, see [Loyalty
integration specification](https://doc.toasttab.com/openapi/loyalty/tag/Data-definitions/schema/ResponseCheck/).

#### LOYALTY\_REVERSE

The reverse workflow occurs when a restaurant employee voids
(undoes) a guest's check or voids items that were affected by a loyalty
program offer.

**Reverse workflow**

1. The POS sends a reverse request. The request body includes a
   `TransactionInformationReverse` object holding the
   following information:

   * The loyalty program account information that identifies
     the guest.
   * The identifier of the previous loyalty program transaction
     that needs to be reversed. The identifier of a transaction is in
     the `Toast-Transaction-GUID` header parameter of the
     transaction request.
2. Your loyalty program integration responds to the response
   request. The request body indicates the success or failure of the
   reverse transaction.

**Loyalty reverse request**

```
{
  "toastTransactionType":"LOYALTY_REVERSE",
  "searchTransactionInformation":null,
  "checkTransactionInformation":null,
  "reverseTransactionInformation":{
    "loyaltyIdentifier":"1",
    "transactionId":"ab11d469-5ed5-4daa-b9d6-addefdb1c1f7",
    "redemptions":[
      {
        "identifier":"5",
        "appliedDiscountGuid":"64456691-c34e-4784-9c6e-fc514a0f4b7b",
        "selectionGuid":null,
        "amount":0.01,
        "quantity":1
      },
      {
        "identifier":"5",
        "appliedDiscountGuid":"64456691-c34e-4784-9c6e-fc514a0f4b7b",
        "selectionGuid":null,
        "amount":0.01,
        "quantity":1
      }
    ]
  }
}
```

  

**Successful loyalty reverse**

```
{
  "transactionStatus":"ACCEPT"
}
```

  

##### Triggering a reverse transaction

You can only reverse redeem and accrue transactions. You reverse
redeem and accrue transactions you void menu item selections,
payments, and checks. For information about voiding items, payments,
and checks in the Toast POS app, see this [Toast
central article](https://central.toasttab.com/s/article/Voiding-Items-Payments-and-Checks).

The redeem transaction occurs during the payment process. You
can reverse a redeem transaction after payment by voiding the entire
check or voiding a menu item selection that is related to the redeem
transaction.

The accrue transaction occurs asynchronously after you complete
the payment process. You can reverse an accrue transaction by voiding
the entire check or by making a change to the payment.

**Example of changing payment**

1. You process a credit card payment.
2. The check is still open.
3. The guest leaves a tip. The guest modifies the payment by
   adding a tip to the total.
4. Although there may not be a change in the accrual amount,
   modifying the payment triggers a reverse transaction for the
   accrue transaction for the payment and it triggers a new accrue
   transaction for the updated payment.


---

# Physical gift card requirements - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiPhysicalGiftCardRequirements.html

### Physical gift card requirements

Gift cards used with the Toast platform cannot exceed 19
digits.

For information about card number encoding requirements, see [Gift
Card Encoding Requirements FAQ](https://central.toasttab.com/s/article/Gift-Card-Encoding-Requirements-FAQ-1492810278469).


---

# Hotel property management system integration - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html

### Hotel property management system integration

Property management systems (PMS) are used by hotels and motels to
coordinate systems used for servicing guests, charges, and further
accounting. You can use the tender API to implement an integration between
a PMS and the Toast platform. The tender integration allows an employee at
a hotel or restaurant to look up a guest's account and post charges to
their hotel folio.

#### Transaction descriptions

The tender API supports the following transaction types for the
PMS integration workflow:

* `TENDER_SEARCH_CONFIG`:
  Request configured search terms for the restaurant. Search terms can
  be First Name, Last Name,
  Room Number, Email, or
  Company.
* [`TENDER_SEARCH`](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#apiTenderSearchPMS):
  Search for an account.
* `TENDER_RETRIEVE_DISCOUNTS`:
  Retrieve applicable discounts for a check.
* `TENDER_RETRIEVE_PAYMENTS`:
  Retrieve payment for a check.
* `TENDER_REDEEM`:
  Confirm payment and discounts applied to a check.
* `TENDER_GRATUITY`: Add
  a tip to a previously confirmed payment.
* `TENDER_REVERSE`:
  Reverse a previous discount redemption or gratuity.

##### Configure search

Configuring the search is the first transaction that occurs when
an employee initiates the workflow to charge a check to a guest's
account.

**Configure search workflow**

1. A guest wants to charge a check to a hotel room.
2. An employee selects Pay ($) to tender
   the check and selects hotel room charge as the payment method on
   the Toast POS device.
3. The Toast platform sends a
   `TENDER_SEARCH_CONFIG` request to the hotel
   PMS provider to get the search terms used by the provider to look
   up guest information.
4. The PMS provider sends a response in a
   `searchConfigResponse` object. Each key-value pair in
   this object defines an input field (`key`) with its
   type (`value`). Optional attributes for maximum length
   (`maxLength`) and tender property type
   (`tenderProperType`) for the key-value pair may be
   included.

   The `value` must be one of the following:

   | Value | Description |
   | --- | --- |
   | `NUMBER` | A numeric value such as room number, or reservation number. |
   | `TEXT` | An alphanumeric value such as a guest's name or their company's name. |
   | `EMAIL` | The guest's email address. |
   | `PHONE_NUMBER` | A numeric-only value for the guest's phone number. |

   The first four search terms are displayed on the guest
   lookup screen on the Toast POS device. The `value` also
   determines the type of virtual keyboard that is displayed for the
   search term. For example, `TEXT` does not allow a
   number pad to be used.

The following example shows the search terms configured as room
number, name, reservation number, and company name.

**Configure search request**

The `TENDER_SEARCH_CONFIG` transaction is a
`POST` request to your tender API endpoint
`https://{your endpoint}` with
the following header parameters:

* `Toast-Transaction-Type`
* `Toast-Restaurant-External-ID`
* `Toast-Transaction-GUID`
* `Authorization`

This request has no message body.

  

**Successful configure search response**

The following is an example of a successful configure search
response.

```
{
  "transactionStatus": "ACCEPT",
  "discountsResponse": null,
  "paymentsResponse": null,
  "gratuityResponse": null,
  "searchConfigResponse": {
    "searchTermNames": [
      {
        "key": "Room Number",
        "value": "TEXT", ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
        "tenderPropertyType": "ROOM_ID", ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "maxLength": 3
      },
      {
        "key": "Name",
        "value": "TEXT",
        "tenderPropertyType": "OTHER",
        "maxLength": 30
      },
      {
        "key": "Reservation Number",
        "value": "NUMBER",
        "tenderPropertyType": "OTHER",
        "maxLength": 10
      },
      {
        "key": "Company Name",
        "value": "TEXT",
        "tenderPropertyType": "OTHER",
        "maxLength": 30
      }
    ]
  },
  "searchResponse": null,
  "redeemResponse": null
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#co-C1DCCDC4-45EE-4899-A3DF-366229BB93BA) | The `value` attribute must be `TEXT` if your integration supports alpha-numeric room numbers. |
| [2](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#co-d1e663C54B0F40-F3CE-49A8-8D59-9CCB3A22F283) | The `tenderProperType` attribute must be associated with `ROOM_ID` for the key-value pair that defines Room Number in the configure search response and on each [search response](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#apiTenderSearchPMS). |

##### Guest search

After the search configuration request, the Toast POS device
displays the guest search criteria. An employee can search for a guest
on the Toast POS device using a guest's information, such as name,
room number, or reservation number.

**Guest search workflow**

1. An employee enters the guest's identifying information in
   the input fields on the Toast POS device and searches for the
   guest.
2. The Toast POS device sends a `TENDER_SEARCH`
   request to the PMS provider. The request is a
   `TenderTransaction` object that contains a
   `searchTransactionInformation` object which contains a
   `searchTerms` object. This `searchTerms`
   object contains the search criteria, in the form of a key-value
   pair:

   * The `key` corresponds to the input field
     where the restaurant employee enters the guest's identifying
     information.
   * The `value` corresponds to the string that
     the employee types on the Toast POS device. The
     `value` can be partial. For example, only first or
     last name, or partial name.
3. The PMS provider returns the results of the search request
   in a `searchResponse` object that contains a
   `searchResults` property. The
   `searchResults` property contains an array of
   `AccountInfo` objects. Each entry in the array
   corresponds to a guest and includes:

   * An identifier for the guest
     (`tenderIdentifier`). Each
     `tenderIdentifier` should be unique for each guest
     returned in the `TENDER_SEARCH
     response`.

     |  |
     | --- |
     | Important |
     | `tenderIdentifier` is generated by the integration partner and should never be generated using a guest's sensitive information, such as credit card details. |
   * The search results returned as key-value pairs with the
     guest information such as name and room number.

   Guest search results are displayed on the Toast POS
   device.

The following example shows a search for a guest whose name
contains `john`. The PMS provider responds with two results
for `john adams` and `amy johns` and their
information.

**Search request message body**

```
{
  "discountsTransactionInformation": null,
  "paymentsTransactionInformation": null,
  "redeemTransactionInformation": null,
  "gratuityTransactionInformation": null,
  "reverseTransactionInformation": null,
  "searchTransactionInformation": {
    "swipeData": null,
    "scanData": null,
    "searchTerms": [
      {
        "key": "Name",
        "value": "john",
        "tenderPropertyType": "OTHER",
        "maxLength": 30
      }
    ],
    "orderGuid": "b34bf7f6-7836-4dbb-963d-d7c8115838f6",
    "checkGuid": "ad51d5f8-8573-4a4f-ad65-ce308f5ff763"
  }
}
```

  

**Successful search response**

```
{
  "transactionStatus": "ACCEPT",
  "discountsResponse": null,
  "paymentsResponse": null,
  "gratuityResponse": null,
  "searchConfigResponse": null,
  "searchResponse": {
    "searchResults": [
      {
        "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
        "properties": [
          {
            "key": "Room Number",
            "value": "100",
            "tenderPropertyType": "ROOM_ID",
            "maxLength": null
          },
          {
            "key": "Name",
            "value": "John Adams",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          },
          {
            "key": "Reservation Number",
            "value": "54321",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          },
          {
            "key": "Company Name",
            "value": "Toast, Inc.",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          },
          {
            "key": "Guest Status",
            "value": "ACTIVE",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          },
          {
            "key": "Charge Limit",
            "value": "$500.00",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          }
        ],
        "additionalProperties": [
          {
            "key": "storedValue",
            "value": "403.25"
          }
        ]
      },
      {
        "tenderIdentifier": "d453f4ea-627f-4f75-9674-eba26c7c621d",
        "properties": 
          {
            "key": "Room Number",
            "value": "308",
            "tenderPropertyType": "ROOM_ID",
            "maxLength": null
          },
          {
            "key": "Name",
            "value": "Amy Johns",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          },
          {
            "key": "Reservation Number",
            "value": "12345",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          },
          {
            "key": "Company Name",
            "value": "Toast, Inc.",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          },
          {
            "key": "Guest Status",
            "value": "ACTIVE",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          },
          {
            "key": "Charge Limit",
            "value": "$1000.00",
            "tenderPropertyType": "OTHER",
            "maxLength": null
          }
        ],
        "additionalProperties": [
          {
            "key": "storedValue",
            "value": "980.73"
          }
        ]
      }
    ]
  },
  "redeemResponse": null
}
```

##### Retrieve discounts

After an employee selects a guest from the search results on the
Toast POS device, the Toast platform retrieves discounts from the PMS
provider.

**Retrieve discounts workflow**

1. The Toast platform sends a
   `TENDER_RETRIEVE_DISCOUNTS` request to the PMS
   provider. The request includes a `TenderTransaction`
   object that holds the guest identifier
   (`tenderIdentifier`) and check (`Check`) in
   a `discountsTransactionInformation` object.
2. Your PMS integration determines the discounts to be applied
   to the check and responds to the Toast platform with a
   `discountsResponse` value in the
   `TenderTransactionResponse` object. Discount
   information is contained in this object. Note that the number of
   discounts can be zero.
3. The Toast platform applies the discounts and adds or updates
   the `appliedDiscounts` value of the `Check`
   object.

   |  |
   | --- |
   | Note |
   | As a provider, you might not support discounts for your restaurant. In this case, you can return an empty array in your response to the `TENDER_RETRIEVE_DISCOUNTS` request. |

**Retrieve discounts request body**

```
{
  "discountsTransactionInformation": {
    "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
    "accountInfo": {
      "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
      "properties": [contents omitted],
      "additionalProperties": [contents omitted],
      "expansionSearchCriteria": []
    },
    "orderGuid": "b34bf7f6-7836-4dbb-963d-d7c8115838f6",
    "check": {
      "guid": "ad51d5f8-8573-4a4f-ad65-ce308f5ff763",
      "entityType": null,
      "externalId": null,
      "displayNumber": "2",
      "payments": [],
      "appliedDiscounts": [],
      "shift": null,
      "lastModifiedDevice": null,
      "voidDate": null,
      "duration": null,
      "appliedPreauthInfo": null,
      "paidDate": null,
      "appliedLoyaltyInfo": null,
      "voided": null,
      "paymentStatus": null,
      "amount": 13.78,
      "tabName": null,
      "taxExempt": null,
      "netAmount": null,
      "tipAmount": null,
      "totalDiscountAmount": null,
      "removedSelections": [],
      "pickedUpDate": null,
      "taxExemptionAccount": null,
      "openedDate": null,
      "totalAmount": null,
      "selections": [
        {
          "guid": "77cc9961-a859-4ae0-a545-3c7d36f796f4",
          "entityType": null,
          "externalId": null,
          "deferred": null,
          "preDiscountPrice": 13,
          "voidReason": null,
          "optionGroup": null,
          "displayName": "Fried Chicken Sliders",
          "appliedDiscounts": [],
          "externalPriceAmount": null,
          "modifiers": [],
          "seatNumber": null,
          "voidDate": null,
          "fulfillmentStatus": null,
          "optionGroupPricingMode": null,
          "giftCardSelectionInfo": null,
          "salesCategory": null,
          "selectionType": null,
          "price": 13,
          "voided": false,
          "appliedTaxes": [
            {
              "guid": "ec0ba24e-afd8-45cc-b39b-311b4bddcc63",
              "entityType": null,
              "taxRate": {
                "guid": "df6eeefc-3f1f-4669-a9ef-3718a53b8418",
                "entityType": "TaxRate"
              },
              "rate": 0.06,
              "name": "Test Tax Rate",
              "taxAmount": 0.78,
              "type": "PERCENT",
              "facilitatorCollectAndRemitTax": null
            }
          ],
          "storedValueTransactionId": null,
          "itemGroup": {
            "guid": "0598f4e5-223a-4b91-a674-9929d42e532d",
            "entityType": "MenuGroup",
            "externalId": "200000017820067195",
            "multiLocationId": null
          },
          "item": {
            "guid": "791f5203-22b6-469a-a0f9-29e1177219ac",
            "entityType": "MenuItem",
            "externalId": "200000017820067789",
            "multiLocationId": null
          },
          "taxInclusion": "NOT_INCLUDED",
          "quantity": 1,
          "receiptLinePrice": 13,
          "unitOfMeasure": null,
          "refundDetails": null,
          "toastGiftCard": null,
          "tax": 0.78,
          "diningOption": null,
          "openPriceAmount": null,
          "voidBusinessDate": null,
          "createdDate": null,
          "preModifier": null,
          "modifiedDate": null
        }
      ],
      "voidBusinessDate": null,
      "createdDate": null,
      "deleted": null,
      "createdDevice": null,
      "closedDate": null,
      "deletedDate": null,
      "billingCustomer": null,
      "guestProfile": null,
      "modifiedDate": null,
      "taxAmount": null,
      "driverShift": null,
      "appliedServiceCharges": [],
      "customer": null
    },
    "totalDiscountable": 13
  },
  "paymentsTransactionInformation": null,
  "redeemTransactionInformation": null,
  "gratuityTransactionInformation": null,
  "reverseTransactionInformation": null,
  "searchTransactionInformation": null
}
```

  

**Successful retrieve discounts response**

```
{
  "transactionStatus": "ACCEPT",
  "discountsResponse": {
    "account": {
      "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
      "properties": [contents omitted],
      "additionalProperties": [contents omitted],
      "expansionSearchCriteria": null
    },
    "tenderDiscounts": [
      {
        "name": "Tender Dollar Discount",
        "identifier": "5570ca31-7391-4b0c-bd45-9788cc686a5b",
        "amount": 1,
        "selectionGuid": null,
        "appliedDiscountGuid": "54397374-cc57-4145-9f0b-784f02d3ea5c"
      }
    ]
  },
  "paymentsResponse": null,
  "gratuityResponse": null,
  "searchConfigResponse": null,
  "searchResponse": null,
  "redeemResponse": null
}
```

The retrieved discounts `tenderDiscounts` can be
check-level or item-level discounts.

##### Retrieve payments

The Toast platform retrieves payments after applying the
discounts received from the PMS provider.

**Retrieve payments workflow**

1. The Toast platform sends a
   `TENDER_RETRIEVE_PAYMENTS` request to the PMS provider.
   The request includes a `TenderTransaction` object that
   holds the guest identifier (`tenderIdentifier`) and the
   updated `Check`
   object in a `paymentsTransactionInformation`
   object.

   |  |
   | --- |
   | Note |
   | When discounting item groups, item quantities cannot be greater than `1` in your discount response. Break up item groups into separate selections where item `quantity = 1` and specify the discount for each separate selection. |
2. Your tender integration determines the payment and responds
   to the Toast platform with a `paymentsResponse` value
   in the `TenderTransactionResponse` object, which
   includes the payment information.
3. The Toast platform applies the payment and updates the
   `Check` object.

**Retrieve payments request body**

```
{
  "discountsTransactionInformation": null,
  "paymentsTransactionInformation": {
    "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
    "accountInfo": {
      "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
      "properties": [contents omitted],
      "additionalProperties": [],
      "expansionSearchCriteria": []
    },
    "amount": 12.72,
    "tipAmount": 0,
    "orderGuid": "b34bf7f6-7836-4dbb-963d-d7c8115838f6",
    "check": {
      "guid": "ad51d5f8-8573-4a4f-ad65-ce308f5ff763",
      "entityType": null,
      "externalId": null,
      "displayNumber": "2",
      "payments": [],
      "appliedDiscounts": [
        {
          "guid": "54397374-cc57-4145-9f0b-784f02d3ea5c",
          "entityType": null,
          "externalId": null,
          "approver": null,
          "loyaltyDetails": null,
          "discountPercent": null,
          "appliedDiscountReason": null,
          "comboItems": [],
          "discountAmount": 1,
          "discount": null,
          "triggers": [],
          "appliedPromoCode": null,
          "processingState": "PENDING_APPLIED",
          "name": null,
          "nonTaxDiscountAmount": null,
          "discountType": null
        }
      ],
      "shift": null,
      "lastModifiedDevice": null,
      "voidDate": null,
      "duration": null,
      "appliedPreauthInfo": null,
      "paidDate": null,
      "appliedLoyaltyInfo": null,
      "voided": null,
      "paymentStatus": null,
      "amount": 12.72,
      "tabName": null,
      "taxExempt": null,
      "netAmount": null,
      "tipAmount": null,
      "totalDiscountAmount": null,
      "removedSelections": [],
      "pickedUpDate": null,
      "taxExemptionAccount": null,
      "openedDate": null,
      "totalAmount": null,
      "selections": [
        {
          "guid": "77cc9961-a859-4ae0-a545-3c7d36f796f4",
          "entityType": null,
          "externalId": null,
          "deferred": null,
          "preDiscountPrice": 13,
          "voidReason": null,
          "optionGroup": null,
          "displayName": "Fried Chicken Sliders",
          "appliedDiscounts": [],
          "externalPriceAmount": null,
          "modifiers": [],
          "seatNumber": null,
          "voidDate": null,
          "fulfillmentStatus": null,
          "optionGroupPricingMode": null,
          "giftCardSelectionInfo": null,
          "salesCategory": {
            "guid": "d7933a7d-5db7-447b-83c4-99fab2b536ab",
            "entityType": "SalesCategory",
            "externalId": "200000022647976825",
            "multiLocationId": null
          },
          "selectionType": null,
          "price": 13,
          "voided": false,
          "appliedTaxes": [
            {
              "guid": "ec0ba24e-afd8-45cc-b39b-311b4bddcc63",
              "entityType": null,
              "taxRate": {
                "guid": "df6eeefc-3f1f-4669-a9ef-3718a53b8418",
                "entityType": "TaxRate"
              },
              "rate": 0.06,
              "name": "Test Tax Rate",
              "taxAmount": 0.78,
              "type": "PERCENT",
              "facilitatorCollectAndRemitTax": null
            }
          ],
          "storedValueTransactionId": null,
          "itemGroup": {
            "guid": "0598f4e5-223a-4b91-a674-9929d42e532d",
            "entityType": "MenuGroup",
            "externalId": "200000017820067195",
            "multiLocationId": null
          },
          "item": {
            "guid": "791f5203-22b6-469a-a0f9-29e1177219ac",
            "entityType": "MenuItem",
            "externalId": "200000017820067789",
            "multiLocationId": null
          },
          "taxInclusion": "NOT_INCLUDED",
          "quantity": 1,
          "receiptLinePrice": 13,
          "unitOfMeasure": null,
          "refundDetails": null,
          "toastGiftCard": null,
          "tax": 0.78,
          "diningOption": null,
          "openPriceAmount": null,
          "voidBusinessDate": null,
          "createdDate": null,
          "preModifier": null,
          "modifiedDate": null
        }
      ],
      "voidBusinessDate": null,
      "createdDate": null,
      "deleted": null,
      "createdDevice": null,
      "closedDate": null,
      "deletedDate": null,
      "billingCustomer": null,
      "guestProfile": null,
      "modifiedDate": null,
      "taxAmount": null,
      "driverShift": null,
      "appliedServiceCharges": [],
      "customer": null
    },
    "tenderDiscountsApplied": [
      {
        "name": "Tender Dollar Discount",
        "identifier": "5570ca31-7391-4b0c-bd45-9788cc686a5b",
        "amount": 1,
        "selectionGuid": null,
        "appliedDiscountGuid": "54397374-cc57-4145-9f0b-784f02d3ea5c"
      }
    ]
  },
  "redeemTransactionInformation": null,
  "gratuityTransactionInformation": null,
  "reverseTransactionInformation": null,
  "searchTransactionInformation": null
}
```

  

**Successful retrieve payments response**

```
{
  "transactionStatus": "ACCEPT",
  "discountsResponse": null,
  "paymentsResponse": {
    "account": {
      "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
      "properties": [contents omitted],
      "additionalProperties": [contents omitted],
      "expansionSearchCriteria": null
    },
    "tenderPayments": [
      {
        "name": "Tender Payment",
        "identifier": "c359cde2-a758-46f3-a6d1-7f00e9b18f86",
        "type": "STORED_VALUE",
        "amount": 12.72,
        "tipAmount": 0,
        "paymentGuid": "6980a7b8-edb4-469e-bcb6-869b1cad082d"
      }
    ]
  },
  "gratuityResponse": null,
  "searchConfigResponse": null,
  "searchResponse": null,
  "redeemResponse": null
}
```

##### Redeem discounts and payments

After the Toast platform applies payments to the check, the
discounts and payments are redeemed. For more information about
gratuity payments, see [Gratuity](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#apiTenderGratuityPMS).

**Redeem discounts and payments workflow**

1. The Toast platform sends a `TENDER_REDEEM`
   request to the PMS provider.
2. The PMS provider marks the discounts as used and adds the
   payment to the guest's account.
3. The restaurant employee closes the check if the full amount
   is covered by the room charge.

**Redeem discounts and payments request body**

```
{
  "discountsTransactionInformation": null,
  "paymentsTransactionInformation": null,
  "redeemTransactionInformation": {
    "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
    "accountInfo": {
      "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
      "properties": [contents omitted],
      "additionalProperties": [contents omitted],
      "expansionSearchCriteria": []
    },
    "orderGuid": "b34bf7f6-7836-4dbb-963d-d7c8115838f6",
    "check": [contents omitted],
    "tenderPaymentsApplied": [
      {
        "name": "Tender Payment",
        "identifier": "c359cde2-a758-46f3-a6d1-7f00e9b18f86",
        "type": "STORED_VALUE",
        "amount": 12.72,
        "tipAmount": 0,
        "paymentGuid": "6980a7b8-edb4-469e-bcb6-869b1cad082d"
      }
    ],
    "tenderDiscountsApplied": [
      {
        "name": "Tender Dollar Discount",
        "identifier": "5570ca31-7391-4b0c-bd45-9788cc686a5b",
        "amount": 1,
        "selectionGuid": null,
        "appliedDiscountGuid": "54397374-cc57-4145-9f0b-784f02d3ea5c"
      }
    ],
    "revenueCenter": {
      "guid": "cc2f37ef-a05e-43ca-afb8-5dc1175d90d7",
      "name": "Dining Room"
    }
  },
  "gratuityTransactionInformation": null,
  "reverseTransactionInformation": null,
  "searchTransactionInformation": null
}
```

  

**Successful redeem discounts and payments response**

```
{
  "transactionStatus": "ACCEPT"
}
```

##### Gratuity

If configured, the Toast platform prompts the restaurant
employee for a gratuity after the Toast platform receives a response
from the PMS provider about the discounts and payments
redemption.

|  |
| --- |
| Note |
| Gratuity functionality is configurable through Toast Web. Toast support recommends that integration developers use the gratuity transaction to consume all tips related to tender payments. Partners that do so should ignore non-zero values in the tipAmount field contained within the redeem transaction. |

**Gratuity workflow**

1. After an employee enters a gratuity amount, the Toast POS
   system sends a `TENDER_GRATUITY` request that specifies
   a gratuity amount to add to a `TENDER_REDEEM`
   transaction. The `Toast-Transaction-GUID` of
   `TENDER_REDEEM` to add the gratuity amount is provided
   in the `transactionToUpdate` value in the body of the
   `TENDER_GRATUITY` request.
2. The PMS provider responds to the Toast platform with a
   `gratuityResponse` value in the
   `TransactionResponseGratuity` object, which contains
   the value of gratuity that the guest added.

**Gratuity request body**

```
{
  "discountsTransactionInformation": null,
  "paymentsTransactionInformation": null,
  "redeemTransactionInformation": null,
  "gratuityTransactionInformation": {
    "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
    "accountInfo": {
      "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
      "properties": [contents omitted],
      "additionalProperties": [contents omitted],
      "expansionSearchCriteria": []
    },
    "transactionToUpdate": "868cd4a6-66de-4f33-ad47-6867e67ba2e8",
    "additionalGratuity": 2.86, ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "paymentGuid": "6980a7b8-edb4-469e-bcb6-869b1cad082d",
    "tenderPayments": [
      {
        "name": "Tender Payment",
        "identifier": "c359cde2-a758-46f3-a6d1-7f00e9b18f86",
        "type": "STORED_VALUE",
        "amount": 12.72,
        "tipAmount": 0,
        "paymentGuid": "6980a7b8-edb4-469e-bcb6-869b1cad082d"
      }
    ],
    "checkInfo": {
      "guid": "ad51d5f8-8573-4a4f-ad65-ce308f5ff763",
      "displayNumber": "2"
    },
    "orderGuid": "b34bf7f6-7836-4dbb-963d-d7c8115838f6", ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "check": [contents omitted] ![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  },
  "reverseTransactionInformation": null,
  "searchTransactionInformation": null
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#co-e356efd8-0dac-4a34-8fae-c13421f2bd47) | Gratuity added to the check during the gratuity transaction. |
| [2](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#co-d1e16255037700F-FE3C-4B8F-BA44-10D264C6966E) | The unique order identifier. |
| [3](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#co-d1e16275037700F-FE3C-4B8F-BA44-10D264C6966E) | A `Check` object that contains the order's complete transaction details. |

  

**Successful gratuity response body**

```
{
  "transactionStatus": "ACCEPT",
  "discountsResponse": null,
  "paymentsResponse": null,
  "gratuityResponse": {
    "account": {
      "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
      "properties": [contents omitted],
      "additionalProperties": [contents omitted],
      "expansionSearchCriteria": null
    },
    "tenderPayments": [
      {
        "name": "Tender Payment",
        "identifier": "c359cde2-a758-46f3-a6d1-7f00e9b18f86",
        "type": "STORED_VALUE",
        "amount": 12.72,
        "tipAmount": 2.86,
        "paymentGuid": "6980a7b8-edb4-469e-bcb6-869b1cad082d"
      }
    ]
  },
  "searchConfigResponse": null,
  "searchResponse": null,
  "redeemResponse": null
}
```

##### Reverse payments and discounts

A transaction is reversed in the following situations:

* If the restaurant employee voids the payment, the Toast POS
  system sends a `TENDER_REVERSE` request to the PMS
  provider to reverse the payment and any applied discounts.
* If the restaurant employee voids the order, then the Toast
  POS system sends a `TENDER_REVERSE` request to the PMS
  provider.
* If a discount times out during redemption, then the Toast
  POS system sends a `TENDER_REVERSE` request to the PMS
  provider.

Reverse requests can be one or more of the following:

* Payments
* Discounts

In the request body, the value of
`transactionToUpdate` is the
`Toast-Transaction-GUID` of the `TENDER_REDEEM`
request. The `discountsToRemove` and
`paymentsToRemove` contain the discounts and payment
identifiers, respectively. The `orderGuid` is the order's
unique Toast identifier.

**Reverse request body**

```
{
  "discountsTransactionInformation": null,
  "paymentsTransactionInformation": null,
  "redeemTransactionInformation": null,
  "gratuityTransactionInformation": null,
  "reverseTransactionInformation": {
    "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
    "accountInfo": {
      "tenderIdentifier": "2670f8d0-c9c1-4dd1-b234-6922a81a7792",
      "properties": [contents omitted],
      "additionalProperties": [contents omitted],
      "expansionSearchCriteria": []
    },
    "transactionToUpdate": "868cd4a6-66de-4f33-ad47-6867e67ba2e8",
    "discountsToRemove": [
      "5570ca31-7391-4b0c-bd45-9788cc686a5b"
    ],
    "paymentsToRemove": [
      "c359cde2-a758-46f3-a6d1-7f00e9b18f86"
    ],
    "tenderPaymentsToRemove": [
      {
        "name": "Tender Payment",
        "identifier": "c359cde2-a758-46f3-a6d1-7f00e9b18f86",
        "type": "STORED_VALUE",
        "amount": 12.72,
        "tipAmount": 2.86,
        "paymentGuid": "6980a7b8-edb4-469e-bcb6-869b1cad082d"
      }
    ],
    "tenderDiscountsToRemove": [
      {
        "name": "Tender Dollar Discount",
        "identifier": "5570ca31-7391-4b0c-bd45-9788cc686a5b",
        "amount": 1,
        "selectionGuid": null,
        "appliedDiscountGuid": "54397374-cc57-4145-9f0b-784f02d3ea5c"
      }
    ],
    "checkInfo": {
      "guid": "ad51d5f8-8573-4a4f-ad65-ce308f5ff763",
      "displayNumber": "2"
    },
    "originalTransactionStatus": "ACCEPT",
    "orderGuid": "b34bf7f6-7836-4dbb-963d-d7c8115838f6"
  },
  "searchTransactionInformation": null
}
```

  

**Successful reverse response body**

```
{
  "transactionStatus": "ACCEPT"
}
```

#### POS workflow

This section describes the user interface workflow in the Toast
platform for billing a hotel restaurant guest using the hotel's PMS
provider.

At the payment phase of the Toast platform order workflow:

1. A guest chooses to pay a balance due by applying the balance
   to their room charge.
2. An employee selects the Pay ($) button to
   navigate to the Payments screen.

   ![A screenshot of the Pay button you use to access the Payments screen.](https://doc.toasttab.com/doc/media/tender_pos1.png)
3. The restaurant employee selects the Other
   button.

   ![A screenshot of the Other button on the Payments screen.](https://doc.toasttab.com/doc/media/tender_pos2.png)
4. The Select Alternate Payment Type
   dialog appears and Hotel Room Charge is listed
   as an option.

   |  |
   | --- |
   | Note |
   | The name of the payment option is configurable from the Toast Web at Payments > Other Payment Options. |

   ![A screenshot of the Select Alternate Payment Type screen, showing the room charge option.](https://doc.toasttab.com/doc/media/tender_pos_pms1.png)
5. After selecting room charge, a Lookup Hotel
   Guest dialog appears.

   ![A screenshot of the Lookup Hotel Guest screen.](https://doc.toasttab.com/doc/media/tender_pos_pms2.png)
6. The restaurant employee enters information to look up a guest
   and selects Search. For example, they enter a
   room number in the Enter Room # field.
7. Once the search is complete, a list of search results appears
   on the Toast POS device.

   ![A screenshot of the Lookup Hotel Guest screen after a room number search.](https://doc.toasttab.com/doc/media/tender_pos_pms4.png)
8. The restaurant employee selects the record corresponding to
   the guest that owes the check amount and processes the payment with
   the PMS provider. If digital receipts are configured, the Toast POS
   device prompts the restaurant employee to add the tip amount.

   If the restaurant employee chose to print a receipt, the Room
   Charge payment and any applied discounts are printed on the
   receipt.

#### Reporting

You can view information about tender transactions in the
Sales Summary report. This report can be accessed
by navigating to Reports > Sales > Sales
Summary in Toast Web. Room charge tender payments appear in
the Other section of the Sales Summary
report, as shown below, and in the
Payments tab. The payment Type
is shown as Other from the
Payments tab.

![A screenshot of the Sales Summary report, showing hotel room charge transactions in the Other section.](https://doc.toasttab.com/doc/media/tender_reporting1_pms.png)


---

# Tender provider integrations overview - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiTenderProviderIntegrationsOverview.html

### Tender provider integrations overview

You can use the Toast tender API to integrate your tender provider
with the Toast platform. The tender API supports the [Hotel property management system integration](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html) and enables
a hotel restaurant to directly bill a guest at the hotel, for example, by
using their room number or name.

In addition, the tender API allows you to apply discounts from a
third-party system and refund payments and discounts on a check.

The API can be defined by:

* Transaction requests
* Transaction responses
* Error codes

Transaction types define the action to take and the related payload.
Transactions between the Toast platform and the tender provider during a
tender transaction are represented in the following figure.

![A diagram showing the REST HTTP request and response interactions between the Toast platform and a tender provider.](https://doc.toasttab.com/doc/media/tender_transactions1.png)

Your implementation is responsible for returning the response
synchronously.

Tender integrations define a single HTTPS endpoint. In your
implementation, all requests are posted to this single endpoint. Requests
from restaurants configured to use your service are sent to this endpoint.
For example, you can name your endpoint to be:

```
https://toastapi.com/tenderapi
```

Each `POST` request to the endpoint includes:

* A `TenderTransaction` object in the message body,
  which contains information specific to the
  `Toast-Transaction-Type`.
* Headers sent by the Toast platform. For a complete list of these
  headers, see the [API
  reference documentation](https://doc.toasttab.com/openapi/tender/paths/~1yourendpointname/post/).

For more information about the transaction descriptions, workflows
and examples, see [Transaction descriptions](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#apiTenderTransactionDescriptionsPMS).

#### Error handling

Your tender interface implementation must return the following
HTTPS responses to the requests that it receives from the Toast
platform.

200 means a successful response and has a status in the
response:

* `ACCEPT`: The tender service provider processed the
  transaction successfully.

400 means an unsuccessful request. The
`transactionStatus` value of the
`TenderTransactionResponse` object indicates the source of
the error. The error source must be one of the following:

* `ERROR_ACCOUNT_INVALID`: The tender identifier is
  not in the set of identifiers that correspond to the current
  restaurant. For example, if a guest account is entered incorrectly,
  your implementation returns this status.
* `ERROR_ACCOUNT_NO_POST`: The tender identifier
  provided corresponds to an account which has no card on file or has
  been marked as "no post".
* `ERROR_FOLIO_IN_USE`: The guest folio is in use
  elsewhere on the property and the guest folio is locked and
  unavailable for room charge posting.
* `ERROR_INSUFFICIENT_FUNDS`: The tender account does
  not have sufficient payment to make a payment or tip specified in a
  `TENDER_RETRIEVE_PAYMENTS` or
  `TENDER_RETRIEVE_GRATUITY`.
* `ERROR_INVALID_INPUT_PROPERTIES`: The JSON values
  specified in the `tenderTransaction` object in the
  request body do not match the requirements of the transaction
  type.
* `ERROR_INVALID_RESTAURANT`: The restaurant
  identifier included in the `Toast-Restaurant-External-ID`
  header parameter of the request is not recognized by the tender
  provider integration implementation. You receive the identifiers for
  your connected restaurants when implementing the tender API.
* `ERROR_INVALID_TOAST_TRANSACTION_TYPE`: Your
  implementation does not handle the transaction type supplied in the
  request. Return this response when the requested transaction type is
  defined by the tender API but you decided not to support it.
* `ERROR_INVALID_TOKEN`: The authentication token
  supplied in the `Authorization` header parameter is
  invalid or cannot be validated. For information about request
  authentication, see [Authenticating outbound API requests](https://doc.toasttab.com/doc/devguide/apiAuthenticatingRequestsFromToastApiClients.html).
* `ERROR_TRANSACTION_CANNOT_BE_REVERSED`: The
  transaction specified by a `TENDER_REVERSE` request
  cannot be reversed.
* `ERROR_TRANSACTION_DOES_NOT_EXIST`: The reverse
  request, specified by a `TENDER_REVERSE`, is for a
  transaction that does not exist.
* `ERROR_UNABLE_TO_PROCESS`: The transaction cannot
  be processed by the partner. This can be due to an issue that
  occurred on the partner's end.

500 means there was an internal server error.

#### Latency requirements

The Toast platform expects a 500ms average response time from your
tender API endpoint. The maximum response time must be five seconds,
after which the Toast platform may close the socket and send another
request. Response times should be as short as possible.

#### Limitations

* You cannot use the tender API to pay for checks generated
  using the orders API or Toast Online Ordering. The tender API is
  only supported through the Toast platform.
* You cannot use the tender API with contactless payment
  methods.


---

# Scan-to-pay - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiTenderScanToPay.html

### Scan-to-pay

The Toast tender API scan-to-pay feature allows the Toast platform
to automatically identify a guest account. After recognizing a guest, a
transaction can be closed to the appropriate location, such as a guest
room, without the need to look up a guestâs account.

You can use scan-to-pay in the following ways:

* Scan a QR code: The guest presents a QR code that, once
  scanned, directs a Toast transaction to the guestâs account.
* Enter a guest's unique identifier: On the Toast POS app, enter
  the guestâs unique identifier to charge their transaction to their
  account.

Before you can use scan-to-pay, you must be a Toast integration
partner or subscribe to an integration that supports the tender API
scan-to-pay feature. To become an integration partner, see the [Integration partnership process](https://doc.toasttab.com/doc/devguide/integrationDevProcess.html).

The following sections describe the Toast platform processes that
take place during a scan-to-pay transaction, how to process a scan-to-pay
transaction using a QR code, and how to process a scan-to-pay transaction
with a guest's unique identifier.

#### Tender API scan-to-pay transactions

The tender API scan-to-pay transactions use the same transactions
as other tender API communications. These transactions include:

* `retrieveDiscounts`
* `retrievePayments`
* `redeem`
* `gratuity`
* `reverse`

For more information about the tender API transactions, see [Transaction descriptions](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#apiTenderTransactionDescriptionsPMS).

If you scan a QR code, or enter a guest's unique identifier, and
the code is not recognized, you could receive an error. For information
about how to respond to certain errors, see [Error handling](https://doc.toasttab.com/doc/devguide/apiTenderProviderIntegrationsOverview.html#apiTenderErrorHandling).

#### POS workflow

The following sections describe how to complete a transaction
using a QR code or a guest's unique identifier.

##### Using a scan-to-pay QR code

The following procedure describes how to complete a scan-to-pay
transaction using a QR code.

**To complete a transaction with a scan-to-pay QR code**

1. On the Toast POS app payment terminal screen, select
   Other payments from the payment types on the
   right side of the screen. The Select alternate payment
   type dialog appears. You may need to scroll down to
   locate the Other payments
   button.

   ![Payment terminal screen with "Other payments" emphasized.](https://doc.toasttab.com/doc/media/hot_scan_to_pay_otherpaymentsbutton.png)
2. Select your scan-to-pay QR code payment type and then select
   Done. The name of your payment type may
   differ from the example below.

   ![The "Select alternate payment type" dialog with the "Scan QR code" button emphasized.](https://doc.toasttab.com/doc/media/hot_scan_to_pay_SelectQRCode.png)
3. After you select your scan-to-pay payment type, your
   deviceâs camera or QR scanner is activated. Position the guestâs
   QR code in the area to be scanned by the Toast POS camera or
   barcode scanner.
4. After the QR code is scanned, the guest account has been
   identified and the payment workflow continues normally. For more
   information about payment workflows, see [Payment workflow overview](https://doc.toasttab.com/doc/platformguide/platformPwfOverview.html).

##### Using a unique guest identifier

Guests can be given a unique identifier to use at the POS during
checkout. You can find the guest's unique identifier in the API JSON
payload for a tender API transaction as the
`tenderIdentifier`. For examples of the tender API JSON
payload, see [Transaction descriptions](https://doc.toasttab.com/doc/devguide/apiTenderPmsIntegration.html#apiTenderTransactionDescriptionsPMS).

The following procedure describes how to process a transaction
using a guestâs unique identifier.

**To complete a transaction with a unique guest
identifier**

1. On the Toast POS app payment terminal screen, select
   Other payments from the available payment
   types on the right side of the screen. The Select
   alternate payment type dialog appears. You may need to
   scroll down to locate the Other payments
   button.

   ![Payment terminal screen with "Other payments" emphasized.](https://doc.toasttab.com/doc/media/hot_scan_to_pay_otherpaymentsbutton.png)
2. Select your scan-to-pay guest identifier payment type and
   then select Done. The name of your payment
   type may differ from the example below.

   ![Alternate payment type screen with "Guest ID" emphasized.](https://doc.toasttab.com/doc/media/hot_scan_to_pay_selectGuestId.png)
3. Enter your guestâs unique identifier and select
   Use Code.

   |  |
   | --- |
   | Note |
   | You may select Scan With Camera to continue the payment process by scanning the guestâs QR code if available. |

   !["Enter code" dialog with "Use code" button emphasized.](https://doc.toasttab.com/doc/media/hot_scan_to_pay_enterGuestId.png)
4. After the guest's unique identifier is entered, the payment
   workflow continues normally. For more information about payment
   workflows, see [Payment workflow overview](https://doc.toasttab.com/doc/platformguide/platformPwfOverview.html).


---

# Endpoint requirements - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiEndpointRequirements.html

### Endpoint requirements

The Toast platform publishes updates to a webhook endpoint as they
happen. It is possible, but not required, to use the same webhook endpoint
for multiple event categories. The specifics of the data posted to the
endpoint allow you to determine which event category generated the
update.

To work correctly with the Toast platform, a webhook
endpoint:

* MUST support the HTTP/1.1 protocol.
* MUST support HTTPS and use a valid TLS1.2 (or better)
  certificate.
* MUST support the POST method. Updates are published as a POST
  request.
* SHOULD ensure idempotency of update processing. When [retry
  support](https://doc.toasttab.com/doc/devguide/apiRetrySupport.html) is implemented, it will be possible for updates to be
  sent to your endpoint more than once and the endpoint must account for
  these redundant updates. Toast Integrations will provide more
  information on how to manage this situation at a future date.
* SHOULD return a 2xx response code for a successful POST as soon
  as possible and perform any internal processing asynchronously.
  Timeouts are imposed on POST requests to prevent unnecessary
  delays.
* MUST NOT return a 3xx response code. Redirects are not
  followed.
* SHOULD NOT return a 4xx response code. In general, the Toast
  platform will not resend updates after receiving a 4xx response code.
  The two exceptions will be for the 404 Page Not Found error and the
  429 Too Many Requests error. A 404 Page Not Found code can be returned
  by the proxies, gateways, or load balancers that manage a request on
  its way to a webhook endpoint. If the Toast platform receives a 404
  response code, it will assume that the webhook payload was not
  delivered to the endpoint and it will try to resend the update. See
  [Retry support](https://doc.toasttab.com/doc/devguide/apiRetrySupport.html) for more
  information.
* MUST be publicly accessible and should not require
  authentication. See [Message signing](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html) for information on verifying
  messages.


---

# Guest order fulfillment status webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGuestOrderFulfillmentStatusWebhook.html

### Guest order fulfillment status webhook

#### Guest order fulfillment status webhook overview

The `guest order fulfillment status` webhook sends a
message when a restaurant's kitchen moves an order from one stage in the
fulfillment process to the next stage. Updates from the `guest order
fulfillment status` webhook are only sent to the third-party online
ordering channel that the order was placed through. For example, Uber
Eatsâ¢ ordering service updates are only sent to Uber Eats, and
not to DoorDashâ¢ or Grubhubâ¢. For information on how
to enable ordering from third-party online ordering channels, see [Managing orders from third-party online ordering channels](https://doc.toasttab.com/doc/platformguide/platformManagingThirdPartyOnlineOrderingChannels.html).

Toast products and features that use guest order fulfillment
statuses include:

* [Order
  Ready Board](https://central.toasttab.com/s/article/Order-Ready-Board-Overview-Configuration)
* [Order ready
  messaging](https://doc.toasttab.com/doc/platformguide/platformUsingOrdersHub.html#platformConfiguringOrderReadyMessaging)
* [Marking KDS-fulfilled orders as Order Ready](https://doc.toasttab.com/doc/platformguide/platformUsingOrdersHub.html#platformMarkingKDSOrdersAsOrderReady)

#### Guest order fulfillment status webhook statuses

A guestâs order progresses through various statuses during the
fulfillment process. The initial state of all orders is
`RECEIVED`. The `guest order fulfillment status`
webhook sends a message when the orderâs status is updated to one of the
following statuses:

* `IN_PREPARATION`: The order is being actively
  worked on. This status corresponds to the [Active](https://doc.toasttab.com/doc/platformguide/platformUsingOrdersHub.html#platformActiveOrders) status in
  Orders Hub.
* `READY_FOR_PICKUP`: The order is ready for guest
  pickup. This status corresponds to the [Order ready](https://doc.toasttab.com/doc/platformguide/platformUsingOrdersHub.html#platformOrderReadyOrders) status in Orders Hub.
* `CLOSED`: The order is paid for and completed. This
  status corresponds to the [Completed](https://doc.toasttab.com/doc/platformguide/platformUsingOrdersHub.html#platformCompletedOrders) status in Orders Hub. If a
  closed order is reopened, this moves the order back to the
  `IN_PREPARATION` status.
* `VOIDED`: The order is voided. This status does not
  correspond to a status in Orders Hub.

When an order transitions from the `RECEIVED` status to
either the `IN_PREPARATION`, `READY_FOR_PICKUP`,
`CLOSED`, or `VOIDED` status, the webhook sends a
message. Only one webhook message is sent per order transition. For
example, when an order has been approved and transitions to the
`IN_PREPARATION` status, the webhook sends a message. The
webhook service does not send a message when an order has been updated,
such as when an additional drink is added to the order.

##### Sending a message when an order is marked as Order Ready

|  |
| --- |
| Note |
| The Kitchen Display System (KDS) must be configured and enabled to automatically mark KDS-fulfilled orders as Order Ready in Orders Hub. For more information, see [Marking KDS-fulfilled orders as Order Ready](https://doc.toasttab.com/doc/platformguide/platformUsingOrdersHub.html#platformMarkingKDSOrdersAsOrderReady). |

When an order is marked as Order Ready in
Orders Hub or is fulfilled by the Kitchen Display System (KDS), this
triggers the `guest order fulfillment status` webhook to send
a message. The message is sent to the third-party online ordering
channel that the order was placed through. For example, if a guest
places an order through DoorDash, the DoorDash driver is sent a message
notifying them that the guestâs order is now ready for pickup.

##### guestOrderStatusUpdated

The attributes in the `guestOrderStatusUpdated` eventâs
payload include:

| Value | Description |
| --- | --- |
| `eventGuid` | The unique Toast platform identifier for the webhook event.  data type: string |
| `orderGuid` | The unique Toast platform identifier for the order.  data type: string |
| `restaurantGuid` | A unique Toast POS identifier for the restaurant.  data type: string  format: uuid |
| `guestOrderStatus` | The current status of a guest's order in the restaurant fulfillment process.  * `IN_PREPARATION`: The order is being   actively worked on. * `READY_FOR_PICKUP`: The order is ready   for guest pickup. * `CLOSED`: The order is paid for and   marked as completed. * `VOIDED`:  + If the order is open, the order will be voided     and not be fulfilled.   + If the order has been fulfilled, the order will     be removed from Sales summary report and shown as     Voided in the Orders     report.  data type: string |
| `lastUpdated` | The date and time the orderâs `guestOrderStatus` was last updated. The date and time is presented in ISO 8601 format.  data type: string  format: date-time |
| `version` | This value is null. |

**Payload example for a guestOrderStatusUpdated event**

```
{
  "timestamp": "2023-11-09T18:06:59.394Z",
  "eventCategory": "guest_order_status",
  "eventType": "guestOrderStatusUpdated",
  "guid": "796818ae-9687-44ba-9a93-949d5a2361f3",
  "details": {
    "eventGuid": "9cdcc8d4-87d7-481e-8d31-d0916c47b575",
    "orderGuid": "465cd280-6890-41f5-8576-c7619634c56f",
    "restaurantGuid": "f9b71aec-d452-4b35-927e-5e473161f10d",
    "guestOrderStatus": "READY_FOR_PICKUP",
    "lastUpdated": "2023-11-09T18:06:59.383Z",
    "version": null
  }
}
```


---

# HTTP headers - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiHttpHeaders.html

### HTTP headers

Webhook updates include a set of HTTP headers, some of which are
standard HTTP headers and some of which are Toast-specific. This section
provides more details on both types.

* [Toast-specific HTTP headers](https://doc.toasttab.com/doc/devguide/apiHttpHeaders.html#apiToastSpecificHttpHeaders)
* [Standard HTTP headers](https://doc.toasttab.com/doc/devguide/apiHttpHeaders.html#apiStandardHttpHeaders)

#### Toast-specific HTTP headers

The following table describes the Toast-specific HTTP headers
included with webhook events.

| Header | Description |
| --- | --- |
| `Toast-Attempt-Number` | Indicates how many times the Toast platform has sent the webhook message.  The first time the Toast platform sends a webhook message, the `Toast-Attempt-Number` is `1`. If the Toast platform retries sending the message, it increments the number. For information about retrying webhook messages, see [Retry support](https://doc.toasttab.com/doc/devguide/apiRetrySupport.html). |
| `Toast-Signature` | As a security measure, all webhook messages contain a signature in the `Toast-Signature` HTTP header. A webhook endpoint uses the `Toast-Signature` header to confirm that a webhook update message is coming from a known, secure source. See [Message signing](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html) for more details. |
| `Toast-Event-Type` | The type of event that has occurred, for example, a `partner_added` event for the `partners` webhook or a `low_quantity` event for the `stock` webhook. |
| `Toast-Restaurant-External-ID` | If the triggering event has occurred at a restaurant, the GUID of that restaurant is included in the `Toast-Restaurant-External-ID` HTTP header, for example, if the webhook update is for a `low_quantity` event, this header identifies the restaurant where the inventory quantity is low. This header is omitted if the triggering event has not occurred at a restaurant, for example, the header is omitted for the Partners webhook event types because those events are triggered by changes to a partner's status, not changes to a restaurant's status. |
| `Toast-Event-Category` | The event category, for example, `partners` or `stock`. |

#### Standard HTTP headers

In addition to the Toast-specific HTTP headers, webhook events
include the standard HTTP headers shown in the table below. For more
detailed information on these headers, see <https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers>:

| Header | Value |
| --- | --- |
| `Accept-Encoding` | `gzip,deflate` |
| `Connection` | `close` |
| `Content-Length` | The size of the message body, in bytes. |
| `Content-Type` | `application/json` |
| `Host` | The domain name and port of the server that is listening for webhook events. Generated from the partner URI that is specified when a webhook subscription is created. |
| `User-Agent` | `Apache-HttpClient/4.5.10 (Java/1.8.0_212)` |


---

# Menus webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMenusWebhook.html

### Menus webhook

The `menus` webhook sends a message when a restaurant that
uses your integration has published a change to its menus. The message
payload includes the GUID of the affected restaurant and a timestamp for
when the restaurant last published its menus. Having this information allows
your integration client to [request a new
menu](https://doc.toasttab.com/openapi/menus/overview/), keeping your integration in sync with the Toast platform. The
`menus` webhook is the preferred method for determining if the
menu data you have for a restaurant has gone stale.

If you are using the `menus` webhook, Toast support
recommends also polling the `/metadata` endpoint of the menus API
every 30 minutes. This provides a backup in case your integration misses a
message from the `menus` webhook. The `/metadata`
endpoint provides an alternative method for determining if a restaurant has
published changes to its menu. Using the `/metadata` endpoint,
you can retrieve the most recent date and time that a restaurant's menu was
published. For more information on the `/metadata` endpoint, see
[Determining if a restaurant's menu data has gone stale](https://doc.toasttab.com/doc/devguide/apiDeterminingIfYourMenuJsonIsOutdated_V2.html).

Menus webhook messages follow the [standard message data schema](https://doc.toasttab.com/doc/devguide/apiMessageDataSchema.html). When
a message is published to your webhook endpoint for the `menus`
event category, the `eventCategory` value is set to
`menus`. Currently, `menus_updated` is the only
`eventType` for the `menus` event category. For
details on the payload for this event type, see [menus\_updated](https://doc.toasttab.com/doc/devguide/apiMenusWebhook.html#apiMenusUpdated).

#### menus\_updated

A restaurant that uses your integration has published a change to
its menus.

Attributes in the `menus_updated` event's payload
include:

| Value | Description |
| --- | --- |
| `restaurantGuid` | A unique Toast POS identifier for the restaurant whose menu has changed.  data type: string  format: uuid |
| `publishedDate` | The most recent date and time that the menus for this restaurant were published. This timestamp is in the UTC time zone (not the restaurant's local timezone). The date and time are expressed in ISO 8601 format.  data type: string |

**Payload example for the menus\_updated event**

```
{
    "timestamp": â2019-09-16T21:01:53.685Zâ,
    "eventCategory": "menus",
    "eventType": "menus_updated",
    "guid": "00000000-0000-0000-0000-000000000000",
    "details": {
        "restaurantGuid": "00000000-1111-2222-3333-444444444444",
        "publishedDate": "2021-10-06T20:11:01.737Z"
    }
}
```


---

# Message data schema - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMessageDataSchema.html

### Message data schema

Webhook messages are always sent as JSON payloads in the body of
POST requests. The message is sent with `Content-Type:
application/json`.

Regardless of the event category, the data in the message that is
published to your endpoint follows the same schema:

```
{
    "timestamp": â<ISO formatted timestamp in UTC>â,
    "eventCategory": "<eventCategory>",
    "eventType": "<eventType>",
    "guid": "<eventGuid>",
    "details": {
        <eventType specific payload>
  }
}
```

For reference information on the payload returned for specific event
categories, see [Webhooks reference](https://doc.toasttab.com/doc/devguide/apiWebhooksReference.html).


---

# Message signing - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMessageSigning.html

### Message signing

The Toast platform implements message signing that allows you to
validate the source of data sent to your webhook endpoint.

|  |
| --- |
| Note |
| Using message signing to validate a webhook message is not required, however, it is highly recommended. |

Using the secret key that is generated when your webhook
subscription is created, and the body and timestamp of the message, a
signature for each message is computed and published in the
`Toast-Signature` HTTP header on the POST request to your
endpoint.

|  |
| --- |
| Note |
| The secret key is unique for each webhook subscription within an environment. For example, a `stock` webhook subscription has a different secret key than a `partner` webhook subscription for the same integration partner and within the same environment. For more information about webhook subscriptions, see [Webhook basics](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html). For more information about Toast API environments, see [Environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html). |

To validate the message, you compute the signature on your side,
using the same process that the Toast platform uses to compute the
signature. If the signatures match, then the message is valid and
trustworthy.

The signature is derived by concatenating the body and timestamp of
the webhook message into a string. This string is hashed and then signed
using the HMAC-SHA256 algorithm and the secret key. The following is a
code sample for computing the signature:

```
import javax.crypto.spec.SecretKeySpec;
import javax.crypto.Mac;
import javax.xml.bind.DatatypeConverter;
import java.nio.charset.StandardCharsets;

String HMAC = "HmacSHA256";

String getSignature(String secret, String body, String timestamp) {
  SecretKeySpec signingKey = new SecretKeySpec(secret.getBytes(), HMAC);
  try {
      String signature = body + timestamp;
      Mac mac = Mac.getInstance(HMAC);
      mac.init(signingKey);
      byte[] rawHmac = mac.doFinal(signature.getBytes(StandardCharsets.UTF_8));
      return DatatypeConverter.printBase64Binary(rawHmac);
  } catch (Exception e) {
      logger.warn("Failed to generate Webhook Signature", e);
      return null;
  }
}
```


---

# Packaging preferences configuration webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiPackagingPreferencesConfigWebhook.html

### Packaging preferences configuration webhook

The packaging preferences configuration webhook sends you a message
when a restaurant updates its packaging preferences in Toast Web. The
message payload includes:

* The GUID of the restaurant changing its packaging
  preferences.
* The time stamp of the change.
* Details of what was changed.

For information on how a restaurant can configure
packaging preferences, see this [Toast
Central article](https://central.toasttab.com/s/article/Configure-Packaging-Preferences-for-Takeout-and-Delivery).

When a restaurant sets their packaging preferences, and you receive
the `packaging_updated` webhook message with the updates, you can
submit orders using the [orders
API](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#apiOrdersPackagingPreferencesUsingTheOrdersApi) with packaging preferences.

Packaging preferences configuration webhook messages follow the [standard message
data schema](https://doc.toasttab.com/doc/devguide/apiMessageDataSchema.html). When a message is published to your webhook endpoint
for the `packaging` event category, the
`eventCategory` value is set to `partner` and the
`eventType` is set to `packaging_updated`.

#### packaging\_updated

A restaurant using your integration has updated its packaging
preferences configuration in Toast Web.

The packaging preferences configuration webhook
`eventType` is `packaging_updated`. The webhook
payload is similar to the packaging preferences response data from the
[packagingConfig
endpoint](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html).

Attributes in the `packaging_updated` event's payload
include:

| Value | Description |
| --- | --- |
| `packagingConfig` | The parent object that holds the following information about the specific packaging preference configurations.  data type: string |
| `enabled` | Indicates whether the restaurant is currently using packaging preferences in this object. If `TRUE`, you display the packaging options to guests in your ordering interface. If `FALSE`, do not display the options.  data type: string |
| `items` | The list of available packaging items. The `items` array contains the following fields and values:  * `id`: The unique identifier for a packaging   item. The id is required to apply packaging preferences when   you submit an order using the [orders   API](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#apiOrdersPackagingPreferencesUsingTheOrdersApi). * `itemTypes`: The packaging categories an   item can belong to, such as napkins or condiments. One   packaging item may qualify as several different   `itemTypes`. For example, an item named "to-go   itemsâ that has `itemTypes` of napkins and   utensils. * `guestDisplayName`: An alternative name the   restaurant team can configure for a packaging item. For   example, you may select `itemTypes` for   `CONDIMENTS` but have your guests see the   following message: âKetchup and mustard.â * `guestInclusionType`: Defines how the   restaurant guest should interact with the packaging   preference. The available values are:  + `OPT_IN`: A guest must complete an     action to include packaging preferences, such as     selecting a checkbox.   + `OPT_OUT`: A guest must complete an     action to opt out of packaging, such as de-selecting a     checkbox. * `guestDescription`: Further describes the   packaging item, in addition to the   `guestDisplayName`. For example, if the   `itemType` is `CONDIMENTS`, and the   `guestDisplayName` is "Ketchup and mustard", the   `guestDescription` could show "Includes ketchup   and mustard only."  data type: string |
| `guestMessage` | An optional message configured by the restaurant that you show to guests on your ordering interface.  data type: string |

**Payload example for the menus\_updated event**

```
{
 "timestamp": "2024-12-10T17:47:36.044Z",
 "eventCategory": "packaging",
 "eventType": "packaging_updated",
 "guid": "ae839da8-a506-498e-afb8-ff7d7dbd7231",
 "details": {
   "packagingConfig": {
     "enabled": true,
     "items": [
       {
         "id": "ccdbcbf8-5c5b-4158-ae61-3a6da8bc847d",
         "itemTypes": [
           "CONDIMENTS",
         ],

         "guestDisplayName": "Ketchup and mustard",
         "guestInclusionType": "OPT_IN",
         "guestDescription": "Includes ketchup and mustard only."
       }
     ],

     "guestMessage": "Choose your packaging preferences to complete your order. "
   }
 }
}
```


---

# Partners webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html

### Partners webhook

The `partners` webhook allows you to receive updates
when:

* Your integration is added to a restaurant location.
* Your integration is removed from a restaurant location.
* Your integration's settings in the Toast POS system are updated,
  for example, when the `externalGroupRef` or
  `externalRestaurantRef` property is updated.

Partners webhook messages follow the [standard message data schema](https://doc.toasttab.com/doc/devguide/apiMessageDataSchema.html). When
a message is published to your webhook endpoint for the `partner`
event category, the `eventCategory` value is set to
`partner` and the `eventType` is set to one of the
following:

* [partner\_added](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html#apiPartnerAdded)
* [partner\_removed](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html#apiPartnerDeleted)
* [partner\_updated](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html#apiPartnerUpdated)

The updates published through the `partner` event category
are in addition to the emails you currently receive when your integration is
added to or removed from a restaurant location. For more information about
how to trigger a webhook event in the `partner` category, see
[this
Toast Central article](https://central.toasttab.com/s/article/Toast-Partner-Connect-Setting-Up-Integrations-with-Toast).

#### partner\_added

Your integration has been added to a new restaurant location.

Attributes in the `partner_added` event's payload
include:

| Value | Description |
| --- | --- |
| `restaurantGuid` | A unique Toast POS identifier for the restaurant.  data type: string  format: uuid |
| `managementGroupGuid` | A unique Toast POS identifier for a group of restaurants. The management group GUID will be the same for all restaurants within the same group. The management group GUID will be null if a restaurant location does not belong to a restaurant management group.  May be null.  data type: string  format: uuid |
| `restaurantName` | The human-readable name of the restaurant, set on the Restaurant Info screen of Toast Web.  data type: string |
| `locationName` | The name of a specific restaurant location, set on the Restaurant Info screen of Toast Web. For example, a restaurant group might assign a location name such as `Palo Alto` or `Boston` to identify a specific location. Note that this field is not required by the Toast platform, so it may be empty.  May be null.  data type: string |
| `externalGroupRef` | An identifier for the restaurant group that is recognized by the the partner that made the request to the `/restaurants` endpoint. This information is entered by the restaurant administrator. If you need information about the restaurant group in this data string, you instruct the restaurant administrator to enter it in the Toast POS system configuration for the integration partner connection.  May be null.  data type: string |
| `externalRestaurantRef` | An identifier for the restaurant location that is recognized by the partner that made the request to the `/restaurants` endpoint. This information is entered by the restaurant administrator. If you need information about the restaurant location in this data string, you instruct the restaurant administrator to enter it in the Toast POS system configuration for the integration partner connection.  May be null.  data type: string |
| `modifiedDate` | The most recent date and time that the partner connection was edited. The date and time are expressed in milliseconds from the UNIX epoch, January 1, 1970 00:00:00 UTC.  data type: string  format: date-time |
| `createdDate` | The date and time that the partner connection was created. The date and time are expressed in milliseconds from the UNIX epoch, January 1, 1970 00:00:00 UTC.  data type: string  format: date-time |
| `isoModifiedDate` | The most recent date and time that the partner connection was edited. The date and time are expressed in ISO 8601 format.  data type: string |
| `isoCreatedDate` | The date and time that the partner connection was created. The date and time are expressed in ISO 8601 format.  data type: string |
| `createdByFirstName` | The first name of the restaurant employee who added the integration to the restaurant location.  May be null.  data type: string |
| `createdByLastName` | The last name of the restaurant employee who added the integration to the restaurant location.  May be null.  data type: string |
| `createdByEmailAddress` | The email address of the restaurant employee who added the integration.  May be null.  data type: string |
| `createdByPhoneNumber` | The phone number of the restaurant employee who added the integration.  May be null.  data type: string |
| `restaurantPhoneNumber` | The phone number of the restaurant location.  May be null.  data type: string |
| `restaurantAddressLine1` | The first line of the restaurant's address.  May be null.  data type: string |
| `restaurantAddressLine2` | The second line of the restaurant's address.  May be null.  data type: string |
| `restaurantCity` | The city the restaurant location resides in.  May be null.  data type: string |
| `restaurantState` | The state the restaurant location resides in.  May be null.  data type: string |
| `restaurantZipCode` | The zip code for the restaurant location.  May be null.  data type: string |
| `restaurantCountryCode` | The ISO 3166-2 country code for the restaurant location.  data type: string |
| `restaurantTimezone` | The IANA time zone identifier of the restaurant location. For example, `America/New_York`.  data type: string |
| `restaurantLatitude` | The north/south geographic coordinate of the restaurant, in decimal degrees.  May be null.  data type: number |
| `restaurantLongtitude` | The east/west geographic coordinate of the restaurant, in decimal degrees.  May be null.  data type: number |

**Payload example for the partner\_added event**

```
{
    "timestamp": â2019-09-16T21:01:53.685Zâ,
    "eventCategory": "partner",
    "eventType": "partner_added",
    "guid": "00000000-0000-0000-0000-000000000000",
    "details": {
        "restaurantGuid": "00000000-1111-2222-3333-444444444444",
        "managementGroupGuid": "55555555-6666-7777-8888-999999999999",
        "restaurantName": "Toast Grill & Tap",
        "locationName": "Fenway, Boston, MA",
        "externalGroupRef": null,
        "externalRestaurantRef": null,
        "modifiedDate": 1568667880240,
        "createdDate": 1568667880240,
        "isoModifiedDate": â2019-09-16T21:01:53.685Zâ,
        "isoCreatedDate": â2019-09-16T21:01:53.685Zâ,
        "createdByFirstName": "Toast",
        "createdByLastName": "Admin",
        "createdByEmailAddress": "admin@toasttab.com",
        "createdByPhoneNumber": null,
        "restaurantPhoneNumber": "6175551234",
        "restaurantAddressLine1": "401 Park Drive",
        "restaurantAddressLine2": null,
        "restaurantCity": "Boston",
        "restaurantState": "MA",
        "restaurantZipCode": "02215",
        "restaurantCountryCode": "US",
        "restaurantTimezone": "America/New_York",
        "restaurantLatitude": "42.344257",
        "restaurantLongitude": "-71.102181"
    }
}
```

#### partner\_removed

Your integration has been removed from a new restaurant
location.

The payload for the `partner_removed` webhook event is
identical to the payload for the `partner_added` event. See
[partner\_added](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html#apiPartnerAdded) for
details.

**Payload example for the partner\_removed event**

```
{
    "timestamp": â2019-09-16T21:22:12.825Zâ,
    "eventCategory": "partner",
    "eventType": "partner_removed",
    "guid": "00000000-0000-0000-0000-000000000000",
    "details": {
        "restaurantGuid": "00000000-1111-2222-3333-444444444444",
        "managementGroupGuid": "55555555-6666-7777-8888-999999999999",
        "restaurantName": "Toast Grill & Tap",
        "locationName": "Fenway, Boston, MA",
        "externalGroupRef": null,
        "externalRestaurantRef": null,
        "modifiedDate": 1568667880240,
        "createdDate": 1568667880240,
        "isoModifiedDate": â2019-09-16T21:01:53.685Zâ,
        "isoCreatedDate": â2019-09-16T21:01:53.685Zâ,
        "createdByFirstName": "Toast",
        "createdByLastName": "Admin",
        "createdByEmailAddress": "admin@toasttab.com",
        "createdByPhoneNumber": null,
        "restaurantPhoneNumber": "6175551234",
        "restaurantAddressLine1": "401 Park Drive",
        "restaurantAddressLine2": null,
        "restaurantCity": "Boston",
        "restaurantState": "MA",
        "restaurantZipCode": "02215",
        "restaurantCountryCode": "US",
        "restaurantTimezone": "America/New_York",
        "restaurantLatitude": "42.344257",
        "restaurantLongitude": "-71.102181"
    }
}
```

#### partner\_updated

Settings have been updated for your integration, for example, the
`externalGroupRef` or `externalRestaurantRef`
configuration has been updated.

The payload for the `partner_updated` webhook event is
identical to the payload for the `partner_added` event. See
[partner\_added](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html#apiPartnerAdded) for
details.

**Payload example for the partner\_updated event**

```
{
    "timestamp": â2019-09-16T21:14:02.142Zâ,
    "eventCategory": "partner",
    "eventType": "partner_updated",
    "guid": "00000000-0000-0000-0000-000000000000",
    "details": {
        "restaurantGuid": "00000000-1111-2222-3333-444444444444",
        "managementGroupGuid": "55555555-6666-7777-8888-999999999999",
        "restaurantName": "Toast Grill & Tap",
        "locationName": "Fenway, Boston, MA",
        "externalGroupRef": "toastgrill",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
        "externalRestaurantRef": "boston01",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "modifiedDate": 1568667977351,
        "createdDate": 1568667880240,
        "isoModifiedDate": "2019-09-16T21:14:02.142Z",
        "isoCreatedDate": "2019-09-16T21:01:53.685Z",
        "createdByFirstName": "Toast",
        "createdByLastName": "Admin",
        "createdByEmailAddress": "admin@toasttab.com",
        "createdByPhoneNumber": null,
        "restaurantPhoneNumber": "6175551234",
        "restaurantAddressLine1": "401 Park Drive",
        "restaurantAddressLine2": null,
        "restaurantCity": "Boston",
        "restaurantState": "MA",
        "restaurantZipCode": "02215",
        "restaurantCountryCode": "US",
        "restaurantTimezone": "America/New_York",
        "restaurantLatitude": "42.344257",
        "restaurantLongitude": "-71.102181"
    }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html#co-d1e1581578677079) | The `externalGroupRef` field has been updated. |
| [2](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html#co-d1e1601578677079) | The `externalRestaurantRef` field has been updated. |


---

# Retry support - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRetrySupport.html

### Retry support

The Toast platform attempts to resend updates to a webhook endpoint
in the following circumstances:

* There is a timeout when connecting to, sending to, or receiving
  from the webhook endpoint. See [Timeouts](https://doc.toasttab.com/doc/devguide/apiTimeouts.html) for more information.
* The endpoint returns an HTTP 404 (not found) response
  code.
* The endpoint returns an HTTP 429 (too many requests) response
  code.
* The endpoint returns an HTTP 5xx response code.

For the conditions above, the Toast platform will wait five minutes
and then resend the update. If the resent update also results in one of
the conditions above, then the Toast platform will wait 10 minutes and
resend the update a second time. If the second resend attempt fails, the
Toast platform does not send the update again.

|  |
| --- |
| Note |
| Restaurant availability updates will retry five times in a minute with exponential back-off. |

The Toast platform does not attempt to resend an update if:

* The endpoint returns an HTTP 4xx response code other than 404
  (not found) or 429 (too many requests).
* The endpoint returns an HTTP 3xx response code.


---

# Restaurant availability webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRxAvailabilityWebhook.html

### Restaurant availability webhook

The `restaurant_availability` webhook allows you to receive
real-time information about a restaurant's ability to accept online orders.
The `restaurant_availability` webhook sends a message
when:

* The Toast Autofireâ¢ device has stopped approving online
  orders.
* A third-party online ordering channel (for example, Uber
  Eatsâ¢, DoorDashâ¢, or Grubhubâ¢) was
  turned on or off, or snoozed (paused). A channel may be paused for 20 or
  40 minutes, or until the start of the restaurant's online ordering hours
  for the next day.

Restaurant availability webhook messages follow the [standard message
data schema](https://doc.toasttab.com/doc/devguide/apiMessageDataSchema.html). The `restaurant_availability` webhook has
two event categories:

* `restaurant_availability`
* `restaurant_availability_toggle`

When you receive a webhook event for the
`restaurant_availability` event category, the
`eventCategory` value is set to
`restaurant_availability` and the `eventType` is set
to one of the following:

* [availability\_online](https://doc.toasttab.com/doc/devguide/apiRxAvailabilityWebhook.html#apiRxAvailabilityOnline)
* [availability\_offline](https://doc.toasttab.com/doc/devguide/apiRxAvailabilityWebhook.html#apiRxAvailabilityOffline)

When you receive a webhook event for the
`restaurant_availability_toggle` event category, the
`eventCategory` value is set to
`restaurant_availability_toggle` and the `eventType`
is set to one of the following:

* [toggle\_availability\_online](https://doc.toasttab.com/doc/devguide/apiRxAvailabilityWebhook.html#apiRxAvailabilityOnlineToggle)
* [toggle\_availability\_offline](https://doc.toasttab.com/doc/devguide/apiRxAvailabilityWebhook.html#apiRxAvailabilityOfflineToggle)

|  |
| --- |
| Note |
| Multiple webhook messages can be sent from Toast depending on the scenario. |

For more information about webhooks, see [Webhook basics](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html) and [Message data schema](https://doc.toasttab.com/doc/devguide/apiMessageDataSchema.html).

#### Restaurant availability status overview

A restaurantâs availability status is one of the
following:

* `ONLINE`:

  + The restaurantâs autofire device is online and approving
    orders.
  + The restaurant has stopped snoozing ordering from a
    third-party online ordering channel. The restaurant is accepting
    online orders from the channel.
  + The restaurant has turned on a third-party ordering
    channel and is accepting online orders from the channel.
* `OFFLINE`:

  + The restaurantâs autofire device is offline and has
    stopped approving orders.
  + The restaurant has started snoozing ordering from a
    third-party online ordering channel. The restaurant is not
    accepting online orders from the channel.
  + The restaurant has turned off a third-party ordering
    channel and is not accepting online orders from the
    channel.

  When a restaurant is `OFFLINE`, you can still place
  online orders via the orders API. You will receive a 200 response
  and the restaurant will see the order when they come back
  `ONLINE`. Toast support recommends waiting to place
  orders until the restaurant's status is `ONLINE`.

|  |
| --- |
| Note |
| Placing orders while the restaurant is offline can cause orders to not fire to the kitchen and may result in the restaurant becoming overwhelmed with missed orders once back online. This can contribute to a poor guest ordering experience. |

#### Autofire device stopped approving online orders

The webhook service checks for updates when:

* An `ONLINE` restaurant is `OFFLINE`. Gone
  `OFFLINE` means the restaurantâs orders are pending. No
  order has been approved and autofired for fulfillment in the last five
  minutes. This indicates that there may be a network issue or other
  technical problems at the restaurant. For more information, see [Troubleshoot
  Your Autofire Device](https://central.toasttab.com/s/article/Troubleshooting-your-Autofire-Device).
* An `OFFLINE` restaurant is now `ONLINE`.
  Coming back `ONLINE` means the restaurant has approved and
  autofired at least one order in the last five minutes.

The `restaurant_availability` webhook sends updates when
a restaurant's autofire device has stopped auto-approving orders for five
minutes. The restaurant availability service runs every minute to check if
at least one order has been abandoned, meaning it has not approved and
autofired an order within a five minute period. For example, if your guest
placed an order at 9:02 AM, and your restaurant stopped auto-approving
orders at 9:02 AM, the service runs at 9:03 AM but does not fire a webhook
event because only one minute has passed since the order was created and
not approved. When the service runs at 9:07 AM and the order was still not
been approved, the webhook event fires. For more information about
autofiring orders, see [Setting
up Order Auto-Firing](https://central.toasttab.com/s/article/How-do-I-ensure-scheduled-orders-and-online-orders-fire-automatically-to-the-kitchen-1492811100407).

|  |
| --- |
| Note |
| If you do not receive any `restaurant_availability` webhook events, the restaurant should be considered `ONLINE`. This assumes you are respecting the restaurantâs available operating hours for both ASAP and scheduled orders placed for future fulfillment. |

Restaurants using Toast Online Ordering with [Manual
Approval or Approval Rules](https://central.toasttab.com/s/article/Getting-Started-Online-Ordering#approvalmode) configured do not trigger webhook events
with the AVAILABILITY\_OFFLINE `reasonKey`. Only restaurants
that choose to âSend orders directly to the kitchenâ are included in the
`ONLINE` and `OFFLINE` webhook alerts for this
scenario. Restaurants can configure their approval options in Toast Web.
These settings do not apply to online ordering integration channels.
Orders sent via the orders API are immediately autofired to the kitchen.
For more information, see [Orders API limitations](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html#ordersAPILimitations).

|  |
| --- |
| Note |
| This limitation does not apply to the scenario when a restaurant turns a third-party online ordering channel on or off. |

##### availability\_online

The restaurant is online and can accept orders. Attributes in the
`availability_online` eventâs payload include:

| Value | Description |
| --- | --- |
| `restaurantGuid` | A unique Toast POS identifier for the restaurant.  data type: string  format: uuid |
| `status` | `ONLINE`  data type: string |
| `reasonKey` | `AVAILABILITY_ONLINE`  The machine-readable reason why the restaurant is available to accept online orders.  data type: string |
| `reason` | `Restaurant is approving online orders`  The human-readable reason why the restaurant is available to accept orders.  data type: string |

**Payload for an availability\_online event when a restaurant is
online and approving orders**

```
{
  "timestamp": "2021-08-23T16:40:00.063Z",
  "eventCategory": "restaurant_availability",
  "eventType": "availability_online",
  "guid": "bf12cb0a-173a-4e66-bd3c-8121d4a5287f",
  "details": {
    "restaurantGuid": "27d35c6a-7068-49f7-bee0-25e654e1227a",
    "status": "ONLINE",
    "reasonKey": "AVAILABILITY_ONLINE",
    "reason": "Restaurant is approving online orders"
  }
}
```

##### availability\_offline

The restaurant is offline and should not receive orders.
Attributes in the `availability_offline` eventâs payload
include:

| Value | Description |
| --- | --- |
| `restaurantGuid` | A unique Toast POS identifier for the restaurant.  data type: string  format: uuid |
| `status` | `OFFLINE`  data type: string |
| `reasonKey` | `AVAILABILITY_OFFLINE`  The machine-readable reason why the restaurant is unavailable to accept online orders.  data type: string |
| `reason` | `Restaurant cannot accept online orders`  The human-readable reason why the restaurant is unavailable to accept online orders.  data type: string |

**Payload for an availability\_offline event when a restaurant is
offline and not approving orders**

```
{
  "timestamp": "2021-08-23T16:40:00.063Z",
  "eventCategory": "restaurant_availability",
  "eventType": "availability_offline",
  "guid": "bf12cb0a-173a-4e66-bd3c-8121d4a5287f",
  "details": {
    "restaurantGuid": "27d35c6a-7068-49f7-bee0-25e654e1227a",
    "status": "OFFLINE",
    "reasonKey": "AVAILABILITY_OFFLINE",
    "reason": "Restaurant cannot accept online orders"
  }
}
```

#### Third-party online ordering channel has been manually turned on or off

A third-party online ordering channel is any online ordering channel
such as Uber Eats, DoorDash, or Grubhub. Restaurants can turn a
third-party online ordering channel on or off in Toast Web. The default
setting for an online ordering channel is `ONLINE`. For more
information about turning on or off a third-party online ordering channel,
see [Managing orders from third-party online ordering channels](https://doc.toasttab.com/doc/platformguide/platformManagingThirdPartyOnlineOrderingChannels.html).

|  |
| --- |
| Note |
| A webhook message is sent every time an online ordering channel is turned on or off. |

* If a restaurantâs status is `ONLINE`, this means that
  the restaurant has manually turned on online ordering for that
  ordering channel. An `ONLINE` status means the restaurant
  is available for guests to place orders.
* If a restaurantâs status is `OFFLINE`, this means
  that the restaurant has manually turned off online ordering for that
  ordering channel. An `OFFLINE` status means the restaurant
  is unavailable for guests to place orders.

|  |
| --- |
| Note |
| If the restaurant has manually turned on ordering from third-party online ordering channels on Toast Web, but the restaurant's availability status is showing still `OFFLINE`, check if the autofire device is online and operational. For more information, see [Troubleshoot Your Autofire Device](https://central.toasttab.com/s/article/Troubleshooting-your-Autofire-Device). |

##### toggle\_availability\_online

The restaurant has turned on online ordering for that ordering
channel. Attributes in the `toggle_availability_online`
eventâs payload include:

| Value | Description |
| --- | --- |
| `restaurantGuid` | A unique Toast POS identifier for the restaurant.  data type: string  format: uuid |
| `status` | `ONLINE`  data type: string |
| `reasonKey` | `TOGGLE_ENABLED`  The machine-readable reason why the restaurant is available to accept online orders.  data type: string |
| `reason` | `User enabled integration`  The human-readable reason why the restaurant is available to accept orders.  data type: string |

**Payload for a toggle\_availability\_online event when a
restaurant is online and has turned on online ordering**

```
{
  "timestamp": "2021-08-23T16:40:00.063Z",
  "eventCategory": "restaurant_availability_toggle",
  "eventType": "toggle_availability_online",
  "guid": "bf12cb0a-173a-4e66-bd3c-8121d4a5287f",
  "details": {
    "restaurantGuid": "27d35c6a-7068-49f7-bee0-25e654e1227a",
    "status": "ONLINE",
    "reasonKey": "TOGGLE_ENABLED",
    "reason": "User enabled integration"
  }
}
```

##### toggle\_availability\_offline

The restaurant has turned off online ordering for that ordering
channel. Attributes in the `toggle_availability_offline`
eventâs payload include:

| Value | Description |
| --- | --- |
| `restaurantGuid` | A unique Toast POS identifier for the restaurant.  data type: string  format: uuid |
| `status` | `OFFLINE`  data type: string |
| `reasonKey` | `TOGGLE_DISABLED`  The machine-readable reason why the restaurant is unavailable to accept online orders.  data type: string |
| `reason` | `User disabled integration`  The human-readable reason why the restaurant is unavailable to accept orders.  data type: string |

**Payload for a toggle\_availability\_offline event when a
restaurant is offline and has turned off online ordering**

```
{
  "timestamp": "2021-08-23T16:40:00.063Z",
  "eventCategory": "restaurant_availability_toggle",
  "eventType": "toggle_availability_offline",
  "guid": "bf12cb0a-173a-4e66-bd3c-8121d4a5287f",
  "details": {
    "restaurantGuid": "27d35c6a-7068-49f7-bee0-25e654e1227a",
    "status": "OFFLINE",
    "reasonKey": "TOGGLE_DISABLED",
    "reason": "User disabled integration"
  }
}
```

#### Restaurant availability webhook statuses

For a restaurant to be available to accept online orders, the online
ordering channel toggle and the autofire device must be on (indicating the
restaurant's health as being online). Any combination where the online
ordering channel toggle and the autofire device are not both on results in
the restaurant being offline and unable to accept online orders. The table
below outlines the combination of online ordering toggle availability with
the autofire device status and the resulting restaurant status.

| Online ordering channel toggle availability | Autofire device status | Restaurant availability status |
| --- | --- | --- |
| `toggle_availability_online`  The online ordering channel toggle is on. | `availability_online`  Restaurant health is online. | The restaurant is online and available to accept online orders. |
| `toggle_availability_online`  The online ordering channel toggle is on. | `availability_offline`  Restaurant health is offline. | The restaurant is offline and not available to accept online orders. |
| `toggle_availability_offline`  The online ordering channel toggle is off. | `availability_online`  Restaurant health is online. | The restaurant is offline and not available to accept online orders. |
| `toggle_availability_offline`  The online ordering channel toggle is off. | `availability_offline`  Restaurant health is offline. | The restaurant is offline and not available to accept online orders. |

#### Testing the restaurant availability webhook

##### Setup and testing

Before testing, you need an Android tablet or emulator and the
most recent Toast APK version in a Sandbox environment. Set up your
tablet or emulator as an autofire device. For more information, see
[Setting
Up an Auto-fire Device](https://central.toasttab.com/s/article/How-do-I-ensure-scheduled-orders-and-online-orders-fire-automatically-to-the-kitchen-1492811100407). Submit a test API order using the Toast
orders API to ensure the autofire device is configured correctly.

The following procedures describe how to trigger
`OFFLINE` and `ONLINE` webhook events.

|  |
| --- |
| Note |
| Restaurants must choose to the âSend orders directly to the kitchenâ approval rule to receive the `ONLINE` and `OFFLINE` webhook events. For more information, see [Get Started With Online Ordering](https://central.toasttab.com/s/article/Getting-Started-Online-Ordering#approvalmode). |

**To trigger an `OFFLINE` webhook event**

1. Ensure that your Toast POS device is online and you have
   configured an autofire device.
2. Submit a test order using the orders API. For more
   information, see [Orders API overview](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html).
3. Disable the autofire device. For more information on how to
   disable your autofire device, see [Set
   up Order Auto-firing](https://central.toasttab.com/s/article/How-do-I-ensure-scheduled-orders-and-online-orders-fire-automatically-to-the-kitchen-1492811100407#Enabling_Order_Auto-Firing_In_Toasts_Back-end).
4. Submit another test order. After five minutes, you receive an
   `OFFLINE` webhook event.

**To trigger an `ONLINE` webhook event**

1. Enable the autofire device.
2. Submit another test order using the orders API. After one
   minute, you receive an `ONLINE` webhook event.


---

# Restaurant online ordering schedule webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiRxOnlineOrderingScheduleWebhook.html

### Restaurant online ordering schedule webhook

|  |
| --- |
| Note |
| This feature is in limited release. |

The restaurant online ordering schedule webhook allows you to receive
real-time updates when a restaurant saves and publishes changes to their
online ordering schedule. Typically, online ordering partners check a
restaurantâs online ordering schedule 24 hours before, which means that they
may miss scheduling changes between checks. For example, if you check a
restaurant's online ordering schedule at 6 AM every morning, but the
restaurant makes a change at 8 AM, you will miss this scheduling change and
your platform will display the restaurant's old online ordering schedule.
For more information on how to get a restaurantâs online ordering schedule,
see [Getting online ordering schedules](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html).

The restaurant online ordering schedule webhook checks for updates to
a restaurantâs online ordering schedule, such as when they:

* Make changes to their online ordering schedule for takeout, and
  first and third-party delivery orders
* Add, edit, or remove overrides
* Configure the time when they will stop accepting online
  orders

|  |
| --- |
| Note |
| To trigger a webhook update, you must save and publish your online ordering schedule changes. |

The restaurant online ordering schedule webhook messages follow the
[standard
message data schema](https://doc.toasttab.com/doc/devguide/apiMessageDataSchema.html). When a message is published to your webhook
endpoint for the `order_schedule` event category, the
`eventCategory` value is set to `ordering_schedule`
and the `eventType` is set to
`ordering_schedule_updated`.

#### Configuring online ordering schedules

You can configure your online ordering schedule and overrides in
Toast Web. Choose Takeout & delivery > Online ordering
hours to open the Online ordering hours
section. For more information, see [Online ordering hours overview](https://doc.toasttab.com/doc/platformguide/adminOnlineOrderingScheduleOverview.html).

#### ordering\_schedule\_updated

Attributes in the `ordering_schedule_updated` eventâs
payload include:

| Value | Description |
| --- | --- |
| `restaurantGuid` | A unique Toast POS identifier for the restaurant.  data type: string  format: uuid |
| `orderingSchedule` | The parent object that holds information about the days and times when the restaurant location accepts online orders. |
| `servicePeriods` | An object that contains information about the restaurant's online ordering schedule.  The `servicePeriods` array contains the following fields and values:  * `diningOptionBehavior`  `TAKE_OUT` or `DELIVERY`  The dining behavior.  data type: string * `dayPeriods`  Object that contains information about the specific   day and time range when the restaurant location accepts   online orders.  data type: object  + `day`  The day the online ordering schedule is returned     for.  data type: string   + `timeRanges`  Key-value pair detailing the start and end time     for online ordering in HH:MM format.  data type: object  - `start`  The local time in HH:MM format when the       restaurantâs online ordering hours start.  data type: string     - `end`  The local time in HH:MM format when the       restaurantâs online ordering hours end.  data type: string |
| `overrides` | An object that contains information about planned overrides. Overrides only affect Toast Online Ordering and third-party orders. For more information, see [Configuring overrides](https://doc.toasttab.com/doc/platformguide/adminConfigureOnlineOrderingHoursOverview.html#adminConfigureOverridesOnOnlineOrderingHours).  The overrides array contains the following fields and values:  * `description`  The description of the override.  data type: string * `diningOptionBehavior`  `TAKE_OUT` or `DELIVERY`  The dining behavior.  data type: string * `businessDate`  The day the override applies to in YYYYMMDD   format.  data type: integer  + `timeRanges`  Key-value pair detailing the start and end time     for online ordering in HH:MM format.  data type: object  - `start`  The local time in HH:MM format when the       restaurantâs online ordering hours start.  data type: string     - `end`  The local time in HH:MM format when the       restaurantâs online ordering hours end.  data type: string |
| `scheduledOrderMaxDays` | Number of days an online order can be placed into the future.  data type: integer  |  | | --- | | Note | | The restaurant online ordering schedule webhook does not send a message when there is a change to the maximum number of days scheduled orders can be placed into the future.  For more information, see this [Toast Central article](https://central.toasttab.com/s/article/Scheduling-Future-Orders). | |
| `lastOrderConfiguration` | `UNTIL_CLOSING_TIME` or `UNTIL_PREPTIME_CUTOFF`  Indicates when the restaurant will stop accepting online orders.  data type: string |

**Payload for an `ordering_schedule`\_updated
event**

```
{
  "timestamp": "2025-05-06T20:35:21.083Z",
  "eventCategory": "ordering_schedule",
  "eventType": "ordering_schedule_updated",
  "guid": "5b6ba185-7c75-4f72-9885-0a821de275cc",
  "details": {
    "restaurantGuid": "d6bf0376-cea1-47c0-a63c-9fc06638a5a6",
    "orderingSchedule": {
      "servicePeriods": [
        {
          "diningOptionBehavior": "DELIVERY",
          "dayPeriods": [
            {
              "day": "SATURDAY",
              "timeRanges": [
                {
                  "start": [
                    12,
                    0
                  ],
                  "end": [
                    0,
                    0
                  ]
                }
              ]
            },
            {
              "day": "SUNDAY",
              "timeRanges": [
                {
                  "start": [
                    11,
                    0
                  ],
                  "end": [
                    23,
                    0
                  ]
                }
              ]
            }
          ]
        },
        {
          "diningOptionBehavior": "TAKE_OUT",
          "dayPeriods": [
            {
              "day": "TUESDAY",
              "timeRanges": [
                {
                  "start": [
                    8,
                    0
                  ],
                  "end": [
                    20,
                    0
                  ]
                }
              ]
            },
            {
              "day": "WEDNESDAY",
              "timeRanges": [
                {
                  "start": [
                    10,
                    0
                  ],
                  "end": [
                    20,
                    0
                  ]
                }
              ]
            },
            {
              "day": "THURSDAY",
              "timeRanges": [
                {
                  "start": [
                    12,
                    0
                  ],
                  "end": [
                    21,
                    0
                  ]
                }
              ]
            }
          ]
        }
      ],
      "overrides": [
        {
          "description": "team party",
          "diningOptionBehavior": [
            "DELIVERY"
          ],
          "businessDate": 20250531,
          "timeRanges": [
            {
              "start": [
                9,
                0
              ],
              "end": [
                21,
                0
              ]
            }
          ]
        }
      ],
      "scheduledOrderMaxDays": 3,
      "lastOrderConfiguration": "UNTIL_CLOSING_TIME"
    }
  }
}
```


---

# Stock webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiStockWebhook.html

### Stock webhook

The `stock` webhook allows you to receive updates when the
inventory status of a menu item or a modifier (via its item reference)
changes.

|  |
| --- |
| Note |
| Modifiers are supported by an underlying menu item, called the modifier item reference. In this section, the term *menu item* refers to both menu items and modifier item references, as the stock webhook reports on their status in the same way. For detailed information on modifier item references, see [Understanding a modifier item reference](https://doc.toasttab.com/doc/platformguide/adminPricingModifierOptions.html#adminUnderstandingAModifierOptionsItemReference). |

Stock webhook messages follow the [standard message data schema](https://doc.toasttab.com/doc/devguide/apiMessageDataSchema.html). When
a message is published to your webhook endpoint for the `stock`
event category, the `eventCategory` value is set to
`stock` and the `eventType` is set to one of the
following:

* [in\_stock](https://doc.toasttab.com/doc/devguide/apiStockWebhook.html#apiInStock)
* [out\_of\_stock](https://doc.toasttab.com/doc/devguide/apiStockWebhook.html#apiOutOfStock)
* [low\_quantity](https://doc.toasttab.com/doc/devguide/apiStockWebhook.html#apiLowQuantity)

A menu item's inventory can be changed in the [stock
API](https://doc.toasttab.com/doc/devguide/apiUpdatingInventoryInformation.html), in the Toast app, and in Toast Web, and set to one of the
following:

* In Stock: The menu item is in stock. There is
  no specific quantity associated with the menu item but it is assumed to
  be available.
* Out of Stock: The menu item is not in stock
  and cannot be ordered.
* Quantity: A specific quantity for the menu
  item is defined. As the menu item is ordered, the quantity is
  decremented. When the quantity dips below the low quantity threshold,
  the low quantity webhook will fire. When the quantity reaches 0, the
  menu item's status changes to out of stock. Currently, the low quantity
  threshold is set to 5 for all menu items and is not configurable.

Stock webhook events reflect changes to these settings or to a menu
item's quantity. For example, an `out_of_stock` event is
triggered when a menu item's quantity has reached 0 or it has been manually
marked as out of stock.

To set a menu item's stock status in the Toast app, a restaurant uses
Quick Edit mode (described in this [Toast
Central article](https://central.toasttab.com/s/article/Quick-Edit-Mode-1492794309057)). To set it in Toast Web, the restaurant uses the
Inventory section of the menu item's details
page.

#### in\_stock

The menu item has been manually marked as in stock or its quantity
has been set to a value that exceeds the low quantity threshold.
Currently, the low quantity threshold is set to 5 for all menu items and
is not configurable.

Attributes in the `in_stock` event's payload
include:

| Value | Description |
| --- | --- |
| `itemGuid` | A unique identifier for the menu item, assigned by the Toast platform.  data type: string  format: uuid |
| `multiLocationId` | A consistent identifier that applies to all versions of a menu item that is shared across locations.  Requests sent to Toast APIs can use a combination of the `multiLocationId` and `restaurantGuid` values, instead of the `itemGuid` value, to identify a menu item. Integration clients can extract the `multiLocationId` and `restaurantGuid` from stock webhook messages to use in subsequent requests to Toast APIs. This is the recommended method for identifying menu items in Toast API requests. See [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html) for more information.  data type: string |
| `restaurantGuid` | A unique identifier for the restaurant, assigned by the Toast platform.  data type: string  format: uuid |
| `quantity` | Indicates the quantity of this menu item that is available. This value is included if the `status` attribute is set to `QUANTITY` and omitted if the status attribute is set to `IN_STOCK`.  data type: number  format: double |
| `status` | `IN_STOCK` or `QUANTITY`  data type: string |
| `versionId` | Reserved for future use. |

**Payload for an in\_stock event when a menu item is manually marked
as In Stock**

```
{
  "timestamp": "<ISO formatted timestamp in UTC>",
  "eventCategory": "stock",
  "eventType": "in_stock",
  "guid": "e445f586-081c-4a2a-bcd6-30717a48e17a",
  "details": {
    "itemGuid": "1e199622-ccbf-4ba8-8c37-111519dca13b",
    "restaurantGuid": "3325cc58-dc6e-4e21-85f9-7de275ffe820",
    "status": "IN_STOCK",
    "multiLocationId": "100000000171238879",
    "versionId": "1e199622-ccbf-4ba8-8c37-111519dca13b"    
  }
}
```

  

**Payload for an in\_stock event when a menu item's quantity is
manually set and that quantity exceeds the low quantity
threshold**

```
{
  "timestamp": "<ISO formatted timestamp in UTC>",
  "eventCategory": "stock",
  "eventType": "in_stock",
  "guid": "e445f586-081c-4a2a-bcd6-30717a48e17a",
  "details": {
    "itemGuid": "1e199622-ccbf-4ba8-8c37-111519dca13b",
    "restaurantGuid": "3325cc58-dc6e-4e21-85f9-7de275ffe820",
    "status": "QUANTITY",
    "quantity": 10.0,
    "multiLocationId": "100000000171239701",
    "versionId": "1e199622-ccbf-4ba8-8c37-111519dca13b"
  }
}
```

#### out\_of\_stock

The menu item's quantity has reached 0 or it has been manually
marked as out of stock.

Attributes in the `out_of_stock` event's payload
include:

| Value | Description |
| --- | --- |
| `itemGuid` | A unique identifier for the menu item, assigned by the Toast platform.  data type: string  format: uuid |
| `multiLocationId` | A consistent identifier that applies to all versions of a menu item that is shared across locations.  Requests sent to Toast APIs can use a combination of the `multiLocationId` and `restaurantGuid` values, instead of the `itemGuid` value, to identify a menu item. Integration clients can extract the `multiLocationId` and `restaurantGuid` from stock webhook messages to use in subsequent requests to Toast APIs. This is the recommended method for identifying menu items in Toast API requests. See [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html) for more information.  data type: string |
| `restaurantGuid` | A unique identifier for the restaurant, assigned by the Toast platform.  data type: string  format: uuid |
| `status` | `OUT_OF_STOCK`  data type: string |
| `versionId` | Reserved for future use. |

**Payload example for the out\_of\_stock event**

```
{
  "timestamp": "<ISO formatted timestamp in UTC>",
  "eventCategory": "stock",
  "eventType": "out_of_stock",
  "guid": "e445f586-081c-4a2a-bcd6-30717a48e17a",
  "details": {
    "itemGuid": "1e199622-ccbf-4ba8-8c37-111519dca13b",
    "restaurantGuid": "3325cc58-dc6e-4e21-85f9-7de275ffe820",
    "status": "OUT_OF_STOCK",
    "multiLocationId": "100000000171239569",
    "versionId": "1e199622-ccbf-4ba8-8c37-111519dca13b"
  }
}
```

#### low\_quantity

The `low_quantity` webhook event is triggered when either
of the following occurs:

* The menu item's quantity dips below the low quantity threshold.
  Currently, the low quantity threshold is set to 5 for all menu items
  and is not configurable. The amount remaining is indicated by the
  `quantity` value in the event's payload.
* The quantity of the menu item has been manually set to a value
  that is greater than 0 and less than or equal to 5 (the low quantity
  threshold). The value it was set to is indicated by the
  `quantity` value in the event's payload.

  If an item is out of stock and the quantity is manually set to
  an amount that is less than or equal to 5, a `low_quantity`
  webhook event fires, rather than an `in_stock` event, even
  though the item has technically gone from out of stock to in
  stock.

  If your integration has the requirement that anytime the
  quantity of an item is manually set to a value greater than 0, it is
  considered "in stock", then it must handle both the
  `in_stock` and `low_quantity` webhook events to
  cover manually setting a stock quantity of 1 to 5
  (`low_quantity`) or greater than 5
  (`in_stock`).

Attributes in the `low_quantity` event's payload
include:

| Value | Description |
| --- | --- |
| `itemGuid` | A unique identifier for the menu item, assigned by the Toast platform.  data type: string  format: uuid |
| `multiLocationId` | A consistent identifier that applies to all versions of a menu item that is shared across locations.  Requests sent to Toast APIs can use a combination of the `multiLocationId` and `restaurantGuid` values, instead of the `itemGuid` value, to identify a menu item. Integration clients can extract the `multiLocationId` and `restaurantGuid` from stock webhook messages to use in subsequent requests to Toast APIs. This is the recommended method for identifying menu items in Toast API requests. See [Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html) for more information.  data type: string |
| `quantity` | Indicates the quantity of this menu item that is available.  data type: number  format: double |
| `restaurantGuid` | A unique identifier for the restaurant, assigned by the Toast platform.  data type: string  format: uuid |
| `status` | `QUANTITY`  data type: string |
| `versionId` | Reserved for future use. |

**Payload example for the low\_quantity event**

```
{
  "timestamp": "<ISO formatted timestamp in UTC>",
  "eventCategory": "stock",
  "eventType": "low_quantity",
  "guid": "e445f586-081c-4a2a-bcd6-30717a48e17a",
  "details": {
    "itemGuid": "1e199622-ccbf-4ba8-8c37-111519dca13b",
    "restaurantGuid": "3325cc58-dc6e-4e21-85f9-7de275ffe820",
    "status": "QUANTITY",
    "quantity": 5.0,
    "multiLocationId": "100000000171241912",
    "versionId": "1e199622-ccbf-4ba8-8c37-111519dca13b"
  }
}
```


---

# Subscriptions - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiSubscriptions.html

### Subscriptions

After you have created a webhook endpoint, you work with the Toast
Integrations team to have your webhook subscription created. The
subscription registers a webhook endpoint in the Toast platform and
creates an association between the partner that owns the webhook endpoint
and the event categories that will be sent to the endpoint. The
subscription also defines the [webhook secret](https://doc.toasttab.com/doc/devguide/apiMessageSigning.html) that is used for
verifying the authenticity of a message and its contents.

After the subscription has been created, your endpoint will receive
updates as they happen in the Toast platform. To unsubscribe from the
webhook, you must contact the Toast Integrations team.


---

# Timeouts - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiTimeouts.html

### Timeouts

In order to keep the Toast platform's webhook support operating with
optimum performance, timeouts are enforced on requests sent to webhook
endpoints. This protects the webhook system from endpoints that may be
experiencing issues or are poorly implemented. Currently, these timeouts
are:

* Connection timeout: If the Toast platform experiences a timeout
  greater than 2 seconds while trying to connect to the webhook
  endpoint, it will abandon the update request.

  |  |
  | --- |
  | Important |
  | Toast API clients must return a 2xx response within the 2-second window to acknowledge the event, before processing any additional business logic. |
* Socket timeout: If the Toast platform experiences a timeout
  longer than 2 seconds while sending an update request or while waiting
  for a webhook endpoint to acknowledge receipt of a request, it will
  abandon the request.


---

# Webhooks reference - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiWebhooksReference.html

### Webhooks reference

This section provides a reference for the Toast platform's webhook
event categories. It includes:

* [Guest order fulfillment status webhook](https://doc.toasttab.com/doc/devguide/apiGuestOrderFulfillmentStatusWebhook.html)
* [Menus webhook](https://doc.toasttab.com/doc/devguide/apiMenusWebhook.html)
* [Orders webhook](https://doc.toasttab.com/doc/devguide/devOrdersWebhookRef.html)
* [Packaging preferences configuration webhook](https://doc.toasttab.com/doc/devguide/apiPackagingPreferencesConfigWebhook.html)
* [Partners webhook](https://doc.toasttab.com/doc/devguide/apiPartnersWebhook.html)
* [Restaurant availability webhook](https://doc.toasttab.com/doc/devguide/apiRxAvailabilityWebhook.html)
* [Restaurant online ordering schedule webhook](https://doc.toasttab.com/doc/devguide/apiRxOnlineOrderingScheduleWebhook.html)
* [Stock webhook](https://doc.toasttab.com/doc/devguide/apiStockWebhook.html)

For information on using Toast webhooks, see [Webhook basics](https://doc.toasttab.com/doc/devguide/apiWebhookBasics.html).


---

# Orders webhook - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/devOrdersWebhookRef.html

### Orders webhook

#### Overview

|  |
| --- |
| Note |
| Order payload sizes can reach over 600kbs. Ensure that all servers and content delivery networks (CDNs) can accommodate API payloads of this size. |

When a restaurant makes any update to an order, or creates a new
order, the `orders` webhook sends an HTTP request to an
endpoint you specify using the `order_updated` webhook event.
For more information about the `order_updated` webhook event,
see [order\_updated details and message values](https://doc.toasttab.com/doc/devguide/devOrdersWebhookRef.html#apiOrdersWebhookOrderUpdated).

The HTTP request that you receive includes:

* The Toast platform unique identifier (GUID) of the
  order\_updated event.
* A timestamp value indicating when an order is updated or
  created.
* An Order object containing the complete order
  information.
* The Toast platform unique identifier (GUID) for the restaurant
  that made the update.

The order\_updated webhook event eliminates the need for
you to submit `GET` requests for order updates. You
can use the updated order details to adjust your business operations. For
example, if a guest adds a new menu item to their order, you can adjust
the time needed to deliver the order.

In an `orders` webhook message, the
`eventCategory` and `eventType` are set to
`order_updated` or `channel_order_updated`.

#### order\_updated details and message values

The orders webhook event type is `order_updated` or
`channel_order_updated`. A new order is also considered an
update and uses this same event type. You receive the complete order, in
the JSON format, when any change is made to an order. This webhook message
response is similar to the response from an [authorized
GET request](https://doc.toasttab.com/openapi/orders/operation/ordersGuidGet/) to the
`/orders/v2/orders/{orderGuid}` API
endpoint. The primary difference between these two responses is that the
webhook message contains additional details relevant to the
`order_updated` event such as the `timestamp` of
when an order was updated or created. The `Order` object is in
the `details` field of the webhook message body as shown in the
[Orders webhook sample message](https://doc.toasttab.com/doc/devguide/devOrdersWebhookRef.html#devOrdersWebhookSampleJSON)
.

Attributes in the `orders_updated` payload include:

| Value | Description |
| --- | --- |
| `timestamp` | The date and time the update event occurred, represented as an ISO-8601 string in UTC such as YYYY-MM-DDTHH:MM:SS.SSSz.  data type: string |
| `eventCategory` | `order_updated` or `channel_order_updated`.  data type: string |
| `eventType` | `order_updated` or `channel_order_updated`.  data type: string |
| `guid` | A unique Toast platform identifier for the webhook event.  data type: string  format: UUID |
| `details` | A field containing the details of the order update, including the full order JSON, the Toast platform unique identifier (GUID) for the restaurant that made the update, and the `appliedPackagingInfo` object which describes any order packaging preferences. |

#### Omitted values

For performance and security, the following values are either
omitted from the `orders` webhook messages, or return as
`null`.

* Guest personal information and delivery details
  (omitted)

  + `firstName`
  + `lastName`
  + `phone`
  + `address1`
  + `address2`
  + `city`
  + `state`
  + `zipCode`
* `externalId` (returns as `null`)

To obtain this omitted information, you can send a
`GET` request to the
`/orders/v2/orders/{orderGuid}`
endpoint.

#### Orders webhook sample message

The sample below shows the HTTP request received from the
`orders` webhook.

**Payload example for the order\_updated event**

```
{
        "timestamp": "2024-03-28T15:11:01.050Z",
        "eventCategory": "order_updated",
        "eventType": "order_updated",
        "guid": "534bf25a-b657-45aa-9a63-47f8f35400d6",
        "details": {
          "restaurantGuid": "0cd990c9-fd74-461d-8468-de2a0919ccbba",
          "order": {
            "guid": "f6d98b95-2816-4f54-b1ab-7a5d71e83769",
            "entityType": "Order",
            "externalId": null,
            "revenueCenter": null,
            "server": {
              "guid": "909523c3-5bf9-4bad-a3b9-68c4ce3c05e9",
              "entityType": "RestaurantUser",
              "externalId": null
            },
            "createdInTestMode": false,
            "lastModifiedDevice": {
              "id": "9b5185224a27ab72"
            },
            "source": "In Store",
            "voidDate": null,
            "duration": null,
            "businessDate": 20240401,
            "paidDate": null,
            "restaurantService": null,
            "excessFood": false,
            "voided": false,
            "estimatedFulfillmentDate": "2024-04-01T15:09:30.223+0000",
            "table": null,
            "requiredPrepTime": "PT0S",
            "approvalStatus": "APPROVED",
            "deliveryInfo": null,
            "serviceArea": null,
            "curbsidePickupInfo": null,
            "numberOfGuests": 1,
            "diningOption": {
              "guid": "06f9f331-848a-41b2-896f-e73e32cb278e",
              "entityType": "DiningOption",
              "externalId": null
            },
            "appliedPackagingInfo": null,
            "openedDate": "2024-04-01T15:09:30.223+0000",
            "voidBusinessDate": null,
            "checks": [
              {
                "guid": "cd39b62e-363b-4029-98f1-f3dc91f00df4",
                "entityType": "Check",
                "externalId": null,
                "displayNumber": "2",
                "payments": [],
                "appliedDiscounts": [],
                "lastModifiedDevice": {
                  "id": "9b5185224a27ab72"
                },
                "voidDate": null,
                "paidDate": null,
                "appliedLoyaltyInfo": null,
                "voided": false,
                "paymentStatus": "OPEN",
                "amount": 0,
                "tabName": null,
                "taxExempt": false,
                "openedDate": "2024-04-01T15:10:58.985+0000",
                "totalAmount": 0,
                "selections": [],
                "voidBusinessDate": null,
                "createdDate": "2024-04-01T15:10:59.798+0000",
                "deleted": false,
                "createdDevice": {
                  "id": "9b5185224a27ab72"
                },
                "closedDate": null,
                "deletedDate": "1970-01-01T00:00:00.000+0000",
                "modifiedDate": "2024-04-01T15:10:59.833+0000",
                "taxAmount": 0,
                "appliedServiceCharges": [],
                "customer": null
              },
              {
                "guid": "3b3efd41-5b71-476f-9119-ac2eca247444",
                "entityType": "Check",
                "externalId": null,
                "displayNumber": "1",
                "payments": [],
                "appliedDiscounts": [],
                "lastModifiedDevice": {
                  "id": "9b5185224a27ab72"
                },
                "voidDate": null,
                "paidDate": null,
                "appliedLoyaltyInfo": null,
                "voided": false,
                "paymentStatus": "OPEN",
                "amount": 0,
                "tabName": null,
                "taxExempt": false,
                "openedDate": "2024-04-01T15:10:58.985+0000",
                "totalAmount": 0,
                "selections": [],
                "voidBusinessDate": null,
                "createdDate": "2024-04-01T15:10:59.782+0000",
                "deleted": false,
                "createdDevice": {
                  "id": "9b5185224a27ab72"
                },
                "closedDate": null,
                "deletedDate": "1970-01-01T00:00:00.000+0000",
                "modifiedDate": "2024-04-01T15:10:59.829+0000",
                "taxAmount": 0,
                "appliedServiceCharges": [],
                "customer": null
              }
            ],
            "deleted": false,
            "createdDevice": {
              "id": "9b5185224a27ab72"
            },
            "createdDate": "2024-04-01T15:10:59.817+0000",
            "closedDate": null,
            "deletedDate": "1970-01-01T00:00:00.000+0000",
            "modifiedDate": "2024-04-01T15:10:59.817+0000",
            "promisedDate": null,
            "channelGuid": null,
            "pricingFeatures": [
              "TAXESV2"
            ]
          }
        }
      }
```


---

# Calculating expected cash deposits - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html

### Calculating expected cash deposits

The expected cash deposit for a restaurant is the currency amount
of cash that should be available to be removed from a restaurant and
deposited in a bank or other financial institution for a business day.
You can calculate the expected deposit for a business day using
information about cash transactions that you get from the orders API and
information about cash collected and cash payments that you get from the
cash management API. For more information about the orders API, see
[Orders API overview](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html).

The following lists describe the components of the expected cash
deposit for a Toast POS restaurant.

**Cash Included in the Expected Deposit**

* Cash payments for checks (cash drawer transactions).
* Cash collected from restaurant employees (for example, at the
  end of their shifts).
* Cash added to a restaurant cash drawer in a cash in operation.
  This is not a part of routine Toast POS operation.

**Cash Deducted from the Expected Deposit**

* Cash removed from a restaurant cash drawer to pay for a
  pre-configured expense in a pay out operation.
* Cash removed from a restaurant cash drawer to pay employee
  gratuities in a tip out operation.
* Cash removed from a restaurant cash drawer in a cash out
  operation. This is not part of routine Toast POS operation.

The following procedure explains how to calculate the expected
deposit for one restaurant business day.

**Calculating the Expected Deposit for One Business Day**

1. Get the list of payment GUIDs for the business day by sending
   a `GET` request to the `payments`
   endpoint of the orders API. Include the
   *`paidBusinessDate`* parameter to specify the
   business day.
2. Get detailed information about each payment by sending a GET
   request to the
   `payments/{guid}` endpoint of
   the orders API.
3. Calculate the sum of the `amount` values for each
   payment that has the `type` `CASH`. The
   following example shows the `amount` and
   `type` values for a payment.

   ```
   {
     "entityType": "OrderPayment",

       [contents omitted]

     "amount": 26.51,

       [contents omitted]

     "type": "CASH",

       [contents omitted]
   }
   ```
4. Get detailed information about each cash entry for the
   business day by sending a `GET` request to
   the `entries` endpoint of the cash management API.
   Include the *`businessDate`* parameter to specify
   the business day. The `entries` endpoint returns a JSON
   array of `CashEntry` objects.
5. Calculate the sum of the `amount` values for each
   cash entry that has any `type` value other than
   `CASH_COLLECTED`. Pay out, tip out, and cash out entries
   have negative amounts. The following example shows the
   `amount` and `type` values for a cash
   entry.

   ```
   [
     {
       "entityType": "CashEntry",

         [contents omitted]

       "amount": -50.75,

         [contents omitted]

       "type": "PAY_OUT"
     }
   ]
   ```

   |  |
   | --- |
   | Note |
   | The only exception to omitting cash entries of `type` `CASH_COLLECTED` is an undone `TIP_OUT`. When a restaurant employee undoes a `TIP_OUT` cash entry, the system posts a `CASH_COLLECTED` cash entry for the same amount and a `reason` value of `Undo Tip Out`. You should include undone tip outs in your calculations of your expected cash deposits. |
6. Calculate the sum of the total cash payments (see [Step 3](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#apiProcCalculateTotalCashPayments)) and the total
   non-payment cash entries (see [Step 5](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#apiProcCalculateTotalCashEntries)). The result is the
   expected cash deposit for the business day.

The following example shell script calculates the expected cash
deposit for one restaurant on one business day. The script uses the
**jq** utility to get information from Toast API JSON
response data. For more information about the **jq**
utility, see the [jq
web site](https://stedolan.github.io/jq/). This example script is intended as an illustration of
the procedure for calculating expected deposits and is not suitable for
production use.

**Shell script to calculate the expected cash deposit for one
business day**

```
#!/bin/bash

# Set parameters for Toast API requests.![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
SERVER="https://[toast-api-hostname]"
CLIENT_ID="my-client"
CLIENT_SECRET="tbKr17l*!dMUE1hU3a3F" # Must be URL encoded
RESTAURANT_GUID="B42C2273-B35A-42E4-9D9E-B0538312E18B"
BUSINESS_DATE="20250422"
# Hold the authentication token and reuse it.
AUTHENTICATION_TOKEN=""

# Define functions for this example script.

authenticate () {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    # Get an authentication token for Toast API requests.
    curl -X POST \
    -H "Content-Type: application/json" \
    -d "{\"clientId\":\"${CLIENT_ID}\",\"clientSecret\":\"${CLIENT_SECRET}\",\"userAccessType\":\"TOAST_MACHINE_CLIENT\"}" \
    -s -o authentication-response~ \
    ${SERVER}/authentication/v1/authentication/login
    # Hold the authentication token and reuse it.
    AUTHENTICATION_TOKEN=`jq -r '.token.accessToken' authentication-response~`    
}

get_payments () {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    # Get a list of the payment transactions for a business day.
    curl -X GET \
    -H "Authorization: Bearer ${AUTHENTICATION_TOKEN}" \
    -H "Toast-Restaurant-External-ID: ${RESTAURANT_GUID}" \
    -s -o my-payments~ \
    "${SERVER}/orders/v2/payments?paidBusinessDate=${BUSINESS_DATE}"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)

    # Find the number of payment record GUIDs in the JSON array
    # returned by the payments endpoint.
    NUMBER_OF_PAYMENTS=`jq '. | length' my-payments~`![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)

    # Get detailed information about each payment.
    PAYMENT_NUMBER=0
    while [[ "${PAYMENT_NUMBER}" -lt "${NUMBER_OF_PAYMENTS}" ]]![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
    do
      PAYMENT_GUID=`jq -r .[${PAYMENT_NUMBER}] my-payments~`![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
      # Run the get_payment function. Pass one payment GUID as an argument.
      get_payment ${PAYMENT_GUID}![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      PAYMENT_NUMBER=$((${PAYMENT_NUMBER}+1))![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
    done
}

get_payment () {![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
    # Get detailed information about one payment transaction.
    curl -X GET \
    -H "Authorization: Bearer ${AUTHENTICATION_TOKEN}" \
    -H "Toast-Restaurant-External-ID: ${RESTAURANT_GUID}" \
    -s -o my-payment~ \
    "${SERVER}/orders/v2/payments/${1}"![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)

    # If the type of the payment is CASH, add its amount to the total
    # cash transactions for the business day.
    TRANSACTION_TYPE=`jq -r .type my-payment~`![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
    PAYMENT_STATUS=`jq -r .paymentStatus my-payment~`
    if [[ "${TRANSACTION_TYPE}" == "CASH" ]] && [[ "${PAYMENT_STATUS}" != "VOIDED" ]];![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
    then
      NUMBER_CASH_TRANSACTIONS=$((${NUMBER_CASH_TRANSACTIONS}+1))
      # Find the currency amount of the cash transaction.
      CURRENT_TRANSACTION=`jq -r .amount my-payment~`![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)
      # Add the current transaction amount to the total for the business day.
      TOTAL_CASH_TRANSACTIONS=`echo \
        "${TOTAL_CASH_TRANSACTIONS}+${CURRENT_TRANSACTION}" | bc`![15](https://doc.toasttab.com/doc/devguide/assets/images/callouts/15.png)
    fi
}

get_entries () {(16)
    # Get an array of the cash entries for the business day.
    curl -X GET \
    -H "Authorization: Bearer ${AUTHENTICATION_TOKEN}" \
    -H "Toast-Restaurant-External-ID: ${RESTAURANT_GUID}" \
    -s -o my-cash-entries~ \
    "${SERVER}/cashmgmt/v1/entries?businessDate=${BUSINESS_DATE}"(17)

    # Calculate the total of all entries except for the CASH_COLLECTED type.
    for CASH_ENTRY_AMOUNT in `jq '.[] | \
      select(.type!="CASH_COLLECTED") | .amount'  my-cash-entries~`(18)
    do
      TOTAL_CASH_ENTRY_ADJUSTMENTS=`echo \
        "${TOTAL_CASH_ENTRY_ADJUSTMENTS}+${CASH_ENTRY_AMOUNT}" | bc`(19)
    done
}

# Run functions in this example script.

# Run the authenticate function in this example script to get an
# authentication token for API requests.
authenticate

# Run the get_payments function in this example script to get the
# total cash payments (cash collected from customers)for the business day.
NUMBER_CASH_TRANSACTIONS=0
TOTAL_CASH_TRANSACTIONS=0(20)
get_payments

# Run the get_entries function in this example script to get the total
# cash entries for the business day, excluding cash collected.
# This is typically a negative number.
TOTAL_CASH_ENTRY_ADJUSTMENTS=0(21)
get_entries

# Calculate the total expected cash deposit by summing the cash collected
# and the total of the cash entries (typically negative).
EXPECTED_CASH_DEPOSIT=`echo \
  "${TOTAL_CASH_TRANSACTIONS}+${TOTAL_CASH_ENTRY_ADJUSTMENTS}" | bc`(22)

# Report the totals.
echo "Number cash transactions:     ${NUMBER_CASH_TRANSACTIONS}"(23)
echo "Total cash transactions:      ${TOTAL_CASH_TRANSACTIONS}"
echo "Total cash entry adjustments: ${TOTAL_CASH_ENTRY_ADJUSTMENTS}"
echo "Expected cash deposit:        ${EXPECTED_CASH_DEPOSIT}"
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e18459B7A05A-725E-4C5D-88B1-B5D63CCD0065) | These parameters hold values that you need to get an authentication token and make Toast API requests. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [2](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e19959B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Send a GET request to the user management API to get an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). Store the authentication token string in a script variable so that other example functions can use it. |
| [3](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e20159B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Send a GET request to the orders API to get a list of the GUIDs of each payment made during a business day. For each payment GUID, run another example shell script function to get detailed information about the payment. |
| [4](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e20359B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Specify the business day of the payments in the *`paidBusinessDate`* query parameter. |
| [5](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e20559B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Count the number of payment GUIDs for the business day. |
| [6](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e20759B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Run a separate function to get detailed payment information for each of the payment GUIDs for the business day. |
| [7](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e20959B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Get one GUID from the list. |
| [8](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e21259B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Run the example `get_payment` function and pass the payment GUID as an argument. |
| [9](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e21459B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Increment a counter variable to move on to the next payment GUID. |
| [10](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e21659B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Send a `GET` request to the orders API to get detailed information about one payment. Check the transaction type of the payment. If the payment type is `CASH`, add the payment amount to the total of cash payments for the business day. |
| [11](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e21859B7A05A-725E-4C5D-88B1-B5D63CCD0065) | The `get_payments` function passes a payment GUID as an argument to this function. |
| [12](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e22059B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Get the type value for the payment. |
| [13](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d1e22259B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Only include `CASH` payments in the total. Exclude voided payments. |
| [14](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d2e22959B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Get the currency amount of the payment. |
| [15](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d3e22759B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Add the amount of the payment to the total amount of the cash payments for the business day. |
| [(16)](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d4e22959B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Send a `GET` request to the cash management API to get detailed information about all cash entries for the business day. Calculate the cumulative amounts of each cash entry, excluding entries that have the `type` value `CASH_COLLECTED`. |
| [(17)](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d5e23159B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Specify the business day of the cash entries in the *`businessDate`* query parameter. |
| [(18)](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d6e23359B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Get a list of the amounts of the entries that do not have the `type` `CASH_COLLECTED`. |
| [(19)](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d7e23559B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Add each amount to the total cash entries for the business day. The amount values are negative or positive depending on whether the cash entry removes or adds cash to a restaurant cash drawer. |
| [(20)](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d8e23859B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Set the total of cash payments to zero and run the function that gets payments for the business day. |
| [(21)](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d9e24059B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Set the total of cash entries to zero and run the function that gets cash entries for the business day. |
| [(22)](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d0e23859B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Calculate the sum of total cash payments and total cash entries for the business day to get the expected cash deposit. |
| [(23)](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html#co-d2e88859B7A05A-725E-4C5D-88B1-B5D63CCD0065) | Number of non-voided cash transactions. |


---

# Getting cash deposit entries - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGetCashDeposits.html

### Getting cash deposit entries

The `deposits` endpoint of the cash management API
returns information about the actual cash deposits for a restaurant. For
example, when you close out a business day for your restaurant, you
might package any cash that is greater than the amount needed for the
start of the next day and deposit it in a bank. You record the deposit
amount using the deposits function of the Toast POS.

**Get all cash deposits made on a specific business date**

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
https://[toast-api-hostname]/cashmgmt/v1/deposits?businessDate=20190918![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGetCashDeposits.html#co-d1e340BCBEC7F8-786B-4966-9AA6-0D290AA55A72) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant from which to retrieve cash deposits. The GUID must be for an individual restaurant, not the GUID for a restaurant group or management group. |
| [2](https://doc.toasttab.com/doc/devguide/apiGetCashDeposits.html#co-d1e345BCBEC7F8-786B-4966-9AA6-0D290AA55A72) | Use the `businessDate` request parameter to specify the date (in `yyyyMMdd` format) on which the cash deposits were created. |

  

The following example shows a `DepositEntry` object in
the response data from the `deposits` endpoint.

**DepositEntry object in deposits endpoint response data**

```
[
  {
    "guid": "8421034f-fa0b-495c-808e-bf98f63f0de7",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "DepositEntry",
    "date": "2019-09-18T14:49:41.284+0000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "amount": 3210.98,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "employee": {![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      "guid": "9659c962-7a8a-43ec-9343-47cafb68e83b",
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "undoes": null![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGetCashDeposits.html#co-d1e436A964BCF4-D54B-4D7D-8984-EE06A9BC0B09) | The GUID of this `DepositEntry` object. |
| [2](https://doc.toasttab.com/doc/devguide/apiGetCashDeposits.html#co-d1e438A964BCF4-D54B-4D7D-8984-EE06A9BC0B09) | The date and time when the cash deposit was made. |
| [3](https://doc.toasttab.com/doc/devguide/apiGetCashDeposits.html#co-d1e440A964BCF4-D54B-4D7D-8984-EE06A9BC0B09) | The amount of the deposit. The `amount` value must be greater than zero. |
| [4](https://doc.toasttab.com/doc/devguide/apiGetCashDeposits.html#co-d1e442A964BCF4-D54B-4D7D-8984-EE06A9BC0B09) | The GUID or external identifier of the restaurant employee who created the cash deposit. |
| [5](https://doc.toasttab.com/doc/devguide/apiGetCashDeposits.html#co-d1e444A964BCF4-D54B-4D7D-8984-EE06A9BC0B09) | The GUID of the deposit entry that was undone. The value is `null` if this deposit entry does not undo a previous deposit entry. |


---

# Getting cash entries - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html

### Getting cash entries

The `entries` endpoint of the cash management API
returns information about the following types of cash entry:

* `CASH_IN` - A restaurant employee puts cash in a
  cash drawer. This type of entry represents miscellaneous cash
  operations that are not handled by standard Toast POS functionality.
  Note that when a restaurant employee undoes a `CASH_OUT`
  cash entry, the system posts a `CASH_IN` cash entry for
  the same amount.
* `CASH_COLLECTED` - At the end of a shift, a
  restaurant employee puts cash collected during that shift into a
  cash drawer. This does not include cash transactions that are paid
  into a cash drawer at the time that the guest pays for a check. Note
  that when a restaurant employee undoes a `TIP_OUT` cash
  entry, the system posts a `CASH_COLLECTED` cash entry for
  the same amount.
* `CASH_OUT` - A restaurant employee removes cash
  from a cash drawer. This type of entry represents miscellaneous cash
  operations that are not handled by standard Toast POS functionality.
  Note that when a restaurant employee undoes a `CASH_IN`
  cash entry, the system posts a `CASH_OUT` cash entry for
  the same amount.
* `NO_SALE` - A restaurant employee opens a cash
  drawer and does not make a change to the cash balance. For example,
  a restaurant employee might perform a no sale transaction to make
  change for a guest. The restaurant employee can select a
  pre-configured reason to explain the nature of the no sale
  transaction.
* `PAY_OUT` - A restaurant employee removes cash from
  a cash drawer to pay for goods or services. Pay out reasons are
  configured in Toast Web. For example, an employee might pay cash for
  a window washing service.
* `TIP_OUT` - A restaurant employee removes cash from
  a cash drawer to pay non-cash tips or gratuities to restaurant
  employees. For example, a tip out entry might pay tips that were
  entered in credit card payments. Note that when a restaurant
  employee undoes a `CASH_COLLECTED` cash entry, the system
  posts a `TIP_OUT` cash entry for the same amount.
* `UNDO_PAY_OUT` - A restaurant employee puts cash in
  a cash drawer to undo a previous `PAY_OUT` cash
  entry
* `DRIVER_REIMBURSEMENT` - A restaurant employee
  removes cash from a cash drawer to pay a delivery driver for
  delivery driving expenses.
* `CLOSE_OUT_EXACT` - A restaurant employee closes a
  cash drawer and the close out balance is equal to the expected
  balance.
* `CLOSE_OUT_OVERAGE` - A restaurant employee closes
  a cash drawer and the close out balance is greater than the expected
  balance.
* `CLOSE_OUT_SHORTAGE` - A restaurant employee closes
  a cash drawer and the close out balance is less than the expected
  balance.

The following example **curl** command sends a
`GET` request to the `entries`
endpoint.

**Get all cash entries made on a specific business date**

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
https://[toast-api-hostname]/cashmgmt/v1/entries?businessDate=20190917![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e195A5E2A1B1-DA0E-4054-99B6-F867706167E9) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant from which to retrieve cash entries. The GUID must be for an individual restaurant, not the GUID for a restaurant group or management group. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e200A5E2A1B1-DA0E-4054-99B6-F867706167E9) | Use the `businessDate` request parameter to specify the date (in `yyyyMMdd` format) on which the cash entries were created. |

  

The following example shows a `CashEntry` object in the
response data from the `entries` endpoint.

**CashEntry object in entries endpoint response data**

```
[
  {
    "guid": "090f0e10-5469-4e86-a9d7-4c72eca366d7",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "CashEntry",
    "date": "2019-09-17T15:32:49.844+0000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "reason": "buy window cleaning supplies",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "amount": -25,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "payoutReason": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "guid": "9bad959b-250e-4b0d-9b13-a1a52026474c",
      "entityType": "PayoutReason"
    },
    "cashDrawer": {![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      "guid": "30795302-5fc9-461c-b314-ac8ea6e55cd5",
      "entityType": "CashDrawer"
    },
    "undoes": null,![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
    "noSaleReason": null,![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
    "employee1": {![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
      "guid": "9659c962-7a8a-43ec-9343-47cafb68e83b",
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "type": "PAY_OUT",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
    "employee2": null![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e24433B240E1-39A5-4C20-8325-985CCE09250C) | The GUID of this `CashEntry` object. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e24633B240E1-39A5-4C20-8325-985CCE09250C) | The date and time when the cash entry was made. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e24833B240E1-39A5-4C20-8325-985CCE09250C) | A descriptive comment entered by the restaurant employee when the cash entry was made. For undone cash entries, a hard-coded reason (such as `Undo Pay Out`) is provided by the system. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e25033B240E1-39A5-4C20-8325-985CCE09250C) | The US currency amount that the restaurant employee removed from (for negative amounts) or added to (for positive amounts) the cash drawer. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e25233B240E1-39A5-4C20-8325-985CCE09250C) | The GUID of the pre-configured pay out reason for this `PAY_OUT` cash entry. The value is `null` if the cash entry is any type other than `PAY_OUT`. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e25533B240E1-39A5-4C20-8325-985CCE09250C) | The GUID of the cash drawer in which the cash entry was made. |
| [7](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e25733B240E1-39A5-4C20-8325-985CCE09250C) | The GUID of the cash entry that was undone. The value is `null` if this cash entry does not undo a previous cash entry. |
| [8](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e25933B240E1-39A5-4C20-8325-985CCE09250C) | The GUID of the pre-configured no sale reason for a `NO_SALE` cash entry. The value is `null` if the cash entry is any type other than `NO_SALE`. |
| [9](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e26133B240E1-39A5-4C20-8325-985CCE09250C) | The GUID or external identifier of the restaurant employee who made the cash entry. |
| [10](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e26333B240E1-39A5-4C20-8325-985CCE09250C) | The cash entry type for this transaction. |
| [11](https://doc.toasttab.com/doc/devguide/apiUsingCashManagementApi.html#co-d1e26533B240E1-39A5-4C20-8325-985CCE09250C) | The GUID of the restaurant employee who approved this transaction. The value is `null` if approval was not needed. |

**Undone Cash Entries**

When restaurant employees undo cash entries, the
`reason` and `type` values of the resulting
undo cash entries are as follows:

* `CASH_IN` entries are undone by
  `CASH_OUT` entries that have a `reason`
  value of `Undo Cash In` and a `type` value
  of `CASH_OUT`.
* `CASH_OUT` entries are undone by
  `CASH_IN` entries that have a `reason` value
  of `Undo Cash Out` and a `type` value of
  `CASH_IN`.
* `CASH_COLLECTED` entries are undone by
  `TIP_OUT` entries that have a `reason` value
  of `Undo Cash Collected` and a `type` value
  of `TIP_OUT`.
* `TIP_OUT` entries are undone by
  `CASH_COLLECTED` entries that have a
  `reason` value of `Undo Tip Out` and a
  `type` value of `CASH_COLLECTED`.
* `PAY_OUT` entries are undone by
  `UNDO_PAY_OUT` entries that have a `reason`
  value of `Undo Pay Out` and a `type` value
  of `UNDO_PAY_OUT`.

Note that you should include undone tip out cash entries when
you are calculating [expected cash
deposits](https://doc.toasttab.com/doc/devguide/apiCalculatingExpectedCashDeposits.html).


---

# Adding a shift and assigning it to an employee - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html

### Adding a shift and assigning it to an employee

To add a shift and assign it to a restaurant employee, send a
`POST` request to the
`/labor/v1/shifts` endpoint of the labor API.

The response provides information about the shift, including the
Toast platform GUID.

#### Example request to add a shift

The following example **curl** command sends a
`POST` request to the
`/labor/v1/shifts` endpoint.

**Example request to add a shift and assign it to an
employee**

```
curl -v -X POST \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Content-Type: application/json" \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
-d @my-shift-information.json \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
"https://[toast-api-hostname]/labor/v1/shifts"
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e4852BCF3ED8-080B-4C47-9C32-348D8EED99AD) | Specify the GUID of the restaurant to add the shift to. This must be an individual restaurant, not the GUID for a restaurant group. |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e4872BCF3ED8-080B-4C47-9C32-348D8EED99AD) | Specify the data type of the message body in the Content-Type header field. The value must be `application/json`. |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e4892BCF3ED8-080B-4C47-9C32-348D8EED99AD) | Include information about the new employee in the message body of the `POST` request. This example **curl** command sends message body data from the contents of a file. |

#### Example shift details for the message body of the request to add a shift

The following example shows the message body data that provides
information about the shift.

**Example message body for a request to add a shift**

```
{
  "employeeReference": {
    "entityType": "RestaurantUser",
    "guid": "0a7ced2c-b782-4585-8f41-4bb1656c3f67"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  },
  "entityType": "Shift",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "inDate": "2017-01-13T06:00:00.000+0000",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "jobReference": {
    "entityType": "RestaurantJob",
    "guid": "a674499f-cddd-4b8b-a6b3-6d44147da330"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  },
  "outDate": "2017-01-13T13:00:00.000+0000"![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e5042BCF3ED8-080B-4C47-9C32-348D8EED99AD) | Specify the GUID of the employee who will work the shift. |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e5062BCF3ED8-080B-4C47-9C32-348D8EED99AD) | Specify the data type of the Toast platform input object. The value must be `Shift`. |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e5082BCF3ED8-080B-4C47-9C32-348D8EED99AD) | Specify the date and time that the shift begins. |
| [4](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e5102BCF3ED8-080B-4C47-9C32-348D8EED99AD) | Specify the job for the shift in the `jobReference` value. |
| [5](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e5122BCF3ED8-080B-4C47-9C32-348D8EED99AD) | Specify the date and time that the shift ends. |

#### Example response

The following example shows the response for a
`POST` request to the
`/labor/v1/shifts` resource.

**Example response from a request to add a shift**

```
{
  "guid": "08312056-c56f-4a10-a3c2-5660bf2b5143",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Shift",
  "externalId": null,
  "outDate": "2017-01-13T13:00:00.000+0000",
  "createdDate": "2016-12-29T05:33:16.712+0000",
  "deleted": false,
  "deletedDate": null,
  "employeeReference": {
    "guid": "0a7ced2c-b782-4585-8f41-4bb1656c3f67",
    "entityType": "RestaurantUser",
    "externalId": null
  },
  "modifiedDate": "2016-12-29T05:33:16.712+0000",
  "inDate": "2017-01-13T06:00:00.000+0000",
  "jobReference": {
    "guid": "a674499f-cddd-4b8b-a6b3-6d44147da330",
    "entityType": "RestaurantJob",
    "externalId": null
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingAShiftAndAssigningIt.html#co-d1e5322BCF3ED8-080B-4C47-9C32-348D8EED99AD) | The `guid` value contains the GUID that the Toast platform assigns to the shift. |


---

# Adding an employee - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html

### Adding an employee

To add an employee to the restaurant, send a
`POST` request to the
`/labor/v1/employees` endpoint of the labor API .

The response contains an object containing information about the
employee, including the Toast platform GUID for the new employee.

|  |
| --- |
| Note |
| The labor API rejects new or updated values for `firstName`, `lastName`, and `externalEmployeeId` that include the following special characters: `{}<>$=\;%` |

#### Example request to add an employee

The following example **curl** command sends a
`POST` request to the
`/labor/v1/employees` resource.

**Example request to add an employee to a restaurant**

```
curl -X POST \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Content-Type: application/json" \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
-d @my-new-employee-data.json \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
https://[toast-api-hostname]/labor/v1/employees
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e17121EC7EA2-706D-4B5B-B210-636982B89D94) | Specify the GUID of the restaurant that you want to add an employee to. This must be an individual restaurant, not the GUID for a restaurant group. |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e17321EC7EA2-706D-4B5B-B210-636982B89D94) | Specify the data type of the message body in the Content-Type header field. The value must be `application/json`. |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e17521EC7EA2-706D-4B5B-B210-636982B89D94) | Include information about the new employee in the message body of the `POST` request. This example **curl** command sends message body data from the contents of a file. |

#### Example employee details for the request to add an employee

The following example shows the message body data that provides
information about the new employee.

**Example message content with information about a new
employee**

```
{
  "entityType": "RestaurantUser", ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "email": "jgauthier@example.com", ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "firstName": "Josephine", ![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "chosenName": "Jo",
  "lastName": "Gauthier", ![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "externalId": "TPC-PARTNER:12345", ![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  "externalEmployeeId": "1234567890", 
  "passcode": "12345",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
  "jobReferences": [ ![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
    {
      "guid": "8d3bba92-10e4-4345-9ae6-ed94c09dc332",
      "entityType": "RestaurantJob"
    }
  ] 
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e900FBC60BD6-1C8B-4652-A8F4-6C93856B0D67) | Specify the data type of the Toast platform input object. The value must be `RestaurantUser`. |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e902FBC60BD6-1C8B-4652-A8F4-6C93856B0D67) | Specify an email address for the employee. Email addresses for employees must be unique. If you specify an email address that is in use by an employee, the request fails with an HTTP 400 (bad request) response. |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e904FBC60BD6-1C8B-4652-A8F4-6C93856B0D67) | Specify the first name of the employee. |
| [4](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e906FBC60BD6-1C8B-4652-A8F4-6C93856B0D67) | Specify the last name of the employee. |
| [5](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e908FBC60BD6-1C8B-4652-A8F4-6C93856B0D67) | External identifier string that is prefixed by the naming authority. The `externalId` must be unique. If you specify an `externalId` that is not unique, the request fails with an HTTP 400 (bad request) response. For more information, see [External identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html#apiExternalIdentifiers). |
| [6](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e911FBC60BD6-1C8B-4652-A8F4-6C93856B0D67) | You can specify the initial Toast platform passcode number for the employee. This value is optional. |
| [7](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e913FBC60BD6-1C8B-4652-A8F4-6C93856B0D67) | You can specify the job for the new employee. This value is optional. To assign a job, you need the Toast platform GUID or the external identifier for the job. |

#### Example response

The following example shows the response for a
`POST` request to the
`/labor/v1/employees` endpoint.

**Example response for the add employee request**

```
{
  "guid": "e5c3a2f3-8aa2-4a66-b379-6c80b7277dc3",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "RestaurantUser",
  "externalId": null,
  "lastName": "Gauthier",
  "wageOverrides": [],
  "firstName": "Josephine",
  "chosenName": "Jo",
  "createdDate": "2019-10-02T13:11:22.824+0000",
  "deleted": false,
  "deletedDate": null,
  "jobReferences": [![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    {
      "guid": "8d3bba92-10e4-4345-9ae6-ed94c09dc332",
      "entityType": "RestaurantJob",
      "externalId": null
    }
  ],
  "modifiedDate": "2019-10-02T13:11:22.824+0000",
  "disabled": null,
  "externalEmployeeId": null,
  "email": "jgauthier@example.com",
  "passcode": "12345"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e21821EC7EA2-706D-4B5B-B210-636982B89D94) | The `guid` value contains the GUID value that the Toast platform assigns to the new employee. |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-add-employee-job) | If you assign a job to the new employee, the response will return the job. This is optional. |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingAnEmployee.html#co-d1e22021EC7EA2-706D-4B5B-B210-636982B89D94) | If you assign an initial pass code to the new employee, the employee is able to log in to the Toast platform. This is optional. |


---

# Archiving an employee - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiArchivingAnEmployee.html

### Archiving an employee

To archive an employee, send a `DELETE`
request to the `/labor/v1/employees/{employeeId}` endpoint of
the labor API. Include the Toast platform identifier of the employee as
a path parameter in the request.

This operation updates the employee in a way that indicates the
employee is inactive and cannot access the Toast POS or other parts of
the Toast platform. The Toast platform does not delete information about
employees when you archive them, and you can [unarchive
an employee later, if you need to](https://doc.toasttab.com/doc/devguide/apiUnarchivingAnEmployee.html).

|  |
| --- |
| Note |
| The internal representation of the archived state uses the term "deleted" and the labor API includes object value names such as `deleted` and `deletedDate`. The Toast platform *does not delete* employee information when you archive an employee. |

When an employee is archived:

* The employee cannot sign into the Toast POS, sign into Toast
  Web, or open new time entries.
* The `deleted` value in the `Employee`
  object for the employee is set to `true`.
* The employee's information remains available in Toast platform
  reports.

#### Example request to archive an employee

The following example **curl** command sends a
`DELETE` request to archive an employee.

**Example request to archive an employee**

```
curl -X DELETE \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \
https://[toast-api-hostname]/labor/v1/employees/b7946411-7d45-4beb-9bfc-0ec731da7b45![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiArchivingAnEmployee.html#co-d1e132768FECD0D-59E6-4C90-91D2-B1AB1B54B400) | Include the Toast platform identifier for the employee in the path parameter of the request. |

#### Example response to archiving an employee

The following example shows the response for a
`DELETE` request to archive an employee. For
information about the values in this `Employee` object, see
[the
API reference documentation](https://doc.toasttab.com/openapi/labor/tag/Data-definitions/schema/Employee/).

**Example response to a request to archive an employee**

```
{
    "guid": "82965aae-7b53-448a-b7e5-e32039f01ff4",
    "entityType": "RestaurantUser",
    "externalId": null,
    "v2EmployeeGuid": "717ae0a8-7f01-43f6-9356-6ef955d81c19",
    "lastName": "Lajoie",
    "wageOverrides": [],
    "phoneNumberCountryCode": "+1",
    "firstName": "Jean-Baptiste",
    "chosenName": null,
    "createdDate": "2025-06-13T14:33:48.930+0000",
    "phoneNumber": null,
    "deleted": true,![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "deletedDate": "2025-06-13T14:34:04.632+0000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "jobReferences": [],
    "modifiedDate": "2025-06-13T14:34:04.632+0000",
    "externalEmployeeId": null,
    "email": "jblajoie8650087951@example.com"
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiArchivingAnEmployee.html#co-d1e1337B9ABC104-B7F3-4146-920F-E773D7BDABD9) | When you archive an employee, the `deleted` value is set to `true`. |
| [2](https://doc.toasttab.com/doc/devguide/apiArchivingAnEmployee.html#co-d1e1339B9ABC104-B7F3-4146-920F-E773D7BDABD9) | The `deletedDate` value indicates the date and time you archived the employee. |


---

# Getting shift assignments for employees - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html

### Getting shift assignments for employees

To get information about the shifts that are scheduled for
employees of a restaurant, send a `GET` request
to the `/labor/v1/shifts` endpoint of the labor API.

The response contains an array of shift objects that contain the
configuration information for each shift.

#### Example request to GET scheduled shifts

The following example **curl** command sends a
`GET` request to the
`/labor/v1/shifts` endpoint.

**Example request to GET all scheduled shifts for a
restaurant**

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-o my-shifts-get-request-response-data.json \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
"https://[toast-api-hostname]/labor/v1/shifts?startDate=![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
2016-12-01T01:00:00.000-0000&endDate=2016-12-30T01:00:00.000-0000"
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e18370A00B97-C8C8-4406-B6D6-20C7B9566878) | Specify the GUID of the restaurant that you want to `get` shifts for. This must be an individual restaurant, not the GUID for a restaurant group. |
| [2](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e18570A00B97-C8C8-4406-B6D6-20C7B9566878) | This example uses a JSON parsing utility to select the shifts for one employee. The utility reads the JSON response data for this request from the output file specified here. |
| [3](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e18770A00B97-C8C8-4406-B6D6-20C7B9566878) | Specify the start and end dates of the time period you want to `GET` shifts for. You can select up to 30 days. |

#### Example response

The following example shows the response for a `GET`
request to the `/labor/v1/shifts` resource.

**Example response to a request to GET restaurant
shifts**

```
[
  {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "guid": "dbace5cb-390a-4242-a536-ca8a87393873",
    "entityType": "Shift",
    "externalId": null,
    "outDate": "2016-12-13T13:00:00.000+0000",
    "createdDate": "2016-12-22T01:56:34.004+0000",
    "deleted": false,
    "deletedDate": null,
    "employeeReference": {
      "guid": "c2ecd57f-fc91-47ee-a30d-622c7726bf54",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "modifiedDate": "2016-12-22T01:56:34.004+0000",
    "inDate": "2016-12-13T06:00:00.000+0000",
    "jobReference": {
      "guid": "b9a91677-b948-4860-989c-4107b8c31ab3",
      "entityType": "RestaurantJob",
      "externalId": null
    }
  },
  {
    "guid": "76830753-0837-4388-ae45-89a1e8055d28",
    "entityType": "Shift",
    "externalId": null,
    "outDate": "2016-12-12T13:00:00.000+0000",
    "createdDate": "2016-12-22T01:56:11.721+0000",
    "deleted": false,
    "deletedDate": null,
    "employeeReference": {
      "guid": "c2ecd57f-fc91-47ee-a30d-622c7726bf54",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "modifiedDate": "2016-12-22T01:56:11.721+0000",
    "inDate": "2016-12-12T06:00:00.000+0000",
    "jobReference": {
      "guid": "b9a91677-b948-4860-989c-4107b8c31ab3",
      "entityType": "RestaurantJob",
      "externalId": null
    }
  },
  {
    "guid": "a7b61a4c-dd48-497c-8f52-2a6a7db89c88",
    "entityType": "Shift",
    "externalId": null,
    "outDate": "2016-12-11T13:00:00.000+0000",
    "createdDate": "2016-12-22T01:25:04.135+0000",
    "deleted": false,
    "deletedDate": null,
    "employeeReference": {
      "guid": "f438e387-660a-4a43-8478-947414ab08af",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "modifiedDate": "2016-12-22T01:25:04.135+0000",
    "inDate": "2016-12-11T06:00:00.000+0000",
    "jobReference": {
      "guid": "a5eec1c0-1143-4408-bb6b-3d4b28a594a3",
      "entityType": "RestaurantJob",
      "externalId": null
    }
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e20570A00B97-C8C8-4406-B6D6-20C7B9566878) | The `GET` request returns an array of shift objects. Each object contains information about a shift. |
| [2](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e20770A00B97-C8C8-4406-B6D6-20C7B9566878) | The `employeeReference` value identifies the employee who is assigned to the shift. |
| [3](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e20970A00B97-C8C8-4406-B6D6-20C7B9566878) | This shift is assigned to the same employee as the first shift in the array. |
| [4](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e21170A00B97-C8C8-4406-B6D6-20C7B9566878) | This shift is assigned to a different employee. |

#### Example jq utility command to select shifts for a specific employee

The following example **jq** command selects the
shift objects for a specific employee from the array of shift objects
in the response from `/labor/v1/shifts` .

For more information about the **jq** utility,
see the [jq web
site](https://stedolan.github.io/jq/).

**jq utility command to select shifts for one employee**

```
jq \
'.[] | select(.employeeReference.guid=="c2ecd57f-fc91-47ee-a30d-622c7726bf54")' \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
my-shifts-get-request-response-data.json![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e272638D8AE5-CF5A-4163-8DD0-CE1013C011AD) | This **jq** command syntax selects the JSON array members that have a specific employee GUID in the `employeeReference.guid` value for the shift. |
| [2](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#co-d1e274638D8AE5-CF5A-4163-8DD0-CE1013C011AD) | In this example, the **jq** utility is reading JSON from the output file of the **curl** command that made the initial GET request to the shifts resource. See [Example request to GET all scheduled shifts for a restaurant](https://doc.toasttab.com/doc/devguide/apiGettingShiftAssignmentsForEmployees.html#get-shifts-example "Example request to GET all scheduled shifts for a restaurant"). |


---

# Getting time entries for employees - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html

### Getting time entries for employees

To get the time entry records for the employees at your
restaurant, send a `GET` request to the
`/labor/v1/timeEntries` resource of the labor API. Time
entries record information about the shifts that employees complete. The
response contains an array of time entry objects that contain
information about the time entries.

If an employee has not clocked out of the work shift, the
`outDate` value for the time entry is `null`. The
time entry period is not yet complete. Time entry values can change as
the server takes new orders and payments during an active work
shift.

When the employee clocks out, the `outDate` value is
set to the date and time that the employee closed the work shift. The
time entry is then complete. At this point, the monetary values in the
time entry are static and are not updated by other activities in the
restaurant. For example, if an employee has $100 of non-cash sales in
their time entry when they clock out, and then an order of $10 non-cash
sales is later transferred to the employee, the
`nonCashSales` value of the time entry is still $100, not
$110. The same applies to tips.

#### Example request for employee time entries

The following example **curl** command sends a
`GET` request to the
`/labor/v1/timeEntries` endpoint.

**Example request to GET the time entries for restaurant
employees**

```
curl -v -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
"https://[toast-api-hostname]/labor/v1/timeEntries?startDate=![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
2018-11-14T01:00:00.000-0000&endDate=2018-11-16T01:00:00.000-0000
&includeMissedBreaks=true"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e15283A590EF-007A-48DE-8B8A-FE6BF2FE2ADA) | Specify the GUID of the restaurant that you want to `GET` time entries for. This must be an individual restaurant, not the GUID for a restaurant group. |
| [2](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e15783A590EF-007A-48DE-8B8A-FE6BF2FE2ADA) | Specify the start and end dates of the time period you want to `GET` time entries for. You can select a period of up to 30 days. |
| [3](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e15983A590EF-007A-48DE-8B8A-FE6BF2FE2ADA) | The `timeEntries` endpoint accepts the `includeMissedBreaks` query parameter. If you set the value of `includeMissedBreaks` to `true`, the `timeEntries` endpoint returns `TimeEntryBreak` objects for scheduled break periods even if an employee did not take them. The `includeMissedBreaks` parameter is optional. If you do not include the parameter, the endpoint returns only breaks that were taken, not breaks that were missed. |

#### Example response

The following example shows a time entry for an employee.

**Example response containing an employee time entry**

```
[
  {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "guid": "26ac616b-b0d2-4d4e-b89b-62291be33d80",
    "entityType": null,
    "externalId": null,
    "nonCashSales": 0,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "outDate": "2018-11-15T19:17:34.653+0000",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "overtimeHours": 0,
    "breaks": [![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      {
        "breakType": {
          "guid": "8ed442b0-ca52-416d-8976-f941184eba15",
          "entityType": "BreakType"
        },
        "paid": true,
        "inDate": "2018-11-15T14:19:27.043+0000",
        "outDate": "2018-11-15T14:30:35.490+0000",
        "missed": false,
        "auditResponse": true
      },
      {
        "breakType": {
          "guid": "8ed442b0-ca52-416d-8976-f941184eba15",
          "entityType": "BreakType"
        },
        "paid": true,
        "inDate": "2018-11-15T18:13:46.894+0000",
        "outDate": null,
        "missed": true,
        "auditResponse": true
      }
    ],
    "employeeReference": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "guid": "a0c9070e-fffd-4e97-b3ea-fc356fbf9224",
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "shiftReference": "56387b8e-78df-47a4-9395-e5e1cb3f04d1",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
    "nonCashGratuityServiceCharges": 0,![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
    "inDate": "2018-11-15T14:14:46.894+0000",
    "regularHours": 5.046599722222222,
    "jobReference": {![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      "guid": "8b623183-7d6f-4f7c-babb-e74fe722ad30",
      "entityType": "RestaurantJob",
      "externalId": null
    },
    "tipsWithheld": 0,![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
    "businessDate": "20181115",
    "cashGratuityServiceCharges": 12.95,![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
    "createdDate": "2018-11-15T14:14:47.503+0000",
    "deleted": false,
    "deletedDate": null,
    "cashSales": 139.02,![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
    "hourlyWage": 7.5,
    "nonCashTips": 0,![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
    "modifiedDate": "2018-11-15T19:17:35.801+0000",
    "declaredCashTips": 30![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e21739786C5B-846E-4DDA-823C-AF858E53331A) | The `GET` request returns an array of time entry objects. Each object contains information about an employee's shift. |
| [2](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e21939786C5B-846E-4DDA-823C-AF858E53331A) | The `nonCashSales` value shows the total non-cash sales in the orders opened by the employee during the time entry period. The value includes tax amounts, but does not include tip or gratuity amounts.  For example, `nonCashSales` includes credit card payments, gift card payments, and payments using options that you configure in the Other Payment Options screen of Toast Web.  If the `outDate` value for the time entry is `null`, then the time entry period is not complete, and the sales totals are `0`. If the `outDate` value for the time entry is set, the sales totals are final and will not change. If you make changes to an order after the time entry is complete, the sales totals for the time entry do not change. |
| [3](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e22139786C5B-846E-4DDA-823C-AF858E53331A) | The time entry object contains information about the shift worked. For example, this `outDate` value specifies the date and time that the employee clocked out (the value is `null` if the employee has not clocked out). |
| [4](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e22339786C5B-846E-4DDA-823C-AF858E53331A) | The `breaks` array contains break type objects that contain information about breaks taken by the employee:  * `breakType` is the Toast platform GUID of   the type of employee break period. You configure types of   employee break periods for your restaurant. * `inDate` specifies when the employee   started the break and `outDate` is when the   employee ended the break. The datetime values are in UTC   (Universal Time Coordinated). * `paid` is a Boolean value that indicates   whether the employee was paid for the break. If the value   is `true`, the employee was paid for the break.   If the value is `false`, the employee was not   paid for the break. * `missed` is a Boolean value that   indicates whether the employee took the break. If the   value is `true`, the employee did not take the   break. If the value is `false`, the employee   did take the break. * `auditResponse` is a Boolean value that   indicates whether the employee was asked to take the   break. If the value is `true`, the employee was   asked to take the break. If the value is   `false`, the employee was not asked to take the   break. If the value is `null`, either the break   type is not configured to use break acknowledgement, or   the employee did not respond to the break acknowledgement   prompt on the Toast POS device.  For information on configuring missed breaks and   break acknowledgements, see [Tracking missed   breaks and acknowledging breaks](https://doc.toasttab.com/doc/platformguide/portalEmployeeBreaksOverview.html) in the   *Toast Platform Guide*. |
| [5](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e22539786C5B-846E-4DDA-823C-AF858E53331A) | The `employeeReference` value specifies the employee who worked the shift. |
| [6](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#shiftReference) | The GUID of the `Shift` object associated with this time entry. The `shiftReference` value on a `TimeEntry` object is only populated if the restaurant uses Toast's [clock-in enforcement feature](https://central.toasttab.com/s/article/Enforcing-Scheduling-Time-Clock-Rules-with-Integration-Partners-1492745815961), and the employee clocked into their shift within the restaurant's allowed window. Otherwise, the `shiftReference` value is null. |
| [7](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e22839786C5B-846E-4DDA-823C-AF858E53331A) | The `nonCashGratuityServiceCharges` value is the amount of gratuity service charges paid to the employee in non-cash tender (such as credit cards). |
| [8](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e23039786C5B-846E-4DDA-823C-AF858E53331A) | The `jobReference` value specifies the job that the employee performed. |
| [9](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e23239786C5B-846E-4DDA-823C-AF858E53331A) | The `tipsWithheld` value specifies the amount withheld from the employee's credit card tips. |
| [10](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e23439786C5B-846E-4DDA-823C-AF858E53331A) | The `cashGratuityServiceCharges` value is the amount of gratuity service charges paid in cash to the employee. |
| [11](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e23639786C5B-846E-4DDA-823C-AF858E53331A) | The `cashSales` value shows the total cash sales in the orders opened by the employee during the time entry period. The cash sales amount includes tax amounts, but does not include tip or gratuity amounts.  If the `outDate` value for the time entry is `null` (the time entry period is not complete), the sales totals are `0`. If the `outDate` value for the time entry is set, the sales totals are final and will not change. If you make changes to an order after the time entry is complete, the sales totals for the time entry do not change. |
| [12](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e23839786C5B-846E-4DDA-823C-AF858E53331A) | The `nonCashTips` value lists the total amount of tips paid to the employee in non-cash tender. |
| [13](https://doc.toasttab.com/doc/devguide/apiGettingTimeEntriesForEmployees.html#co-d1e24139786C5B-846E-4DDA-823C-AF858E53331A) | The `declaredCashTips` value is the amount of tips paid to the employee in cash. |


---

# Unarchiving an employee - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUnarchivingAnEmployee.html

### Unarchiving an employee

To unarchive an employee, send a `PUT`
request to the `/labor/v1/employees/{employeeGuid}/unarchive`
endpoint of the labor API. Include the Toast platform identifier of the
employee as a path parameter in the request.

When you unarchive an employee, that employee can sign into the
Toast POS and also sign into Toast Web. The employee will have all the
[jobs
assigned](https://doc.toasttab.com/doc/platformguide/platformEmployeeJobs.html) to them before they were archived.

If an employee had a swipe card for signing into the Toast POS,
the swipe card *is not* re-associated with the
employee when you unarchive them.

|  |
| --- |
| Important |
| If an employee has a different role when you unarchive them than they had when they were archived, you must evaluate the jobs that are assigned to the employee and whether that employee should continue to be able to sign into Toast Web. When you unarchive an employee, that employee keeps all jobs that were previously assigned and will be able to sign into Toast Web. |

#### Example request to unarchive an employee

The following example **curl** command sends a
`PUT` request to unarchive an employee.

**Example request to unarchive an employee**

```
curl -v -X PUT \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \
"https://[toast-api-hostname]/labor/v1/employees/0a7ced2c-b782-4585-8f41-4bb1656c3f67/unarchive"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUnarchivingAnEmployee.html#co-d1e141338BF6586-9DC9-4F2D-B959-8942F3A9B4B3) | Include the Toast platform identifier for the employee in the path parameter of the request. |

#### Example response

The following example shows the response for a
`PUT` request to unarchive an employee.

**Example response from a request to unarchive an
employee**

```
{
    "guid": "82965aae-7b53-448a-b7e5-e32039f01ff4",
    "entityType": "RestaurantUser",
    "externalId": null,
    "v2EmployeeGuid": "717ae0a8-7f01-43f6-9356-6ef955d81c19",
    "lastName": "Lajoie",
    "wageOverrides": [],
    "phoneNumberCountryCode": "+1",
    "firstName": "Jean-Baptiste",
    "chosenName": null,
    "createdDate": "2025-06-13T14:33:48.930+0000",
    "phoneNumber": null,
    "deleted": false,![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "deletedDate": null,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "jobReferences": [],
    "modifiedDate": "2025-06-13T14:35:12.598+0000",
    "externalEmployeeId": null,
    "email": "jblajoie8650087951@example.com"
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUnarchivingAnEmployee.html#co-d1e1426B9ABC104-B7F3-4146-920F-E773D7BDABD9) | When you unarchive an employee, the `deleted` value is set to `false`. |
| [2](https://doc.toasttab.com/doc/devguide/apiUnarchivingAnEmployee.html#co-d1e1428B9ABC104-B7F3-4146-920F-E773D7BDABD9) | When you unarchive an employee, the `deletedDate` value is set to `null`. |


---

# Getting all payments for a restaurant - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAllPaymentsInRestaurants.html

### Getting all payments for a restaurant

Send a `GET` request to the
`/payments` endpoint of the orders API to get a JSON array of
the GUIDs of the payments processed in a business day at your
restaurant. A business day's cutoff is defined by the restaurant's
`closeoutHour`, which you can retrieve with the [restaurant
API](https://doc.toasttab.com/doc/devguide/apiRestaurantInformation.html).

Depending on the query parameter that you use, you can retrieve
the following types of payments:

* The `paidBusinessDate` query parameter returns a
  list of the payments made during the business day. The payment
  method can be of any type, such as by cash, credit card, or gift
  card.
* The `refundBusinessDate` query parameter returns a
  list of the payments that were refunded during the business day. For
  details on refunded payments, see [Refunded payments](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#apiRefundedPayments).
* The `voidBusinessDate` query parameter returns a
  list of the payments that were voided during the business day. For
  details on voided payments, see [Voided payments](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#apiVoidedPayments).

The following example **curl** command sends a
`GET` request to the `/payments`
endpoint of the orders API.

**Get all payments for a restaurant**

```
curl -X GET \ -H "Authorization: Bearer
      eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
      oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
      M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
      aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
      zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
      DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
      o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
      txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
      Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
      9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
      QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
      dWq4Yzwo007AMgxjH9d241Y-g" \ -H "Toast-Restaurant-External-ID:
      76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
      https://[toast-api-hostname]/orders/v2/payments?paidBusinessDate=20200211![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAllPaymentsInRestaurants.html#co-d1e703C0BDE523-B62F-4A49-BD00-2E7817FF64CD) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant for which payments will be returned. |
| [2](https://doc.toasttab.com/doc/devguide/apiAllPaymentsInRestaurants.html#co-d1e708C0BDE523-B62F-4A49-BD00-2E7817FF64CD) | Specify the business date for order payments in the `paidBusinessDate` query parameter. Alternatively, you could query for refunds with the `refundBusinessDate` query parameter or for voids with the `voidBusinessDate` query parameter. |

  

The following example shows the JSON response data for a GET
request to the `/payments` endpoint.

**Get all payments return data**

```
[![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "361d140a-aa0b-43ad-98d6-516c416555d9",
  "198790e9-ea0d-4eb1-9bed-fc6c3d71d71e",
  "249c4be9-2236-4636-a90a-3ad15fb1fc69"
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAllPaymentsInRestaurants.html#co-d1e724C0BDE523-B62F-4A49-BD00-2E7817FF64CD) | The `/payments` endpoint returns a JSON array of payment GUIDs. In this example, the query returns three payments. |


---

# Alternative payment types - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html

### Alternative payment types

For payments other than credit card payments that are processed by the
Toast platform, you use an alternative payment type. These payment types
have a `type` of `OTHER`.

To get the list of available alternative payment types, use the [Get
alternative payment types](https://doc.toasttab.com/openapi/configuration/operation/alternatePaymentTypesGet/) operation.

#### Example order with an alternative payment type

The following example shows an `Order` object that
contains one check with a single payment that was processed outside of the
Toast platform.

**POST request message body to create a dine-in order with payment
information**

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "23fc2559-fc37-46ce-a963-cc5fdb88af0c",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "DiningOption"
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          },
          "quantity": 1,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "modifiers": []
        }
      ],
      "payments": [![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        {
          "paidDate": "2017-05-09T16:24:09.000+0000",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
          "type": "OTHER",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
          "amount": "9.55",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
          "otherPayment": {
            "guid": "0dc19214-d29e-4ab9-a773-27e5812999c7"![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
          },
          "tipAmount": "0.00",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
          "amountTendered": "9.55"![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3609EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The GUID of the dining option for the order. |
| [2](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3629EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The GUID of the menu group for the menu item selected for this check. For example, a menu might include a menu group named "appetizers" or "drinks." |
| [3](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3649EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The GUID of the menu item selected for this check. For example, a menu item might be "spinach dip" or "lemonade." |
| [4](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3669EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The number of the menu items selected for this check. For example, a check might include a "lemonade" menu item selection and a quantity of three, for a party of three customers. |
| [5](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#apiCreateOrderExampleOptionalPayment-co) | You do not need to include payment information to create an order. This example includes payment information when it creates the order. The price information for the payment is available from the `/prices` endpoint of the orders API. For more information, see [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices). |
| [6](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3689EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that the customer presented payment for the check. |
| [7](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3719EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | One of the enumerated payment categories used by the Toast platform. The `OTHER` payment category includes payments processed outside of the Toast platform, for example by third-party services. |
| [8](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3739EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The currency value of the payment, excluding tips. |
| [9](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3759EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The GUID of the specific alternate payment type configured for the restaurant. For example, a restaurant might configure a specific third-party service as one alternate payment type in the `OTHER` payment category. Use alternative payment types if you process your payments outside of The Toast credit cards API. |
| [10](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3779EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The currency value of the gratuity included with the payment. |
| [11](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3799EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The currency value presented by the customer to provide the payment. Do not include the tip in the `amountTendered` value. |

#### Example response from the orders API

The following example shows the response returned by the
`/orders` endpoint of the orders API.

**Orders endpoint response for a dine-in order with an alternative
payment**

```
{
  "guid": "71e46534-c837-4492-b4c1-0a841aea4ad5",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",
  "externalId": null,
  "revenueCenter": null,
  "server": null,
  "deliveryInfo": null,
  "serviceArea": null,
  "numberOfGuests": 1,
  "diningOption": {
    "guid": "23fc2559-fc37-46ce-a963-cc5fdb88af0c",
    "entityType": "DiningOption",
    "externalId": null
  },
  "source": "API",
  "voidDate": null,
  "openedDate": "2017-05-09T16:24:10.158+0000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "duration": null,
  "businessDate": 20170509,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "voidBusinessDate": null,
  "checks": [
    {
      "guid": "c1784eaf-7ca8-461a-ba38-795ec51cf84a",
      "entityType": "Check",
      "externalId": null,
      "displayNumber": "381",
      "amount": 8.99,
      "tabName": null,
      "taxExempt": false,
      "payments": [![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
        {
          "guid": "b6e08e3f-56cb-4873-bcc7-f0ea30842fee",
          "entityType": "OrderPayment",
          "externalId": null,
          "originalProcessingFee": null,
          "amount": 9.55,
          "tipAmount": 0,
          "amountTendered": 9.55,
          "cashDrawer": null,
          "cardType": null,
          "refundStatus": "NONE",
          "houseAccount": null,
          "type": "OTHER",
          "voidInfo": null,
          "otherPayment": {
            "guid": "0dc19214-d29e-4ab9-a773-27e5812999c7",
            "entityType": "AlternatePaymentType",
            "externalId": null
          },
          "paidDate": "2017-05-09T16:24:09.000+0000",
          "cardEntryMode": null,
          "paymentStatus": "CAPTURED",
          "paidBusinessDate": 20170509,
          "last4Digits": null,
          "refund": null
        }
      ],
      "appliedDiscounts": [],
      "voidDate": null,
      "openedDate": "2017-05-09T16:24:10.165+0000",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "totalAmount": 9.55,
      "selections": [
        {
          "guid": "3ede373e-ed90-4315-88d0-3f34f76a7513",
          "entityType": "MenuItemSelection",
          "externalId": null,
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup",
            "externalId": null
          },
          "deferred": false,
          "item": {
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec",
            "entityType": "MenuItem",
            "externalId": null
          },
          "quantity": 1,
          "preDiscountPrice": 8.99,
          "voidReason": null,
          "optionGroup": null,
          "displayName": "Crab Cakes",
          "appliedDiscounts": [],
          "tax": 0.56,
          "modifiers": [],
          "voidDate": null,
          "fulfillmentStatus": "NEW",
          "salesCategory": null,
          "selectionType": "NONE",
          "voidBusinessDate": null,
          "createdDate": "2017-05-09T16:24:10.193+0000",
          "preModifier": null,
          "price": 8.99,
          "modifiedDate": "2017-05-09T16:24:10.193+0000",
          "voided": false,
          "appliedTaxes": [
            {
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "d5b88c05-1348-42ef-b1d3-577a83d70a80",
                "entityType": "TaxRate"
              },
              "name": "State Tax",
              "rate": 0.0625,
              "taxAmount": 0.56,
              "type": "PERCENT"
            }
          ]
        }
      ],
      "voidBusinessDate": null,
      "deleted": false,
      "paidDate": "2017-05-09T16:24:10.197+0000",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      "closedDate": "2017-05-09T16:24:10.197+0000",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
      "deletedDate": null,
      "modifiedDate": "2017-05-09T16:24:10.203+0000",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      "appliedLoyaltyInfo": null,
      "voided": false,
      "taxAmount": 0.56,
      "appliedServiceCharges": [],
      "paymentStatus": "CLOSED",
      "customer": null
    }
  ],
  "deleted": false,
  "paidDate": "2017-05-09T16:24:10.204+0000",![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
  "closedDate": "2017-05-09T16:24:10.204+0000",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
  "deletedDate": null,
  "restaurantService": null,
  "modifiedDate": "2017-05-09T16:24:10.206+0000",![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
  "promisedDate": null,
  "voided": false,
  "estimatedFulfillmentDate": null,
  "table": null
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3979EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The unique identifier that the Toast platform assigns to the order. |
| [2](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e3999EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that the order was created. |
| [3](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#apiExampleOrderCreateResponseBusinessDate-co) | The restaurant business date on which the order was fulfilled. The restaurant business date can be different than the calendar dates when the order is created, paid, and closed. For example, if a restaurant business day extends after midnight, an order that is created after midnight might have a `businessDate` value that is one day earlier than the calendar date when the order was created. |
| [4](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e4019EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | Information about payments made for this check. |
| [5](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e4039EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that the check was added to the order. |
| [6](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e4059EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that the customer made a payment for the check. |
| [7](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e4089EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that the check was completely fulfilled and paid. |
| [8](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e4109EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that information about the check was changed most recently. |
| [9](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e4129EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that *all* checks in the order were completely paid. |
| [10](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e4149EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that *all* checks in the order were completely fulfilled and paid. |
| [11](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html#co-d1e4169EC9AFB8-6DAA-446E-8606-A2AE11A4D2F8) | The date and time that information about the order was changed most recently. |


---

# Getting information about a specific payment - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html

### Getting information about a specific payment

Send a `GET` request to the
`/payments/{guid}` endpoint of the
orders API to obtain detailed information about a specific payment. The
endpoint returns a `Payment` object that contains information
about the payment. For information about the values of the
`Payment` object, see [reference
documentation for the orders API](https://doc.toasttab.com/openapi/orders/overview/).

The following example **curl** command sends a
`GET` request to the
`/payments/{guid}` endpoint for a
specific payment.

**Get information of a specific payment**

```
curl -X GET \ -H "Authorization: Bearer
      eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
      oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
      M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
      aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
      zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
      DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
      o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
      txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
      Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
      9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
      QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
      dWq4Yzwo007AMgxjH9d241Y-g" \ -H "Toast-Restaurant-External-ID:
      76cb1b05-cb1e-4adf-863a-b2a94a5ecdcf" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
      https://[toast-api-hostname]/orders/v2/payments/361d140a-aa0b-43ad-98d6-516c416555d9![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8108E4737FC-3875-4918-866A-092F630A0814) | Use the `Toast-Restaurant-External-ID` request parameter to specify the GUID of the restaurant in which the payment was made. |
| [2](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8158E4737FC-3875-4918-866A-092F630A0814) | Specify the payment GUID, which you can get from the `/payments` endpoint of the orders API. |

  

The following example shows the JSON response data for a GET
request to the `/payments/{guid}`
endpoint. The payment method for this sample payment was a credit
card.

**Get payment return data**

```
{
  "guid": "361d140a-aa0b-43ad-98d6-516c416555d9",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "OrderPayment",
  "externalId": null,
  "originalProcessingFee": null,
  "amount": 57.73,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "tipAmount": 0,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "amountTendered": 0,
  "cashDrawer": null,
  "cardType": "VISA",
  "lastModifiedDevice": {
    "id": "7c664bbbb33913bd"
  },
  "refundStatus": "NONE",
  "houseAccount": null,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "type": "CREDIT",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  "voidInfo": null,![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
  "otherPayment": null,![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
  "mcaRepaymentAmount": null,
  "createdDevice": {
    "id": "7c664bbbb33913bd"
  },
  "paidDate": "2020-02-11T16:38:32.774+0000",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
  "cardEntryMode": "KEYED",![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
  "paymentStatus": "CAPTURED",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
  "paidBusinessDate": 20200211,
  "last4Digits": "1111",
  "refund": null,![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
  "orderGuid": "86675d88-b27e-4850-94ab-48662563eae8",
  "checkGuid": "ed4b222f-5259-43fd-8db0-1243a11ed554"
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8554F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | The `guid` value contains the unique Toast POS identifier of the payment. |
| [2](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8574F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | The amount of the payment, including taxes and service charges but excluding tips. |
| [3](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8594F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | The amount tipped on this payment. |
| [4](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8614F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | If a house account was used to pay the check, this value contains reference information (such as the GUID) of the house account. The value is `null` if a house account was not used for payment. |
| [5](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8634F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | The payment method, such as `CREDIT` for a credit card. |
| [6](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8664F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | If the payment was voided, this value contains a `VoidInformation` object with information about the void. For details, see [Voided payments](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#apiVoidedPayments). The value is `null` if the payment has not been voided. |
| [7](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8684F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | Reference information (such as the GUID) of an other payment option used to pay the check. The value is `null` if an other payment option was not used for payment. |
| [8](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8704F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | The date and time when the payment was made. |
| [9](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8724F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | For credit card payments, specifies how the credit card data was obtained. The value is `null` if a credit card was not used for payment. |
| [10](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8744F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | The status of the payment. In this example, the payment has been captured. |
| [11](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8764F5CFC3E-3A32-4EF2-AB9F-D1CA606D8F49) | If the payment has been refunded, this value contains a `Refund` object with information about the refund. For details, see [Refunded payments](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#apiRefundedPayments). The value is `null` if the payment has not been refunded. |

  

The following sections provide information about voided and
refunded payments.

* [Voided payments](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#apiVoidedPayments)
* [Refunded payments](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#apiRefundedPayments)

#### Voided payments

The `/payments/{guid}`
endpoint can return data for voided payments. A void is a payment that
has been fully or partially voided. Voids can be issued on the entire
check or on one or more specific items.

With one exception, any payment can be voided. The exception is
a credit card payment that has been captured (the payment cannot be
voided but can be refunded).

In the return data for a voided payment, the
`Payment` object includes a `VoidInformation`
object that contains details of the void operation.

The following example shows the JSON response data for a voided
cash payment.

**Example of a voided cash payment**

```
{
  "guid": "2f20387c-2b39-4c67-8898-b3faccb3ce06",
  "entityType": "OrderPayment",
  "externalId": null,
  "originalProcessingFee": null,
  "amount": 42.8,
  "tipAmount": 0,
  "amountTendered": 42.8,
  "cashDrawer": {
    "guid": "30795302-5fc9-461c-b314-ac8ea6e55cd5",
    "entityType": "CashDrawer",
    "externalId": null
  },
  "cardType": null,
  "lastModifiedDevice": {
    "id": "7c664bbbb33913bd"
  },
  "refundStatus": "NONE",
  "houseAccount": null,
  "type": "CASH",
  "voidInfo": {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "voidUser": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "guid": "9659c962-7a8a-43ec-9343-47cafb68e83b",
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "voidApprover": {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
      "guid": "9659c962-7a8a-43ec-9343-47cafb68e83b",
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "voidDate": "2020-02-18T19:24:56.311+0000",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "voidBusinessDate": 20200218,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    "voidReason": null![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png) 
  },
  "otherPayment": null,
  "mcaRepaymentAmount": null,
  "createdDevice": {
    "id": "7c664bbbb33913bd"
  },
  "paidDate": "2020-02-18T18:10:28.187+0000",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
  "cardEntryMode": null,
  "paymentStatus": "VOIDED",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
  "paidBusinessDate": 20200218, 
  "last4Digits": null, 
  "refund": null
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8873DB65CBB-6A0B-4300-B1BB-FB6BFFD86ACF) | The `VoidInformation` object with details of the void. |
| [2](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8893DB65CBB-6A0B-4300-B1BB-FB6BFFD86ACF) | The restaurant employee who voided the check or the item. The `guid` value lists the unique Toast POS identifier of the employee. For details on retrieving information about employees, see [Getting all employees of a restaurant](https://doc.toasttab.com/doc/devguide/api_get_all_employees.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8913DB65CBB-6A0B-4300-B1BB-FB6BFFD86ACF) | The restaurant employee who approved the void. The employee approving the void may be the same person who voided the payment. |
| [4](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8933DB65CBB-6A0B-4300-B1BB-FB6BFFD86ACF) | The date and time when the payment was voided. |
| [5](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8953DB65CBB-6A0B-4300-B1BB-FB6BFFD86ACF) | The business date when the payment was voided. |
| [6](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e8983DB65CBB-6A0B-4300-B1BB-FB6BFFD86ACF) | The pre-configured void reason that was specified for the void. The value is `null` if a void reason was not specified. |
| [7](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e9003DB65CBB-6A0B-4300-B1BB-FB6BFFD86ACF) | The date and time when the original (pre-void) payment was made. |
| [8](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e9023DB65CBB-6A0B-4300-B1BB-FB6BFFD86ACF) | The current status of the payment, which is `VOIDED` for voided payments. |

#### Refunded payments

The `/payments/{guid}`
endpoint can return data for refunded payments. A refund is a credit
card payment that has been fully reversed after it was captured.
Refunds cannot be issued on specific items, but instead can only be
issued on the entire check.

In the return data for a refunded payment, the
`Payment` object includes a `Refund` object with
details of the refund operation.

The following example shows the JSON response data for a
refunded credit card payment.

**Example of a refunded payment**

```
{
  "guid": "3e95fde2-da0f-4057-b91c-840b43e637c5",
  "entityType": "OrderPayment",
  "externalId": null,
  "originalProcessingFee": null,
  "amount": 6.36,
  "tipAmount": 0.0,
  "amountTendered": 6.36,
  "cashDrawer": null,
  "cardType": "VISA",
  "lastModifiedDevice": {
    "id": null
  },
  "refundStatus": "FULL",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "houseAccount": null,
  "type": "CREDIT",
  "voidInfo": null,
  "otherPayment": null,
  "mcaRepaymentAmount": null,
  "createdDevice": {
    "id": null
  },
  "paidDate": "2020-02-19T19:47:51.206+0000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "cardEntryMode": "ONLINE",
  "paymentStatus": "CAPTURED",
  "paidBusinessDate": 20200219,
  "last4Digits": "1111",
  "refund": {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "refundAmount": 6.36,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "tipRefundAmount": 0.0,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    "refundDate": "2020-02-19T19:48:31.828+0000",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
    "refundBusinessDate": 20200219![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e11385397DA82-3E87-45E1-9461-6911EBC8A028) | The status of the refund. A `FULL` status means that a full refund was made on this payment. |
| [2](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e11405397DA82-3E87-45E1-9461-6911EBC8A028) | The date and time when the original (pre-refund) payment was made. |
| [3](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e11425397DA82-3E87-45E1-9461-6911EBC8A028) | The `Refund` object with details of the refund. |
| [4](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e11445397DA82-3E87-45E1-9461-6911EBC8A028) | The amount of the refund, excluding the tip. |
| [5](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e11465397DA82-3E87-45E1-9461-6911EBC8A028) | The amount of the tip refund. |
| [6](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e11495397DA82-3E87-45E1-9461-6911EBC8A028) | The date and time when the payment was refunded. |
| [7](https://doc.toasttab.com/doc/devguide/apiPaymentntInformation.html#co-d1e11515397DA82-3E87-45E1-9461-6911EBC8A028) | The business date when the payment was refunded. |


---

# Submitting payments - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiSubmittingPaymentsIntro.html

### Submitting payments

To indicate that a guest paid for an order on your ordering
application, the orders that you submit must contain payment
information.

If you use the Toast platform as your credit card payment processor,
you [submit
payments through Toast's credit card API](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html).

If you use a credit card payment processor outside of the Toast
platform, or you submit payments that are not credit card payments, you
[submit payments using
alternative payment types](https://doc.toasttab.com/doc/devguide/apiCreatingAnOrderWithPaymentInformation.html). For example, you use an alternative
payment type to submit cash payments.


---

# Credit card payments - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html

### Credit card payments

|  |
| --- |
| Note |
| A credit card authorization must be associated with an order. This prevents authorization misuse and fines. |

You can authorize a credit card payment for a check and then apply
that payment to a check when you create an order. The credit cards API
processes the authorization for a credit card payment. You can use the
authorized credit card payment as the payment for a check that you create in
the orders API.

When you authorize a credit card payment, the credit cards API places
a hold for the amount of the payment on the card account. For a period of
five minutes, you can submit an order to the orders API using that payment.
If you do not submit an order using the payment within five minutes, the
credit cards API will automatically release the hold. You cannot apply the
credit card payment to a check after the credit cards API releases the hold.
When you apply a credit card payment to a check, the Toast platform will
automatically capture payment from the card account after business hours on
the day the order is fulfilled. If it fails to capture payment within four
days, it will void the payment for the order.

|  |
| --- |
| Important |
| DISCLAIMER: Compliance with PCI DSS and all other regulations or laws is solely your responsibility. The information provided is for informational purposes only and should not be relied upon or used as a substitute for consultation with a Qualified Security Assessor or other legal advisor. Please consult a professional advisor for a qualified opinion on the applicability of requirements to your business operations. |

For general information about using the orders API, see [Orders API overview](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html).

#### Overview of the credit card authorization and application process

The following procedure provides an overview of the process to
authorize and apply a credit card payment.

**To authorize and apply a credit card payment for an orders API
order**

1. Submit a `POST` request to the
   `/prices` endpoint of the orders API to get the
   total price of each check in an order. For more information, see
   [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices).
2. Generate a UUID unique identifier for the credit card
   payment.

   The payment UUID is a path parameter for a
   `PUT` request to the
   `/merchants/{merchantUuid}/payments/{paymentUuid}`
   resource.

   You use the payment UUID to apply the authorized credit card
   payment to an order.

   To generate the payment UUID, you must use the algorithm
   described in [version
   four of the UUID standard](https://tools.ietf.org/html/rfc4122#section-4.4).
3. Submit a `PUT` request to the
   `/merchants/{merchantUuid}/payments/{paymentUuid}` resource
   of the credit cards API.

   In the message body of the request, include the total price for
   all checks and encrypted credit card information. For more
   information, see [Authorizing a credit card payment](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiAuthorizingACreditCardPayment).
4. Within five minutes, submit a `POST`
   request to the `/orders` endpoint of the orders API to add
   the order.

   In the JSON message body data for a check, set the
   `guid` value of the payment object to the payment UUID of
   the credit card payment. For more information, see [Applying an authorized credit card payment to an orders API
   check](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiApplyingCCPaymentToOrder).

If a credit card payment cannot be authorized, the [ErrorMessage
object](https://doc.toasttab.com/doc/devguide/apiResponsesAndErrors.html#apiErrorMessage) typically includes a generic, non-null, error message such
as `Invalid card data`.

Error messages in the credit cards API are intentionally not
specific or detailed, to minimize the error information that reaches
attackers that are attempting to make fraudulent payments.

For a list of common reasons for card denial, see [Card declined message reference](https://doc.toasttab.com/doc/platformguide/adminCreditCardDeclinedMessageReference.html).

#### Authorizing a credit card payment

To authorize a credit card payment for a check, you send a
`PUT` request to the
`/merchants/{merchantUuid}/payments/{paymentUuid}` resource of
the credit cards API.

The credit cards API verifies that the credit card account has
sufficient funds available and places a hold on the account for the amount
of the payment.

**PUT request path parameters**

* *`merchantUuid`* - The Toast GUID for the
  restaurant that will collect the funds from the credit card
  payment.
* *`paymentUuid`* - A UUID unique identifier
  for the credit card payment. You generate the UUID for the payment.
  You use the identifier when you apply the credit card payment to a
  check. To generate the payment UUID, you must use the algorithm
  described in [version
  four of the UUID standard](https://tools.ietf.org/html/rfc4122#section-4.4).

The message body parameter for the `PUT`
request is a JSON `PaymentAuthorization` object. The
`PaymentAuthorization` object includes the information
described in the following list.

**PUT request message body parameter information**

* How your integration received the credit card information for
  the authorization, and whether your organization will store the
  information for later use
* Encrypted and non-encrypted information about the credit card
  account
* The payment amount and tip amount for the authorization

The following example shows the JSON message body to
`PUT` a credit card payment authorization
request.

**Authorization request message body**

```
{
  "encryptedCardData": "FBRdBx38xrQ8UUQTAVUI3mLddkqtuxX6huPOsI
1WKVS97ffQITY2yToeJU0e16aRo6ehZZxBO6YU0DKUOXiX8Kww1jXE3Rn5J8Do
8n3wSeLV3Qomn0VvAd+5YT8bUijVs0aRUy3u34DpYwMkon0WMkq8BNGQWk3Whd
3qJEdi/SagofuO0yExxlixklflwAIkbuZZ2tHtp+FV7n+UAfXPeSgXRrX6Rkal
ir3OKZtUrC8aiymc7Xs9G4w4+bDBa/kArP1D7e3A42+wIsQicc9rL//B0GyQll
Cu2dnrEDSllcU3wZSRLVPjuoXmyK28JO40Grzeq2ZKAKepnTDW9m84ag==",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "keyId": "RSA-OAEP-SHA256::a253759c-1c91-4f22-9db9-71ba24738f8d_PartnerName"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "amount": 98.76,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "tipAmount": 24.69,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "willSaveCard": true,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  "cardNumberOrigin": "PARTNER_VAULT",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
  "requestMetadata": {
    "localTransactionDate": "2019-08-24T22:00:00.000+0000",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
    "originIPAddr": "189.219.91.62",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
    "partnerServiceInfo": {
      "instanceId": "my-api-client"![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
    },
    "cardFirst6": "411111",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
    "cardLast4": "1111",![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
    "billingAddress": {![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
        "name": "Clark Kent",
        "phone": "555-555-5555",
        "address1": "123 Main Street",
        "address2": "",
        "city": "Boston",
        "region": "MA",
        "postalCode": 02215,
        "country": "USA"
    },
    "deliveryAddress": {![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
        "name": "Lois Lane",
        "phone": "111-555-5555",
        "address1": "789 Grand Avenue",
        "address2": "",
        "city": "New York",
        "region": "NY",
        "postalCode": 10001,
        "country": "USA"
    },
    "guestIdentifier": "toastyguest@domain.com",![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)
    "guestEmail": "toastyguest@domain.com",![15](https://doc.toasttab.com/doc/devguide/assets/images/callouts/15.png)
    "userAgent": "Browser/1.0",(16)
    "appName": "Our Company's Amazing Android App",(17)
    "appVersion": "4.2"(18)
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e111F291C744-5561-42C1-BD4E-F18BB8532F7A) | Identifying credit card information, including the account number. You must encrypt this information and encode it in base64 format. For more information, see [Encrypting credit card information](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiEncryptingCreditCardInformation). |
| [2](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e113F291C744-5561-42C1-BD4E-F18BB8532ABC) | The encryption key identifier that you receive from from Toast integration support. The identifier string indicates the algorithm and the specific encryption key used to encrypt the credit card data for the request. For information about encryption algorithms and key identifiers, see [Encryption algorithms](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiCreditCardInformationEncryptionAlgorithms) and [Encryption keys and key identifiers](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiEncryptionKeysAndKeyIdentifiers). |
| [3](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e113F291C744-5561-42C1-BD4E-F18BB8532F7A) | The price of the check that you will apply the credit card payment to. For information about getting the total price of a check, see [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices). |
| [4](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e115F291C744-5561-42C1-BD4E-F18BB8532F7A) | The amount of the gratuity that the guest applied to the check. |
| [5](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#willSaveCard) | The `willSaveCard` value indicates whether organizations store restaurant guests' credit card information for future use. `true` indicates that your organization stores credit card information used in a credit card authorization. `false` indicates that your organization does not store the credit card information used in a credit card authorization. |
| [6](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#cardNumberOrigin) | The `cardNumberOrigin` value is used for "card on file" reporting. If your organization uses stored credit card information for a credit card authorization, you must set the value of `cardNumberOrigin` to `PARTNER_VAULT`. The default value for `cardNumberOrigin` is `END_USER`. For more information, see [Using card number origin values](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiCardNumberOriginForFraudDetection). |
| [7](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e117F291C744-5561-42C1-BD4E-F18BB8532F7A) | The date and time when the guest presents their credit card, in [ISO 8601 format](https://doc.toasttab.com/doc/devguide/api_dates_and_timestamps.html). The `localTransactionDate` must be set to the current date and time, and cannot be a future date. |
| [8](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e119F291C744-5561-42C1-BD4E-F18BB8532F7A) | The IP address of the device that the guest used to enter the credit card payment. For example, for an online order, this is the IP address of the computer that the guest used to submit the order.  |  | | --- | | Important | | The origin IP address is essential for detecting and preventing fraud attempts in credit card authorization requests. To prevent disruption to your transaction workflow, ensure the correct origin IP address is used. | |
| [9](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e122F291C744-5561-42C1-BD4E-F18BB8532F7A) | An identifier for the server or process that operates as an API client to process the credit card authorization. For example, this might be the identifier of a client software process that appears in log information. |
| [10](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#first6) | The first six digits of the credit card number. The first six digits are the bank identification number (BIN) for the card. The value must match exactly the information provided in the encrypted card data. This value is required when `cardNumberOrigin` is `END_USER`. |
| [11](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#last4) | The last four digits of the credit card number. The value must match exactly the information provided in the encrypted card data. This value is required when `cardNumberOrigin` is `END_USER`. |
| [12](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#billingAddress) | The billing address associated with the credit card. When `cardNumberOrigin` is `END_USER`, `billingAddress` is required and must include at least a `postalCode` and `country`. |
| [13](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#deliveryAddress) | A delivery address for the order. |
| [14](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#guestID) | An identifier for the guest making the payment, such as an email address or phone number. This value is required when `cardNumberOrigin` is `END_USER`. For more information, see [Using guestIdentifier values](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiUsingGuestIdentifierValues). |
| [15](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#guestEmail) | The email address of the guest placing the payment. If you include an email address in the `guestIdentifier` value, the email address in the `guestEmail` value should match the `guestIdentifier`. This can help prevent fraudulent transactions. This field is optional. |
| [(16)](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#userAgent) | For payments taken through a web browser, the browser's user agent string. |
| [(17)](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#appName) | A company-specific name for the mobile app (if any) the payment is made through. For example, use 'MyCompany Android App' instead of 'Android App'. |
| [(18)](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#appVersion) | The version of the mobile app (if any) that the payment is made through. You can use any string to represent the app version. There are no format or content requirements. |

#### Optimizing fraud detection

The Toast platform performs fraud detection when it authorizes
credit card payments. To ensure maximum protection from fraudulent
transactions for your organization and for restaurant guests, your
integration *must* send accurate information about the
credit card transaction and the transaction type.

Toast platform fraud detection uses the following information from a
credit card authorization request:

* `cardNumberOrigin` - Indicates whether the credit
  card information in the authorization request was supplied directly by
  the guest or from stored credit card information from a previous
  transaction.

  You include the `cardNumberOrigin` value in a
  `PaymentAuthorization` object in the message body parameter
  of a credit card authorization request. For more information, see
  [cardNumberOrigin values](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiCardNumberOriginValues).
* `guestIdentifier` - An identification string that
  your integration assigns to guests who initiate credit card
  authorizations.

  You include the `guestIdentifier` value in the
  `PaymentRequestMetadata` object for your credit card
  authorization request. For more information, see [Using guestIdentifier values](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiUsingGuestIdentifierValues).

##### Using card number origin values

The `PUT` request message body for authorizing a
payment includes a `cardNumberOrigin` value. This value
indicates whether:

* The guest provided the credit card information directly
  (`END_USER`)
* The credit card information was retrieved from secure storage
  (`PARTNER_VAULT`)

To ensure that your guests' transactions receive adequate fraud
protection, your integration *must* send the
`cardNumberOrigin` value that correctly indicates the way
that your integration acquired credit card information.

* If a guest provided credit card information directly, you must
  set the `cardNumberOrigin` value to
  `END_USER`.
* If your integration retrieved the credit card information from
  secure storage, you must set the `cardNumberOrigin` value
  to `PARTNER_VAULT`.

|  |
| --- |
| Important |
| If you do not include the `cardNumberOrigin` value that correctly indicates the source of the credit card information, you reduce the effectiveness of the fraud detection provided by the Toast platform. Make sure that your integration includes the correct `cardNumberOrigin` value to ensure the most accurate fraud detection and to minimize unnecessarily declined transactions. |

|  |
| --- |
| Note |
| The `PaymentRequestMetadata` object in the `requestMetadata` value *must* include the following values:  * `cardFirst6` * `cardLast4` * `billingAddress` * `guestIdentifier` * `originIPAddr` |

The following table provides more information about the values you
include in the `cardNumberOrigin` value in a
`PaymentAuthorization` object in the message body parameter
of a credit card authorization request.

**cardNumberOrigin values**

| Value | Explanation |
| --- | --- |
| `END_USER` | The guest provided the credit card information directly.  The `PaymentRequestMetadata` object in the `requestMetadata` value *must* include:  * `cardFirst6` * `cardLast4` * `billingAddress` * `guestIdentifier` * `originIPAddr` |
| `PARTNER_VAULT` | Your integration retrieved the credit card information from secure storage.  The `PaymentRequestMetadata` object in the `requestMetadata` value *must* include:  * `cardFirst6` * `cardLast4` * `billingAddress` * `guestIdentifier` * `originIPAddr` |

  

|  |
| --- |
| Note |
| When you authorize a payment for a new credit card, you must set the `cardNumberOrigin` value to `END_USER`, even if you use an external credit card vaulting service to save guests' credit cards. Setting the `cardNumberOrigin` value to `END_USER` gives you additional fraud protection when authorizing payment for new credit cards. |

##### Using guestIdentifier values

The Toast platform uses the `guestIdentifier` value for
fraud evaluation. The `guestIdentifier` value is a unique
identifier for a restaurant guest associated with a credit card
payment.

You use the same identifier for a guest even when that guest uses
different methods of payment. The `guestIdentifier` value
should be unique per guest but not unique per credit card. In other
words, if one guest uses two credit cards, you use the same
`guestIdentifier` when authorizing both cards. An example of
a value for the `guestIdentifier` field is a guest's email
address.

If you use the same `guestIdentifier` value repeatedly
on many card authorizations for multiple guests, authorizations using
this `guestIdentifier` are likely to be declined because of
the suspicious activity. A `guestIdentifier` value of
`0` will cause credit card authorizations to fail.

#### Applying an authorized credit card payment to an orders API check

To apply an authorized credit card payment to a check in an orders
API order, you include the payment UUID that you authorized as the payment
GUID. The Toast platform applies the credit card payment to the check and
attempts to capture the funds later in the business day.

|  |
| --- |
| Note |
| You must `POST` an order within five minutes of the credit card payment authorization. After five minutes, the credit card API automatically voids the payment. |

The following example shows the JSON message body data that applies
an authorized credit card payment to a check. Most contents of the order
object have been omitted from this example. For more information about
`POST`ing orders in the orders API, see [Orders API overview](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html).

**Example of applying an authorized credit card payment to a
check**

```
{
  "entityType": "Order",

    [contents omitted]

  "checks": [
    {
      "entityType": "Check",

        [contents omitted]

      "payments": [
        {
          "guid": "78700301-55B6-4C0F-8C69-69E8D3593850",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
          "paidDate": "2018-01-24T22:00:00.000+0000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          "type": "CREDIT",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "amount": "98.76",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "tipAmount": "24.69"![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e195A18BC72A-4EBC-425E-BD6C-E5E3E35516D3) | The payment UUID that you assign to the payment when you authorize it in the credit cards API. You supply this UUID in the *`paymentUuid`* path parameter for the `PUT` request to authorize the payment. For more information, see [Authorizing a credit card payment](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiAuthorizingACreditCardPayment). |
| [2](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e197A18BC72A-4EBC-425E-BD6C-E5E3E35516D3) | The date and time when Toast processes the credit card payment, presented in ISO 8601 format. Credit card authorizations expire within seven days, therefore the `paidDate` cannot be more than seven days after the `localTransactionDate`. The `paidDate` is available in reporting data. |
| [3](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e199A18BC72A-4EBC-425E-BD6C-E5E3E35516D3) | The type of payment. For credit card payments, this value is `CREDIT`. |
| [4](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e201A18BC72A-4EBC-425E-BD6C-E5E3E35516D3) | The price of the check that you will apply the credit card payment to. For information about getting the total price of a check, see [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices). |
| [5](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e203A18BC72A-4EBC-425E-BD6C-E5E3E35516D3) | The amount of the gratuity that the guest applied to the check. |

#### Encrypting credit card information

|  |
| --- |
| Important |
| DISCLAIMER: Compliance with PCI DSS and all other regulations or laws is solely your responsibility. The information provided is for informational purposes only and should not be relied upon or used as a substitute for consultation with a Qualified Security Assessor or other legal advisor. Please consult a professional advisor for a qualified opinion on the applicability of requirements to your business operations. |

When you send a `PUT` request to authorize a
payment in the credit cards API, you include identifying credit card
information in the message body data. The JSON payment authorization
object in the message body data includes an `encryptedCardData`
value that contains a base64 representation of the encrypted credit card
information.

To compose the `encryptedCardData` value, you include
credit card information in a JSON object and encrypt it using the
encryption algorithm and RSA public key that corresponds to the encryption
key identifier (`keyId`) that you receive from Toast
integration support.

For information about supported encryption algorithms, see [Encryption algorithms](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiCreditCardInformationEncryptionAlgorithms). For
information about key identifiers, see [Encryption keys and key identifiers](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiEncryptionKeysAndKeyIdentifiers).

The following example shows credit card information that you encrypt
and base64 encode in order to generate an `encryptedCardData`
value.

**Example credit card information for an encryptedCardData
value**

```
{
  "cardNumber" : "4111111111111111",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "zipCode" : "01234",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "cvv" : "321",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "expMonth" : "01",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  "expYear" : "20",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  "country" : "USA"![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e5385CE9715-52F9-43FB-AB1A-9F382E163FBA) | The primary account number (PAN) of the card, which the API validates using the ISO-standard Luhn algorithm. |
| [2](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e5585CE9715-52F9-43FB-AB1A-9F382E163FBA) | The ZIP or postal code of the card holder's billing address. This value is required, must be numeric, and must not be an empty string. Do not include hyphens (`-`) in the string. |
| [3](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e5785CE9715-52F9-43FB-AB1A-9F382E163FBA) | The three- or four-digit card verification value (CVV) of the card. When `cardNumberOrigin` is `PARTNER_VAULT` in the credit card authorization request, the CVV is not required, but it is validated for correctness if it is submitted. If you do not submit a CVV on a credit card authorization request, you can either omit the `cvv` value on your authorization, or submit a `cvv` value of `null`. The `cvv` value you submit should not be an empty string (`""`). |
| [4](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e5985CE9715-52F9-43FB-AB1A-9F382E163FBA) | The two-digit month of the expiration date for the card. |
| [5](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e6185CE9715-52F9-43FB-AB1A-9F382E163FBA) | The two-digit year of the expiration date for the card. |
| [6](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-apiCcEncryptedInfoCountry) | The country of the card holder's billing address, in ISO 3166-1 alpha-3 format. |

  

The following example shows the base64-encoded and encrypted credit
card information in the `encryptedCardData` value.

**Base64-encoded and encrypted credit card information in the
`encryptedCardData` value**

```
{
  "encryptedCardData": "yu3BmKwL65F3UVOrsQEZxhrSyN//QkwIhEjgAFVYV
    nl28IyQ+bHIdez1bcU0CSuljngjkQHGTAjQumBpSfqqDd61bKQw/drHJAWR10
    bIZU/q0iLHPf3bvt6h1rA0ViN0byr+zkFDo5tosGGf9VeJz6Dd5OMNunbgViO
    HC1TPDS6bE90oqczsJjVwjS2/n2hO444gb1wPl3GbcwHmsrGDxW4KYn99FOk7
    gLzY4C5QvQG5bNRm4mA/30bMEAeu9hzlQSGS0b/J2EKAjkHV1+b1jA91rwHDV
    +DQ0iRPRQIvAY/UF4qrQwMC0SgmEHLMqaoPtCi4qEvWe0JCQ48LxeUmDg==",
  "keyId": "RSA-OAEP-SHA256::dff3e2eb-3abd-458c-b7fc-7692202d5895_myKeyIdentifier",
  "willSaveCard": false,
  "cardNumberOrigin": "END_USER",
  "amount": 100.00,
  "tipAmount": 25.00,
  "requestMetadata": {
    "localTransactionDate": "2019-03-11T17:32:00.000+0000",
    "originIPAddr": "123.456.78.90",
    "partnerServiceInfo": {
      "instanceId": "myClient"
    }
  }
}
```

  

##### Encryption algorithms

When you request credit card authorization for a payment, you
encrypt credit card information. The public key that you receive from
the Toast integrations team uses one of the following encryption
algorithms to encrypt credit card information in an authentication
request:

* RSA-OAEP with SHA256 hashing ([RSAES-OAEP](https://tools.ietf.org/html/rfc8017#section-7.1))

  This algorithm is supported by modern web browsers by default.
  The Toast integrations team issues encryption keys that use this
  algorithm.
* RSA-OAEP with SHA1 hashing ([RSAES-OAEP](https://tools.ietf.org/html/rfc8017#section-7.1))

  |  |
  | --- |
  | Important |
  | The RSA-OAEP with SHA1 hashing padding encryption algorithm is deprecated. |

###### Identifying the encryption algorithm in an authorization request

The encryption key identifier string that you receive from the
Toast integrations team identifies the algorithm that you use to
encrypt credit card information.

|  |
| --- |
| Note |
| You must use the encryption algorithm that corresponds to the encryption key that you receive from the Toast integrations team. *Do not alter any part of the encryption key identifier string. Do not use the contents of the identifier string to control any part of your integration software.* |

The encryption key identifier string includes:

* The identification string for the algorithm
* Two colon characters
* The identifier of the public encryption key that you
  received from the Toast integrations team

For more information about key identifiers, see [Encryption keys and key identifiers](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiEncryptionKeysAndKeyIdentifiers).

The following example shows the identification string for an
encryption algorithm and the identifier of a public encryption key in
a `keyId` value.

```
RSA-OAEP-SHA256::a253759c-1c91-4f22-9db9-71ba24738f8d_MyRestaurantService
```

The following table includes the identification strings for the
encryption algorithms that you can use in credit cards API
authorization requests.

**Identification strings for encryption algorithms**

| Algorithm | Identification string |
| --- | --- |
| RSA-OAEP with SHA256 hashing | RSA-OAEP-SHA256 |
| RSA-OAEP with SHA1 hashing, deprecated | RSA-OAEP-SHA1 |

  

For more information about making an authorization request, see
[Authorizing a credit card payment](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiAuthorizingACreditCardPayment).

|  |
| --- |
| Important |
| The RSA-OAEP with SHA1 hashing encryption algorithm is deprecated. |

###### Example encryption using RSA OAEP with SHA256 hashing

The following example UNIX command-line command uses the
**openssl** version 1.1.1 utility to encrypt and base64
encode a file that contains JSON credit card information.
*This example command is intended for integration development
and testing. It is not suitable for production use.*

**Example openssl commands to encrypt and base64 encode an
encryptedCardData value**

```
openssl pkeyutl \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-in my-credit-card-information.json \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
-encrypt -pubin -inkey my-public-key.pem \![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
-pkeyopt rsa_padding_mode:oaep -pkeyopt rsa_mgf1_md:sha256 -pkeyopt rsa_oaep_md:sha256 \![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
| openssl base64 \![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
| tr -d "\n"![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e63595B32F21-5B43-4BA2-9C4E-6CE0DE6C4387) | The **pkeyutl** command for the **openssl** utility can encrypt values. For more information, see the **openssl** utility [documentation](https://www.openssl.org/docs/man1.1.1/man1/openssl-pkeyutl.html). |
| [2](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e64095B32F21-5B43-4BA2-9C4E-6CE0DE6C4387) | The *`-in`* argument provides the path to a file holding the JSON credit card information. See [Example credit card information for an encryptedCardData value](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiExampleJsonCreditCardInformation). |
| [3](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e64595B32F21-5B43-4BA2-9C4E-6CE0DE6C4387) | The *`-inkey`* argument provides the path to a file holding the RSA public key that corresponds with your Toast API client identifier. |
| [4](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e64895B32F21-5B43-4BA2-9C4E-6CE0DE6C4387) | These arguments set openssl utility options to use the RSA-OAEP with SHA256 hashing encryption algorithm. |
| [5](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e65095B32F21-5B43-4BA2-9C4E-6CE0DE6C4387) | The **base64** command for the **openssl** utility encodes binary data in base64 format. |
| [6](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#co-d1e65295B32F21-5B43-4BA2-9C4E-6CE0DE6C4387) | This **tr** command strips new line characters out of the base64-encoded credit card information. Removing new line characters makes it easier to include the base64-encoded string in the JSON `encryptedCardData` value for a credit cards API authorization request. |

##### Encryption keys and key identifiers

When you make a credit card authorization request, you specify the
identifier of the encryption key that you are using. The Toast
integrations team can issue you multiple encryption keys to make it
easier for you to refresh your keys without interrupting your credit
cards API integration. Specifying which key you use to encrypt credit
card information allows the Toast platform to use the correct algorithm
and private key to decrypt the information in your request.

In an authorization request, you include the identifier of the
public encryption key that you received from the Toast integrations team
in the `keyId` value of a `PaymentAuthorization`
object in the request message body. For information about encryption
algorithm identifiers, see [Identifying the encryption algorithm in an authorization
request](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiSpecifyingEncryptionAlgorithmInAnAuthorizationRequest).

For more information about making an authorization request, see
[Authorizing a credit card payment](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiAuthorizingACreditCardPayment).

##### Testing encryption in the sandbox environment

You can test encrypting credit card information for credit cards
API authorization requests in the sandbox environment.

* The sandbox environment supports the RSA-OAEP with SHA256 and
  SHA1 hashing encryption algorithms.
* You receive separate encryption keys from Toast integrations
  support for the production and sandbox environments. Encryption keys
  for the sandbox environment do not work in the production
  environment.
* You can use a test public encryption key for the sandbox
  environment. The Toast integrations support team provides you with a
  test encryption key.
* In the sandbox environment, the credit cards API does not
  validate whether the CVV, ZIP code or expiration date you submit are
  formatted correctly. For more information about the correct way to
  format these values see [Encrypting credit card information](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html#apiEncryptingCreditCardInformation).

For more information about Toast API environments, see [Environments](https://doc.toasttab.com/doc/devguide/apiEnvironments.html).


---

# Adding items to an existing check - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html

### Adding items to an existing check

|  |
| --- |
| Important |
| To use the `/orders` endpoint to add items to an existing check, you need access to the `orders.items:write` scope. For more information about API client scopes, and how to get access to them, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |

You can use the orders API to add items to an existing check.

You cannot add items to a check in a restricted order. A closed order
becomes restricted automatically after a specific period of time. For more
information, see [Working with restricted orders](https://doc.toasttab.com/doc/platformguide/adminViewingRestrictedOrders.html).

The added items ignore meal pacing.

#### How to add the items to the check

To add items to an existing check, you send a `POST`
request to the
`/orders/{orderGuid}/checks/{checkGuid}/selections`
endpoint. To identify the items to add, you provide a JSON array of
`Selection` objects.

**To add items to an existing check**

1. Find the Toast platform GUIDs of the order and the check that
   you are adding items to. For more information on locating these GUIDs,
   see [Finding an order or check
   guid](https://doc.toasttab.com/doc/devguide/apiOrdersFindingAnOrderGuid.html).
2. Create a JSON array of `Selection` objects that
   contain information about the items you are adding, including
   modifiers. For an example, see [Example request message body to add an item to an existing
   check](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#apiExampleSelectionObjectsForAddingItemstoaCheck).

   |  |
   | --- |
   | Note |
   | The `externalId` values for the `Order`, `Check`, and `Selection` objects must be unique. If you submit an order containing an `externalId` that already exists for another `Order`, `Check`, or `Selection`, the request will fail. |
3. Send a `POST` request to the
   `/orders/{orderGuid}/checks/{checkGuid}/selections`
   endpoint of the Orders API.â¨

   In the `POST` request path parameters, include the
   Toast platform GUIDs of the order and the check.â¨

   In the request message body, include the array of
   `Selection` objects.
4. Examine the response that you receive from the Orders API.
   Verify that your request processed successfully with a 200 HTTP code
   response. For an example, see [Example response after adding items to an existing check](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#apiExampleResponseDataWhenAddingItemstoaCheck).

#### Example request message body to add an item to an existing check

The following example shows an array that contains a
`Selection` object to ad a menu item to an existing
check.

```
[![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  {
    "entityType": "MenuItemSelection",
    "itemGroup": {
      "guid": "205c4612-d04d-43ec-86fd-7d0827a2eeed"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    },
    "item": {
      "guid": "c58b958e-85a0-485a-bb5c-3b588e056aff"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    }
    "quantity": 2,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "modifiers": [![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      
      [content omitted]

    ]
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1350721E73C-4691-4104-AC0D-A8BEDFE8A31B) | You can include multiple menu item selections in the JSON array. This example contains a single item. |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1370721E73C-4691-4104-AC0D-A8BEDFE8A31B) | The Toast platform GUID of the menu group for the menu item to add to the check. For more information, see [Menus API overview](https://doc.toasttab.com/doc/devguide/apiGettingMenuInformationFromTheMenusAPI.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1390721E73C-4691-4104-AC0D-A8BEDFE8A31B) | The Toast platform GUID of the menu item to add to the check. |
| [4](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1410721E73C-4691-4104-AC0D-A8BEDFE8A31B) | The quantity of the menu item to add to the check. |
| [5](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1430721E73C-4691-4104-AC0D-A8BEDFE8A31B) | If applicable, the modifiers for the added item. For more information about adding modifiers, see [Applying modifiers and pre-modifiers](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#apiApplyingModifiers). |

#### Example response after adding items to an existing check

The following example shows the response for a
`POST` request to the
`/orders/{orderGuid}/checks/{checkGuid}/selections`
endpoint of the orders API.

```
{
  "guid": "da257b12-4766-471c-9580-837d2b29eb92", ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",

  [content omitted]

  "checks": [
    {
      "guid": "6e1bb8e0-534d-437f-bbad-0f08045f463e",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "entityType": "Check",
      
      [content omitted]
      
      "selections": [
        {
          "guid": "f520f731-8164-41a8-b261-23b9df3bf861",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "entityType": "MenuItemSelection",
                    
          [content omitted]

        },
        {
          "guid": "a963dd45-e0bf-456b-a148-e955310d2643",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "entityType": "MenuItemSelection",
          
          [content omitted]      

        }
      ],
    
      [content omitted]
    
    }
  ], 

  [content omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1700721E73C-4691-4104-AC0D-A8BEDFE8A31B) | The Toast platform GUID of the order that contains the check that you added menu items to. |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1720721E73C-4691-4104-AC0D-A8BEDFE8A31B) | The Toast platform GUID of the check that you added menu items to. |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1740721E73C-4691-4104-AC0D-A8BEDFE8A31B) | The Toast platform GUID of a menu item selection from the original check. |
| [4](https://doc.toasttab.com/doc/devguide/apiAddingItemsToACheck.html#co-d1e1760721E73C-4691-4104-AC0D-A8BEDFE8A31B) | The Toast platform system GUID of the menu item selection that was added to the existing check. |

#### How added items are sent to the kitchen

When you add menu item selections to an existing check, the effect
in the kitchen depends on the following factors:

**Order approval**
:   Does the original order require approval?

    If the original order requires approval, is the order
    approved?

    Orders that are created using the orders API never require
    approval. As long as an auto-firing device is configured, orders
    from the orders API are automatically fired to the kitchen. For more
    information about auto-firing devices, see [Setting
    up Order Auto-Firing](https://central.toasttab.com/s/article/How-do-I-ensure-scheduled-orders-and-online-orders-fire-automatically-to-the-kitchen-1492811100407).

    For other orders, the restaurant can be configured to
    automatically send orders to the kitchen without approval, to
    require approval for all orders, or to require approval based on the
    order amount.

**Order scheduling**
:   Is the original order a scheduled order or an as soon as
    possible (ASAP) order?

    For scheduled orders, is the order `promisedDate`
    still in the future?

##### Handling for orders that do not require approval

If the original order did not require approval, the added menu
item selections are handled as follows:

**Scheduled orders**
:   If `promisedDate` for the order is still in the
    future, then the items are fired at the same time as the rest of
    the order.

    If the order is already fired, then the added items are
    fired ASAP on a new ticket.

**ASAP orders**
:   If the order is not yet fired, then the items are fired at
    the same time as the rest of the order.

    If the order is already fired, then the added items are
    fired ASAP on a new ticket.

##### Handling for orders that do require approval

If the original order required approval, then added menu item
selections are handled as follows:

**Scheduled orders**
:   If the original order is not approved, and
    `promisedDate` for the order is still in the future,
    then the items are added to the order. They are fired at the same
    time as the rest of the order.

    If the original order is approved, but
    `promisedDate` is still in the future, then the items
    are added to the order. The new items do not require approval.
    They are fired at the same time as the rest of the order.

    If the original order is approved and has fired, then the
    new items are fired ASAP on a new ticket.

**ASAP orders**
:   If the original order is not approved, then the new items
    are added to the order. They are fired at the same time as the
    rest of the order.

    If the order is approved and has fired, then the items are
    fired ASAP on a new ticket.


---

# Adding payments to an existing check - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html

### Adding payments to an existing check

|  |
| --- |
| Important |
| To use the `/orders` endpoint to add payments, you need access to the `orders.payments:write` scope. For more information about API client scopes, and how to get access to them, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |

You can use the orders API to add authorized credit card payments to a
check in an existing order.

#### How to add the payments to the check

To add payments to an existing check, you send a `POST`
request to the
`/orders/{orderGuid}/checks/{checkGuid}/payments`
endpoint of the Toast orders API. To include the information about the
payments, you include an array of JSON `Payment` objects. The
`type` value for the payments must be `CREDIT`, and
you must authorize the payments before you add them.

For more information, see [Post
payments](https://doc.toasttab.com/openapi/orders/operation/ordersChecksPaymentsPost/) in the Toast API reference.

**To add payments to a check in an existing order**

1. Find the Toast platform GUIDs of the order and the check that
   you are adding items to. For more information on locating these GUIDs,
   see [Finding an order or check
   guid](https://doc.toasttab.com/doc/devguide/apiOrdersFindingAnOrderGuid.html).
2. Authorize the credit card payments that you are adding. For more
   information, see [Credit card payments](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html).

   When you add payments to the check, you include the UUIDs of the
   authorized credit card payments.
3. Create an array of JSON `Payment` objects that
   contain information about the payments you are adding. For each
   payment, you use the UUID as the value of `guid`.

   For information about the `Payment` object, see the
   [reference
   documentation for the orders API](https://doc.toasttab.com/openapi/orders/overview/). For an example, see [Example array of Payment objects to add payments to an existing
   check](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#apiExamplePaymentObjectForAddingAPayment).
4. Send a `POST` request to the
   `/orders/{orderGuid}/checks/{checkGuid}/payments`
   endpoint of the orders API.

   In the REST request path parameters, include the Toast platform
   GUID of the order and the check.

   In the request message body, include the array of
   `Payment` objects that contains information about the
   payments to add.
5. Examine the response data that you receive from the orders API.
   Verify that your request is processed successfully. For an example,
   see [Example response data when adding a payment to an existing
   check](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#apiExampleResponseDataWhenAddingAPayment "Example response data when adding a payment to an existing check").

#### Example array of Payment objects to add payments to an existing check

The following example shows an array of `Payment` objects
to add payments to a check in an existing order.

```
[
  {
    "guid": "7c65cc16-15bd-496e-886b-a3c080b36100",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "type": "CREDIT",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "amount": 35.21,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "tipAmount": 15![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  },
  {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    "guid": "bbb13b9b-1897-48ce-81da-953a83e6472d",
    "type": "CREDIT",
    "amount": 48.74,
    "tipAmount": 20
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#co-d1e1602C4ACD83-A816-47C6-9522-28A21ED4EFA9) | The UUID of the credit card payment that you authorized in the Toast credit cards API. For more information, see [Credit card payments](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html). |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#co-d1e1622C4ACD83-A816-47C6-9522-28A21ED4EFA9) | The `/orders/{orderGuid}/checks/{checkGuid}/payments` endpoint only supports adding credit card payments. This value must be `CREDIT`. |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#co-d1e1642C4ACD83-A816-47C6-9522-28A21ED4EFA9) | The currency amount to apply to the check price in the added payment. |
| [4](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#co-d1e1662C4ACD83-A816-47C6-9522-28A21ED4EFA9) | The currency amount of a tip or gratuity in the added payment. |
| [5](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#coSecondPaymentObjectInBodyParam) | You can add one or more payments in the array. This example adds two payments to the check. |

#### Example response data when adding a payment to an existing check

The following example shows example response data for a
`POST` request to the
`/orders/{orderGuid}/checks/{checkGuid}/payments`
endpoint of the orders API.

```
{
  "guid": "99e42b9c-2f45-4b01-ab90-de4169f6dd29",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "guid": "b7dba08f-db0c-4db3-8ce8-ef25aa0cc492",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "entityType": "Check",

      [contents omitted]

      "payments": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
        {
          "guid": "b7372d29-09fd-46bc-b95e-3c1ab4e77fae",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "entityType": "OrderPayment",
          "externalId": null,
          "originalProcessingFee": null,
          "amount": 50.12,
          "tipAmount": 20.34,
          "amountTendered": null,
          "cashDrawer": null,
          "cardType": "VISA",
          "lastModifiedDevice": {
            "id": null
          },
          "refundStatus": "NONE",
          "houseAccount": null,
          "type": "CREDIT",
          "voidInfo": null,
          "otherPayment": null,
          "mcaRepaymentAmount": null,
          "createdDevice": {
            "id": null
          },
          "paidDate": "2019-03-31T14:43:04.036+0000",
          "cardEntryMode": null,
          "paymentStatus": "AUTHORIZED",
          "paidBusinessDate": 20190331,
          "last4Digits": "1111",
          "refund": null
        }
      ],

      [contents omitted]

    }
  ],

  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#co-d1e1922C4ACD83-A816-47C6-9522-28A21ED4EFA9) | The Toast platform GUID of the order that you added payments to. |
| [2](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#co-d1e1942C4ACD83-A816-47C6-9522-28A21ED4EFA9) | The Toast platform GUID of the check that you added payments to. |
| [3](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#co-d1e1962C4ACD83-A816-47C6-9522-28A21ED4EFA9) | The `payments` value in a check includes an array of `Payment` objects for the payments that are applied to the check. These payments include the payments that you added. |
| [4](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html#co-d1e1982C4ACD83-A816-47C6-9522-28A21ED4EFA9) | The Toast platform GUID of a payment that you added. |


---

# Creating orders - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiCreatingOrders.html

### Creating orders

To create an order in the Toast platform, you send a
`POST` request that contains a JSON
`Order` object to the `/orders` endpoint of the orders
API.

Before you `POST` the order, you must retrieve the check
prices (calculated by the Toast platform) from the `/prices`
endpoint. The `/prices` endpoint is the only reliable and
supported way to determine the payment amount for a check.

If you `POST` an order with a payment amount that does not
match the results from the `/prices` endpoint, then restaurant
employees must handle the underpayment or overpayment during order
fulfillment.

#### Building shopping cart orders

A shopping cart order, also called a draft order, is an order that
is created by adding items to an online ordering shopping cart before it
is submitted to the orders API.

The orders API does not support shopping cart functionality. Your
integration must implement a shopping cart feature to save added items
before you create an order using the orders API. Items that guests add to
a shopping cart are not saved in the Toast platform until you create the
order.

#### Order creation process for the orders API

To use the orders API to create and `POST` a new
order:

1. Create a JSON `Order` object that includes the dining
   option, checks, and menu item selections for the order. You can also
   include a revenue center.

   For information about the required details for different dining
   options, as well as example order objects for each type, see [Order details based on the order dining option](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html).

   For other limitations on menu selection items, scheduling, and how
   orders from the API are processed, see [Orders API limitations](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html#ordersAPILimitations).

   For information on providing revenue center information in an
   order, see [Providing revenue center information for an order](https://doc.toasttab.com/doc/devguide/apiOrdersRevenueCenters.html).

   To create a scheduled order to be fulfilled at later time, provide
   a `promisedDate` value. See [Scheduling future orders](https://doc.toasttab.com/doc/devguide/orders_api_future_orders.html).

   For detailed information about all of the values in an
   `Order` object, see the [reference
   documentation for the orders API](https://doc.toasttab.com/openapi/orders/overview/).
2. Retrieve the price information for the order.

   To do this, send a `POST` request to the
   `/prices` endpoint of the orders API. In the message body of
   the `POST` request, include the JSON `Order`
   object. See [Get
   order prices](https://doc.toasttab.com/openapi/orders/operation/pricesPost/).

   The `Order` object returned by the `/prices`
   endpoint includes the base price, tax amount, and total price of each
   check.

   For more information, see [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices).
3. Optionally, add payment information for the checks to the
   `Order` object.

   To include payment information for a check, add a
   `payments` value to the `Check` object.

   The payment type must be either `CREDIT` or
   `OTHER`.

   For more information about `CREDIT` payments, see
   [Credit card payments](https://doc.toasttab.com/doc/devguide/authorizingCcPayments.html).

   For an `OTHER` type payment, include in the
   `Payment` object the GUID of a previously configured
   alternative payment type. Note that the orders API ignores the tax
   exempt setting for the payment type. The order is taxed regardless of
   whether the payment type is configured to be tax exempt.

   Payment information is optional. If an order is not yet paid for,
   you can omit the `payments` value. When the order is paid
   for, you can update the order to add the payment information. See [Adding payments to an existing check](https://doc.toasttab.com/doc/devguide/apiAddingPaymentsToACheck.html).
4. Send a `POST` request to the
   `/orders` endpoint of the orders API.

   The body of the `POST` request contains the
   JSON `Order` object for the order.

   |  |
   | --- |
   | Note |
   | The `externalId` values for the `Order`, `Check`, and `Selection` objects must be unique. If you submit an order containing an `externalId` that already exists for another `Order`, `Check`, or `Selection`, the request will fail. |
5. The response from the `/orders` endpoint indicates
   whether the order was created successfully.

   The orders API does not verify the restaurant service hours before
   it creates the order. It creates the order even if the restaurant is
   closed.

   If a restaurant uses a Kitchen Display System (KDS) device, and
   has properly configured an auto-firing device, then the order is sent
   directly to the kitchen. The order is not subject to approval rules or
   manual approval when an auto-firing device is used.


---

# Daily order for tracking excess food - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDailyOrderForTrackingExcessFood.html

### Daily order for tracking excess food

The orders API returns a daily *excess food order*
for restaurants that use the Toast platform's waste tracking feature. An
excess food order, also referred to as a waste order, is a special type of
order created in the Toast platform to track excess food in a restaurant.
Like guest orders, excess food orders may contain menu items, modifiers, or
both.

Currently, the Toast platform creates one excess food order per day at
each restaurant using the waste tracking feature. The Toast platform creates
the daily excess food order the first time a restaurant employee uses the
waste tracking feature to identify excess food. If restaurant employees
identify additional excess food over the course of the business day, that
excess food is added to the daily excess food order. If no excess food is
identified on a given day, no excess food order is created for that
day.

The orders API indicates that an order is an excess food order using
the `excessFood` value on the [Order](https://doc.toasttab.com/openapi/orders/tag/Data-definitions/schema/Order/)
object. Excess food orders are structurally the same as standard guest
orders. However, certain behavior is applied to these orders automatically
by the waste tracking feature:

* The `excessFood` field is set to
  `true`.
* Exactly one check is created on each excess food order.
* Each selection on the check is discounted to $0 using an
  item-level 100% discount. This discount is created automatically by the
  Toast platform and has the name `Waste`.
* If the restaurant has configured waste reasons and the employee
  identifying the waste selects one of those reasons when tracking the
  item in the POS, that reason is applied to the discounted selection.
  Note that waste reasons are not returned in orders API responses.

Because all selections on the check are discounted, the
`price` value on each selection and the `amount` value
of the check is always $0. The `preDiscountPrice` value on each
selection, however, reflects the retail value of each selection. If you use
the `preDiscountPrice` field in order to report on gross sales,
you might want to exclude excess food orders from this calculation.


---

# Working with order discounts - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html

### Working with order discounts

A discount is a reduction to the price of a check or a menu item
selection. You can include discounts when you create an order, and add
discounts to an existing order.

To configure the available discounts at your restaurant, you use the
Discounts screen of Toast Web.
For more information about discounts in the Toast platform, see [Using the Discounts page](https://doc.toasttab.com/doc/platformguide/adminAvailableDiscounts.html).

#### Types of discounts

Restaurants configure each discount to indicate whether it can be
applied to a menu item selection or to a check. The discount specifies the
eligibility requirements for the discount, and indicates how to determine
the discount amount.

The Toast platform supports the following types of discounts:

**Fixed discount**
:   **Can apply to:** Menu item or
    check.

    A fixed discount removes either a specific percent or a specific
    currency amount from the menu item or check.

    When a percent discount results in a fraction of a penny, the
    Toast platform applies half even rounding to the second decimal
    place.

**Open discount**
:   **Can apply to:** Menu item or
    check.

    An open discount allows the restaurant employee to specify a
    percentage or amount to remove from the menu item or check.

    * An open amount discount allows the employee to specify a
      currency amount for the discount. For example, discount $5.00 from
      a check or item.
    * An open percent discount allows the employee to specify a
      percentage for the discount. For example, discount 10% from a
      check or item.

      When a percent discount results in a fraction of a penny,
      the Toast platform applies half even rounding to the second
      decimal place.

    You can use the orders API to apply an open
    *amount* discount to a check or item.

    You cannot use the orders API to apply an open
    *percent* discount to a check or item. Open percent
    discounts can only be applied using the Toast POS system. When you
    retrieve an order with the orders API, the API does return open
    percent discounts that are applied.

**Buy-one-get-one (BOGO)**
:   **Can apply to:** Check.

    A BOGO discount allows guests to receive items free when they
    purchase qualifying items.

    For example, when a guest purchases a cup of coffee, they get a
    croissant free.

    For more information about setting up BOGO discounts, see the
    article [BOGO
    (Buy One Get One) Discounts](https://central.toasttab.com/s/article/BOGO-Buy-One-Get-One-Discounts).

**Combo**
:   **Can apply to:** Check.

    A combo discount allows guests to receive a discounted price for
    purchasing a specific set of items.

    For example, a guest gets a discounted price when they purchase
    a cup of coffee and a bagel at the same time.

#### Retrieving available discounts

You can retrieve a list of discounts that are configured for the
restaurant. You can also retrieve discounts that an order is eligible
for.

##### Getting the list of configured discounts for a restaurant

To get information about the discounts configured for a restaurant,
send a `GET` request to the `/discounts`
endpoint of the configuration API.

In the results, the information about each discount includes the
GUID that you use to apply the discount to an order in the orders
API.

The following example shows the JSON return data for a
`GET` request to the `/discounts`
endpoint.

```
[
  {
    "guid": "a96fd992-9d69-4a62-894f-b621c31127a5",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "Discount",
    "amount": 25,
    "selectionType": "CHECK",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "nonExclusive": true,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "percentage": null,
    "name": "$25 Off",
    "active": true,
    "itemPickingPriority": "FIRST",
    "type": "FIXED",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "fixedTotal": null
  },
  {
    "guid": "f66bd37f-8814-4f3a-a8ec-536d359dc1b7",
    "entityType": "Discount",
    "amount": null,
    "selectionType": "ITEM",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    "nonExclusive": false,
    "percentage": null,
    "name": "Buy one, get one apple!",
    "active": true,
    "itemPickingPriority": "LEAST_EXPENSIVE",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
    "type": "BOGO",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
    "fixedTotal": null
  },
  {
    "guid": "baf12b76-511a-416d-871f-8d4532d425e4",
    "entityType": "Discount",
    "amount": null,
    "selectionType": "ITEM",
    "nonExclusive": false,
    "percentage": 100,
    "name": "Comp",
    "active": true,
    "itemPickingPriority": "FIRST",
    "type": "PERCENT",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
    "fixedTotal": null
  },
  {
    "guid": "23b26475-7e0a-4c0b-a2dc-9b6fcbe49e15",
    "entityType": "Discount",
    "amount": null,
    "selectionType": "CHECK",
    "nonExclusive": false,
    "percentage": null,
    "name": "ComboWingsDrinks",
    "active": true,
    "itemPickingPriority": "FIRST",
    "type": "FIXED_TOTAL",![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
    "fixedTotal": 5![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2299734545DE-34ED-4C72-91FC-F7D438E64472) | The `/discounts` endpoint returns an array of `Discount` objects. You can use the `guid` value to apply the discount to an order. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2301734545DE-34ED-4C72-91FC-F7D438E64472) | The `selectionType` value indicates whether you can apply the discount to an item or to an entire check. This discount applies to an entire check. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2303734545DE-34ED-4C72-91FC-F7D438E64472) | The `nonExclusive` value indicates the [discount exclusivity](https://doc.toasttab.com/doc/platformguide/adminDiscountExclusivity.html) of this discount. If `true`, then the discount is nonexclusive and can be combined with discounts. If `false`, the discount is exclusive and cannot be combined with other discounts. |
| [4](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2305734545DE-34ED-4C72-91FC-F7D438E64472) | The `type` value `FIXED` indicates that this discount reduces the check price by the fixed currency `amount` value. |
| [5](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2307734545DE-34ED-4C72-91FC-F7D438E64472) | Because it is a BOGO discount, the Toast platform applies the discount to items that match the item specification for the discount. In this case, it applies the discount to one of each set of two apples that are included as menu item selections in the check. |
| [6](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2310734545DE-34ED-4C72-91FC-F7D438E64472) | For BOGO discounts, the `itemPickingPriority` value indicates the setting of the [item picking priority option](https://doc.toasttab.com/doc/platformguide/adminDiscountsConfigureBogo.html#adminDiscountsBogoGetItemDiscount). For example, a value of `LEAST_EXPENSIVE` means that the least expensive "get" item is discounted. |
| [7](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2312734545DE-34ED-4C72-91FC-F7D438E64472) | The `type` value `BOGO` indicates that this discount matches item selections based on the criteria that you configure for the discount. |
| [8](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2314734545DE-34ED-4C72-91FC-F7D438E64472) | The type value `PERCENT` indicates that this discount reduces the price of an item by the `percentage` value. |
| [9](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2316734545DE-34ED-4C72-91FC-F7D438E64472) | The `type` value `FIXED_TOTAL` indicates this is a combo discount that reduces the price of all the eligible items to a set currency amount. |
| [10](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2318734545DE-34ED-4C72-91FC-F7D438E64472) | The `fixedTotal` value indicates the total price of items discounted by this combo discount. The `fixedTotal` value is `null` for discounts that are not combo discounts. |

##### Getting the list of applicable discounts for an order

A `GET` request to the `/discounts` endpoint
returns all of the configured discounts for a restaurant. The response
does not consider whether a discount applies to an order.

To get the applicable discounts for an order, send a
`POST` request with the `Order` object to the
`/applicableDiscounts` endpoint of the orders API. You can
optionally provide a promotional code. The promotional code limits the
results to applicable discounts that are associated with that promotional
code.

The response contains a list of applicable discounts. For each
discount, the response indicates whether it is a check-level discount or
an item-level discount. For item-level discounts, the response identifies
the menu selection items that the discount can be applied to.

Here is an example of a response to a `POST` request to
the `/applicableDiscounts` endpoint:

```
[
    {
        "discount": {
            "guid": "1086966b-1411-4d4b-b275-6b8643f5afb0",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
            "entityType": "Discount"
        },
        "applicableChecks": [],![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "applicableSelections": [
            {
                "guid": "1f801d3f-4715-4ae7-b518-5df56b9910a3",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                "entityType": "SELECTION",
                "externalId": null
            }
        ]
    },
    {
        "discount": {
            "guid": "138c3818-371c-4de9-88b2-c839fa144e8c",
            "entityType": "Discount"
        },
        "applicableChecks": [![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
            {
                "guid": null,
                "entityType": "CHECK",
                "externalId": null
            }
        ],
        "applicableSelections": []![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#availableDiscountGuidCo) | The GUID of the applicable discount. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#availableDiscountsEmptyChecksCo) | Because this is an item-level discount, the `checks` value is empty. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#availableDiscountsItemGuidCo) | This is the GUID of a menu item selection that is eligible for the discount. |
| [4](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#availableDiscountsChecksCo) | For a check-level discount, the `applicableChecks` value is populated. |
| [5](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#availableDiscountsEmptySelectionsCo) | For a check-level discount, the `applicableSelections` value is empty. |

#### Applying discounts to a new order

You can add a discount to either an individual menu item selection or
to an entire check. Each discount is configured to indicate whether it can
be applied to a check or to a menu item selection.

##### AppliedDiscounts object

To add the discount, you add an `AppliedDiscounts` object
to the `MenuItemSelection` object or to the `Check`
object.

The `AppliedDiscounts` object contains an
`AppliedDiscount` object for each discount to apply. The
`AppliedDiscount` object specifies the discount GUID.

```
"appliedDiscounts": [
  {
    "discount": {
      "guid": "f66bd37f-8814-4f3a-a8ec-536d359dc1b7"
    }
  }
]
```

For an open amount discount, the `AppliedDiscount` object
also contains a `discountAmount` value that specifies the
amount of the discount.

```
"appliedDiscounts": [
  {
    "discount": {
      "guid": "462c68a3-40ce-41ab-89e2-e26aaa41696e"
    },
    "discountAmount": 2.0
  }
]
```

##### Applying discounts to menu item selections

You can only apply one discount to a menu item selection. The
discount must be an item-level discount.

The following example shows a discount applied to a menu item
selection.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",
    "entityType": "DiningOption"
  },
  "checks": [
    {
      "entityType": "Check",
      "customer": {
        "email": "fgauthier@example.com",
        "firstName": "Francis",
        "lastName": "Gauthier",
        "phone": "987-654-3210"
      },
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "4c842ed6-ae99-425a-a343-390ab0e081d3",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "28dc4d65-e84b-44f0-8b73-0a721d5a9b88"
          },
          "appliedDiscounts": [![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
            {
              "discount": {
                "guid": "a96fd992-9d69-4a62-894f-b621c31127a5"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
              }
            }
          ],
          "quantity": 2,
          "modifiers": []
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e348F363EEC9-2046-412B-BBF1-890075ECA926) | This `AppliedDiscounts` object applies to the `MenuItemSelection` object that contains it. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e350F363EEC9-2046-412B-BBF1-890075ECA926) | The `guid` value identifies a discount that is configured for your restaurant. For information about getting available discounts, see [Retrieving available discounts](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#apiOrdersDiscountsRetrieving). |

##### Applying discounts to an entire check

You can apply more than one check-level discount to a check.

Check-level and BOGO discounts have an [Allow with other discounts](https://doc.toasttab.com/doc/platformguide/adminDiscountExclusivity.html)
setting. This setting determines whether the discount can be applied at
the same time as other check-level and BOGO discounts.

* If Allow with other discounts is enabled,
  then the discount can be combined with other check-level or BOGO
  discounts. This includes check-level or BOGO discounts that have
  Allow with other discounts disabled.
* If Allow with other discounts is disabled,
  then the discount cannot be combined with other check-level or BOGO
  discounts that also have Allow with other
  discounts disabled.

For example, a BOGO discount allows guests to receive a free cup of
coffee when they purchase a breakfast sandwich. Another check-level
discount offers 10% off of the entire check. If either of those discounts
has Allow with other discounts enabled, then a guest
could get both the free cup of coffee and the 10% discount off their
breakfast sandwich and any other items on their order.

The following example shows a discount applied to a check.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",
    "entityType": "DiningOption"
  },
  "checks": [
    {
      "entityType": "Check",
      "customer": {
        "email": "fgauthier@example.com",
        "firstName": "Francis",
        "lastName": "Gauthier",
        "phone": "987-654-3210"
      },
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "4c842ed6-ae99-425a-a343-390ab0e081d3",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "28dc4d65-e84b-44f0-8b73-0a721d5a9b88"
          },
          "quantity": 2,
          "modifiers": []
        }
      ],
      "appliedDiscounts": [![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
        {
          "discount": {
            "guid": "f66bd37f-8814-4f3a-a8ec-536d359dc1b7"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          } 
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e379F363EEC9-2046-412B-BBF1-890075ECA926) | The `appliedDiscounts` value in the `Check` object contains `AppliedDiscount` objects for each discount that you apply to the check. Specify the GUID for each discount. For information about getting the GUID for a discount, see [Retrieving available discounts](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#apiOrdersDiscountsRetrieving). |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e381F363EEC9-2046-412B-BBF1-890075ECA926) | The `guid` value identifies a discount that is configured for your restaurant. For information about getting GUIDs for discounts, see [Retrieving available discounts](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#apiOrdersDiscountsRetrieving). |

#### Applying promotional codes

Discounts can be configured with a promotional code, also known as a
promo code. For orders placed from the Toast POS, to apply the discount, the
employee must enter the promotional code or scan a barcode.

When you use the orders API to create orders, you can include
promotional codes with the discounts. To apply a promotional code:

* Include an `AppliedDiscounts` value containing an
  `AppliedDiscount` object in the `Check` or
  `MenuItemSelection` object.
* In that `AppliedDiscount` object, provide an
  `appliedPromoCode` value.

The Toast platform does not verify that the
`appliedPromoCode` value matches a promotional code that is
configured for the discount.

The following example shows promotional codes applied to check and
menu item selection discounts in an order:

```
{
  "diningOption": {
    "guid": "23fc2559-fc37-46ce-a963-cc5fdb88af0c"
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec"
          },
          "quantity": 1,
          "modifiers": [],
          "appliedDiscounts": [
          {
            "discount": {
              "guid": "590d2298-471d-4adb-8b83-24103157df6c"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
            },
          "appliedPromoCode": "MYSPECIALOFFER"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        }
      ]
        }
      ],
      "appliedDiscounts": [
        {
          "discount": {
            "guid": "69d98978-6363-40bf-96eb-1e0d97dcea3d"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          },
          "appliedPromoCode": "MYEXTRASPECIALOFFER"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e1506DCFD6CC3-6D50-4CF5-BF62-DC7AF967B651) | The GUID of a menu item selection discount. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e1508DCFD6CC3-6D50-4CF5-BF62-DC7AF967B651) | The `appliedPromoCode` value identifies a promotion that is associated with the menu item selection discount. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e1510DCFD6CC3-6D50-4CF5-BF62-DC7AF967B651) | The GUID of a check discount. |
| [4](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e1512DCFD6CC3-6D50-4CF5-BF62-DC7AF967B651) | The `appliedPromoCode` value identifies a promotion that is associated with the check discount. |

#### Applying discounts to an existing order

You can add discounts to a check or menu item selection in an existing
order.

The check `paymentStatus` must be `OPEN`.

##### Required information to add the discount

Before you can add a discount to a check or a menu item selection,
you need the following information:

* The GUID of the order.
* The GUID of the check.
* If you are adding a discount to a menu item selection, the GUID
  of the menu item selection.

You also create an array of `AppliedDiscount` objects for
the discounts you are adding. You can optionally provide promotional codes
for the discounts.

For example:

```
[![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  {
    "discount": {
      "guid": "a96fd992-9d69-4a62-894f-b621c31127a5"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    }
  },
  {
    "discount": {
      "guid": "30430bb7-0e55-4aae-b783-ee62cda3ca7d"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    },
    "appliedPromoCode": "MYEXTRASPECIALOFFER"
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e166052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | You can include multiple discounts in the JSON array. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e168052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The Toast platform identifier of one of the discounts that is being added to a check or menu item selection. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e170052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The identifier of another discount that is being added. |

##### POSTing the discounts to the check or menu item selection

When you add discounts to an existing order, you send a
`POST` message to the `/appliedDiscounts` endpoint
for the check or the menu item selection.

The REST API request path parameters must include the following
Toast platform GUIDs:

* The GUID of the order.
* The GUID of the check.
* If applicable, the GUID of the menu item selection.

Use the following endpoints to add discounts to an existing
order:

**Check-level discounts**
:   To add check-level discounts, send the `POST`
    message to:

    `/orders/{orderGuid}/checks/{checkGuid}/appliedDiscounts`

**Item-level discounts**
:   To add an item-level discount, send the `POST`
    message to:

    `/orders/{orderGuid}/checks/{checkGuid}/selections/{selectionGuid}/appliedDiscounts`

The body of the message is the JSON array of
`AppliedDiscount` objects.

##### Example responses for added discounts

When you add a discount to an existing order, the response contains
an `Order` object that shows the added discounts.

Here is an example of a response to a request to add discounts to a
check:

```
{
  "guid": "52b90296-359c-4015-a42b-044276a9c0b3",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "guid": "b79bbce8-cc4f-42f5-b42d-1f644888db34",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "entityType": "Check",

      [contents omitted]

      "appliedDiscounts": [
        {
          "guid": "43130ce2-24e4-4532-b77d-f1cee4690743",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "entityType": "AppliedCustomDiscount",
          "externalId": null,
          "approver": null,
          "processingState": null,
          "loyaltyDetails": null,
          "name": "MyCheckDiscount",
          "comboItems": [],
          "discountAmount": 11.1,
          "discount": {
            "guid": "c0c17bfb-db88-4322-ae58-df5059325a1a",
            "entityType": "Discount"
          },
          "nonTaxDiscountAmount": 11.1,
          "triggers": [],
          "appliedPromoCode": null
        }
      ],

      [contents omitted]

    }
  ],

  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e196052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The Toast platform GUID of the order you added a discount in. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e198052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The Toast platform GUID of the check you added a discount to. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e200052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The Toast platform GUID of the discount you added. |

Here is an example of a response to a request to add a discount to a
menu item selection:

```
{
  "guid": "52b90296-359c-4015-a42b-044276a9c0b3",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "guid": "b79bbce8-cc4f-42f5-b42d-1f644888db34",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "entityType": "Check",

      [contents omitted]

      "selections": [
        {
          "guid": "ee3d2c4a-2d67-4c4e-8aa0-b8496fb00110",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "entityType": "MenuItemSelection",

          [contents omitted]

          "appliedDiscounts": [
            {
              "guid": "9d0a2fb6-c962-4ccd-89b6-c96865a7b2f3",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
              "entityType": "AppliedCustomDiscount",
              "externalId": null,
              "approver": null,
              "processingState": null,
              "loyaltyDetails": null,
              "name": "MyItemDiscount",
              "comboItems": [],
              "discountAmount": 11.1,
              "discount": {
                "guid": "896304bc-6151-4e13-a407-89a4792fa2ba",
                "entityType": "Discount"
              },
              "nonTaxDiscountAmount": 11.1,
              "triggers": [
                {
                  "selection": {
                    "guid": "33182827-db63-4119-84a3-230e3e7eb809",
                    "entityType": "MenuItemSelection",
                    "externalId": null
                  },
                  "quantity": 1
                }
              ],
              "appliedPromoCode": null
            }
          ],

          [contents omitted]

        }
      ],

      [contents omitted]

    }
  ],

  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e233052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The Toast platform GUID of the order you added a discount in. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e235052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The Toast platform GUID of the check you added a discount in. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e237052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The Toast platform GUID of the menu item selection you added a discount to. |
| [4](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e239052FCDED-8EB9-4BFA-9C41-EBF50ED0E8CE) | The Toast platform GUID of the discount you added. |

#### Verifying eligibility for discounts

When you use the orders API to add discounts to an order, the orders
API verifies that the discounts are applicable based on the discount
eligibility requirements, which can include:

* When the order is placed. A discount might only be available
  during a specified date range, on specific days of the week, or during
  specific times.
* A minimum or maximum check price.
* Required item selections.
* For check-level and BOGO discounts, whether multiple discounts can
  be combined.

For more information about discount eligibility and combining
discounts, see the [discounts information](https://doc.toasttab.com/doc/platformguide/platformDiscountsOverview.html) in the
*Toast Platform Guide*.

##### Determining whether a menu item allows discounts

In the menus API, the `isDiscountable` field for a menu
item determines whether any discount can be applied to that item.

If `isDiscountable` is `false`, then the item
cannot have any discounts applied to it.

The orders API does not apply discounts to non-discountable items.
If you add a discount to a non-discountable item, the
`discountAmount` is set to 0 in the response.

##### Determining eligibility based on order date

A discount might only be available during a specific date range. For
an order created using the orders API, the eligibility is based on the
order creation time.

##### Verifying eligibility for BOGO discounts

A BOGO discount is based on "buy" items and "get" items. When an
order contains the qualifying "buy" items, the guest receives the
qualifying "get" items. For example, when a guest buys a bagel, they get a
free cup of coffee. Or when a guest buys two cups of soup, they get a
third cup of soup for free.

A BOGO discount can also be configured to apply to any items. For
example, when a guest purchases any two items, they get a third item for
free.

When a BOGO discount is applied to a check, the Toast platform
attempts to match the menu item selections in the check to the applied
discount. It checks for both the "buy" items and the "get" items.

If the Toast platform cannot match a qualifying "buy" or "get" item
for the discount, the orders API returns an HTTP 400 error to indicate
that the order is not formed correctly.

For the item matching for BOGO discounts, note the following:

**Toast platform selects the first matching item**
:   The Toast platform matches a BOGO discount to the menu item
    selections in the order that they occur in the
    `Selections` object for the check.

    For example, you apply a BOGO discount that offers free coffee
    with a purchased bagel. The Toast platform applies the discount when
    it finds the first bagel menu item selection. It discounts the price
    of the first coffee menu item selection.

    If it is important to apply a BOGO discount to specific menu
    item selections, make sure that they are in the correct
    sequence.

**Cannot use an already discounted item**
:   The Toast platform does not select an item that already has a
    discount applied to it as either the "buy" or "get" item.

    For example, you apply a BOGO discount that offers free coffee
    with a purchased bagel. The order contains both a bagel and a
    coffee. However, you also applied to the coffee a discount for 50%
    off. Because of the existing discount on the coffee, it cannot be
    the "get" item for the BOGO discount.

##### Verifying eligibility for combo discounts

A combo discount applies to multiple menu item selections in an
order. A combo discount can be configured to apply to more than one item
of the same type or to a combination of different items. For example, a
combo discount might be:

* Two small cheese pizzas for a fixed amount
* One coffee and one bagel for a fixed amount

When you apply a combo discount to a check, the Toast platform
selects matching menu selection items that qualify the check for the
discount.

If the Toast platform cannot match a qualifying item for the
discount, the orders API returns an HTTP 400 error to indicate that the
order is not formed correctly.

When it identifies items to match the combo discount, the Toast
platform does not select an item that already has a discount applied to
it.

For example, you apply a combo discount that offers two small cheese
pizzas for a fixed amount. The order contains two cheese pizzas. However,
you also applied a 50% off discount to one of those pizzas. The discounted
pizza cannot count toward the combo discount.

#### How BOGO and combo discounts are applied in returned order data

When the Toast platform applies a BOGO or combo discount, it updates
the menu item selections to reflect the discount.

To do this, the Toast platform might split the original menu item
selections.

For example, an order includes two menu item selections - one for
three bagels, and the other for a cup of coffee. The applied combo discount
offers a bagel and coffee for a reduced price. The returned order object
splits the bagel menu selection item. The bagel that the discount applies to
is listed separately from the other two bagels.

##### Applying BOGO discounts

A BOGO discount is applied to the "get" items for the discount. In
the returned `Order` object, the discount is removed from the
check and added to the "get" items.

For example, for a BOGO discount that offers a free cup of coffee
with every bagel, the bagel is the "buy" item and the coffee is the "get"
item. In the returned `Order` object, the discount is applied
to the coffee.

The "get" items are in a separate `MenuItemSelection`
object. The `appliedDiscounts` value for the "get" items
includes information about the BOGO discount. In the
`AppliedDiscounts` object, the `triggers` value
identifies the menu item selections that fulfill the "buy"
requirements.

For example, the following order contains a single menu item
selection for three cups of soup. The applied BOGO discount offers a free
cup of soup for every cup purchased.

```
{  
   "entityType":"Order",

   [contents omitted]

   },
   "checks":[  
      {  
         "entityType":"Check",
         "selections":[  
           {
             "entityType": "MenuItemSelection",
             "itemGroup": {
               "guid": "e0da05d4-db71-44ed-805b-95284d22df73",
               "entityType": "MenuGroup"
             },
             "item": {
               "entityType": "MenuItem",
               "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
             },
             "quantity": 3,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
             "modifiers": []
           }
         ],
         "appliedDiscounts": [
           {
             "discount": {
                "guid": "7e345df5-9b3c-4e5a-9fbe-6183c56d2f88"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
             }
           }
        ]
      }
   ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e23132AAD0504-D23B-47FA-B191-CCDA17A4B028) | The GUID of the menu item selection for the check. To trigger the orders API to apply the discount, the specific menu items must match the configuration of the BOGO discount. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e23152AAD0504-D23B-47FA-B191-CCDA17A4B028) | The number of menu items in the check. To trigger the orders API to apply the discount, the number of menu items must match the configuration of the BOGO discount. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e23172AAD0504-D23B-47FA-B191-CCDA17A4B028) | The GUID for a BOGO discount that is configured for your restaurant. You apply BOGO discounts in the `appliedDiscounts` value for the `Check` object. |

In the returned order information, there are two
`MenuItemSelection` objects.

* One `MenuItemSelection` object is for two cups of
  soup, which includes the "buy" item for the BOGO discount.
* The other `MenuItemSelection` object is for one cup
  of soup, which is the "get" item for the BOGO discount. This object
  includes the applied discount. The `triggers` object points
  to the other `MenuItemSelection` object.

The following example shows the return data for an order that
includes a BOGO discount. In this example, the BOGO discount is
*buy* one cup of soup and *get* one
cup of soup free. The check in the order includes three cups of
soup.

```
{
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "entityType": "Check",

      [contents omitted]

      "appliedDiscounts": [],![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
      "selections": [
        {
          "guid": "e0da05d4-db71-44ed-805b-95284d22df73",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup"
          },
          "item": {
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
            "entityType": "MenuItem"
          },
          "quantity": 2,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "preDiscountPrice": 17.98,
          "displayName": "Soup",
          "appliedDiscounts": [],![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
          "price": 17.98,

          [contents omitted]

        },
        {
          "guid": "2950ded4-f21a-428d-a847-698bcb260c03",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup"
          },
          "item": {
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
            "entityType": "MenuItem"
          },
          "quantity": 1,![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
          "preDiscountPrice": 8.99,![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
          "displayName": "Soup",
          "appliedDiscounts": [![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
            {
              "guid": "7ec5c2e8-b6ae-4d30-8084-fecf3dd611f3",
              "entityType": "AppliedCustomDiscount",
              "approver": null,
              "processingState": null,
              "loyaltyDetails": null,
              "name": "Enjoy more soup.",
              "comboItems": [],
              "discountAmount": 8.99,![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
              "discount": {
                "guid": "7e345df5-9b3c-4e5a-9fbe-6183c56d2f88",
                "entityType": "Discount"
              },
              "triggers": [
                {
                  "selection": {
                    "guid": "e0da05d4-db71-44ed-805b-95284d22df73",![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
                    "entityType": "MenuItemSelection"
                  },
                  "quantity": 1![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
                }
              ],
              "appliedPromoCode": null
            }
          ],
          "price": 0,![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)

          [contents omitted]

        }
      ],

      [contents omitted]

    }
  ],

  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2359FB6A5D14-9F96-466C-8541-5687523E637B) | The BOGO discount is not applied to the `Check` in this `Order`. The BOGO discount is applied to the "get" menu item selections. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2361FB6A5D14-9F96-466C-8541-5687523E637B) | The GUID that the Toast POS system assigns to a menu item selection in a check. You can use this GUID to determine which `MenuItemSelection` triggered a discount.  In this example, the first `MenuItemSelection` object includes the items that triggered the BOGO discount. The items that trigger a BOGO discount are the "buy" items. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2363FB6A5D14-9F96-466C-8541-5687523E637B) | The GUID of the specific menu item. This matches the menu item configured as the "buy" item for the BOGO discount. |
| [4](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2365FB6A5D14-9F96-466C-8541-5687523E637B) | The quantity of the menu items in this `MenuItemSelection` object. This object includes the "buy" item for the BOGO discount.  The number of items in the input data for this order was three. This example response data splits the original `MenuItemSelection` into two groups. The `quantity` of `2` in this `MenuItemSelection` object includes the "buy" item and another item that is not affected by the BOGO discount at all. |
| [5](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2367FB6A5D14-9F96-466C-8541-5687523E637B) | No discounts are applied to the `MenuItemSelection` for the "buy" item in the BOGO discount. |
| [6](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2370FB6A5D14-9F96-466C-8541-5687523E637B) | The GUID that the Toast platform assigns to a menu item selection in a check. You can use this GUID to determine which `MenuItemSelection` triggered a discount.  In this example, the second `MenuItemSelection` object includes the items that the BOGO discount applies to. The items that are reduced in price by a BOGO discount are the "get" items. |
| [7](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2372FB6A5D14-9F96-466C-8541-5687523E637B) | The GUID of the specific menu item. This matches the menu item configured as the "get" item for the BOGO discount. In this example, the specific menu item for the "buy" and "get" items are the same item, a cup of soup. |
| [8](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2374FB6A5D14-9F96-466C-8541-5687523E637B) | The quantity of the menu items in this `MenuItemSelection` object. This object includes the "get" item for the BOGO discount.  The number of items in the input data for this order was three. This example response data splits the original `MenuItemSelection` into two groups. The `quantity` of `1` in this `MenuItemSelection` object includes the "get" item. |
| [9](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2376FB6A5D14-9F96-466C-8541-5687523E637B) | The price of the "get" item before the BOGO discount is applied. |
| [10](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2378FB6A5D14-9F96-466C-8541-5687523E637B) | The BOGO discount is applied to the `MenuItemSelection` that includes the "get" item for the discount. The `AppliedCustomDiscount` object includes information about the BOGO discount. |
| [11](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2380FB6A5D14-9F96-466C-8541-5687523E637B) | In this example, the BOGO discount applies a 100% price reduction to the "get" item. |
| [12](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2383FB6A5D14-9F96-466C-8541-5687523E637B) | The `triggers` value indicates which `MenuItemSelection` object in the check qualified the current menu item for the discount. The `guid` value matches the GUID that the Toast platform assigned to the `MenuItemSelection` that triggered the discount. In this example, see [the matching GUID](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2361FB6A5D14-9F96-466C-8541-5687523E637B). |
| [13](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2385FB6A5D14-9F96-466C-8541-5687523E637B) | In this example, the BOGO discount applies to one "get" item. |
| [14](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2387FB6A5D14-9F96-466C-8541-5687523E637B) | The price of the "get" item is reduced by the BOGO discount. In this example, the BOGO discount reduces the price of the "get" item by 100%. |

##### Applying a combo discount

When the Toast platform applies a combo discount, it adds a
`comboItems` object to the `AppliedDiscounts`
object. The `comboItems` object identifies the menu item
selections that are part of the discount.

For example, the following order contains a single menu item
selection for three cups of soup. The applied combo discount offers two
cups of soup for a reduced price.

```
{  
   "entityType":"Order",

   [contents omitted]

   },
   "checks":[  
      {  
         "entityType":"Check",
         "selections":[  
           {
             "entityType": "MenuItemSelection",
             "itemGroup": {
               "guid": "e0da05d4-db71-44ed-805b-95284d22df73",
               "entityType": "MenuGroup"
             },
             "item": {
               "entityType": "MenuItem",
               "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
             },
             "quantity": 3,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
             "modifiers": []
           }
         ],
         "appliedDiscounts": [
           {
             "discount": {
                "guid": "7e345df5-9b3c-4e5a-9fbe-6183c56d2f88"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
             }
           }
        ]
      }
   ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2684531BD268-895B-4950-9F99-86F6459D75C7) | The GUID of the menu item selection for the check. The specific menu items must match the configuration of the combo discount to trigger the orders API to apply that discount. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2686531BD268-895B-4950-9F99-86F6459D75C7) | The number of menu items in the check. The number of menu items must match the configuration of the combo discount to trigger the orders API to apply that discount. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2688531BD268-895B-4950-9F99-86F6459D75C7) | The GUID for a combo discount that is configured for your restaurant. You apply combo discounts in the `appliedDiscounts` value for the check object. |

In the returned order information, there are two
`MenuItemSelection` objects.

* One `MenuItemSelection` object is for two cups of
  soup. These are the two cups of soup that have the combo discount
  applied.
* The other `MenuItemSelection` object is for the third
  cup of soup, which is not discounted.

In the `AppliedDiscounts` object for the check, the
`comboItems` object points to the
`MenuItemSelection` object for the two cups of soup.

```
{
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "entityType": "Check",

      [contents omitted]

      "appliedDiscounts": [![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
        {
          "guid": "3b97af77-bb9f-4f83-87e1-471a1dd984cd",
          "entityType": "MultiItemAppliedDiscount",
          "approver": null,
          "processingState": null,
          "loyaltyDetails": null,
          "name": "Eat more soup.",
          "comboItems": [
            {
              "guid": "b059bf10-2d4b-4aba-808a-46d0ecfa1b71",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
              "entityType": "MenuItemSelection"
            }
          ],
          "discountAmount": 2.98,
          "discount": {
            "guid": "b1fba60e-f119-45ce-81ed-1e030c8e8705",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
            "entityType": "Discount"
          },
          "triggers": [
            {
              "selection": {
                "guid": "13c704da-d8bd-4a72-8df3-d340efb1e0d3",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                "entityType": "MenuItemSelection"
              },
              "quantity": 2![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
            }
          ],
          "appliedPromoCode": null
        }
      ],
      "totalAmount": 25.67,
      "selections": [
        {
          "guid": "13c704da-d8bd-4a72-8df3-d340efb1e0d3",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup"
          },
          "item": {
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
            "entityType": "MenuItem"
          },
          "quantity": 1,![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
          "preDiscountPrice": 8.99,
          "appliedDiscounts": [],![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)

          [contents omitted]

          "price": 8.99
        },
        {
          "guid": "b059bf10-2d4b-4aba-808a-46d0ecfa1b71",
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup",
            "externalId": null
          },
          "item": {
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
            "entityType": "MenuItem",
            "externalId": null
          },
          "quantity": 2,![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
          "preDiscountPrice": 17.98,![12](https://doc.toasttab.com/doc/devguide/assets/images/callouts/12.png)
          "appliedDiscounts": [],![13](https://doc.toasttab.com/doc/devguide/assets/images/callouts/13.png)
          
          [contents omitted]
          
          "price": 15![14](https://doc.toasttab.com/doc/devguide/assets/images/callouts/14.png)
        }
      ]

      [contents omitted]

    }
  ]

[contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2717531BD268-895B-4950-9F99-86F6459D75C7) | You apply a combo discount in the `appliedDiscounts` value of the `Check` object in an order. The response data for a check with a combo discount includes the discount information in the `appliedDiscounts` value for the `Check`. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2719531BD268-895B-4950-9F99-86F6459D75C7) | The GUID of the `MenuItemSelection` that the combo discount is applied to. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2721531BD268-895B-4950-9F99-86F6459D75C7) | The GUID of the combo discount. |
| [4](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2723531BD268-895B-4950-9F99-86F6459D75C7) | The GUID of the `MenuItemSelection` that contains the menu items that qualify for the combo discount. |
| [5](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2725531BD268-895B-4950-9F99-86F6459D75C7) | The number of menu items that qualify for the combo discount. For example, the combo discount in this example applies to two cups of soup. |
| [6](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2728531BD268-895B-4950-9F99-86F6459D75C7) | The GUID that the Toast platform assigned to a menu item selection in a check. You can use this GUID to determine which `MenuItemSelection` triggered a discount. |
| [7](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2730531BD268-895B-4950-9F99-86F6459D75C7) | The GUID of the specific menu item for this selection. |
| [8](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2732531BD268-895B-4950-9F99-86F6459D75C7) | The quantity of the menu items in this `MenuItemSelection` object.  The number of items in the input data for this order was three. This example response data splits the original `MenuItemSelection` into two groups. The `quantity` of `1` in this `MenuItemSelection` object is not included in the combo discount. |
| [9](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2734531BD268-895B-4950-9F99-86F6459D75C7) | The orders API reports combo discount information in the `appliedDiscounts` value for the `Check`. The `appliedDiscounts` value for the menu item selection is empty. |
| [10](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2736531BD268-895B-4950-9F99-86F6459D75C7) | The GUID of the specific menu item for this selection. This matches the menu item configured in the combo discount. In this example, the specific menu item is a cup of soup. |
| [11](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2738531BD268-895B-4950-9F99-86F6459D75C7) | The quantity of the menu items in this `MenuItemSelection` object.  The number of items in the input data for this order was three. This example response data splits the original `MenuItemSelection` into two groups. The `quantity` of `2` in this `MenuItemSelection` object includes the two cups of soup that are configured in the example combo discount. |
| [12](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2741531BD268-895B-4950-9F99-86F6459D75C7) | The price of the two menu items before the combo discount is applied. |
| [13](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2743531BD268-895B-4950-9F99-86F6459D75C7) | The orders API reports combo discount information in the `appliedDiscounts` value for the `Check`. The `appliedDiscounts` value for the menu item is empty. |
| [14](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e2745531BD268-895B-4950-9F99-86F6459D75C7) | The price of the two menu items after the combo discount is applied. |

#### Working with loyalty programs

A loyalty program rewards guests for patronizing a restaurant. A
loyalty program might offer a reward based on a number of visits or a total
dollar amount. Loyalty programs might also offer discounts.

From the Toast orders API, you can perform the following tasks related
to loyalty programs that are integrated with Toast:

* Apply a check to the guest's loyalty program account. For example,
  if a guest receives a free entree after 10 visits, then you want to make
  sure that their loyalty account is credited for each visit.
* Apply a loyalty program discount to a check or a menu item
  selection. For example, loyalty program members always get 10% off of
  their check.

For more information about loyalty programs, see [Loyalty program integration overview](https://doc.toasttab.com/doc/devguide/apiLoyaltyProgramIntegrationOverview.html).

##### How the Toast platform interacts with loyalty programs

To perform loyalty account operations, the Toast platform
communicates with a third-party loyalty program service provider. The
loyalty program service provider maintains information about customers'
qualifying purchases and determines the loyalty program discounts that a
customer can apply to checks.

The Toast platform supports integration with a specific set of
third-party loyalty program services. When you associate a customer's
loyalty program account with an order or a discount, you specify the
program service provider from the list of supported providers.

The Toast platform does not maintain configuration information about
loyalty programs and loyalty program discounts. The Toast platform relies
on the loyalty program service provider to perform the following
tasks:

* Verify the loyalty program account.
* Determine whether a check is eligible to be applied to a
  customer's account.
* Validate eligibility for a loyalty program discount.

##### Applying checks to a loyalty program account

To apply a check to a loyalty program account, include an
`AppliedLoyaltyInfo` object in the `Check` object.
The `AppliedLoyaltyInfo` object includes the following
information:

* `loyaltyIdentifier` - The identifier of the loyalty
  program account. For example, the customer's loyalty card
  number.
* `vendor` - The identifier of the loyalty program
  service provider. The `vendor` value is usually
  `INTEGRATION`.

The following example shows a check being applied to a loyalty
program account.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "4f4d2103-2e0f-45d7-ae4c-8a9c16648fd1",
    "entityType": "DiningOption"
  },
  "checks": [
    {
      "entityType": "Check",
      "customer": {
        "email": "fgauthier@example.com",
        "firstName": "Francis",
        "lastName": "Gauthier",
        "phone": "987-654-3210"
      },
      "appliedLoyaltyInfo": {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
        "loyaltyIdentifier": "6000101001599474",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "vendor": "MYLOYALTYPROVIDER"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
      },
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "eeebddd6-6556-4c81-bd2b-1d1a1a716a83",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "79df2dfb-340d-405f-a0f9-55b882606ce5"
          },
          "quantity": 3,
          "modifiers": []
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e29207557168-3DB0-4F1C-BC76-F4C42119A6B2) | The `appliedLoyaltyInfo` value holds an `AppliedLoyaltyInfo` object that associates a check with a specific loyalty account. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e29407557168-3DB0-4F1C-BC76-F4C42119A6B2) | The `loyaltyIdentifier` value is the unique identifier of the loyalty account that is recognized by the loyalty program service provider. For example, this might be the loyalty card number for a program member. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e29907557168-3DB0-4F1C-BC76-F4C42119A6B2) | The `vendor` value specifies the loyalty program service provider. The value is one of the enumerated service provider names that are supported by the Toast POS system. The value is usually `INTEGRATION`. |

##### Applying loyalty program discounts to an order

To apply loyalty program discounts to an order:

1. Include an `appliedLoyaltyInfo` value in the
   `Check` object that the discount applies to.

   In the `AppliedLoyaltyInfo` object, provide the
   following information:

   * `loyaltyIdentifier` - The identification string
     for the loyalty program account.
   * `vendor` - The Toast API enumeration value for
     the loyalty program service provider. The `vendor`
     value is usually `INTEGRATION`.
2. Include an `appliedDiscounts` value in the
   `Check` object for a check-level discount, or in a
   `MenuItemSelection` object for an item-level
   discount.

   In the `AppliedDiscounts` object, include the
   `loyaltyDetails` value.

   In the `LoyaltyDetails` object, provide the following
   information:

   * `vendor` - The Toast API enumeration value for
     the loyalty program service provider. The `vendor`
     value is usually `INTEGRATION`. If vendor is
     `INTEGRATION`, then you do not provide a discount GUID
     or amount.
   * `referenceId` - The identification string for the
     loyalty program discount. The loyalty program service provider
     recognizes this value and matches it to the specific
     discount.

The following example shows the JSON message body to
`POST` an order with a check-level loyalty program
discount.

```
{  
   "entityType":"Order",
   "diningOption":{  
      "guid":"4f4d2103-2e0f-45d7-ae4c-8a9c16648fd1",
      "entityType":"DiningOption"
   },
   "checks":[  
      {  
         "entityType":"Check",
         "customer":{
            "email":"fgauthier@example.com",
            "firstName":"Francis",
            "lastName":"Gauthier",
            "phone":"987-654-3210"
         },
         "appliedLoyaltyInfo": {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
            "loyaltyIdentifier": "6000101001599474",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
            "vendor": "INTEGRATION"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
         },
         "selections":[  
            {  
               "entityType":"MenuItemSelection",
               "itemGroup":{  
                  "guid":"eeebddd6-6556-4c81-bd2b-1d1a1a716a83",
                  "entityType":"MenuGroup"
               },
               "item":{  
                  "entityType":"MenuItem",
                  "guid":"79df2dfb-340d-405f-a0f9-55b882606ce5"
               },
               "quantity":3,
               "modifiers": []
            }
         ],
         "appliedDiscounts": [![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
           {
             "loyaltyDetails": {
               "vendor": "INTEGRATION",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
               "referenceId": "4"![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
             }
           }
         ]
      }
   ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e266B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `appliedLoyaltyInfo` value holds an `AppliedLoyaltyInfo` object that associates a check with a specific loyalty account. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e268B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `loyaltyIdentifier` value is the unique identifier of the loyalty account that is recognized by the loyalty program service provider. For example, this might be the loyalty card number for a program member. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e270B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `vendor` value specifies the loyalty program service provider. The value is one of the enumerated service provider names that the Toast POS system supports. The value is usually `INTEGRATION`. |
| [4](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e272B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `appliedDiscounts` value holds an `AppliedDiscount` object that specifies the loyalty program discount or discounts to apply to the check. |
| [5](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e274B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `vendor` value specifies the loyalty program service provider. The value is one of the enumerated service provider names that the Toast platform supports. The value is usually `INTEGRATION`. If `vendor` is `INTEGRATION`, then you do not provide a discount GUID or amount. |
| [6](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e277B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `referenceId` value is the unique identifier that is recognized by the loyalty program service provider. The loyalty program service provider matches this value to its own discount records. |

This example shows the JSON message body to `POST` an
order with an item-level loyalty program discount.

```
{  
   "entityType":"Order",
   "diningOption":{  
      "guid":"4f4d2103-2e0f-45d7-ae4c-8a9c16648fd1",
      "entityType":"DiningOption"
   },
   "checks":[  
      {  
         "entityType":"Check",
         "customer":{
            "email":"fgauthier@example.com",
            "firstName":"Francis",
            "lastName":"Gauthier",
            "phone":"987-654-3210"
         },
         "appliedLoyaltyInfo": {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
            "loyaltyIdentifier": "6000101001599474",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
            "vendor": "INTEGRATION"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
         },
         "selections":[  
            {  
               "entityType":"MenuItemSelection",
               "itemGroup":{  
                  "guid":"eeebddd6-6556-4c81-bd2b-1d1a1a716a83",
                  "entityType":"MenuGroup"
               },
               "item":{  
                  "entityType":"MenuItem",
                  "guid":"79df2dfb-340d-405f-a0f9-55b882606ce5"
               },
               "quantity":3,
               "appliedDiscounts": [![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                 {
                   "loyaltyDetails": {
                   "vendor": "INTEGRATION",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
                   "referenceId": "4"![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
                   }
                 }
               ],
               "modifiers": []
            }
         ]
      }
   ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e290B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `appliedLoyaltyInfo` value holds an `AppliedLoyaltyInfo` object that associates a check with a specific loyalty account. |
| [2](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e292B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `loyaltyIdentifier` value is the unique identifier of the loyalty account that is recognized by the loyalty program service provider. For example, this may be the loyalty card number for a program member. |
| [3](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e294B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `vendor` value specifies the loyalty program service provider. The value is one of the enumerated service provider names that the Toast platform supports. The value is usually `INTEGRATION`. |
| [4](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e296B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `appliedDiscounts` value holds an `AppliedDiscount` object that specifies the loyalty program discount or discounts being applied to the item. |
| [5](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e298B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `vendor` value specifies the loyalty program service provider. The value is one of the enumerated service provider names that the Toast platform supports. The value is usually `INTEGRATION`. If vendor is `INTEGRATION`, then you do not provide a discount GUID or discount amount. |
| [6](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html#co-d1e301B5FD597B-A42F-4C83-8CA0-E173E36FE922) | The `referenceId` value is the unique identifier that is recognized by the loyalty program service provider. The loyalty program service provider matches this value to its own discount records. |

##### Validating loyalty program account and discount eligibility

When you `POST` the order, the Toast POS sends the
following information to the program service provider:

* The identifier of the loyalty program account.
* For discounts, the reference identifiers of the applied
  discounts.
* Details about the check and menu selection items.

The program service provider uses this information to verify that
the loyalty account exists. It checks whether the order can be applied to
the loyalty account, and whether the checks or menu item selections are
eligible for the specified loyalty discounts.

The program service provider returns the results of the validation.
The response includes whether the request was accepted. For discounts, the
response indicates the discount amount.

For details on the response information for loyalty transactions,
see [Provide
information on a loyalty transaction](https://doc.toasttab.com/openapi/loyalty/operation/yourEndpointNamePost/) in the *API
Reference*.


---

# Marketplace facilitator orders - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html

### Marketplace facilitator orders

If your organization is designated a marketplace facilitator by a
taxation authority, then when you use the orders API to create orders, you
can either:

* Allow the Toast platform to calculate and populate the item prices
  and tax amounts based on the restaurant configuration.
* Submit the item prices and tax amounts. You typically use this
  option if you have a tax partner that calculates the tax for you.

  The prices that you provide should match the menu prices from the
  restaurant configuration.

In both cases, you also indicate whether you collect and remit taxes
on behalf of the Toast restaurant. Restaurant employees use Toast platform
analytics and reports to get information about the tax amounts that a
marketplace facilitator paid on their behalf.

For more information about marketplace facilitator orders in the Toast
platform, see [Marketplace facilitator tax payments](https://doc.toasttab.com/doc/platformguide/adminMarketplaceFacilitatorTaxPayments.html).

#### Overview of the order creation process for a marketplace facilitator order

A marketplace facilitator uses the following process to create an
order and remit tax payments.

1. As a marketplace facilitator, your organization receives a guest
   order to be fulfilled at a Toast restaurant location.
2. You use the orders API to get accurate price and tax amount
   information for the order. For more information, see [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices).
3. You receive payment for the order from the restaurant
   guest.
4. You transmit the order information to the Toast platform for
   fulfillment at the restaurant location.

   When you create a Toast platform order as a marketplace
   facilitator, you can either:

   * Allow the Toast platform to calculate and populate the
     prices and tax amounts. For more information, see [Allowing the Toast platform to calculate the prices and tax
     amounts](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#apiUsingToastPlatformPricesMarketplaceFacilitatorOrders).
   * Provide the prices and tax amounts for the items in the
     order. For more information, see [Specifying prices and tax amounts](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#apiSpecifyingPricesMarketplaceFacilitatorOrders).

   You also indicate whether you remit tax amounts on behalf of the
   restaurant. The `MarketplaceFacilitatorTaxInfo` object
   provides information about whether you remit taxes.

   If you specify the order prices and tax amounts, then
   `MarketplaceFacilitatorTaxInfo` also includes the order tax
   amounts.
5. If you do remit taxes, then you remit the tax amounts to taxing
   authorities on behalf of the restaurant.
6. You deliver order payment to the restaurant location.

#### Allowing the Toast platform to calculate the prices and tax amounts

When you create a marketplace facilitator order, you can have the
Toast platform calculate and populate the prices and tax amounts when the
order is created.

For marketplace facilitator orders where the Toast platform
calculates the prices and tax amounts, you include a
`MarketplaceFacilitatorTaxInfo` object that contains a single
value, `facilitatorCollectAndRemitTaxOrder`.

* If you remit taxes on behalf of the restaurant, set
  `facilitatorCollectAndRemitTaxOrder` to
  `true`.
* If you do not remit taxes on behalf of the restaurant, set
  `facilitatorCollectAndRemitTaxOrder` to
  `false`.

The presence of the `facilitatorCollectAndRemitTaxOrder`
value indicates that the Toast platform populates the prices and tax
amounts. Do not provide an `externalPriceAmount` value for any
of the menu item selections.

The `Order` object in the following example creates a
marketplace facilitator order that where the Toast platform populates the
price and tax amounts. In this example, the marketplace facilitator does
not remit the taxes.

**Marketplace facilitator order where the Toast platform populates
the prices and tax amounts**

```
{
  "entityType": "Order",

    [contents omitted]

  "marketplaceFacilitatorTaxInfo": {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "facilitatorCollectAndRemitTaxOrder": false![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "entityType": "MenuItemSelection",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "itemGroup": {
            "guid": "881472e6-dd94-48c6-b5c6-25e51a864208",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "9c59d4ab-8242-450f-8f36-b16e1b3ab802"
          },
          "quantity": 1,
          "modifiers": []
        }
      ],

    [contents omitted]

    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e183ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | Contains information about the taxes that a marketplace facilitator organization remits on behalf of a Toast restaurant. |
| [2](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e185ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | Indicates whether the marketplace facilitator organization will pay the tax amounts for an order on behalf of the restaurant that fulfills the order. In this example, the marketplace facilitator will not pay the tax amounts. |
| [3](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e187ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | If you include the `facilitatorCollectAndRemitTaxOrder` value, do not specify `externalPriceAmount` for menu item selections in the order. |

#### Specifying prices and tax amounts

When you create a marketplace facilitator order, you can provide the
prices and tax amounts for the order. You typically select this option
when you have a tax partner that calculates the tax amounts for
you.

When you choose this option, make sure that the prices that you
provide are consistent with the restaurant menu prices. You can get the
prices for the current order (see [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices)), or get the prices from the menu
configuration (see [Get
menus](https://doc.toasttab.com/openapi/menus/operation/menusGet/)).

Service charges and discounts are not supported when your
integration provides prices and tax amounts for the order. Including an
`appliedServiceCharges` or `appliedDiscounts` object
in your order submission will cause the order to fail and return an error.
For more information about service charges, see [Service charges for checks](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiServiceCharges). For more
information about discounts, see [Working with order discounts](https://doc.toasttab.com/doc/devguide/apiDiscountingOrders.html).

In a marketplace facilitator order that specifies prices and tax
amounts:

* For each menu item selection, provide the item price as the
  value of `externalPriceAmount`.

  For menu items that use size pricing, specify the item price as
  the value of `externalPriceAmount` for the size-price
  modifier. For the parent item, set `externalPriceAmount` to
  `0.00`. For more information, see [Specifying size prices in marketplace facilitator orders](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#apiSpecifyingPricesMarketplaceFacilitatorOrdersSizePrice).
* In the `MarketplaceFacilitatorTaxInfo` object for the
  order, include a `taxes` array of
  `AppliedTaxRate` objects.

  You provide an `AppliedTaxRate` object for each type
  of tax that applies to the order. In each `AppliedTaxRate`
  object:

  + Set `name` to the name of the tax. This value is
    not used outside of the Toast API. It can be any value that is
    useful for you.
  + Set `taxAmount` to the total amount for the tax
    across all of the checks and menu item selections.
  + Use the `facilitatorCollectAndRemitTax` value to
    indicate whether you will remit the amount for that tax.

    If you will remit the tax amount, set
    `facilitatorCollectAndRemitTax` to
    `true`.

    If you will not remit the tax amount, set
    `facilitatorCollectAndRemitTax` to
    `false`.

The `Order` object in the following example creates a
marketplace facilitator order that provides the prices and tax amounts for
the order. The marketplace facilitator remits the tax amount for one of
the taxes, but does not remit the tax amount for the other tax.

**Marketplace facilitator order that specifies prices and tax
amounts**

```
{
  "entityType": "Order",

    [contents omitted]

  "marketplaceFacilitatorTaxInfo": {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "taxes": [![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      {
        "name": "SomeTax",
        "taxAmount": 3.21,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
        "facilitatorCollectAndRemitTax": true![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      },
      {
        "name": "SomeOtherTax",
        "taxAmount": 2.34,
        "facilitatorCollectAndRemitTax": false![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      }
    ]
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "externalPriceAmount": 123.45,![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
          "itemGroup": {
            "guid": "881472e6-dd94-48c6-b5c6-25e51a864208",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "9c59d4ab-8242-450f-8f36-b16e1b3ab802"
          },
          "quantity": 1,
          "modifiers": []
        }
      ],

    [contents omitted]

    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e245ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | Contains information about the taxes that a marketplace facilitator organization remits on behalf of a Toast restaurant. |
| [2](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e247ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | Include the `taxes` value if you specify prices and tax amounts for a marketplace facilitator order. |
| [3](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e249ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | Specifies the total tax amount for this tax type across all of the checks and menu item selections in the order. |
| [4](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e251ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | The value `true` indicates that the marketplace facilitator organization will pay this tax amount for the order on behalf of the restaurant that fulfills the order. |
| [5](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e253ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | The value `false` indicates that the marketplace facilitator organization will not pay this tax amount for the order on behalf of the restaurant that fulfills the order. |
| [6](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e256ED70EBFB-66D2-4C17-9A10-C756EEEBD261) | Specifies the price for this menu item selection. To specify prices and tax amounts for a marketplace facilitator order, include the `externalPriceAmount` value for each menu item selection. The specified price should correspond to the price that is configured in the restaurant menu. |

#### Specifying size prices in marketplace facilitator orders

Marketplace facilitator orders can include menu items that use size
pricing. For information about menu items with size pricing, see [Menu item with a size price](https://doc.toasttab.com/doc/devguide/apiUsingPricingRulesAndPricingStrategyToCalculatePrices_V2.html#apiMenuItemWithASizePrice_V2).

When you create a marketplace facilitator order and specify prices,
you include an `externalPriceAmount` for all of the menu item
selections. For size-priced items:

* Set the `externalPriceAmount` for the parent item to
  `0.0`.
* Include the actual price of the item in the
  `externalPriceAmount` value of the size modifier.

The `Order` object in the following example creates a
marketplace facilitator order with a menu item selection that uses size
pricing.

**Marketplace facilitator order that specifies a size-based price
for a menu item selection**

```
{
  "entityType": "Order",

    [contents omitted]

  "marketplaceFacilitatorTaxInfo": {
    "taxes": [![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
      {
        "name": "SomeTax",
        "taxAmount": 0.10,
        "facilitatorCollectAndRemitTax": true
      }
    ]
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "externalPriceAmount": 0,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          "itemGroup": {
            "guid": "881472e6-dd94-48c6-b5c6-25e51a864208",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "9c59d4ab-8242-450f-8f36-b16e1b3ab802"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          },
          "quantity": 1,
          "modifiers": [
            {
              "externalPriceAmount": 10.00,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
              "entityType": "MenuItemSelection",
              "optionGroup": {
                "guid": "f315fe4c-a74d-49c1-b117-fe4494bb456e"![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
              },
              "item": {
                "entityType": "MenuItem",
                "guid": "4382f595-8f01-4d97-b3ec-8fe91da963a1"![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
              },
              "quantity": 1
            }
          ]
        }
      ],

    [contents omitted]

    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e390FF8D1928-D00D-4A66-8C03-09C0F1A6A166) | When you specify tax amounts for an order, you also specify the prices for items in the order. For more information, see [Specifying prices and tax amounts](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#apiSpecifyingPricesMarketplaceFacilitatorOrders). |
| [2](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e392FF8D1928-D00D-4A66-8C03-09C0F1A6A166) | For items that use size prices, set `externalPriceAmount` for the parent item to `0.00`. |
| [3](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e394FF8D1928-D00D-4A66-8C03-09C0F1A6A166) | The Toast platform GUID of the size-priced parent item. |
| [4](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#selectedSizePriceMarker) | The price of the selected size modifier for the size-priced item. |
| [5](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e396FF8D1928-D00D-4A66-8C03-09C0F1A6A166) | The Toast platform GUID of the Size modifier group that is used for size pricing. |
| [6](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html#co-d1e398FF8D1928-D00D-4A66-8C03-09C0F1A6A166) | The Toast platform GUID of the selected modifier for the item that uses size pricing. Represents a value such as Small, Medium, or Large. |


---

# Marketplace facilitator tax information - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorTaxInformation.html

### Marketplace facilitator tax information

For orders submitted by a marketplace facilitator, the prices and tax
amounts are either populated by the Toast platform, or provided by the
marketplace facilitator.

#### About marketplace facilitators

For Toast platform restaurants, a marketplace facilitator is a
business that:

* Takes guest orders, processes guest payments, and then directly
  submits those orders to a Toast platform restaurant for
  fulfillment.
* Is required by a taxing authority to pay tax amounts for the
  orders they process.

For example, a restaurant ordering service such as
Grubhubâ¢, Uber Eatsâ¢, or
DoordashÂ® accepts orders for a
large number of restaurants. The service might take guest orders and
payments and then submit the order to the Toast platform for fulfillment
at a Toast platform restaurant. The ordering service receives the guest
payment and then remits the applicable tax amounts.

For more information about marketplace facilitator orders in the
Toast platform, see [Marketplace facilitator tax payments](https://doc.toasttab.com/doc/platformguide/adminMarketplaceFacilitatorTaxPayments.html).

#### Indicating the source of prices and tax amounts

The orders API return data indicates whether the prices and tax
amounts were populated by the Toast platform, or specified by the
marketplace facilitator. It also indicates whether the marketplace
facilitator collected and remitted the taxes on behalf of the
restaurant.

In the `appliedTaxes` object, the `type` value
indicates whether the value came from the Toast platform or was calculated
by the marketplace facilitator:

* If `type` is `EXTERNAL`, then the prices
  and tax amounts were provided by the marketplace facilitator. The
  prices should match the current menu prices for the restaurant. The
  tax amounts are usually calculated by a tax partner.
* If `type` is any value other than
  `EXTERNAL`, then the prices and tax amounts were calculated
  by the Toast platform.

The `facilitatorCollectAndRemitTax` value indicates
whether the marketplace facilitator remitted the tax on behalf of the
restaurant. If set to `true`, then the marketplace facilitator
remitted the tax.

##### Reviewing marketplace facilitator tax calculations

To review the tax calculation for a marketplace facilitator, refer
to the `AppliedTaxRate` object. This object contains the
following details:

* `entityType`: The type of object.
* `name`: The name of the tax rate. For marketplace
  facilitator taxes, this field is always Toast Marketplace
  Facilitator Taxes.
* `rate`: The tax rate. This value can be a fixed
  amount, percentage or `null`.
* `taxAmount`: The tax amount applied.
* `type`: The tax rate type. Possible tax types for
  marketplace facilitators are:

  + FIXED: The tax rate is a fixed amount that is calculated
    by a third-party provider.
  + EXTERNAL: The tax is for a marketplace facilitator
    order, and the marketplace facilitator organization, such as a
    third-party ordering platform, calculated the tax
    amount.
* `displayName`:The name of the tax rate as it
  appears on guest receipts.
* `jurisdiction`: The area the tax rate applies to,
  such as a state or province, for reporting purposes.

#### Example return data with Toast platform prices and tax amounts

The following example shows the orders API return data for a
marketplace facilitator order where the Toast platform calculated and
populated the prices and tax amounts.

```
{
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "entityType": "Check",

     [contents omitted]

      "selections": [
        {
          "entityType": "MenuItemSelection",

          [contents omitted]

          "appliedTaxes": [
            {
              "guid": "26aa5680-3233-4d3b-9504-051a622ae76d",
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "d5b88c05-1348-42ef-b1d3-577a83d70a80",
                "entityType": "TaxRate"
              },
              "rate": 0.0625,
              "name": "State Tax",
              "taxAmount": 0.31,
              "type": "PERCENT",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              "facilitatorCollectAndRemitTax": true![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
            }
          ],
          "itemGroup": {
            "guid": "881472e6-dd94-48c6-b5c6-25e51a864208",
            "entityType": "MenuGroup",
            "externalId": null
          },
          "item": {
            "guid": "9c59d4ab-8242-450f-8f36-b16e1b3ab802",
            "entityType": "MenuItem",
            "externalId": null
          },

          [contents omitted]

          "receiptLinePrice": 5,
          "tax": 0.31,

          [contents omitted]

        }
      ],

      [contents omitted]

      "taxAmount": 0.31,

      [contents omitted]

   }
  ],

  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorTaxInformation.html#co-d1e31CC34B3B2-D5E8-41EC-A472-B380E595E5A4) | Any value *other than* `EXTERNAL` indicates that the marketplace facilitator used the prices and tax amounts calculated by the Toast platform for the order. |
| [2](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorTaxInformation.html#co-d1e33CC34B3B2-D5E8-41EC-A472-B380E595E5A4) | Indicates that the marketplace facilitator remitted tax amounts on behalf of the restaurant location. |

#### Example return data with specified prices and tax amounts

The following example shows the orders API return data for a
marketplace facilitator order where the marketplace facilitator specifies
the prices and tax amounts.

The prices should correspond to the prices from the restaurant menu.
The tax amounts are usually calculated by a tax partner.

The marketplace facilitator submits those prices and tax amounts to
the Toast platform.

```
{
  "guid": "cdef26f4-68bd-42a1-a1e0-be43c4fb52f0",
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "entityType": "Check",
 
      [contents omitted]

      "selections": [
        {
          "entityType": "MenuItemSelection",

          [contents omitted]

          "appliedTaxes": [
            {
              "guid": "688cdc21-ab92-427e-9837-c981cc2d55c5",
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "a19eaf97-c0b9-47bf-9af2-ed833c3e4051",
                "entityType": "TaxRate"
              },
              "rate": null,
              "name": "Marketplace Facilitator Taxes Paid",
              "taxAmount": 0.1,
              "type": "EXTERNAL",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              "facilitatorCollectAndRemitTax": true![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
            }
          ],
          "itemGroup": {
            "guid": "881472e6-dd94-48c6-b5c6-25e51a864208",
            "entityType": "MenuGroup",
            "externalId": null
          },
          "item": {
            "guid": "9c59d4ab-8242-450f-8f36-b16e1b3ab802",
            "entityType": "MenuItem",
            "externalId": null
          },
 
          [contents omitted]

          "receiptLinePrice": 20,

          [contents omitted]

        }
      ],

     [contents omitted]

      "taxAmount": 0.1,

     [contents omitted]

    }
  ],

  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorTaxInformation.html#co-d1e47CC34B3B2-D5E8-41EC-A472-B380E595E5A4) | The value `EXTERNAL` indicates that the marketplace facilitator specified the prices and tax amounts for the order. |
| [2](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorTaxInformation.html#co-d1e49CC34B3B2-D5E8-41EC-A472-B380E595E5A4) | Indicates that the marketplace facilitator remitted tax amounts on behalf of the restaurant location. |


---

# Order prices - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrderPrices.html

### Order prices

Order price information includes menu item prices, service charges,
and taxes.

#### Getting check prices before you submit an order

Before you can `POST` an order to the `/orders`
endpoint, you must first obtain the order price information for the order.
For an overview of the order creation process, including the step to obtain
the order prices, see [Order creation process for the orders API](https://doc.toasttab.com/doc/devguide/apiCreatingOrders.html#apiOrdersCreationProcess).

To get the price information, you send a `POST` request to
the `/prices` endpoint of the orders API. The request contains an
`Order` object with the information about the order.

The `/prices` endpoint is the only reliable and supported
way to determine the payment amount for a check. If you `POST` an
order with a payment amount that does not match the results from the
`/prices` endpoint, then restaurant employees must manually
handle the underpayment or overpayment during order fulfillment.

##### Example Order object for a request to the /prices endpoint

The following example shows a JSON `Order` object to
`POST` to the `/prices` endpoint. The order contains
one check with a single menu item.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "23fc2559-fc37-46ce-a963-cc5fdb88af0c"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          },
          "item": {
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          },
          "quantity": 1,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "modifiers": []
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e193C93B886C-2601-45C3-B008-CB13B0107A92) | The GUID of the dining option for the order. For example, the dining option for an order might be dine in, takeout, or delivery.  For some dining options, you might need to include additional information. For example, for takeout orders, you provide information about the guest who will pick up an order. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e195C93B886C-2601-45C3-B008-CB13B0107A92) | The GUID of the menu group for the menu item selected for this check. For example, a menu group might be "appetizers" or "drinks." |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e197C93B886C-2601-45C3-B008-CB13B0107A92) | The GUID of the menu item selected for this check. For example, a menu item might be "spinach dip" or "lemonade." |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e199C93B886C-2601-45C3-B008-CB13B0107A92) | The quantity of the menu item selection. For example, to order three lemonades, a check includes a "lemonade" menu item selection with a quantity of three. |

##### Response data from the /prices endpoint

The response from the `/prices` endpoint fills in the
amounts, including prices and taxes, for the menu item selections and
checks. For a description of the amount fields in the `Order`
object, see [Order amounts](https://doc.toasttab.com/doc/devguide/apiOrdersOrderObjectSummary.html#apiOrderObjectAmounts).

The following example shows the response data returned by the
`/prices` endpoint of the orders API.

```
{
  "guid": null,
  "entityType": "Order",
  "externalId": null,
  "revenueCenter": null,
  "server": null,
  "deliveryInfo": null,
  "serviceArea": null,
  "numberOfGuests": 1,
  "diningOption": {
    "guid": "23fc2559-fc37-46ce-a963-cc5fdb88af0c",
    "entityType": "DiningOption",
    "externalId": null
  },
  "source": "API",
  "voidDate": null,
  "openedDate": "2017-05-09T16:24:09.881+0000",
  "duration": null,
  "businessDate": 20170509,
  "voidBusinessDate": null,
  "checks": [
    {
      "guid": null,
      "entityType": "Check",
      "externalId": null,
      "displayNumber": null,
      "amount": 8.99,![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
      "tabName": null,
      "taxExempt": false,
      "payments": [],
      "appliedDiscounts": [],
      "voidDate": null,
      "openedDate": "2017-05-09T16:24:09.883+0000",
      "totalAmount": 9.55,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "selections": [
        {
          "guid": null,
          "entityType": "MenuItemSelection",
          "externalId": null,
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup",
            "externalId": null
          },
          "deferred": false,
          "item": {
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec",
            "entityType": "MenuItem",
            "externalId": null
          },
          "quantity": 1,
          "preDiscountPrice": 8.99,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "voidReason": null,
          "optionGroup": null,
          "displayName": "Crab Cakes",
          "appliedDiscounts": [],
          "tax": 0.56,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "modifiers": [],
          "seatNumber": -1,
          "voidDate": null,
          "fulfillmentStatus": "NEW",
          "salesCategory": null,
          "selectionType": "NONE",
          "voidBusinessDate": null,
          "createdDate": null,
          "preModifier": null,
          "price": 8.99,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
          "modifiedDate": null,
          "voided": false,
          "appliedTaxes": [
            {
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "d5b88c05-1348-42ef-b1d3-577a83d70a80",
                "entityType": "TaxRate"
              },
              "name": "State Tax",
              "rate": 0.0625,
              "taxAmount": 0.56,
              "type": "PERCENT"
            }
          ]
        }
      ],
      "voidBusinessDate": null,
      "deleted": false,
      "paidDate": null,
      "closedDate": null,
      "deletedDate": null,
      "modifiedDate": null,
      "appliedLoyaltyInfo": null,
      "voided": false,
      "taxAmount": 0.56,![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      "appliedServiceCharges": [],
      "paymentStatus": "OPEN",
      "customer": null
    }
  ],
  "deleted": false,
  "paidDate": null,
  "closedDate": null,
  "deletedDate": null,
  "restaurantService": null,
  "modifiedDate": null,
  "promisedDate": null,
  "voided": false,
  "estimatedFulfillmentDate": null,
  "table": null
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e217C93B886C-2601-45C3-B008-CB13B0107A92) | The price of the check after discounts, not including tax. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e219C93B886C-2601-45C3-B008-CB13B0107A92) | The price of the check after discounts, including tax. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e221C93B886C-2601-45C3-B008-CB13B0107A92) | The price of the menu item selection, before discounts. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e223C93B886C-2601-45C3-B008-CB13B0107A92) | The tax amount applied to the menu item selection. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e225C93B886C-2601-45C3-B008-CB13B0107A92) | The menu item selection, including discounts, quantity adjustments, and modifiers. |
| [6](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e228C93B886C-2601-45C3-B008-CB13B0107A92) | The tax amount applied to the menu item selection. |

#### Including open price menu items in an order

You can create orders that include open price menu items. When you
create the order, you specify the price of the menu item.

##### About open price menu items

*Open price* menu items allow restaurant
employees or your integration client software to set the price of a
configured menu item. For example, the price of a seafood menu item might
vary each day based on the current market price. Instead of changing the
price in the menu each day, the item is configured as an open price menu
item, and the price is specified when the order is placed. You can
`POST` orders with open price menu items with the orders
API.

Open price menu items are different from *open*
menu items, which allow restaurant employees to set both the name AND the
price of the item. You cannot `POST` orders with open menu
items with the orders API.

To verify that a menu item is an open price menu item, check the
`pricingStrategy` value of the `MenuItem` object in
the menus API response data. If the `pricingStrategy` value is
`OPEN_PRICE`, then the menu item is an open price menu
item.

The following example `MenuItem` object is for an open
price menu item:

```
...
"menuItems": [
  {
    "entityIdentifier": "0/2/0/e19e5a1c-2b52-42ad-935e-568cd2a333dc",
    "name": "Soda",
    "guid": "e19e5a1c-2b52-42ad-935e-568cd2a333dc",
    "masterId": 200000000070407140,
    "description": "",
    "image": null,
    "visibility": [
      "POS",
      "KIOSK",
      "TOAST_ONLINE_ORDERING"
    ],
    "price": null,
    "pricingStrategy": "OPEN_PRICE",
    "pricingRules": null,
...
```

##### How to set the price of an open price item

To set the price for an open price item, in the
`Selection` object for the open price item, set the
`openPriceAmount` value to the currency amount of the item
price. `openPriceAmount` is the price of a single item before
any quantity, taxes, discounts, and modifier adjustments are applied. For
example, a restaurant configures a seafood special as an open price item.
`openPriceAmount` is always the price of one seafood special,
even if a guest orders more than one seafood special.

If you do not provide an `openPriceAmount` value for an
open price menu item, the orders API sets the price to 0.00.

Include the open price items in the request body that you send to
the `/prices` endpoint to [get the check prices](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices). For open
price items, the call to the `/prices` endpoint returns the
calculated tax for the item. The orders API calculates the tax based on
the value of `openPriceAmount`.

##### Example Order object with an open price item

The following example shows a JSON `Order` object that
contains a check with a single open price menu item.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "23fc2559-fc37-46ce-a963-cc5fdb88af0c"
  },
  "checks": [
    {
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "4c842ed6-ae99-425a-a343-390ab0e081d3"![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
          },
          "item": {
            "guid": "e19e5a1c-2b52-42ad-935e-568cd2a333dc"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          },
          "quantity": 1,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "openPriceAmount": 4.50,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "modifiers": []
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e18994C2B4C02-01BB-46CE-B543-1A815822BD0D) | The GUID of the menu group for the selected open price menu item. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e19014C2B4C02-01BB-46CE-B543-1A815822BD0D) | The GUID of the selected open price menu item. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e19034C2B4C02-01BB-46CE-B543-1A815822BD0D) | The quantity for the menu item selection. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#co-d1e19054C2B4C02-01BB-46CE-B543-1A815822BD0D) | A currency amount that sets the price for the open price menu item. The amount reflects the price before the quantity, taxes, discounts, and modifier adjustments are applied. |

##### Open price values in orders API responses

Only include the `openPriceAmount` when you add an open
price menu item to an order. `openPriceAmount` is not returned
in orders API responses.

The orders API uses the `openPriceAmount` value to
populate the `receiptLinePrice` value for the menu item
selection.

#### Service charges for checks

You can apply general upcharges, or service charges, to checks when
you create an order in the orders API. Some examples of service charges are
a delivery fee for delivery orders, or a gratuity service charge based on
the amount of the check.

Before you can apply a service charge, restaurants must configure the
service charge in Toast Web. You then use the service charge GUID to add the
service charge to the check. To retrieve the service charge GUID, you can
use the configuration API.

For more information about service charges and how restaurants
configure them, see [Service charge overview](https://doc.toasttab.com/doc/platformguide/adminServiceChargeOverview.html) in the *Toast Platform
Guide*.

##### Getting the available service charges

To get the available service charges, send a `GET`
request to the `serviceCharges` endpoint of the configuration
API. For more information about retrieving available service charges, see
[Get
service charges](https://doc.toasttab.com/openapi/configuration/operation/serviceChargesGet/) in the *Toast API
reference*.

The response provides detailed information about each service
charge, including:

`guid`
:   The GUID that the Toast platform generated for the service
    charge.

    You use the GUID to add the service charge to a check.

`amountType`
:   The amount type for the service charge.
    `amountType` is one of the following:

    * `PERCENT` - The service charge is a specified
      fixed percentage of the check. For example, the service charge
      is always 10% of the check.
    * `FIXED` - The service charge is a specified
      fixed amount. For example, the service charge is always
      $5.00.
    * `OPEN` - The service charge does not have a
      specified amount. You provide the amount when you add the
      service charge to the check.

`criteria`
:   The eligibility criteria for the service charge. For orders
    placed using a Toast POS device, the criteria determines when to
    automatically apply a service charge.

    For orders from the orders API, service charges are not added
    automatically. However, the orders API does use the criteria to
    validate the added service charges. For example, if you add a
    delivery service charge to a takeout order, the orders API returns
    an error.

    The criteria includes whether to apply the service charge
    based on:

    * The dining behavior. Service charges can be assigned to
      specific dining behaviors, including `delivery`,
      `takeout`, and `dineIn`. When a dining
      behavior is specified for a service charge, the order's dining
      behavior must match the service charge's dining behavior.
      Service charges can also have no dining behavior assigned. When
      no dining behavior is assigned to a service charge, orders with
      any dining behavior can be submitted using this service
      charge.
    * For delivery orders, the delivery distance.
    * The pre-discount amount of the check. Service charges
      might apply to orders that are either larger or smaller than a
      specified amount.

##### How to apply service charges to a check

To apply service charges to a check, include the
`appliedServiceCharges` value in the `Check` object.
Include a `serviceCharge` value for each service charge that
applies to the check.

The orders API does not automatically add any service charges. You
must add all of the applicable service charges. If the order does not meet
the service charge criteria, the orders API rejects the order.

In each `serviceCharge` value:

* Set `guid` to the Toast platform GUID of the service
  charge.
* For an open service charge, include a `chargeAmount`
  value to set the amount of the service charge.

  Do not provide a `chargeAmount` for
  `FIXED` or `PERCENT` service charges. The orders
  API ignores `chargeAmount` values for `FIXED` or
  `PERCENT` service charges.

##### Example appliedServiceCharges value

The following example shows an `appliedServiceCharges`
value that applies an open service charge to a check.

```
"appliedServiceCharges": [
  {
   "serviceCharge": {
     "guid": "0a81611c-b424-4586-9539-f33286c0211a"
   },
   "chargeAmount": 3.45![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiServiceChargeAmount) | You include `chargeAmount` for `OPEN` service charges. Do not include `chargeAmount` for `FIXED` or `PERCENT` service charges. |

#### Working with taxes

When calculating taxes, the orders API uses rounding rules to round
the tax amounts to valid denomination values.

Menu items, checks, and service charges are also configured to
indicate whether they are taxable.

##### Tax rounding

When it calculates taxes and check prices, the orders API uses the
following rounding rules to produce valid denomination values.

* The orders API rounds all currency amounts to two decimal
  places.
* When the orders API applies a percent tax rate, it uses the
  rounding algorithm that is configured for that percent tax
  rate.

  For example, depending on the configured rounding option, the
  orders API rounds a tax amount of $1.235 down to $1.23 or up to $1.24.
  For more information, see [Rounding options](https://doc.toasttab.com/doc/platformguide/adminPercentTaxRates.html#roundingOptions) in the *Toast Platform
  Guide*.
* To calculate a check price, the orders API first rounds the item
  prices, including the tax amounts. It then sums the rounded item
  prices.

|  |
| --- |
| Important |
| This description of the orders API rounding method does not guarantee that orders API client software can accurately calculate check prices. The price of a check includes several factors in addition to the item prices and rounded tax amounts.  The `/prices` endpoint is the only reliable and supported way to determine the payment amount for a check. See [Getting check prices before you submit an order](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiGettingCheckPrices).  If you `POST` an order with a payment amount that does not match the results from the `/prices` endpoint, then restaurant employees must manually handle the underpayment or overpayment during order fulfillment. |

##### Tax exemptions for menu items, checks, and service charges

The following settings control whether items, checks, and service
charges are taxable:

**nontaxable flag for menu items**
:   The nontaxable flag is a configuration setting that applies to
    menu items. It is not present in the API.

    Indicates that an item is never taxable. For example, in some
    states or provinces, the sales tax does not apply to confectionery
    purchases.

**`taxExempt` property for checks**
:   The `taxExempt` property of a check is present in
    the API.

    Indicates whether that particular check, rather than the items
    or service charges on it, is exempt from taxation.

    For example, an order placed by a non-profit or government
    entity might be exempt from taxes.

**`taxable` property for service charges**
:   The `taxable` property of an
    `AppliedServiceCharge` is present in the API.

    Indicates whether a service charge is taxable.

    For example, tax rates can apply to delivery charges.


---

# Order details based on the order dining option - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html

### Order details based on the order dining option

Some of the required order details are based on the selected dining
option.

A dining option describes a customizable workflow for an order.
Restaurants define their dining options. The selected dining option affects
the required values in the `Order` and `Check`
objects.

In each order, the `diningOption` object specifies the GUID
of the dining option to use. For example:

```
"diningOption": {
  "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",
  "entityType": "DiningOption"
},
```

You use the configuration API to retrieve the available dining option
GUIDs.

#### Types of dining options

The restaurant defines the available dining options. For more
information about dining options and how to configure them, see [Dining options](https://doc.toasttab.com/doc/platformguide/adminDiningOptions.html) in the
*Platform Guide*.

Each dining option includes a `behavior` field that
indicates the type of dining option.

The available dining behaviors are:

`DINE_IN`
:   Used for dining options where the guest orders and remains at
    the restaurant.

    For dine-in orders, you can provide table and server
    values.

`TAKE_OUT`
:   Used for dining options where the guest picks up the order from
    the restaurant.

    Orders with takeout dining options must provide
    `customer` information.

    A takeout option can have `curbside` set to
    `true`, which indicates it is a curbside pickup option.
    Curbside pickup orders should also provide
    `curbsidePickupInfo`.

    Note that in Toast Web, the dining
    option configuration lists takeout and curbside as separate options
    for the dining behavior.

`DELIVERY`
:   Used for dining options where the order is delivered to the
    guest.

    Orders with delivery dining options must provide
    `customer` and `deliveryInfo`
    information.

Restaurants can configure multiple dining options for a given
behavior. For example, they can have different delivery options to help to
differentiate between orders that are delivered by the restaurant and orders
that are delivered by a service.

#### Retrieving the available dining options

When you create an order, the `diningOption` value must
specify the GUID of the dining option to use for the order.

To get a list of the available dining options for a restaurant, send a
`GET` request to the `/diningOptions`
endpoint of the configuration API. For more information, see [Get
dining options](https://doc.toasttab.com/openapi/configuration/operation/diningOptionsGet/) in the API reference.

Here is an example of the request results:

```
{
  "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",
  "entityType": "DiningOption",
  "externalId": null,
  "name": "Curbside pickup",
  "curbside": true,
  "behavior": "TAKE_OUT"
},
{
  "guid": "7c6843f3-db7d-4096-bdd2-4eefd99b900f",
  "entityType": "DiningOption",
  "externalId": null,
  "name": "Takeout",
  "curbside": false,
  "behavior": "TAKE_OUT"
},
{
  "guid": "23fc2559-fc37-46ce-a963-cc5fdb88af0c",
  "entityType": "DiningOption",
  "externalId": null,
  "name": "Dine-in",
  "curbside": false,
  "behavior": "DINE_IN"
},
{
  "guid": "b1b10604-a8f9-4a21-ae86-7db974ee9dbf",
  "entityType": "DiningOption",
  "externalId": null,
  "name": "Delivery",
  "curbside": false,
  "behavior": "DELIVERY"
}
```

#### Creating a dine-in order

A dine-in order uses a dining option where `behavior` is
`DINE_IN`. For a dine-in order, in addition to the menu item
selections, you can provide information about the table and server.

##### Providing table information for a dine-in order

You can create a dine-in order at a specific restaurant
table.

When you create an order for a specific table, you can also provide
customer information for the check that is associated with the order. For
example, to reserve a table for a guest, a reservation service might
`POST` a scheduled order that specifies the restaurant table
and guest information but does not specify any menu item
selections.

To specify the table for an order, provide a `Table`
object that specifies the Toast platform GUID of the table. For
example:

```
"table": {
  "guid": "170b5f39-060e-45c3-89f0-4907c16ab12c",1
  "entityType": "Table"
},
```

To retrieve the GUIDs of the available tables, send a
`GET` request to the `/tables` endpoint of the
configuration API. For more information, see [Get
tables](https://doc.toasttab.com/openapi/configuration/operation/tablesGet/) in the API reference.

When you use the orders API to create an order at a restaurant
table, that order is available from a Toast POS device in the table layout
and open orders displays. The behavior of the table layout screen depends
on whether the table has an existing open order.

* If the table does not have an existing order, selecting the
  table opens the order that you created in the orders API.
* If the table does have an existing order, then the order you
  created in the orders API is not visible at the table until the
  previous order is closed.

##### Providing server information for a dine-in order

You can specify the restaurant employee who is responsible for the
order.

To specify the restaurant employee, provide a `server`
object that specifies the Toast platform GUID of the employee. For
example:

```
"server": {
  "guid": "dc9b7cd6-4389-4a6d-83c3-2fde7f033567",
  "entityType": "RestaurantUser"
},
```

The employee must be an active employee at the current restaurant
location. The orders API does not prevent you from specifying a deleted
employee.

To retrieve information about restaurant employees, send a
`GET` request to the `/employees` endpoint of the
labor API. For more information, see [Get
employees](https://doc.toasttab.com/openapi/labor/operation/employeesGet/) in the API reference.

##### Example POST message body for a dine-in order

The following example shows the message body for a `POST`
request to the `/orders` endpoint to create a dine-in order at
a restaurant table.

```
{
  "entityType": "Order",
  "table": {
    "guid": "170b5f39-060e-45c3-89f0-4907c16ab12c",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "Table"
  },
  "server": {
    "guid": "dc9b7cd6-4389-4a6d-83c3-2fde7f033567",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "entityType": "RestaurantUser"
  },
  "diningOption": {
    "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "entityType": "DiningOption"
  },
  "revenueCenter": {
    "guid": "908f0483-ac03-4c9a-a5a4-43c37786e237",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "entityType": "RevenueCenter"
  },
  "checks": [
    {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "entityType": "Check",
      "customer": {
        "entityType": "Customer",
        "firstName": "Severe",
        "lastName": "Thibault",
        "phone": "555-555-5555",
        "email": "severe@example.com"![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
      }
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1112EA92E6F1-6650-4630-A55E-D199990EEAD8) | The `table` value provides the GUID of the table to create the order at. You can get the GUIDs of restaurant tables from the configuration API. Specifying a table is optional. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-exampleServerValueInTableOrder) | The `server` value provides the GUID of the restaurant employee who is responsible for the order. Specifying an employee is optional. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1114EA92E6F1-6650-4630-A55E-D199990EEAD8) | To create an order at a table, the behavior of the selected dining option must be `DINE_IN`. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#RevenueCenterCO) | You can specify the revenue center associated with the order. Specifying a revenue center is optional. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1116EA92E6F1-6650-4630-A55E-D199990EEAD8) | You must include a `checks` value with at least one `Check` object. The check does not need to include any menu item selections. You can optionally include a `customer` value with information about the restaurant guest. |
| [6](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#dineInEmail) | In a `Customer` object, the `email` value is the unique identifier for a guest. `email` must be unique for each individual guest. |

#### Creating a takeout order

A takeout order uses a dining option where `behavior` is
`TAKE_OUT`.

For takeout orders, in addition to the menu item selections, you
provide information about the guest who will pick up the order.

##### Providing guest information for a takeout order

For a takeout order, the `Check` object must include a
`customer` object that contains name and contact information
for the guest.

In the `customer` object, the `firstName`,
`lastName`, `phone`, and `email` fields
are required.

##### Example POST message body for a takeout order

The following example shows the message body for a `POST`
request to the `/orders` endpoint to create a takeout
order.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "DiningOption"
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "75cd1156-c33a-4842-9cbd-717aebbf069e",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "2478cec3-bca2-4956-a3aa-eda571d5518a"
          },
          "quantity": 1,
          "modifiers": []
        }
      ],
      "customer": {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "entityType": "Customer",
          "firstName": "Jack",
          "lastName": "Jones",
          "phone": "333-555-5555",
          "email": "jack@example.com"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      }
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e10237C48B789-81C4-4370-AA2B-3D1717E80367) | The GUID of the dining option for the order. The dining option must have a `behavior` of `TAKE_OUT`. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e10257C48B789-81C4-4370-AA2B-3D1717E80367) | The `selections` object contains the menu item selections for the order. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e10277C48B789-81C4-4370-AA2B-3D1717E80367) | The `customer` object contains information about the guest who will pick up the order. This information is mandatory for takeout orders. The `firstName`, `lastName`, `phone`, and `email` fields are required. The data must be correctly formatted. For example, the phone number must have exactly 10 digits. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#toEmailUnique) | In a `customer` object, the `email` value is the unique identifier for a guest. `email` must be unique for each individual guest. |

##### Example response to a takeout order POST request

The following example shows the response from the
`/orders` endpoint for a takeout order.

```
{
  "guid": "df8cd211-c5c9-4fe4-b56b-fa0db87eb80b",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",
  "externalId": null,
  "revenueCenter": null,
  "server": null,
  "deliveryInfo": null,
  "serviceArea": null,
  "numberOfGuests": 1,
  "diningOption": {
    "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",
    "entityType": "DiningOption",
    "externalId": null
  },
  "source": "API",
  "voidDate": null,
  "openedDate": "2017-10-04T13:54:00.969+0000",
  "duration": null,
  "businessDate": 20171004,
  "voidBusinessDate": null,
  "checks": [
    {
      "guid": "602d2cec-eb97-4be0-948f-4a38f614c1f1",
      "entityType": "Check",
      "externalId": null,
      "displayNumber": "51",
      "amount": 9.99,
      "tabName": null,
      "taxExempt": false,
      "payments": [],![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "appliedDiscounts": [],
      "voidDate": null,
      "openedDate": "2017-10-04T13:54:00.970+0000",
      "totalAmount": 10.69,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
      "selections": [
        {
          "guid": "13ae0536-bff4-4d24-a13a-722508a2556a",
          "entityType": "MenuItemSelection",
          "externalId": null,
          "itemGroup": {
            "guid": "75cd1156-c33a-4842-9cbd-717aebbf069e",
            "entityType": "MenuGroup",
            "externalId": null
          },
          "deferred": false,
          "item": {
            "guid": "2478cec3-bca2-4956-a3aa-eda571d5518a",
            "entityType": "MenuItem",
            "externalId": null
          },
          "quantity": 1,
          "preDiscountPrice": 9.99,
          "voidReason": null,
          "optionGroup": null,
          "displayName": "Egg Sandwich",
          "appliedDiscounts": [],
          "tax": 0.7,
          "modifiers": [],
          "voidDate": null,
          "fulfillmentStatus": "NEW",
          "salesCategory": null,
          "selectionType": "NONE",
          "voidBusinessDate": null,
          "createdDate": "2017-10-04T13:54:00.997+0000",
          "preModifier": null,
          "price": 9.99,
          "modifiedDate": "2017-10-04T13:54:00.997+0000",
          "voided": false,
          "appliedTaxes": [
            {
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "92c6c470-74bb-4f84-b31f-2c144b70a285",
                "entityType": "TaxRate"
              },
              "name": "Local Tax",
              "rate": 0.0075,
              "taxAmount": 0.075,
              "type": "PERCENT"
            },
            {
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "d5b88c05-1348-42ef-b1d3-577a83d70a80",
                "entityType": "TaxRate"
              },
              "name": "State Tax",
              "rate": 0.0625,
              "taxAmount": 0.625,
              "type": "PERCENT"
            }
          ]
        }
      ],
      "voidBusinessDate": null,
      "deleted": false,
      "paidDate": null,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      "closedDate": null,
      "deletedDate": null,
      "modifiedDate": "2017-10-04T13:54:01.022+0000",
      "appliedLoyaltyInfo": null,
      "voided": false,
      "taxAmount": 0.7,
      "appliedServiceCharges": [],
      "paymentStatus": "OPEN",
      "customer": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        "guid": "3d4b9481-4e96-42dd-8dea-d59184819cbb",
        "entityType": "Customer",
        "firstName": "Jack",
        "lastName": "Jones",
        "phone": "3335555555",
        "email": "jack@example.com"
      }
    }
  ],
  "deleted": false,
  "paidDate": null,
  "closedDate": null,
  "deletedDate": null,
  "restaurantService": null,
  "modifiedDate": "2017-10-04T13:54:01.024+0000",
  "promisedDate": null,
  "voided": false,
  "estimatedFulfillmentDate": "2017-10-04T14:24:00.969+0000",
  "table": null
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e106115FD65F4-5F6E-4E67-B244-1E63F8455F38) | The unique identifier that the Toast platform assigns to the order. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e106315FD65F4-5F6E-4E67-B244-1E63F8455F38) | The payment information is empty because the order request was made without a `payments` value. This means that the guest did not make any payments for this check. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e106515FD65F4-5F6E-4E67-B244-1E63F8455F38) | The total amount (including tax) of this check. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e106715FD65F4-5F6E-4E67-B244-1E63F8455F38) | The date and time are null because the guest did not make a payment for the check. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e107215FD65F4-5F6E-4E67-B244-1E63F8455F38) | Information about the guest who will pick up the order. |

#### Creating a curbside pickup order

A curbside pickup order is a variation of a takeout order. Instead of
the guest entering the restaurant to pick up the order, a restaurant
employee brings the order out to the guest's vehicle.

A curbside pickup order uses a dining option where
`behavior` is `TAKE_OUT` and `curbside` is
`true`.

In addition to the required `customer` value for a takeout
order, you can also provide `curbsidePickupInfo` to identify the
vehicle that is picking up the order.

##### Providing curbside pickup information for a curbside pickup order

When you place an order that specifies a dining option with curbside
behavior, the request body can include the `curbsidePickupInfo`
object.

```
"curbsidePickupInfo": {
  "entityType": "CurbsidePickup",
  "notes": "Convertible with top down",
  "transportColor": "blue",
  "transportDescription": "Street Cruiser"
},
```

The `curbsidePickupInfo` object is not required, but it
is recommended, to help restaurant staff to identify a guest when they
arrive to pick up their order.

The `curbsidePickupInfo` object must at a minimum contain
`transportDescription`. The `transportDescription`
value accepts string input and contains information about a guest's mode
of transportation. For example, you can specify the make and model of
their vehicle.

You can also optionally provide `transportColor` and
`notes`.

On Toast POS devices, the curbside pickup information is displayed
at the top of a check on the order screen. The information is also printed
on kitchen tickets and guest receipts. The following example shows the
guest's name, vehicle description, and phone number displayed at the top
of a check on the order screen.

![An orders screen with the guest's curbside information emphasized.](https://doc.toasttab.com/doc/media/api-orders-create-curbside-order.png)

##### Example POST message body for a curbside pickup order

The following example shows the message body for a `POST`
request to the `/orders` endpoint to create a curbside pickup
order.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "DiningOption"
  },
  "curbsidePickupInfo": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "entityType": "CurbsidePickup",
    "notes": "Convertible with top down",
    "transportColor": "blue",
    "transportDescription": "Street Cruiser"
  },

  "checks": [
    {
      "entityType": "Check",
      "selections": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "75cd1156-c33a-4842-9cbd-717aebbf069e",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "2478cec3-bca2-4956-a3aa-eda571d5518a"
          },
          "quantity": 1,
          "modifiers": []
        }
      ],
      "customer": {![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "entityType": "Customer",
          "firstName": "Alice",
          "lastName": "Patron",
          "phone": "333-555-5555",
          "email": "alice@example.com"![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      }
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e12650678CC9-5BB1-4B52-94B4-AD4E0A359130) | The GUID of the dining option for the order. For a curbside pickup dining option, `behavior` is `TAKE_OUT` and `curbside` is `true`. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e12850678CC9-5BB1-4B52-94B4-AD4E0A359130) | The `curbsidePickupInfo` object contains information about the guest's mode of transportation. The restaurant uses the information in the `transportDescription`, `transportColor`, and `notes` fields to identify the guest when they arrive to pick up the order. `transportDescription` is required for curbside pickup orders. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e13050678CC9-5BB1-4B52-94B4-AD4E0A359130) | The `selections` object contains menu item selections for the order. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e13250678CC9-5BB1-4B52-94B4-AD4E0A359130) | The `customer` object contains information about the guest who will pick up the order. `customer` is mandatory for curbside pickup orders. `firstName`, `lastName`, `phone`, and `email` are required. The data must be correctly formatted. For example, the phone number must have exactly 10 digits. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e13450678CC9-5BB1-4B52-94B4-AD4E0A359130) | In a `customer` object, the `email` value is the unique identifier for a guest. `email` must be unique for each individual guest. |

##### Example response to a curbside pickup order POST request

The following example shows the response from the
`/orders` endpoint to a curbside pickup order request.

```
{
    "guid": "db3acf81-e63e-47ed-aa1b-cba97e15549f",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "Order",
    "externalId": null,
    "revenueCenter": null,
    "server": {
        "guid": "fbfb15e0-cc32-44f1-9239-195324d6be76",
        "entityType": "RestaurantUser",
        "externalId": null
    },
    "lastModifiedDevice": {
        "id": null
    },

    [contents omitted]

    "deliveryInfo": null,
    "serviceArea": null,
    "curbsidePickupInfo": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
        "guid": "0ca623cb-c1eb-4881-8222-67a393e00b5c",
        "entityType": "CurbsidePickup",
        "transportColor": "blue",
        "notes": "Convertible with top down",
        "transportDescription": "Street Cruiser"
    },
    "numberOfGuests": 1,
    "diningOption": {
        "guid": "162a8c8d-4ca9-4cf1-b1bd-88470cc0d928",
        "entityType": "DiningOption",
        "externalId": null
    },
    "openedDate": "2020-06-17T19:14:56.348+0000",
    "voidBusinessDate": null,
    "checks": [
        {
            "guid": "682b5aaf-d4e3-4e7b-ac53-f897ea5cad2d",
            "entityType": "Check",
            "externalId": null,
            "displayNumber": "3",
            "payments": [],![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
            "appliedDiscounts": [],
            "lastModifiedDevice": {
                "id": null
            },
            "voidDate": null,
            "paidDate": null,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
            "appliedLoyaltyInfo": null,
            "voided": false,
            "paymentStatus": "OPEN",
            "amount": 15.98,
            "tabName": null,
            "taxExempt": false,
            "openedDate": "2020-06-17T19:14:56.348+0000",
            "totalAmount": 17.1,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
            "selections": [
                {
                    [contents omitted]
                }
            ],
                [contents omitted]
            },
            "closedDate": null,
            "deletedDate": null,
            "modifiedDate": "2020-06-17T19:14:56.565+0000",
            "taxAmount": 1.12,
            "appliedServiceCharges": [],
            "customer": {![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
                "guid": "84f4ac23-e05b-46a9-99d9-16a2a8516bb8",
                "entityType": "Customer",
                "firstName": "Alice",
                "lastName": "Patron",
                "phone": "3335555555",
                "email": "alice@example.com"
            }
        }
    ],
    "deleted": false,
    "createdDevice": {
        "id": null
    },
    
    [contents omitted]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e2266E27FB7C-6DE5-4877-99EB-55403F2FA4EF) | The unique identifier that the Toast platform assigns to the order. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e2286E27FB7C-6DE5-4877-99EB-55403F2FA4EF) | Information about the mode of transportation that the guest will use when they arrive to pick up their order. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e2306E27FB7C-6DE5-4877-99EB-55403F2FA4EF) | The payment information is empty because the order request was made without a `payments` value. This means that the guest did not make any payments for this check. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e2326E27FB7C-6DE5-4877-99EB-55403F2FA4EF) | The date and time are null because the guest did not make a payment for the check. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e2346E27FB7C-6DE5-4877-99EB-55403F2FA4EF) | The total amount (including tax) of this check. |
| [6](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e2376E27FB7C-6DE5-4877-99EB-55403F2FA4EF) | Information about the guest who will pick up the order. |

#### Creating a delivery order

A delivery order uses a dining option where behavior is
`DELIVERY`.

For delivery orders, in addition to the menu item selections, you must
provide guest information and delivery information.

##### Providing guest information for a delivery order

For a delivery order, the `Check` object must include a
`customer` object that contains name and contact information
for the guest.

In `customer`, the `firstName`,
`lastName`, `phone`, and `email` fields
are required.

##### Providing delivery information for a delivery order

For a delivery order, the order object must include a
`deliveryInfo` object that provides details about the address
to deliver the order to.

In `deliveryInfo`, you must provide the
`address1`, `city`, `state`, and
`zipCode` fields. The `state` value must use the
state abbreviation, not the state full name. For example, use
`TX` instead of `Texas`.

You can also optionally use the `notes` value to provide
notes for the delivery. For example, you can indicate where to leave the
delivery or how to contact the guest when the delivery arrives.

##### Example POST message body for a delivery order

The following example shows the message body for a `POST`
request to the `/orders` endpoint to create a delivery
order.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "b1b10604-a8f9-4a21-ae86-7db974ee9dbf",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "DiningOption"
  },
  "deliveryInfo": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "address1": "401 Park Drive",
    "address2": "Suite 801",
    "city": "Boston",
    "state": "MA",
    "zipCode": "02215",
    "notes": "Send text message to 555-555-5555 when you arrive at the building."
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "75cd1156-c33a-4842-9cbd-717aebbf069e",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "2478cec3-bca2-4956-a3aa-eda571d5518a"
          },
          "quantity": 1,
          "modifiers": []
        }
      ],
      "customer": {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "entityType": "Customer",
          "firstName": "Sarah",
          "lastName": "Gomez",
          "phone": "555-555-5555",
          "email": "sarah@example.com"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      }
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e11712BEEE554-052B-4000-8FFB-C21234C82F0B) | The GUID of the dining option for the order. For a delivery dining option, `behavior` must be `DELIVERY`. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e11732BEEE554-052B-4000-8FFB-C21234C82F0B) | The `deliveryInfo` object contains information about the address to deliver the order to. This information is required for delivery orders. The `address1`, `city`, `state`, and `zipCode` fields are required. The state value must use the state abbreviation instead of the state full name. For example, "TX" instead of "Texas". |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e11752BEEE554-052B-4000-8FFB-C21234C82F0B) | The `customer` object contains information about the guest who will receive the order. The `customer` object is required for delivery orders. The `firstName`, `lastName`, `phone`, and `email` values are required. The data must be formatted correctly. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#delivEmailUnique) | In a `customer` object, the `email` value is the unique identifier for the guest. The `email` value must be unique for each individual guest. |

##### Example response to a delivery order POST request

When you use the orders API to create a delivery order, the response
includes information about the order preparation and delivery.

The following example shows the message body for an endpoint
response to a delivery order request.

```
{
  "guid": "4f0dbb70-46e8-4e02-bd22-9444cf9dc96b",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",
  "externalId": null,
  "revenueCenter": null,
  "server": null,
  "deliveryInfo": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "address1": "401 Park Drive",
    "address2": "Suite 801",
    "city": "Boston",
    "state": "MA",
    "zipCode": "02215",
    "latitude": 42.3446671,
    "longitude": -71.1023575,
    "notes": "",
    "deliveredDate": null,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "dispatchedDate": null,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "deliveryEmployee": null![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
  },
  "serviceArea": null,
  "numberOfGuests": 1,
  "diningOption": {
    "guid": "b1b10604-a8f9-4a21-ae86-7db974ee9dbf",
    "entityType": "DiningOption",
    "externalId": null
  },
  "source": "API",
  "voidDate": null,
  "openedDate": "2017-10-04T19:31:34.480+0000",![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
  "duration": null,
  "businessDate": 20171004,
  "voidBusinessDate": null,
  "checks": [
    {
      "guid": "5a967d3f-b80a-41dc-8223-80665255dd9a",
      "entityType": "Check",
      "externalId": null,
      "displayNumber": "53",
      "amount": 9.99,
      "tabName": null,
      "taxExempt": false,
      "payments": [],
      "appliedDiscounts": [],
      "voidDate": null,
      "openedDate": "2017-10-04T19:31:34.482+0000",
      "totalAmount": 10.69,
      "selections": [
        {
          "guid": "25679951-23fa-4e29-a9e2-18b7f1c25cfb",
          "entityType": "MenuItemSelection",
          "externalId": null,
          "itemGroup": {
            "guid": "75cd1156-c33a-4842-9cbd-717aebbf069e",
            "entityType": "MenuGroup",
            "externalId": null
          },
          "deferred": false,
          "item": {
            "guid": "2478cec3-bca2-4956-a3aa-eda571d5518a",
            "entityType": "MenuItem",
            "externalId": null
          },
          "quantity": 1,
          "preDiscountPrice": 9.99,
          "voidReason": null,
          "optionGroup": null,
          "displayName": "Egg Sandwich",
          "appliedDiscounts": [],
          "tax": 0.7,
          "modifiers": [],
          "voidDate": null,
          "fulfillmentStatus": "NEW",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
          "salesCategory": null,
          "selectionType": "NONE",
          "voidBusinessDate": null,
          "createdDate": "2017-10-04T19:31:34.510+0000",
          "preModifier": null,
          "price": 9.99,
          "modifiedDate": "2017-10-04T19:31:34.510+0000",
          "voided": false,
          "appliedTaxes": [
            {
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "92c6c470-74bb-4f84-b31f-2c144b70a285",
                "entityType": "TaxRate"
              },
              "name": "Local Tax",
              "rate": 0.0075,
              "taxAmount": 0.075,
              "type": "PERCENT"
            },
            {
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "d5b88c05-1348-42ef-b1d3-577a83d70a80",
                "entityType": "TaxRate"
              },
              "name": "State Tax",
              "rate": 0.0625,
              "taxAmount": 0.625,
              "type": "PERCENT"
            }
          ]
        }
      ],
      "voidBusinessDate": null,
      "deleted": false,
      "paidDate": null,
      "closedDate": null,
      "deletedDate": null,
      "modifiedDate": "2017-10-04T19:31:34.547+0000",
      "appliedLoyaltyInfo": null,
      "voided": false,
      "taxAmount": 0.7,
      "appliedServiceCharges": [],![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
      "paymentStatus": "OPEN",
      "customer": {![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
        "guid": "479ad7e0-1942-42a5-874e-8cab3871190b",
        "entityType": "Customer",
        "firstName": "Sarah",
        "lastName": "Gomez",
        "phone": "5555555555",
        "email": "sarah@example.com"
      }
    }
  ],
  "deleted": false,
  "paidDate": null,
  "closedDate": null,
  "deletedDate": null,
  "restaurantService": null,
  "modifiedDate": "2017-10-04T19:31:34.549+0000",
  "promisedDate": null,
  "voided": false,
  "estimatedFulfillmentDate": "2017-10-04T20:31:34.480+0000",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
  "table": null
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1232192143FD-70F4-4988-8B22-E8F1BCABE104) | The unique identifier that the Toast platform assigns to the order. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1234192143FD-70F4-4988-8B22-E8F1BCABE104) | Information about the address to which the order will be delivered. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1236192143FD-70F4-4988-8B22-E8F1BCABE104) | The date and time that the delivery employee indicated that the order was delivered. The value is `null` because the order is not yet delivered. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1238192143FD-70F4-4988-8B22-E8F1BCABE104) | The date and time that the restaurant indicated that the order was available for delivery and assigned to a delivery employee. The value is `null` because the order is not yet available for delivery. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1240192143FD-70F4-4988-8B22-E8F1BCABE104) | The Toast GUID or external identifier of the delivery employee. The value is `null` because a delivery employee is not yet assigned to this order. |
| [6](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1243192143FD-70F4-4988-8B22-E8F1BCABE104) | The date and time that the order was created. |
| [7](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1245192143FD-70F4-4988-8B22-E8F1BCABE104) | A status indicating where the selection currently is in the preparation workflow. A status of `NEW` means that the menu item selection was added to a check but was not yet sent to the KDS (Kitchen Display System) for preparation. |
| [8](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1247192143FD-70F4-4988-8B22-E8F1BCABE104) | Any restaurant-configured service charges that applied to this check, such as a gratuity or a delivery fee. For information on service charges, see [Service charges for checks](https://doc.toasttab.com/doc/devguide/apiOrderPrices.html#apiServiceCharges). |
| [9](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1249192143FD-70F4-4988-8B22-E8F1BCABE104) | Information about the guest to whom the order will be delivered. |
| [10](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html#co-d1e1251192143FD-70F4-4988-8B22-E8F1BCABE104) | The date and time that the order is expected to be ready to be delivered. |


---

# Deferring menu items - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersDeferredMenuItems.html

### Deferring menu items

Deferred menu items are items whose revenue you want to exclude from
an order total and overall reporting. For example, you may want to exclude
gift card sales from a restaurant's revenue since the funds received from
gift cards are paid upfront. Typically, gift card sales do not qualify for
revenue recognition as no goods or services have been exchanged.

When using the orders API you must indicate each menu item or modifier
that you want to defer. The procedure below describes how to defer an item
using the orders API.

**To defer an item**

* Set the `deferred` value to `true` in each
  menu item `selection` object you want to defer.

  To defer a modifier, set the `deferred` value to
  `true` in each `modifier` object you want to
  defer.

The example below shows a deferred item with a deferred modifier.

```
              "selections": [
                    {
                        "guid": "a2235d4c-96dc-43ae-b0b4-693649778n44",
                        "entityType": "MenuItemSelection",
                        "externalId": null,
                       "deferred": true,
                        "preDiscountPrice": 22.0,
                        "voidReason": null,
                        "optionGroup": null,
                        "displayName": "Shrimp risotto",
                        "appliedDiscounts": [],
                        "modifiers": [
                            {
                                "guid": "1236c34c-793f-4f67-9b02-b1b2b3b4b5b6",
                                "entityType": "MenuItemSelection",
                                "externalId": null,
                                "deferred": true,
                                "preDiscountPrice": 2.0,
                                "voidReason": null,
                                "optionGroup": {
                                    "guid": "32acba90-2f06-4186-9d14-fecef3cb6599",
                                    "entityType": "MenuOptionGroup",
                                    "externalId": null,
                                    "multiLocationId": "574000462271555"
                                },
```


---

# Orders API errors - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersErrors.html

### Orders API errors

The entries in the table below define errors you may encounter while
using the orders API. These entries are ordered alphabetically by error
message.

| Message | Resolution |
| --- | --- |
| `Address 1` for delivery address cannot be empty | The `Address 1` field in your request is empty. Input the customer's address in the `deliveryInfo.address1` field. |
| Customer first name cannot be empty | Add a value the `customer.firstName` field. |
| Customer phone cannot be empty | Add a value to the `customer.phone` field. |
| EITHER (`startDate` and `endDate)` OR `businessDate` is required | Input both a start date and end date or a business date to your request. |
| Input `startDate` must be before `endDate` | Check the `startDate` and `endDate` values throughout your request and ensure that the `startDate` time stamps occur before the `endDate` time stamps. |
| Item (*`{item GUID}`*) does not belong to the group (*`{item group GUID}`*) | A menu item in your request does not belong to the referenced menu group. Update the menu item's `menuGroups`. You can find `menuItems` and `menuGroups` values by submitting a `GET` request to the `/menus/v2/menus` endpoint. |
| Referenced entity (`type=Discount`) must contain a GUID | The discount in your request requires a GUID. You can find discount GUIDs by sending a `GET` request to the `/config/v2/discounts` endpoint. |
| Referenced entity (`type=MenuItem`) must contain either a GUID or `MultiLocationId` | Your request contains a menu item entry that is missing a GUID or a `multilocationId`. You can find The GUID and `multilocationId` values by submitting a `GET` request from the appropriate menu endpoint. For more information see [devGuide](https://doc.toasttab.com/doc/devguide/apiComparingMenusAPIV2AndV3.html) |
| Restaurant({*`restaurant GUID`*}) has been deleted | The restaurant GUID that you are using in your order request refers to a restaurant that's been deleted. Stop all API requests to this restaurant. |


---

# Finding an order or check GUID - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersFindingAnOrderGuid.html

### Finding an order or check GUID

The following sections detail multiple methods for locating either an
order GUID or a check GUID.

#### How to locate an order GUID

* If you have created an order using the orders API, the response
  from the `POST` request contains the order GUID. For more
  information about creating orders see [Creating orders](https://doc.toasttab.com/doc/devguide/apiCreatingOrders.html).
* Send a `GET` request to the
  `/ordersBulk` endpoint and retrieve the details for orders
  updated during a specific time interval. The order details include the
  order GUID. See [Getting detailed information about multiple orders](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html) for more
  information on using the `/ordersBulk` endpoint.
* Locate the order in Toast Web using the
  Orders report from Reports > Sales
  > Orders. Use the View filter, at
  the top of the report, to help locate your order. Once located, select
  the order, and the GUID is displayed as seen below.

  ![Shows the Order Details page with the order GUID emphasized.](https://doc.toasttab.com/doc/media/order_locate_order_guid.png)

#### How to locate a check GUID

* If you know the order GUID, you can send a `GET`
  request to the `/orders` endpoint and retrieve the order
  details, which include the check GUID. See [Getting detailed information about one order](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html).
* Locate the order in Toast Web using the
  Orders report from Reports > Sales
  > Orders. Use the date selector to locate your order.
  Once located, select the order, and find the check. The GUID is
  displayed as seen below.

  ![Shows the Order Details page with the check GUID emphasized.](https://doc.toasttab.com/doc/media/order_locate_check_guid.png)


---

# Getting detailed information about multiple orders - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html

### Getting detailed information about multiple orders

You can use the orders API to retrieve details about orders that were
modified or created during a specified time period.

|  |
| --- |
| Note |
| Toast support recommends using the [orders updated webhook](https://doc.toasttab.com/doc/devguide/devOrdersWebhookRef.html#apiOrdersWebhookOrderUpdated) to receive order updates as they occur instead of pulling order updates with the `/ordersBulk` endpoint. |

#### How to make the request

To retrieve the orders, you send a `GET`
request to the `/ordersBulk` endpoint.

The `/ordersBulk` endpoint returns an array of
`Order` objects for each order that is selected based on the
specified time period.

#### Specifying the time period for the request

When you send a `GET` request to the
`/ordersBulk` endpoint, you specify the period of time that you
want to return orders.

To specify the time period, you use one of the following
options:

* **Select the orders that were last
  modified during a specified time period.**

  To use this option, specify dates and times in the
  `startDate` and `endDate` query
  parameters.

  Order creation is considered an order modification. The
  request results include orders that were created during the
  specified time period.
* **Select the orders that were created
  during a single restaurant business day.**

  To use this option, set the `businessDate` query
  parameter.

  In the restaurants API, the restaurant's business day cutoff
  is determined by the `closeoutHour` value in the
  `General` object within the `RestaurantInfo`
  object.

Toast support recommends that you use the `startDate` and
`endDate` query parameters. These parameters select orders
based on the *modification* time stamp. The request
returns orders that were either created or modified during that time
period.

The `businessDate` query parameter selects orders based
on the *creation* date. The request only returns orders
that were created on that business day. It does not return orders that
were modified on that business day, but created on an earlier day.

#### Paginating the request results

To control the number of `Order` objects that the
`/ordersBulk` endpoint returns for each request, use the
`pageSize` query parameter. The maximum `pageSize`
that you can specify is 100.

If the number of matching orders is greater than the value of
`pageSize`, use the `page` parameter to specify the
sequence number of the set of objects to return.

For example, the time period you specify selects 100 orders. You set
`pageSize` to `10`. To return the first ten orders,
set `page` to `1`. To return the next ten orders,
set `page` to `2`.

The response header fields for the `/ordersBulk` endpoint
include a set of response pagination links that you can use to send
requests that return each `Order` object in the set of orders
you select in a time period. These link header fields follow the pattern
described in the [proposed Internet
Engineering Task Force (IETF) web linking standard](https://tools.ietf.org/html/rfc5988).

For an example of the pagination links in a `/ordersBulk`
endpoint response, see [Example response data pagination header fields](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#apiOrdersBulkPaginationHeaderFieldsExample). For more
information about Toast API response pagination, see [Paginating response data](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html).

|  |
| --- |
| Note |
| Unlike the endpoints of the Toast configuration API, the `/ordersBulk` endpoint does not return a `last` link field. |

|  |
| --- |
| Note |
| The `/ordersBulk` endpoint has a lower rate limit than most other Toast API endpoints. API clients can poll the `/orderBulk` endpoint up to five times per location per second. For more information about API rate limits, see [Toast rate limit values](https://doc.toasttab.com/doc/devguide/apiRateLimiting.html#apiToastRateLimits). |

#### Example request for detailed information about multiple orders

The following example shows a request for detailed information about
orders that were last modified during a period of time.

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
"https://[toast-api-hostname]/orders/v2/ordersBulk?![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
startDate=2020-03-02T19:10:30.000Z&endDate=2020-03-02T22:00:00.000Z&![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
pageSize=10&page=2"![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#co-d1e91E21797AD-1776-4ECD-AC81-2F50EFAA6320) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [2](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#co-d1e93E21797AD-1776-4ECD-AC81-2F50EFAA6320) | Specify the GUID of the restaurant that created the orders. This must be the GUID of an individual restaurant. It cannot be the GUID of a restaurant group. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#co-d1e98E21797AD-1776-4ECD-AC81-2F50EFAA6320) | Send a `GET` request to the `/ordersBulk` endpoint of the orders API. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#co-d1e100E21797AD-1776-4ECD-AC81-2F50EFAA6320) | To specify a period of time to return orders for, use the *`startDate`* and *`endDate`* query parameters. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#co-d1e103E21797AD-1776-4ECD-AC81-2F50EFAA6320) | In the `pageSize` query parameter, specify the maximum number of objects to include in the response. In the `page` query parameter, specify the sequence number of the set of objects to return. For more information, see [Paginating response data](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html). |

#### Example response data containing multiple orders

The following example shows the response data from the
`/ordersBulk` endpoint. It contains detailed information about
multiple orders.

```
[
  {
    "guid": "5274c0f8-bf61-4e37-ad04-cf4ca1326822",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "entityType": "Order",
    "externalId": null,
    "revenueCenter": null,
    "server": {
      "guid": "dc9b7cd6-4389-4a6d-83c3-2fde7f033567",
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "lastModifiedDevice": {
      "id": null
    },
    "source": "API",
    "voidDate": null,
    "duration": null,
    "businessDate": 20200302,
    "paidDate": null,
    "restaurantService": null,
    "voided": false,
    "estimatedFulfillmentDate": "2020-03-03T19:55:00.000+0000",
    "table": null,
    "requiredPrepTime": "PT30M",
    "approvalStatus": "FUTURE",
    "deliveryInfo": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "address1": "401 Park Drive",
      "address2": "Suite 801",
      "city": "Boston",
      "state": "MA",
      "zipCode": "02215",
      "latitude": 42.3446671,
      "longitude": -71.1023575,
      "notes": ""
    },
    "serviceArea": null,
    "curbsidePickupInfo": {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
      "entityType": "CurbsidePickup",
      "notes": "Convertible with top down",
      "transportColor": "blue",
      "transportDescription": "Street Cruiser"
    },
    "numberOfGuests": 1,
    "diningOption": {
      "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",
      "entityType": "DiningOption",
      "externalId": null
    },
    "openedDate": "2020-03-02T19:17:02.552+0000",
    "voidBusinessDate": null,
    "checks": [
      {
        "guid": "df38b30c-04b3-4eb3-923e-7cec05357674",
        "entityType": "Check",
        "externalId": null,
        "displayNumber": "pdesjardins-api-1583176621",
        "payments": [],
        "appliedDiscounts": [],
        "lastModifiedDevice": {
          "id": null
        },
        "voidDate": null,
        "paidDate": null,
        "appliedLoyaltyInfo": null,
        "voided": false,
        "paymentStatus": "OPEN",
        "amount": 111,
        "tabName": null,
        "taxExempt": false,
        "openedDate": "2020-03-02T19:17:02.552+0000",
        "totalAmount": 111,
        "selections": [
          {
            "guid": "2e917d92-04e5-4a2b-bb1a-bde41009feb3",
            "entityType": "MenuItemSelection",
            "externalId": null,
            "deferred": false,
            "preDiscountPrice": 111,
            "voidReason": null,
            "optionGroup": null,
            "displayName": "Rejected",
            "appliedDiscounts": [],
            "modifiers": [],
            "seatNumber": -1,
            "voidDate": null,
            "fulfillmentStatus": "NEW",
            "salesCategory": {
              "guid": "c0915e46-341e-4ec0-b46e-cb87fab729fd",
              "entityType": "SalesCategory",
              "externalId": null
            },
            "selectionType": "NONE",
            "price": 111,
            "voided": false,
            "appliedTaxes": [],
            "itemGroup": {
              "guid": "c639a684-7245-4259-b9c5-f913e481347e",
              "entityType": "MenuGroup",
              "externalId": null
            },
            "item": {
              "guid": "88aebc5f-4635-4141-9c0f-5a9be6324218",
              "entityType": "MenuItem",
              "externalId": null
            },
            "taxInclusion": "INCLUDED",
            "quantity": 1,
            "unitOfMeasure": "NONE",
            "tax": 0,
            "diningOption": {
              "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",
              "entityType": "DiningOption",
              "externalId": null
            },
            "voidBusinessDate": null,
            "createdDate": "2020-03-02T19:17:02.583+0000",
            "preModifier": null,
            "modifiedDate": "2020-03-02T19:17:02.583+0000"
          }
        ],
        "voidBusinessDate": null,
        "deleted": false,
        "createdDevice": {
          "id": null
        },
        "closedDate": null,
        "deletedDate": null,
        "modifiedDate": "2020-03-02T19:17:02.609+0000",
        "taxAmount": 0,
        "appliedServiceCharges": [],
        "customer": {![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "entityType": "Customer",
          "firstName": "Jack",
          "lastName": "Jones",
          "phone": "333-555-5555",
          "email": "jack@example.com"
         }
      }
    ],
    "deleted": false,
    "createdDevice": {
      "id": null
    },
    "closedDate": null,
    "deletedDate": null,
    "modifiedDate": "2020-03-02T19:17:02.612+0000",
    "promisedDate": "2020-03-03T19:55:00.000+0000",
    "pricingFeatures": [
      "TAXESV2"
    ]
  },
  {
    "guid": "529d9853-e28a-482b-9ee7-41580b0a53d0",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    "entityType": "Order",

    [contents omitted]

  },
  {
    "guid": "c3f0c5bd-3b06-4b5d-8035-be57ae38a02a",
    "entityType": "Order",

    [contents omitted]

  }
]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#co-d1e21648C855F0-89F9-4824-A080-F12BBC4F767E) | The first `Order` object in the array provides detailed information about a single order. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#apiOrdersBulkDeliveryInfo) | The `deliveryInfo` JSON value is only populated if your Toast API client has the `delivery_info.address:read` scope. For more information about scopes, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#apiOrdersBulkCurbsideInfo) | The `curbsidePickupInfo` JSON value is only populated if your Toast API client has the `guest.pi:read` scope. For more information about scopes, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |
| [4](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#apiOrdersBulkCustomer) | The `customer` JSON value is only populated if your Toast API client has the `guest.pi:read` scope. For more information about scopes, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |
| [5](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html#co-d1e21848C855F0-89F9-4824-A080-F12BBC4F767E) | Each subsequent `Order` object in the array provides detailed information about a different order. |

#### Example response data pagination header fields

The following example shows the header fields that provide response
data pagination URLs for the `/ordersBulk` endpoint. For more
information, see [Paginating response data](https://doc.toasttab.com/doc/devguide/apiResponseDataPagination.html).

```
link: <https://[hostname]/orders/v2/ordersBulk?endDate=2020-03-30T21%3A00%3A00.000Z
  &startDate=2020-03-30T20%3A00%3A00.000Z&pageSize=1>; rel="first"
link: <https://[hostname]/orders/v2/ordersBulk?endDate=2020-03-30T21%3A00%3A00.000Z
  &startDate=2020-03-30T20%3A00%3A00.000Z&pageSize=1&page=3>; rel="self"
link: <https://[hostname]/orders/v2/ordersBulk?endDate=2020-03-30T21%3A00%3A00.000Z
  &pageSize=1&page=2&startDate=2020-03-30T20%3A00%3A00.000Z>; rel="prev"
link: <https://[hostname]/orders/v2/ordersBulk?endDate=2020-03-30T21%3A00%3A00.000Z
  &pageSize=1&page=4&startDate=2020-03-30T20%3A00%3A00.000Z>; rel="next"
```


---

# Getting detailed information about one order - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html

### Getting detailed information about one order

You can use the orders API to retrieve detailed information about a
single order. To identify the order to return, you use the order
GUID.

#### How to make the request

To request details for a single order, you must have the order
GUID.

You send a `GET` request to the
`/orders/{guid}` endpoint.

#### Example request for detailed information about one order

The following example shows a request for detailed information about
one order.

```
curl -X GET \
-H "Authorization: Bearer eyJzI1NiJ9hbGciOiJSU.eyJhd9yaXR5Ij
oiQ1JVTkNIVElNRSIsInJzR3VpZCI6IjE4YzQ5YWJlLWFlODItNGFlYy04ND
M1LWJhYTRjMjVlYTY2MiIsInNjb3BlIjpbImxWQiOlsidG9hc3QiXSwibmFt
aW5nQXV0aGhYm9yIiwib3JkZXJzIiwidXNlcm1nbXQiXSwiZXhwIjoxNDg0M
zg5ODUwLCJqdGkiOiJlMDYzZjJkMy1jNGYyLTRiZjItODJmNi01MTg1NWMzZ
DAxM2YiLCJjbGllbnRfaWQiOiJjcnVuY2h0aW1lIn0.X1_0y9Hzj5F9gdOw2
o6VSYTyZwooAJiFMDmNakbZrtiUdYwLzuLwLpCMQzX5pKYtOqDUz_cetGJL3
txKL1L-K2j1Enoq8An8hEM6e8J0KdAiwrYFO3W3CmWedaoz95K9ghNZVCs28
Td2Sp3Ix3fObxbrvanocx9_OT8S9uM8hdSXmBI_ykTWvOVgK4hO24V3DJy4b
9bz1FtgOvrClhELxCe8dJy7jiwAR60xczlCF5rna98RMLN6zY4ffjmljKFZ6
QV0KkVppWjEiJn7oFHiIylCX1sSg7sddrGatj0xJzts3GJ8u8_lryUNHaEvJ
dWq4Yzwo007AMgxjH9d241Y-g" \![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
-H "Toast-Restaurant-External-ID: 4622e7a9-b4be-3fef-9220-b3dad273e0b4" \![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
"https://[toast-api-hostname]/orders/v2/orders/
017fdd94-4a30-4657-9475-b1a684758531"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#co-d1e12909EC9F64-B75D-413A-803D-C8F76FF3D18A) | Include an authentication token. For more information, see [Authentication and restaurant access](https://doc.toasttab.com/doc/devguide/authentication.html). |
| [2](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#co-d1e13109EC9F64-B75D-413A-803D-C8F76FF3D18A) | Specify the GUID of the restaurant that created the orders. This must be the GUID of an individual restaurant. It cannot be the GUID of a restaurant group. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#co-d1e13309EC9F64-B75D-413A-803D-C8F76FF3D18A) | Send a `GET` request to the `/orders/{guid}` endpoint of the orders API. Specify the GUID of the order as a path parameter. |

#### Example response data

The following example shows the response data from the
`/orders/{guid}` endpoint. It contains detailed information
about one order.

```
{
  "guid": "017fdd94-4a30-4657-9475-b1a684758531",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",
  "externalId": null,
  "revenueCenter": {
      "guid": "9ab6a5cf-32e0-47ee-9fd3-c73507ef3c01",
      "entityType": "RevenueCenter",
      "externalId": null
  },
  "server": {
    "guid": "5c305143-183f-49cf-b4d5-49a610826822",
    "entityType": "RestaurantUser",
    "externalId": null
  },
  "lastModifiedDevice": {
    "id": "175785aa78a7c4dc"
  },
  "createdDevice": {
      "id": "175785aa78a7c4dc"
  },
  "deliveryInfo": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "address1": "401 Park Drive",
    "address2": "Suite 801",
    "city": "Boston",
    "state": "MA",
    "zipCode": "02215",
    "latitude": 42.3446671,
    "longitude": -71.1023575,
    "notes": ""
  },
  "serviceArea": null,
  "curbsidePickupInfo": {![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "entityType": "CurbsidePickup",
    "notes": "Convertible with top down",
    "transportColor": "blue",
    "transportDescription": "Street Cruiser"
  },
  "numberOfGuests": 1,
  "diningOption": {
    "guid": "d527b5cf-96d2-41dc-92e6-8e9ca1ed36bd",
    "entityType": "DiningOption",
    "externalId": null
  },
  "source": "In Store",
  "voidDate": null,
  "openedDate": "2019-02-24T13:48:44.206+0000",
  "duration": 54,
  "businessDate": 20190224,
  "voidBusinessDate": null,
  "checks": [
    {
      "guid": "9f42438a-a375-4983-9f80-c0dae5c33196",
      "entityType": "Check",
      "externalId": null,
      "displayNumber": "2",
      "amount": 1.0,
      "tabName": "Toasty Toaster",
      "taxExempt": false,
      "payments": [
        {
          "guid": "e8cee462-78b4-4d83-a8ac-6006903f36d7",
          "entityType": "OrderPayment",
          "externalId": null,
          "originalProcessingFee": 0.04,
          "amount": 1.06,
          "tipAmount": 0,
          "amountTendered": 0,
          "cashDrawer": null,
          "cardType": "VISA",
          "lastModifiedDevice": {
              "id": "175785aa78a7c4dc"
          },
          "createdDevice": {
              "id": "175785aa78a7c4dc"
          },
          "refundStatus": "NONE",
          "houseAccount": null,
          "type": "CREDIT",
          "voidInfo": null,
          "otherPayment": null,
          "paidDate": "2019-02-24T13:49:38.617+0000",
          "cardEntryMode": "PRE_AUTHED",
          "paymentStatus": "CAPTURED",
          "paidBusinessDate": 20190224,
          "last4Digits": "1111",
          "refund": null
        }
      ],
      "appliedDiscounts": [],
      "voidDate": null,
      "openedDate": "2019-02-24T13:48:44.206+0000",
      "totalAmount": 1.06,
      "lastModifiedDevice": {
          "id": "175785aa78a7c4dc"
      },
      "createdDevice": {
          "id": "d64b3fd17cad3db2"
      },
      "selections": [
        {
          "guid": "69684faa-c35d-4ab4-9bff-41805ae52276",
          "entityType": "MenuItemSelection",
          "externalId": null,
          "itemGroup": {
            "guid": "46c963b8-a4c8-4cd0-9b7e-e1c431ed0b53",
            "entityType": "MenuGroup",
            "externalId": null
          },
          "deferred": false,
          "item": {
            "guid": "a7b9ee4d-e41b-46ac-9ba4-d56dd7b2fb20",
            "entityType": "MenuItem",
            "externalId": null
          },
          "quantity": 1,
          "receiptLinePrice": 1,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "preDiscountPrice": 1,
          "voidReason": null,
          "optionGroup": null,
          "displayName": "test",
          "appliedDiscounts": [],
          "tax": 0.06,
          "modifiers": [],
          "seatNumber": -1,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
          "voidDate": null,
          "fulfillmentStatus": "SENT",
          "optionGroupPricingMode": null,
          "salesCategory": {
              "guid": "b6a5fa5c-5b4f-49ca-a49f-d35814110f81",
              "entityType": "SalesCategory",
              "externalId": null
          },
          "selectionType": "NONE",
          "voidBusinessDate": null,
          "createdDate": "2019-02-24T13:48:44.806+0000",
          "preModifier": null,
          "price": 1,
          "modifiedDate": "2019-02-24T13:49:39.252+0000",
          "voided": false,
          "diningOption": {
              "guid": "d527b5cf-96d2-41dc-92e6-8e9ca1ed36bd",
              "entityType": "DiningOption",
              "externalId": null
          },
          "appliedTaxes": [
            {
              "entityType": "AppliedTaxRate",
              "taxRate": {
                "guid": "d5b88c05-1348-42ef-b1d3-577a83d70a80",
                "entityType": "TaxRate"
              },
              "name": "State Tax",
              "rate": 0.0625,
              "taxAmount": 0.06,
              "type": "PERCENT"
            }
          ]
        }
      ],
      "voidBusinessDate": null,
      "deleted": false,
      "paidDate": "2019-02-24T13:49:38.616+0000",
      "closedDate": "2019-02-25T11:05:00.024+0000",
      "deletedDate": "1970-01-01T00:00:00.000+0000",
      "modifiedDate": "2019-02-25T11:05:00.024+0000",
      "appliedLoyaltyInfo": null,
      "voided": false,
      "taxAmount": 0.06,
      "appliedServiceCharges": [],
      "paymentStatus": "CLOSED",
      "customer": {![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
          "entityType": "Customer",
          "firstName": "Jack",
          "lastName": "Jones",
          "phone": "333-555-5555",
          "email": "jack@example.com"
      }
    }
  ],
  "deleted": false,
  "paidDate": "2019-02-24T13:49:38.616+0000",
  "closedDate": "2019-02-25T11:05:00.024+0000",
  "deletedDate": "1970-01-01T00:00:00.000+0000",
  "restaurantService": {
      "guid": "9d57bbfc-c0e1-4bb0-9cec-ebcb186306bb",
      "entityType": "RestaurantService",
      "externalId": null
  },
  "modifiedDate": "2019-02-25T11:05:00.024+0000",
  "promisedDate": null,
  "voided": false,
  "estimatedFulfillmentDate": null,
  "requiredPrepTime": "PT0S",
  "table": null
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#co-d1e15009EC9F64-B75D-413A-803D-C8F76FF3D18A) | The `/orders/{guid}` endpoint returns an `Order` JSON object. For more information about the values in the `Order` object, see the [orders API reference documentation](https://doc.toasttab.com/openapi/orders/operation/ordersGuidGet/). |
| [2](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#apiOrdersDeliveryInfo) | The `deliveryInfo` JSON value is only populated if your Toast API client has the `delivery_info.address:read` scope. For more information about scopes, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |
| [3](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#apiOrdersCurbsideInfo) | The `curbsidePickupInfo` JSON value is only populated if your Toast API client has the `guest.pi:read` scope. For more information about scopes, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |
| [4](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#receiptLinePrice-co) | The `receiptLinePrice` JSON value is the base price of a menu item without modifiers or quantity applied. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#SeatNumberCO) | When creating orders, restaurant employees can select the physical seat in which a guest sits. If a seat number is specified, then the `seatNumber` value on a `Selection` object represents the seat number associated with the menu item selection. If the menu item selection is shared among multiple seats, then `seatNumber` is `0`. If no seat number is associated with the menu item selection, then `seatNumber` is `-1`. |
| [6](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html#apiOrdersCustomer) | The `customer` JSON value is only populated if your Toast API client has the `guest.pi:read` scope. For more information about scopes, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |


---

# Required scopes to retrieve order data - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersGetScopes.html

### Required scopes to retrieve order data

To retrieve order data from the Toast platform, your Toast API client
must at least have the `orders:read` scope. API clients that
submit orders to the Toast platform must have both the
`orders:read` scope and the `orders.channel:read`
scope.

The following scopes allow you to view guest data:

`delivery_info.address:read`
:   This scope is needed to view the `deliveryInfo`
    information, which provides details about the address to deliver the
    order to.

    If your Toast API client does not have the
    `delivery_info.address:read` scope, then the
    `deliveryInfo` value is `null`.

`guest.pi:read`
:   This scope is needed to view the following values:

    * `Check.customer` - Name and contact information
      for the guest.
    * `curbsidePickupInfo` - Information about the
      vehicle the guest uses for a curbside pickup.

    If your Toast API client does not have the
    `guest.pi:read` scope, then the response does not include
    the `customer` or `curbsidePickupInfo`
    values.

For more information about scopes and how they work, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html).


---

# Calculating net sales using the orders API - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersNetSalesCalculation.html

### Calculating net sales using the orders API

The reports in Toast Web include net sales values. You can also use
[amount
values from the orders API](https://doc.toasttab.com/doc/devguide/apiOrdersOrderObjectSummary.html#apiOrderObjectAmounts) to calculate the net sales.

#### Orders API information to include in net sales

|  |
| --- |
| Note |
| The information in this section describes how your integration can calculate net sales using information that you get from the orders API. This section does not describe the behavior of the Toast POS or any reporting functions of the Toast platform. |

A typical definition of net sales is the total price paid by guests
for menu item selections and services.

Your integration can calculate net sales from orders API information
by including:

* Prices of the menu item selections.
* Discounts that were deducted from menu item selections and
  checks.
* Non-gratuity service charges that were added to checks.

A typical calculation of net sales using orders API information does
not include:

* Taxes or other amounts that are paid to other entities, such as
  gratuity service charges and credit card tips.
* Voided menu item selections, checks, and orders.
* Deleted checks and orders.
* Purchases of gift cards or house account payments.

Include the orders API information for any orders and checks
*that are not excluded* in the list above. For example,
include open and unpaid orders in the net sales calculation for your
integration.

#### How to calculate net sales from orders API information

|  |
| --- |
| Note |
| The information in this section describes how your integration can calculate net sales using information that you get from the orders API. This section does not describe the behavior of the Toast POS or any reporting functions of the Toast platform. |

Here is an overview of the process to calculate net sales for a
group of orders using information from the orders API:

1. Use the [Get
   multiple orders](https://doc.toasttab.com/openapi/orders/operation/ordersBulkGet/) request to retrieve the orders that were opened
   during the period of time that you want to do the calculation
   for.
2. [Calculate the net sales
   values for each order](https://doc.toasttab.com/doc/devguide/apiOrdersNetSalesCalculation.html#apiOrdersNetSalesSingleOrder).
3. Sum the order net sales values to get the total net
   sales.

During the calculation:

* Exclude orders and checks where `voided` is
  `true`.
* Exclude orders and checks where `deleted` is
  `true`.

**To calculate net sales for an order**

1. Within a check, calculate the net sales amount for each menu
   item selection.

   Exclude the following menu item selections:

   * Menu item selections where `voided` is
     `true`.
   * Menu item selections where `displayName` is
     `Gift Card`.

   For the applicable menu item selections:

   1. Get the `preDiscountPrice` value for the menu
      item selection.
   2. Subtract the sum of
      `Discount.nonTaxableDiscountAmount`.
2. Sum the net sales amounts for the menu item selections in a
   check. This is the initial check net sales value.
3. Add the non-gratuity service charge amounts to the check net
   sales value.

   1. In the check, sum
      `ServiceCharge.chargeAmount`.

      Exclude service charges where `gratuity` is
      `true`.
   2. Add that total to the check net sales value.
4. Subtract check-level discounts from the check net sales
   value.

   1. In the check, sum
      `Discount.nonTaxableDiscountAmount`.
   2. Subtract that total from the check net sales value.
5. Sum the check net sales values for the checks in the
   order.


---

# Order object summary - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersOrderObjectSummary.html

### Order object summary

An `Order` object contains details about an order. In the
orders API, you use the `Order` object to create orders, update
orders, and retrieve information about orders. You send `Order`
objects in requests to create and update orders. The orders API returns
`Order` objects in response to requests.

This topic discusses some related sets of values in the
`Order` object and how they are populated.

#### Overview of Order object content

An `Order` object contains details about:

* What the guest ordered
* How the order is prepared and processed
* How the guest receives the order
* What the guest is charged for the order
* How the guest pays for the order

The following diagram provides a high-level overview of the
`Order` object contents:

![Overview diagram of the Order object that highlights groups of related objects](https://doc.toasttab.com/doc/media/order-api-order-object-overview.png)

#### GUIDs and identifiers in the order object

A GUID is a unique identifier that Toast generates when new objects
are created.

You use GUIDs to identify configured objects that are relevant to
the order, such as menu items, dining options, and discounts. Here is an
example of a `DiningOption` object, which provides a dining
option GUID to identify the dining option for an order.

```
"diningOption": {
  "guid": "18855a26-40d4-4a8f-b484-c6af211dd597"
},
```

To identify an object, you can use either `guid` or
`multilocationId`. For more information about
`multilocationId` and how to use it, see [Using multi-location IDs in orders](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html).

When you create an order, the Toast platform generates GUIDs for the
`Order` object, `Check` objects, and
`Selection` objects. These GUIDs are returned in orders API
responses.

You use those GUIDs to identify an order, check, or menu item
selection to retrieve or to modify.

#### Order status information

In the `Order` object, the status information reflects
the current status of the order, check, or menu item selection. Statuses
can reflect the current status of fulfillment or payment.

Status information is returned in responses.

In most cases, the Toast platform updates the status values based on
actions to an item, check, or order.

##### Order status values

An order can have the following status values:

`approvalStatus`
:   This status indicates the current status of the order in the
    fulfillment process. It only reflects whether the order is sent to
    the kitchen. It does not reflect whether the order is completed,
    delivered, or paid for.

    For future orders, `approvalStatus` is
    `FUTURE`. Restaurant employees do not receive the order
    until it is time to fulfill it.

    For new orders that need to be approved by a restaurant
    employee, `approvalStatus` is
    `NEEDS_APPROVAL`.

    When the order is approved, `approvalStatus`
    changes to `APPROVED`. New orders that do not require
    approval are automatically `APPROVED`.

    If an order is not approved after a specific amount of time,
    `approvalStatus` changes from
    `NEEDS_APPROVAL` to `NOT_APPROVED`.

`deliveryInfo.deliveryState`
:   For delivery orders, the `deliveryState` value
    indicates the current status of the order delivery.

    Until the order is ready to be delivered,
    `deliveryState` is `PENDING`.

    When the delivery driver picks up the order,
    `deliveryState` is `PICKED_UP`.

    When the delivery driver is on their way to the delivery
    address, `deliveryState` is
    `IN_PROGRESS`.

    When the delivery is complete, `deliveryState` is
    `DELIVERED`.

##### Check status values

A check can have the following status values:

`paymentStatus`
:   The overall status of the check payment.

    The `paymentStatus` is `OPEN` until a
    payment is applied.

    The `paymentStatus` is `PAID` when a
    payment is applied but has not been adjusted for the tip.

    The `paymentStatus` is `CLOSED` when
    the check is fully paid.

`Payment.paymentStatus`
:   For credit card payments, the status of the credit card
    processing.

    The status indicates the current approval and capture status
    of the credit card payment. It also reflects when a payment is
    cancelled or voided.

`Payment.refundStatus`
:   The status of a refund on a payment.

    `NONE` indicates that the refund was not
    processed.

    `PARTIAL` indicates that a partial refund was
    issued.

    `FULL` indicates that a full refund was
    issued.

##### Menu item selection status values

A menu item selection can have the following status values:

`fulfillmentStatus`
:   The status of the preparation of the menu item selection.
    The `fulfillmentStatus` indicates whether the kitchen
    is currently working to prepare the item.

    `NEW` menu item selections were added to a check
    but are not sent to the KDS for preparation.

    `HOLD` menu item selections were paused by a
    restaurant employee. They are not sent to the KDS for
    preparation.

    `SENT` menu item selections were fired and appear
    in the KDS for preparation.

    `READY` menu item selections have completed
    preparation. They are fulfilled and do not appear on the KDS. The
    `READY` status is only used If your restaurant uses the
    Toast platform KDS.

#### Order dates and times

In the `Order` object, the order, checks, and menu item
selections have multiple dates and times associated with them. The dates
and times track events related to the order placement and processing,
including when the order entities are created, updated, completed, and
paid for.

Many order-related dates and times are set by the Toast platform
based on the creation or modification of an order entity. For example,
when an order is created, the Toast platform sets the
`createdDate`. Or when an order is voided, the Toast platform
sets the `voidDate`. You do not set those dates, but you do see
those dates when you retrieve order details.

The following timestamps are associated with orders, checks, and
menu item selections.

##### Order creation and scheduling dates

The following dates are set when an order is created.

`createdDate`
:   **Applies to:**
    `Order`, `Check`,
    `Selection`

    **Populated by:** Toast
    platform

    **Format:** Date-time
    string

    The date and time when the Toast platform received the
    order, check or menu item selection.

    Populated by Toast when it receives the order, check, or
    menu item selection.

`openedDate`
:   **Applies to:**
    `Order`, `Check`

    **Populated by:** Either
    provided in the `Order` object or populated by the
    Toast platform.

    **Format:** Date-time
    string

    The date and time when the order or check was opened.

    For dine-in and as soon as possible (ASAP) orders,
    `openedDate` should match
    `createdDate`.

    For future orders, `openedDate` should match
    `promisedDate`.

    If you do not provide a value for `openedDate`,
    then the Toast platform sets `openedDate` to the
    current date and time, which will be nearly identical to
    `createdDate`.

`promisedDate`
:   **Applies to:**
    `Order`

    **Populated by:** Provided in
    the order request

    **Format:** Date-time
    string

    For future orders, the date and time that the order is
    scheduled to be fulfilled.

    For dine-in and ASAP orders, `promisedDate` is
    `null`.

`estimatedFulfillmentDate`
:   **Applies to:**
    `Order`

    **Populated by:** Toast
    platform

    **Format:** Date-time
    string

    The date and time when a delivery or takeout order is
    expected to be ready.

    For dine-in and ASAP orders, calculated by the Toast
    platform based on the `openedDate` and the required
    preparation time. For takeout and delivery orders, the calculation
    also includes any throttling that is currently in effect.

    For future orders, matches `promisedDate`.

##### Order fulfillment, payment, and delivery

The following dates and times are set based on when an order is
fulfilled, delivered, and paid for.

`businessDate`
:   **Applies to:**
    `Order`

    **Populated by:** Toast
    platform

    **Format:** Integer
    (`yyyymmdd`)

    The date when the order was fulfilled.

    Calculated by the Toast platform based on the business date
    cutoff time for the restaurant. The cutoff time is configured In
    Toast Web. In the restaurants API, the cutoff time is returned as
    the value of `closeoutHour`.

    By default, the cutoff time is 4:00 AM. For example, an
    order that is fulfilled at 1:00 AM on December 3 would be
    considered fulfilled on December 2.

`dispatchedDate`
:   **Applies to:**
    `Order`

    **Populated by:** Toast
    platform

    **Format:** Date-time
    string

    For delivery orders, the date and time when the order is
    ready to be delivered and assigned to a driver.

    Set when the order is marked as ready to deliver on a Toast
    POS device.

`deliveredDate`
:   **Applies to:**
    `Order`

    **Populated by:** Toast
    platform

    **Format:** Date-time
    string

    For delivery orders, the date and time when the order was
    marked as delivered.

    Set when the employee marks the order as delivered on a
    Toast POS device.

`paidDate`
:   **Applies to:**
    `Order`, `Check`

    **Populated by:** Either
    provided in the `Order` object or calculated by the
    Toast platform

    **Format:** Date-time
    string

    The most recent date when the order or check received a
    payment.

    If you provide a payment without a payment date, the Toast
    platform sets `paidDate` to the current system
    time.

`closedDate`
:   **Applies to:**
    `Order`, `Check`

    **Populated by:** Toast
    platform

    **Format:** Date-time
    string

    The date when the order and check are paid.

    For orders with tips, the Toast platform populates
    `closedDate` when the payment and tip are added.

    For orders without tips, the Toast platform populates
    `closedDate` during the nightly closeout batch.

##### Order changes, deletions, and voids

The following dates are set based on changes to an order.

`modifiedDate`
:   **Applies to:**
    `Order`, `Check`,
    `Selection`

    **Populated by:** Toast
    platform

    **Format:** Date-time
    string

    The most recent date that the order, check, or menu item
    selection was modified.

    Populated when an order entity is created and when a change
    occurs to the order, check, or menu item selection.

`deletedDate`
:   **Applies to:**
    `Order`, `Check`

    **Populated by:** Toast
    platform

    **Format:** Date-time
    string

    The date and time when the order or check was
    deleted.

    Populated when `deleted` is set to
    `true`.

    If `deleted` is `false`, then
    `deletedDate` uses the Unix epoch as a placeholder
    value.

    When an order is deleted, the checks are deleted and inherit
    the `deleted` and `deletedDate`
    values.

`voidDate`
:   **Applies to:**
    `Order`, `Check`,
    `Selection`

    **Populated by:** Toast
    platform

    **Format:** Date-time
    string

    The date and time when the order, check, or menu item
    selection was voided.

    Populated when the order, check, or menu item selection is
    voided.

    When an order is voided, the checks and menu item selections
    are voided and inherit the `voidDate`.

    When a check is voided, the menu item selections for that
    check are voided and inherit the `voidDate`.

`voidBusinessDate`
:   **Applies to:**
    `Order`, `Check`,
    `Selection`

    **Populated by:** Toast
    platform

    **Format:** Integer
    (`yyyymmdd`)

    The business date that corresponds to the value of
    `voidDate`.

    Populated based on `voidDate` and the business
    date cutoff time for a restaurant.

    The cutoff time is set in Toast Web. In the restaurants API,
    the cutoff time is returned as the value of
    `closeoutHour`.

    By default, the cutoff time is 4:00 AM. For example, if a
    check is voided at 1:00 AM on January 5,
    `voidedBusinessDate` would be January 4.

#### Order amounts

The order amount values determine the amount that guests are
charged. Amount values are associated with menu item selections and
checks.

For most of the amount values in the `Order` object, the
Toast platform either retrieves the amount from the restaurant
configuration, or uses an algorithm to calculate it based on other values.
For example, prices for menu selection items are configured. Amounts such
as taxes and check totals are calculated.

##### Components of order amounts

Order amounts include the following components:

**Menu item prices**
:   The prices of the selected menu items.

    For most items, prices are specified in the menu
    configuration.

    Some items are open price items, which means that you
    provide the price when you create the order.

    For more information, see the [menu pricing
    section](https://doc.toasttab.com/doc/platformguide/adminPricingStrategiesOverview.html) of the *Platform
    Guide*.

**Taxes**
:   The tax charged for the menu selection items.

    Taxes are calculated based on the applicable taxes and tax
    rates.

    For more information on taxes and tax rates, see the [taxes
    section](https://doc.toasttab.com/doc/platformguide/adminTaxesOverview.html) of the *Platform
    Guide*.

**Service charges**
:   The service charges that are added to checks.

    On the Toast platform, some service charges are added
    automatically based on the order type. Other service charges can
    be added by the restaurant employee. In the orders API, all
    service charges must be included in the order request. Service
    charges are never applied automatically to orders from the orders
    API.

    Service charges might also be taxable.

    For more information on service charges, see the [service charges
    section](https://doc.toasttab.com/doc/platformguide/adminServiceChargeOverview.html) in the *Platform
    Guide*.

**Discounts**
:   The applicable discounts that reduce the amount of a check
    or a menu item selection.

    For more information on configuring discounts, see [Managing discounts](https://doc.toasttab.com/doc/platformguide/adminAvailableDiscounts.html) in
    the *Platform Guide*.

##### Amounts on menu item selections

A menu item selection has the following amounts associated with
it.

`receiptLinePrice`
:   The price of a menu item selection before the quantity,
    taxes, discounts, and modifier option adjustments are applied. For
    items that use size pricing, `receiptLinePrice` is the
    price of the selected size.

    For example, if the menu item selection is for two orders of
    fries, `receiptLinePrice` is the price of one order of
    fries. If a menu item selection is for three large drinks,
    `receiptLinePrice` is the price of one large
    drink.

    Populated based on the menu configuration, or using the
    value provided in `externalPriceAmount` or
    `openPriceAmount`.

`externalPriceAmount`
:   Only used in orders that are created by marketplace
    facilitator organizations. Provided with new orders. Not returned
    for existing orders.

    The price of the menu item selection as calculated by the
    marketplace facilitator. This is the price before the quantity,
    taxes, discounts, and modifier option adjustments are
    applied.

    For more information about marketplace facilitator orders,
    see [Marketplace facilitator orders](https://doc.toasttab.com/doc/devguide/apiMarketplaceFacilitatorOrders.html).

    Used to populate `receiptLinePrice`.

`openPriceAmount`
:   Provided with new orders for open price menu items. Not
    returned for existing orders.

    The price of the menu item selection before the quantity,
    taxes, discounts, and modifier option adjustments are
    applied.

    Used to populate `receiptLinePrice`.

`preDiscountPrice`
:   Gross sales price for the item before tax and discounts.
    Reflects the ordered quantity.

    `prediscountPrice = receiptLinePrice x
    quantity`

`Discount.discountAmount`
:   The currency amount of the discount.

    For open discounts, you provide `discountAmount`
    when you add the discount.

    Otherwise, the Toast platform populates
    `discountAmount` based on the discount
    configuration.

    Returned for all discounts.

`Discount.discountPercent`
:   For a percent discount, the percentage of the discount. For
    example, for a 10% discount, `discountPercent` is
    10.

    Used to calculate `discountAmount` for percent
    discounts.

`Discount.nonTaxDiscountAmount`
:   The currency amount of the discount on the non-taxable
    portion of the menu item selection.

    In most cases, `nonTaxDiscountAmount` is
    identical to `discountAmount`.

    The values are only different when you apply a percent
    discount to an item that has the tax included in the price. In
    that case, `nonTaxDiscountAmount` is less than
    `discountAmount`.

`price`
:   Final price charged to the guest for the item. Includes the
    ordered quantity and discounts. Does not include tax.

    `price = preDiscountPrice -
    sum(Discount.discountAmount)`

`AppliedTax.taxAmount`
:   The tax amount for a specific tax. Calculated by the Toast
    platform based on the specific tax configuration.

`tax`
:   The total tax on the menu item selection.

    `tax = sum(AppliedTax.taxAmount)`

##### Amounts on checks

A check can have the following amount values associated with
it:

`Discount.discountAmount`
:   The currency amount of a discount on the check.

    For open discounts, provided in new orders.

    Otherwise, populated by the Toast platform based on the
    discount configuration.

    Returned for all discounts.

`Discount.discountPercent`
:   For a percent discount, the percentage of the
    discount.

    For example, for a 10% discount,
    `discountPercent` is 10.

    Used to calculate `discountAmount` for percent
    discounts.

`Discount.nonTaxDiscountAmount`
:   The currency amount of the discount on the non-taxable
    portion of the check.

    In most cases, `nonTaxDiscountAmount` is
    identical to `discountAmount`.

    The values are only different when you apply a percent
    discount to a check that contains items that have the tax included
    in the price. In that case, `nonTaxDiscountAmount` is
    less than `discountAmount`.

`ServiceCharge.chargeAmount`
:   The amount of a service charge.

    For open amount service charges, provided with the
    order.

    Otherwise, the Toast platform populates the amount based on
    the service charge configuration.

`ServiceCharge.AppliedTax.taxAmount`
:   The amount of an applicable tax on the service
    charge.

    Calculated by the Toast platform based on the specific tax
    configuration.

`amount`
:   The total calculated price of the check including discounts
    and service charges. The `amount` does not include
    gratuity or taxes. Response only.

    `amount = sum(Item.price) + sum(Service
    charge.filter(gratutity=false).chargeamount)`

`taxAmount`
:   The total tax on the check. Includes the taxes on the menu
    item selections and service charges.

    `taxAmount = sum(Item.tax) + sum(Service Charge.Applied
    Tax.taxAmount)`

`totalAmount`
:   The total amount of the check. `totalAmount`
    includes discounts, service charges, and taxes.

    `totalAmount = amount + taxAmount`

    `totalAmount` is not affected by refunds. Refund
    information is provided in the menu item selection and payment
    details.

    `totalAmount` is affected by voids. When you void
    a menu item selection, `totalAmount` is reduced by the
    amount charged for the menu item selection.

##### Example order with order amounts

To demonstrate the item and check amounts, we'll use a simple
example order.

The order contains a single menu item selection for two grilled
cheese sandwiches. A grilled cheese sandwich costs $8.00.

The guest receives a $1.00 discount on the item.

The item is subject to a 5% state tax and a 4% city tax.

The check has a $3.00 delivery service charge that is not
taxed.

For the menu item selection, the amounts are as follows:

| Amount | Value | Calculation |
| --- | --- | --- |
| `receiptLinePrice` | 8.0 | In the menu, a grilled sandwich costs $8.00 |
| `preDiscountPrice` | 16.0 | Multiply `receiptLinePrice` (8.0) by `quantity` (2). |
| `Discount.discountAmount` | 1.0 | The applied discount is for $1.00. |
| `Discount.nonTaxDiscountAmount` | 1.0 | The applied discount is for $1.00. The tax is not included in the price, and the discount is a fixed amount discount, so the two discount amount values are the same. |
| `price` | 15.0 | Subtract the total `discountAmount` (1.0) from the `preDiscountPrice` (16.0). |
| `AppliedTax.taxAmount` (State tax) | 0.75 | Multiply the `rate` for the state tax (.05) by the `price` (15.0). |
| `AppliedTax.taxAmount` (City tax) | 0.65 | Multiply the `rate` for the city tax (.04) by the `price` (15.0). |
| `tax` | 1.35 | Add the `taxAmount` values (0.75 and 0.65). |

For the check, the amounts are as follows:

| Amount | Value | Calculation |
| --- | --- | --- |
| `appliedDiscounts` | No values | There are no discounts on the check, just on the item. |
| `ServiceCharge.chargeAmount` | 3.0 | There is a $3.00 delivery charge. |
| `ServiceCharge.appliedTaxes` | No values | The delivery charge is not taxed. |
| `amount` | 18.0 | Add the `price` from the menu selection item (15.0) to the service charge (3.0). |
| `taxAmount` | 1.35 | The total of the `tax` values on the menu selection items. The `tax` value for the single menu selection item is 1.35. |
| `totalAmount` | 19.35 | Add `amount` (18.0) and `taxAmount` (1.35). |


---

# Packaging preferences - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html

### Packaging preferences

#### Overview

|  |
| --- |
| Note |
| Required scope. To read packaging preferences, you need the `packaging:read` scope. For more information about scopes, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |

Packaging preferences indicate how a guest would like their order
packaged. Preferences could be adding items like utensils, napkins, or
straws to include with their takeout or delivery order. Restaurants choose
the packaging options that they offer to guests using configuration
options in Toast Web.

To apply packaging preferences to an order, you retrieve a
restaurant's packaging configuration and apply the preferences that guests
select to an order. You can get information about the packaging
configuration options for a restaurant from the [packaging
configuration API](https://doc.toasttab.com/openapi/packaging/overview/).

The following procedure describes the process you use to include
packaging preference information in a Toast platform order:

1. Retrieve the packaging preference configuration for a restaurant
   using the `packaging configuration API`. A packaging
   preference configuration describes options for meal packaging items
   such as utensils or napkins.

   For more information, see [Getting packaging preference configuration options](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#apiOrdersPackagingPreferencesGetGuid).
2. In your ordering interface, ask guests to select their packaging
   preferences during the ordering process. The packaging preference
   questions you include are based on the packaging options that the
   restaurant configured.
3. Submit the packaging preferences that a guest chooses for an
   order using the orders API.

   For more information, see [Creating an order with packaging preferences](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#apiOrdersPackagingPreferencesUsingTheOrdersApi).

#### Working with packaging preferences

The following sections further describe the way that you retrieve
restaurant packaging options configuration and apply guest packaging
preferences to an order.

##### Getting packaging preference configuration options

Before you can submit an order with packaging preferences, you
must retrieve the packaging preference configuration information for a
restaurant from the [packaging
configuration API](https://doc.toasttab.com/openapi/packaging/overview/).

The packaging preference configuration information that you get
from the packaging configuration API includes the identifier GUID for
each packaging option. You use the identifier GUIDs for packaging
options when you submit packaging preferences with an order.

The following procedure describes how to retrieve packaging
preference information for a restaurant, including the packaging option
identifier GUIDs.

**Send a request to retrieve packaging preferences**

1. Send a `GET` request to the
   `published/packagingConfig` endpoint of the packaging
   configuration API. A successful response returns packaging
   preference configuration GUIDs. The package preference configuration
   GUIDs are found in the `id` field of the response.

   See the response data from the
   `published/packagingConfig` endpoint for a restaurant
   with multiple packaging preferences configured in [Example response data from the
   `published/packagingConfig` endpoint](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#apiExamplePackagingConfigResponseData).
2. Get the identifier GUIDs for each packaging option from the
   `id` value to use when you create an order.

Some local regulations require third-party ordering platforms to
clearly state that a restaurant does not offer single-use utensils if a
restaurant does not indicate packaging preferences in the online
ordering experience. Due to such regulations, if a restaurant chooses
not to make single-use foodware available through their online ordering
menu, the `enabled` field is set to `true` but the
items array is empty. This configuration indicates that the restaurant
has chosen not to make single-use foodware accessories available on
their online menu.

|  |
| --- |
| Important |
| Compliance with all packaging-related regulations and laws is solely the restaurant's responsibility. The information provided is for informational purposes only and should not be relied upon or used as a substitute for consultation with a legal advisor. Please consult a professional advisor for a qualified opinion on the applicability of requirements to your business operations. |

**Example response data from the
`published/packagingConfig` endpoint**

```
{
    "enabled": true, ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "items": [
        {
            "id": "0632bedc-9a09-4cd2-9575-f2ff189f5f2e",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
            "itemTypes": [
                "UTENSILS",
                "NAPKINS"
            ],
            "guestDisplayName": "Include utensils and napkins", ![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
            "guestInclusionType": "OPT_IN",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
            "guestDescription": "Include 4 sets of utensils and one pack of napkins"![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
        },
        {
            "id": "be9c8aac-9d7f-4ff5-bfdd-f7d2fcb4711f",
            "itemTypes": [
                "BAGS"
            ],
            "guestDisplayName": "Pack in plastic bag",
            "guestInclusionType": "OPT_OUT",
            "guestDescription": null
        }
    ],
    "guestMessage": "Thank you for helping our restaurant remain eco-friendly!" ![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#co-d1e96B3470A82-36E3-425F-9B05-911ECB33DF15) | The `enabled` value indicates whether the restaurant is currently using the packaging preferences in this object. If `TRUE`, you display the packaging options to guests in your ordering interface. If `FALSE`, do not display the options. |
| [2](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#co-d1e98B3470A82-36E3-425F-9B05-911ECB33DF15) | The `id` value holds the packaging preference GUID needed when submitting your order `POST` request. Multiple packaging preferences can be mapped to a single `id`. |
| [3](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#co-d1e100B3470A82-36E3-425F-9B05-911ECB33DF15) | The `guestDisplayName` value is the packaging preferences question that the restaurant intends to show to a guest in your ordering interface. This value should display different packaging preference types appropriately and is defined by your restaurant team. |
| [4](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#co-d1e102B3470A82-36E3-425F-9B05-911ECB33DF15) | The `guestInclusionType` value defines how the guest should interact with the packaging preference. Possible options are `OPT_IN` and `OPT_OUT`. `OPT_IN` means that a guest will have to complete an action to include packaging preferences such as selecting a checkbox. `OPT_OUT` means that a guest has complete an action to opt out of packaging such as de-selecting a checkbox. |
| [5](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#co-d1e104B3470A82-36E3-425F-9B05-911ECB33DF15) | Use the `guestDescription` value to further describe the packaging option, in addition to the `guestDisplayName`. |
| [6](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#co-d1e107B3470A82-36E3-425F-9B05-911ECB33DF15) | The `guestMessage` value includes an optional message, configured by the restaurant, that you show to guests in your ordering interface. |

##### Creating an order with packaging preferences

After you retrieve the packaging preference configuration
information for a restaurant and get a guest's packaging preferences in
your ordering interface, you submit the order using the orders API. To
submit an order with packaging preferences, you use the
`AppliedPackagingInfo` and `AppliedPackagingItems`
objects. For information about these objects, see [the
orders API reference documentation.](https://doc.toasttab.com/openapi/orders/tag/Data-definitions/schema/AppliedPackagingInfo/)

|  |
| --- |
| Note |
| The `AppliedPackagingInfo` object is optional. Orders that are submitted without this object are still accepted by the orders API. |

The procedure below describes how to apply packaging preferences
to an order. For more information about the orders API, see the [orders API
overview](https://doc.toasttab.com/doc/devguide/portalOrdersApiOverview.html).

**To apply packaging preferences to an order**

1. Add the `AppliedPackagingInfo` object to your
   order. The `AppliedPackagingInfo` object contains the
   `AppliedPackagingItems` object. The
   `AppliedPackagingItems` object contains the
   `itemConfigId` value and this is where you add the
   packaging preferences GUIDs.
2. Add the packaging preferences GUIDs to the
   `itemConfigID` value in the
   `AppliedPackagingItems` object.
3. Send a `POST` request to the
   `/orders/v2/orders/` endpoint.

The examples below show an order request and response that
includes multiple packaging preferences.

**Packaging preferences orders API POST message body**

```
  [content omitted]

  "diningOption": {
    "guid": "0fbb34e4-5495-4e9d-b050-d96155a4de4a"
  },
  "appliedPackagingInfo": {
    "appliedPackagingItems": [
      {
        "itemConfigId": "0632bedc-9a09-4cd2-9575-f2ff189f5f2e",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
        "inclusion": "YES"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      },
      {
        "itemConfigId": "be9c8aac-9d7f-4ff5-bfdd-f7d2fcb4711f",
        "inclusion": "YES"
      }
    ]
  }

  [content omitted]
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#co-d1e28718E59E64-BD98-4F97-BC84-B44ABBF569B3) | The identifier GUID of the packaging preference option. You get the identifiers for a restaurant's packaging options from the packaging configuration API. For more information, see [Getting packaging preference configuration options](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#apiOrdersPackagingPreferencesGetGuid). |
| [2](https://doc.toasttab.com/doc/devguide/apiOrdersPackagingPreferences.html#co-d1e28918E59E64-BD98-4F97-BC84-B44ABBF569B3) | The packaging preference choice that the guest selected in your ordering interface. The value `YES` indicates that the guest wants the restaurant to include the packaging option for the order. |

  

The example below shows the response data for a request to create
an order that includes packaging preferences.

**Packaging preferences orders API POST response message
body**

```
  [content omitted]

  "appliedPackagingInfo": {
    "guid": "3061c33b-9245-44c4-a066-73f1e74e4a61",
    "entityType": "AppliedPackagingInfo",
    "appliedPackagingItems": [
      {
        "guid": "db6475e6-dfc1-43a9-9a70-4b8ba1951f43",
        "entityType": "AppliedPackagingItem",
        "itemConfigId": "0632bedc-9a09-4cd2-9575-f2ff189f5f2e",
        "inclusion": "YES",
        "itemTypes": [
          "UTENSILS"
        ],
        "guestDisplayName": "Include utensils"
      }
    ]
  }
  
  [content omitted]
```

#### Request an order with packaging preferences

You can retrieve a single order, or multiple orders in bulk, using
the orders API. For information about how to retrieve
an order, see the [orders API developer
documentation](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html).


---

# Providing revenue center information for an order - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiOrdersRevenueCenters.html

### Providing revenue center information for an order

You can specify the revenue center associated with the order.

For example, restaurants might use revenue centers to report on order
volume in specific locations of a restaurant, such as the patio, bar, or
dining room. They might also use revenue centers for delivery services, to
track the volume of orders from each service.

To specify the revenue center, in the `Order` object,
provide a `revenueCenter` object that specifies the Toast
platform GUID of the revenue center. For example:

```
"revenueCenter": {
    "guid": "908f0483-ac03-4c9a-a5a4-43c37786e237",
    "entityType": "RevenueCenter"
  },
```

To retrieve the GUIDs of the available revenue centers for a
restaurant, send a `GET` request to the
`/revenueCenters` endpoint of the configuration API.

You can also retrieve the revenue center that is associated with a
table or service area.

* When you send a `GET` request to the
  `/tables` endpoint of the configuration API, the response
  includes the revenue center for each table.
* When you send a `GET` request to the
  `/serviceAreas` endpoint of the configuration API, the
  response includes the revenue center for each service area.

For more information, see the [reference
documentation for the configuration API](https://doc.toasttab.com/openapi/configuration/overview/).


---

# Specifying modifiers and instructions for menu item selections - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html

### Specifying modifiers and instructions for menu item selections

You can specify custom details for the menu item selections in an
order.

For example, a guest might want *jalapeno peppers*
on a sandwich, *extra* rice, or the
*large* size of a drink. Or they might want to have the
salad dressing provided on the side instead of on the salad.

#### Applying modifiers and pre-modifiers

To specify the custom details for a menu item selection, you add
modifiers and pre-modifiers.

A modifier is a type of menu item that is configured as an optional
component of another menu item. For example, sugar might be a modifier for a
coffee menu item. For items that use size pricing, size is a modifier
group.

A pre-modifier applies a text string to a modifier. It is typically
displayed before the modifier name on a Toast POS device display and in a
modifier description. For example, `NO` and `EXTRA`
might be pre-modifiers for the sugar modifier.

In the orders API, to include the modifiers and pre-modifiers for a
menu item selection, you add a `modifiers` value to the menu
item's `Selection` object.

##### Structure of a modifiers entry

The `modifiers` value is an array of objects. Each object
in `modifiers` defines the details of a modifier to add to the
menu item selection.

Each modifier object contains:

`optionGroup`
:   Contains the GUID of the modifier's parent modifier
    group.

    For example, for a salad menu item, a parent modifier group
    might be the available salad dressings.

`item`
:   Contains the GUID of the specific modifier.

    For example, in the salad dressings modifier group, a modifier
    might be the balsamic vinaigrette dressing.

`quantity`
:   The quantity for the modifier.

    The quantity must match the quantity of the menu item
    selection. See [Requirements for modifier quantities](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#requirementsforModifierQuantities).

`preModifier` (optional)
:   Contains the GUID of the pre-modifier, if one is
    applied.

`modifiers` (optional)
:   An array of modifier objects that represent any nested
    modifiers for this modifier.

    A nested modifier further refines the modifier. For example, a
    Steak menu item has a Sides modifier group. The Sides modifier group
    contains a Salad modifier. The Salad modifier contains a nested
    modifier group called Salad Dressing that has Ranch and Balsamic
    Vinaigrette modifiers.

    Modifiers can be nested an arbitrary number of levels
    deep.

To get the GUID identifiers for modifier groups, modifiers, and
pre-modifiers, use the menus API. For more information, see the [menus API
reference documentation](https://doc.toasttab.com/openapi/menus/overview/).

The following example message body for an order shows a modifier and
a pre-modifier for a menu item selection.

```
{
  "entityType": "Order",

    [contents omitted]

  "checks": [
    {
      [contents omitted]
      "selections": [
        {
          "itemGroup": {
            "guid": "4c842ed6-ae99-425a-a343-390ab0e081d3",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
          },
          "item": {
            "guid": "28dc4d65-e84b-44f0-8b73-0a721d5a9b88"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          },
          "quantity": 1,
          "modifiers": [
            {
              "optionGroup": {
                "guid": "d0bf5394-adff-428d-8a6b-bcb848c8b16d"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
              },
              "item": {
                "guid": "ed4d3bfc-ad0c-46e7-afdf-1fb48ff91edd"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
              },
              "quantity": 1,
              "preModifier": {![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
                "guid": "6311f315-3df8-48ed-bbc3-bd924cb90d55"![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
              },
              "modifiers": []
            }
          ]
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e7033FC4C568-0F57-4B5C-8AAB-DDDDF0D89BC7) | The GUID of the menu group for this menu item selection. For example, this menu group might contain salads. |
| [2](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e7053FC4C568-0F57-4B5C-8AAB-DDDDF0D89BC7) | The GUID of the menu item for this menu item selection. For example, this menu item might be a garden salad. |
| [3](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e7073FC4C568-0F57-4B5C-8AAB-DDDDF0D89BC7) | The GUID of the modifier group for this item selection. For example, this modifier group might contain salad dressings. |
| [4](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e7093FC4C568-0F57-4B5C-8AAB-DDDDF0D89BC7) | The GUID of the modifier for this item selection. For example, this modifier might be the balsamic vinaigrette dressing. |
| [5](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e7113FC4C568-0F57-4B5C-8AAB-DDDDF0D89BC7) | To specify a pre-modifier for a modifier, add the `preModifier` value to the modifier. |
| [6](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e7143FC4C568-0F57-4B5C-8AAB-DDDDF0D89BC7) | The GUID of the pre-modifier for this modifier. For example, the pre-modifier might be `NO` or `EXTRA`. |

##### Requirements for modifier quantities

The orders API requires that the quantity of a modifier is equal to
the quantity of the menu item selection.

You specify the menu item selection quantity in the
`quantity` value of the `Selection` object of the
check. You specify the modifier quantity in the `quantity`
value of the `Selection` object in the `modifiers`
value.

For example, a menu item selection is for two cheeseburgers
(`"quantity": 2`). If you add a bacon modifier to that menu
item selection, the `quantity` for the bacon modifier also must
be `2`.

If different instances of the same item require a different set of
modifiers, then you must add those items to the check as separate
`Selection` objects. For example, to order one cheeseburger
with bacon, and one cheeseburger without bacon, you add two
`Selection` objects to the check. Each `Selection`
object is for a single cheeseburger (`"quantity": 1`). You then
add a bacon modifier with `"quantity": 1` to one of those
`Selection` objects.

The orders API rejects orders that have mismatching menu item
selection and modifier quantities. For example, if a check contains a menu
item selection with `"quantity": 1` and a modifier with
`"quantity": 2`, the Toast platform rejects the order. If the
menu item selection `quantity` is `3`, but the
modifier `quantity` is only `2`, the Toast platform
rejects the order.

###### Example of matching item and modifier quantities

The following excerpt from an `Order` object shows a
menu item selection for five slices of Key Lime Pie. The Whipped Cream
modifier is added to all of the slices.

```
{
  "entityType": "Order",
      [contents omitted]
"checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "guid": "f3c11a7a-91c6-4691-8a9f-c0b7a2c64266",
          "entityType": "MenuItemSelection",
          "displayName": "Key Lime Pie",
          "itemGroup": {
            "guid": "c9f51ce7-d8cb-4cdb-bbd5-42c9a5f4a9df",
            "entityType": "MenuGroup"
          },
          "item": {
            "guid": "944f6176-0b3d-432c-ab03-5665a5ab3c5c", ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
            "entityType": "MenuItem"
          },
          "quantity": 5.0, ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          "modifiers": [ 
            { ![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
              "guid": "9d5616d0-f697-48bc-9f15-bcbca6bfb495",
              "entityType": "MenuItemSelection",
              "optionGroup": {
                "guid": "7d1bdd86-0c3e-48c5-936c-c28a6ff48345",
                "entityType": "MenuOptionGroup",
                "externalId": null
              },
              "displayName": "Whipped Cream",
              "item": {
                "guid": "b2755b69-2c99-4214-b74e-6b6a1467501f",
                "entityType": "MenuItem",
                "externalId": null
              },
              "quantity": 5.0 ![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
            }
          ]
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#nested_modifier_example2-1-co) | GUID of the menu item. For example, the menu item Key Lime Pie. |
| [2](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#nested_modifier_example2-2-co) | Quantity of the menu item. For example, five Key Lime Pies. |
| [3](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#nested_modifier_example2-3-co) | Modifier, specified in the `modifiers` array. For example, Whipped Cream. |
| [4](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#nested_modifier_example2-4-co) | Quantity of the modifier. For example, five Whipped Creams (one whipped cream per pie). |

##### Using nested modifier groups sourced from menu groups

You must include specific identifiers when a modifier meets the
following conditions:

* The modifier is nested (it exists inside a parent modifier's
  modifiers array).
* The parent modifier's modifier options are sourced from a
  reused menu group. For example, the modifier options for a side
  salad modifier might be sourced from a Salads menu group. For more
  information about reusing menu groups, see [Adding modifier groups and modifiers](https://doc.toasttab.com/doc/platformguide/adminAddingModifierGroupsAndModifiers.html).

Required fields for parent modifiersÂ

The following list describes the fields to include in the parent
modifier's `Selection` object in your orders API request.

* `itemGroup`: The GUID of the reused menu group
  this parent menu item belongs to. This ensures the Toast platform
  correctly links the selection to its original menu
  configuration.
* `optionGroup`: The GUID of the parent modifier
  option group.
* `item`: The GUID of the specific parent modifier
  selection.
* `quantity`: The amount chosen for this modifier
  option.

Required fields for nested modifiersÂ

The following list describes the fields to include in the nested
modifier's `Selection` object of your orders API
request.

* `optionGroup`: The GUID of the nested modifier
  option group.
* `item`: The GUID of the specific nested modifier
  selection.
* `quantity`: The amount chosen for this modifier
  option.

###### Example nested modifier from a reused menu group

The example below shows the correct modifier structure for an
orders API POST request.

```
{
  "entityType": "Order",
  "diningOption": {
    "guid": "18855a26-40d4-4a8f-b484-c6af211dd597",
    "entityType": "DiningOption"
  },
  "checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "entityType": "MenuItemSelection",
          "itemGroup": {
            "guid": "8b4f2555-8482-406f-a1dd-82c5afd718a8",
            "entityType": "MenuGroup"
          },
          "item": {
            "entityType": "MenuItem",
            "guid": "96edc6ab-3992-4665-a3d0-c5a9fffd81b7"
          },
          "quantity": 1,
          "modifiers": [
            {
              "optionGroup": {
                "guid": "a83a38b2-178a-4b31-b45f-e011f00faf6f" ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              },
              "itemGroup": {
                "guid": "8b4f2555-8482-406f-a1dd-82c5afd718a8",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                "entityType": "MenuGroup"
              },
              "item": {
                "guid": "70afec63-1919-4fe1-8c2d-3dfaa232c406"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
              },
              "quantity": 1,
              "modifiers": [
                {
                  "optionGroup": {
                    "guid": "6c677a8a-a858-43fd-b7f0-a404310c0e12"
                  },
                  "item": {
                    "guid": "d6ecdcb2-3a9f-4dcf-8034-900e34306271"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                  },
                  "quantity": 1,
                  "modifiers": []
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-nested-mod-optionGroup-guid) | The GUID for the specific modifier group that controls the rules, choices, and pricing for the modifier being selected. |
| [2](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-nested-mod-itemgroup-guid) | The GUID for the menu group that contains the modifier item being selected. This identifies the group of options for example, Sauces, or Sides, that the modifier item belongs to. |
| [3](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-nested-mod-parent-item) | The GUID for the specific menu item selection that is chosen as the parent-level modifier. This identifies the modifier choice itself for example, Add Extra Cheese. |
| [4](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-nested-mod-child-item) | The GUID for the specific menu item selection chosen as a nested modifier. This is used when a modifier item itself has additional, secondary options applied to it for example, specifying well done for a side steak's temperature modifier. |

##### Adding the same modifier multiple times to a menu item selection

You can add the same modifier to a menu item selection multiple
times, as long as each instance of the modifier has the same quantity as
the menu item selection. This tells the restaurant to add the modifier to
the item more than once. For example, if a guest wants double the cheese
on a pizza, you can add the cheese modifier twice.

The following JSON body example adds whipped cream twice to a slice
of cherry pie in an order:

```
{
  "entityType": "Order",
   ...

"checks": [
    {
      "entityType": "Check",
      "selections": [
        {
          "guid": "0d167434-07a8-444e-adeb-864eacbfe35f",
          "entityType": "MenuItemSelection",
          "displayName": "Cherry Pie",
          "itemGroup": {
            "guid": "c9f51ce7-d8cb-4cdb-bbd5-42c9a5f4a9df",
            "entityType": "MenuGroup"
          },
          "item": {
            "guid": "78727790-fcaa-4acd-adcd-7e12d5e67823", ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
            "entityType": "MenuItem"
          },
          "quantity": 1.0, ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          "modifiers": [ 
            { ![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
              "guid": "29122a58-8c1f-4325-be79-0134641dce02",
              "entityType": "MenuItemSelection",
              "optionGroup": {
                "guid": "e957363b-b398-46be-a4e9-0f9fdb8edaf3",
                "entityType": "MenuOptionGroup",
                "externalId": null
              },
              "displayName": "Whipped Cream",
              "item": {
                "guid": "b2755b69-2c99-4214-b74e-6b6a1467501f",
                "entityType": "MenuItem"
              },
              "quantity": 1.0 ![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
            },
            { ![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
              "guid": "29122a58-8c1f-4325-be79-0134641dce02",
              "entityType": "MenuItemSelection",
              "optionGroup": {
                "guid": "e957363b-b398-46be-a4e9-0f9fdb8edaf3",
                "entityType": "MenuOptionGroup"
              },
              "displayName": "Whipped Cream",
              "item": {
                "guid": "b2755b69-2c99-4214-b74e-6b6a1467501f",
                "entityType": "MenuItem"
              },
              "quantity": 1.0
            }
          ]
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#modifier_quantity_example1-1-co) | GUID of the menu item. For example, Cherry Pie. |
| [2](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#modifier_quantity_example1-2-co) | Quantity of the menu item. For example, one Cherry Pie. |
| [3](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#modifier_quantity_example1-3-co) | First modifier, specified in the `modifiers` array. For example, the first Whipped Cream. |
| [4](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#modifier_quantity_example1-4-co) | Quantity of the modifier. For example, one Whipped Cream. |
| [5](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#modifier_quantity_example1-5-co) | Another modifier with a quantity of one, specified in the `modifiers` array. For example, the second Whipped Cream. |

##### Including default modifiers

A menu item can be configured with default modifiers. For example, a
turkey sandwich menu item by default has lettuce and tomato
modifiers.

When you use a Toast POS device to place an order, the Toast
platform automatically adds the default modifiers on the selected menu
items.

When you use the orders API to order an item that has default
modifiers, default modifiers are not added automatically. You must include
all of the default modifiers in the `modifiers` value for the
item. If you omit a default modifier when you use the orders API, the
Toast platform removes that modifier from the item. This means that if a
guest requests that you remove a default modifier, then to satisfy the
request, you can omit that modifier from the order JSON.

For example, for a pineapple and jalapeno pizza menu item, the
default modifiers are cheese, pineapple, and jalapenos. To use the orders
API to order the pineapple and jalapeno pizza, you must include all of
those default modifiers in the `modifiers` value for the item.
If a guest requests the pizza without jalapenos, you include only the
cheese and pineapple modifiers. The Toast platform then specifies that the
pizza should not have jalapenos.

##### Applying modifiers to menu item portions

You can configure portions for menu items. For example, a pizza menu
item might be divided into portions named "half one" and "half two." You
can then apply different modifiers to each portion. For information on
menu portions, see [Portions overview](https://doc.toasttab.com/doc/platformguide/adminPortionsOverview.html).

When you create an order in the orders API, to add portions and
modifiers for those portions:

1. Add each portion as a modifier of a menu item selection.
2. For each portion modifier, set `selectionType` to
   `PORTION`.
3. Apply modifiers to each portion.

To retrieve the GUIDs for the portions, use the [menus
API](https://doc.toasttab.com/openapi/menus/overview/).

The following example order JSON applies modifiers to portions of a
menu item selection.

```
{
  "entityType": "Order",
  "diningOption": {
    [contents omitted]
  },
  "checks": [
    {
      "customer": {
          [contents omitted]
      },
      "selections": [
        {
          "itemGroup": {
            "guid": "9a861b29-58ee-4c1c-9e23-9cac3a1132d4",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
          },
          "item": {
            "guid": "025006c3-acdc-4d09-be94-faffde4ce3b7"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
          },
          "quantity": 1,
          "modifiers": [![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
            {
              "item": {
                "guid": "1e12608c-0875-4951-8570-cbc52e1180e6",![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
              },
              "quantity": 1,
              "selectionType": "PORTION",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
              "modifiers": [![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
                {
                  "optionGroup": {
                    "guid": "669c7b5e-d0d8-49ef-af2d-f71ff3aa4ef3",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
                  },
                  "item": {
                    "guid": "10e66af7-85aa-4865-9ad0-bcf9d95f44c4",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
                  },
                  "quantity": 1
                }
              ]
            },
            {
              "item": {
                "guid": "5f1257ac-00a1-43d1-8ad5-c9649629f651",![9](https://doc.toasttab.com/doc/devguide/assets/images/callouts/9.png)
              },
              "quantity": 1,
              "selectionType": "PORTION",![10](https://doc.toasttab.com/doc/devguide/assets/images/callouts/10.png)
              "modifiers": [![11](https://doc.toasttab.com/doc/devguide/assets/images/callouts/11.png)
                {
                  "optionGroup": {
                    "guid": "669c7b5e-d0d8-49ef-af2d-f71ff3aa4ef3",
                  "item": {
                    "guid": "4ca5f20e-2330-4a20-88dd-882dfdb8193f"
                  },
                  "quantity": 1
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1109D6B515F8-3D74-448A-9642-BF572CBAA71C) | The GUID of the menu group for this item selection. For example, this menu group might be "pizzas." |
| [2](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1111D6B515F8-3D74-448A-9642-BF572CBAA71C) | The GUID of the menu item for this item selection. For example, this menu item might be "cheese pizza." |
| [3](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1113D6B515F8-3D74-448A-9642-BF572CBAA71C) | Apply portions to the menu item selection in the `modifiers` value for that item. |
| [4](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1115D6B515F8-3D74-448A-9642-BF572CBAA71C) | The GUID of one of the portions configured for this menu item. For example, this portion might be "half1." |
| [5](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#coSelectionTypePortion) | Include a `selectionType` value and include the value `PORTION`. |
| [6](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1117D6B515F8-3D74-448A-9642-BF572CBAA71C) | Apply modifiers to a portion in the `modifiers` value for that portion. |
| [8](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1120D6B515F8-3D74-448A-9642-BF572CBAA71C) | The GUID of the modifier group for this item selection. For example, this modifier group might be "pizza toppings." |
| [7](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1122D6B515F8-3D74-448A-9642-BF572CBAA71C) | The GUID of the modifier for this item selection. For example, this modifier might be "mushrooms." |
| [9](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1124D6B515F8-3D74-448A-9642-BF572CBAA71C) | The GUID of another portion configured for this menu item. For example, this portion might be "half2." |
| [10](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#coSelectionTypePortion2) | Include a `selectionType` value and include the value `PORTION`. |
| [11](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e1126D6B515F8-3D74-448A-9642-BF572CBAA71C) | Apply modifiers to a portion in the `modifiers` value for that portion. |

#### Special requests and instructions

When you create an order in the orders API, you can specify special
requests and instructions for the menu item selections. For example, when
they order a salad, a guest might request that salad dressing is packaged on
the side, instead of mixed in.

Special requests appear with the item name in the order description in
the Toast platform and printed order tickets. Restaurant employees can see
the requests when they prepare the items for an order.

##### How to add a special request to a menu item selection

To add a special request to a menu item selection, in the
`modifiers` object, add an object with the request
message.

In the object for the special request:

* Set the `selectionType` value to
  `SPECIAL_REQUEST`.
* In the `displayName` value, provide the request
  message. You can enter up to 1000 characters.

|  |
| --- |
| Important |
| To display special requests on your restaurant's KDS, add them to the `modifiers` object. Special requests added to objects other than `modifiers` will not show on the KDS. |

##### Example of adding a special request to a menu item selection

The following example JSON message body for a
`POST` request to the orders API includes a special
request for a menu item selection.

```
{
  "entityType": "Order",
      [contents omitted]
  },
  "checks": [
    {
      "selections": [
        {
            [contents omitted]
          "item": {
            "guid": "a8b4439d-185d-41df-8ad3-2ff4f7dfa6ec"
          },
          "modifiers": [![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
            {
              "selectionType": "SPECIAL_REQUEST"![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
              "displayName": "Put the salad dressing on the side, not mixed in.",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
            }
          ]
        }
      ]
    [contents omitted]
  ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e121793B42929-C18C-4AE5-98EB-4E7D465F2377) | Include special requests in the array of modifiers for a menu item selection. |
| [2](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e122193B42929-C18C-4AE5-98EB-4E7D465F2377) | Set the `selectionType` value to `SPECIAL_REQUEST`. |
| [3](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html#co-d1e121993B42929-C18C-4AE5-98EB-4E7D465F2377) | In the `displayName` value, enter the request message. |


---

# Updating delivery information for an order - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html

### Updating delivery information for an order

|  |
| --- |
| Important |
| To use the `/deliveryInfo` endpoint, you'll need access to the `orders.delivery_info:write` scope. For more information about API client scopes, and how to get access to them, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |

You can use the orders API to modify the following delivery
information:

| Value | Description |
| --- | --- |
| `deliveredDate` | The date and time when the delivery employee indicated the order was delivered expressed in ISO 8601 format. |
| `dispatchedDate` | The date and time when the delivery employee indicated the order was dispatched expressed in ISO 8601 format. |
| `deliveryState` | The status of the delivery order. The available values for `deliveryState` are:  * `PENDING`: The delivery order has not been   dispatched. Corresponds to the Unassigned   tab for deliveries on the Toast POS app. * `PICKED_UP`: The delivery employee has picked   up the order from the restaurant. * `IN_PROGRESS`: The order is on its way to the   destination. Corresponds to the En Route   tab for deliveries on the Toast POS app. * `DELIVERED`: The order was delivered.   Corresponds to the Delivered tab for   deliveries on the Toast POS app. |
| `deliveryEmployee` | An object that contains the Toast platform GUID of the employee assigned as the delivery driver. |
| `notes` | Delivery notes provided by the guest who placed the order.  |  | | --- | | Important | | Writing to this field overwrites the guestâs original notes and may result in the loss of important order information. Do not replace or remove the guest's notes. | |

|  |
| --- |
| Note |
| The delivery location values (for example, street address and city) cannot be updated. |

#### How to update the delivery information

To update delivery information, you send a
`PATCH` request to the
`/orders/{orderGuid}/deliveryInfo`
endpoint of the orders API. The request must include a JSON
`DeliveryInfo` object that provides the updated values.

For more information about the endpoint used in this process, see
the [/deliveryInfo
reference guide.](https://doc.toasttab.com/openapi/orders/operation/ordersOrderGuidDeliveryInfoPatch/)

**To update the delivery information for an existing order**

1. Locate the Toast platform GUID for the order you are updating.
   For more information on locating an order GUID see [Finding an order or check
   GUID](https://doc.toasttab.com/doc/devguide/apiOrdersFindingAnOrderGuid.html).
2. If you plan to update an order's `deliveryEmployee`
   field, locate the Toast platform GUID of the employee to assign as the
   delivery driver. For information on retrieving employee details, see
   [Getting all employees of a restaurant](https://doc.toasttab.com/doc/devguide/api_get_all_employees.html).
3. Create a JSON `DeliveryInfo` object that contains the
   delivery information you want to update. For the list of values you
   can modify see [Delivery values](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#apiDeliveryInfoValues).

   The delivery location values (for example, street address and
   city) cannot be updated.

   For an example `DeliveryInfo` object, see [Example DeliveryInfo object](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#apiExampleDeliveryInfoObject).
4. Send a `PATCH` request to the
   `/orders/{orderGuid}/deliveryInfo`
   endpoint of the orders API.

   In the `PATCH` path, include the Toast
   platform GUID of the order.

   In the body of the request, include the
   `DeliveryInfo` object with the delivery information you
   want to update.
5. Examine the response data you receive from the orders API.
   Verify your request is processed successfully with a 200 HTTP code
   response.

   The response contains the full `Order` object. For an
   example, see [this
   response](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#apiExampleResponseDataWhenUpdatingDeliveryInfoForAnOrder).

|  |
| --- |
| Note |
| Once an order's `deliveryState` is `DELIVERED`, updates are no longer allowed. |

#### Example DeliveryInfo object

The following example shows the `DeliveryInfo` object for
updating delivery information for an order. For definitions of the values
below, see [Delivery values](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#apiDeliveryInfoValues).

```
{
  "deliveredDate": "2021-09-14T17:57:42.263+0000",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "dispatchedDate": "2021-09-14T17:57:42.263+0000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
  "deliveryState": "DELIVERED",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
  "deliveryEmployee": {
    "guid": "e10f2ae0-9690-4ab2-86fe-fa6603d708d0"![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
  },
    "notes": "Leave order at door."![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#co-d1e2925533E9A4-9140-47FA-BA5E-B39FCEBDF6B0) | The date and time when the delivery employee indicated the order was delivered. |
| [2](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#co-d1e2945533E9A4-9140-47FA-BA5E-B39FCEBDF6B0) | The date and time the restaurant indicated the order was available for delivery and was assigned to a delivery employee. |
| [3](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#co-d1e2965533E9A4-9140-47FA-BA5E-B39FCEBDF6B0) | The state of a delivery order. The possible values are `PENDING`, `IN_PROGRESS`, `PICKED_UP`, or `DELIVERED`. |
| [4](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#co-d1e2985533E9A4-9140-47FA-BA5E-B39FCEBDF6B0) | The Toast platform GUID of the delivery employee at the restaurant. |
| [5](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#co-d1e2085533E9A4-9140-47FA-BA5E-B39FCEBDF6B0) | The delivery notes for the order. For more information, see [notes](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#apiDeliveryInfoValues). |

#### Example response when updating delivery information

The following example shows the response for a `PATCH`
request to the
`/orders/{orderGuid}/deliveryInfo`
endpoint of the orders API.

```
{
  "guid": "d16ceaeb-d8a3-4d47-82db-0199d37c0713",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",
 
 [contents omitted]

  "deliveryInfo": {![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "address1": "401 Park Drive",
    "address2": "Suite 801",
    "city": "Boston",
    "state": "MA",
    "zipCode": "02215",
    "latitude": 42.3446671,
    "longitude": -71.1023575,
    "notes": "Leave order at door.",
    "deliveredDate": "2021-09-14T17:57:42.263+0000",
    "dispatchedDate": "2021-09-14T17:57:42.263+0000",
    "deliveryEmployee": {
      "guid": "e10f2ae0-9690-4ab2-86fe-fa6603d708d0",
      "entityType": "RestaurantUser",
      "externalId": null
    },
    "deliveryState": "DELIVERED"
  },

  [contents omitted]

  "diningOption": {
    "guid": "f6cd5b58-27d7-462a-922f-7f919a6f9137",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "entityType": "DiningOption",
    "externalId": null
  },
 
  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#co-d1e2255533E9A4-9140-47FA-BA5E-B39FCEBDF6B0) | The Toast platform GUID assigned to this order. |
| [2](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#co-d1e2275533E9A4-9140-47FA-BA5E-B39FCEBDF6B0) | Information about the delivery, including address information and any values you updated. |
| [3](https://doc.toasttab.com/doc/devguide/apiUpdatingDeliveryInfoForAnOrder.html#co-d1e2385533E9A4-9140-47FA-BA5E-B39FCEBDF6B0) | The Toast platform GUID of the dining option for this order. For delivery orders, the dining option must have `behavior` set to `DELIVERY`. |

#### Viewing the delivery information in the Toast POS application

The following image shows an order on the
Unassigned tab of the Delivery
screen on a Toast POS device.

![The Delivery screen with the Unassigned tab emphasized.](https://doc.toasttab.com/doc/media/api-orders-view-unassigned-delivery-order.png)

The following image shows the order on the
Delivered tab after a `PATCH` request
changed the order status to `DELIVERED` and added a delivery
employee.

![The Delivery screen with the Delivered tab emphasized.](https://doc.toasttab.com/doc/media/api-orders-view-delivered-delivery-order.png)


---

# Updating the tip amount for a payment - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html

### Updating the tip amount for a payment

|  |
| --- |
| Important |
| To use the `/orders` endpoint to update a tip, you need access to the `orders.payments:write` scope. For more information about API client scopes, and how to get access to them, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html). |

You can use the orders API to update a tip, or gratuity, amount in an
existing credit card payment for an order.

You can only update the tip on credit card payments that are not yet
captured or payments using an alternative payment type.

The `paymentStatus` for credit card payments must be
`AUTHORIZED`. Capturing a payment begins the process of settling
that payment with credit card providers. Credit card payments are usually
captured at the end of the business day for a restaurant.

#### How to update the tip amount

To update a tip amount, you send a `PATCH`
request to the
`/orders/{orderGuid}/checks/{checkGuid}/payments/{paymentGuid}`
endpoint of the Toast orders API. You include a `Payment` JSON
object with an updated `tipAmount` value. The `type`
of the updated payment must be `CREDIT` or `OTHER`.
For credit card payments, the `paymentStatus` on the updated
payment must be `AUTHORIZED.`

For more information, see [Update
a tip amount](https://doc.toasttab.com/openapi/orders/operation/ordersOrderGuidChecksCheckGuidPaymentsPaymentGuidPatch/) in the API reference.

**To update the tip amount for an existing payment**

1. Find the Toast platform GUIDs of the order, the check, and the
   payment you are updating. For more information on locating order and
   check GUIDs, see [Finding an order or check
   guid](https://doc.toasttab.com/doc/devguide/apiOrdersFindingAnOrderGuid.html).

   * The response from the `POST` request to create an
     order contains the order, check, and payment GUIDs.
   * If you know the order GUID, you can send a `GET`
     request to get the order details, which include the check and
     payment GUIDs. See [Getting detailed information about one order](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html).
   * If you do not know the order GUID, you can send a
     `GET` request to get the details for orders that were
     updated during a specific time interval. See [Getting detailed information about multiple orders](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutMultipleOrders.html). The
     order details include the order, check, and payment GUIDs.
2. Create a JSON `Payment` object that includes a
   `tipAmount` value. Set the `tipAmount` value to
   the updated tip amount. For an example, see [Example Payment object that updates the tip amount for an existing
   payment](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html#apiExamplePaymentObjectForUpdatingATipAmount).

   For this type of request, you can only include the
   `tipAmount` value. The provided `tipAmount`
   value completely replaces any previous tip amount on the
   payment.
3. Send a `PATCH` request to the
   `/orders/{orderGuid}/checks/{checkGuid}/payments/{paymentGuid}`
   endpoint of the orders API.

   In the REST request path parameters, include the Toast platform
   GUID of the order, the check, and the payment.

   In the request message body, include the `Payment`
   object that contains the updated `tipAmount` value.
4. Examine the response that you receive from the orders API.
   Verify that your request is processed successfully. For an example,
   see [Example response when you update a tip in an existing
   payment](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html#apiExampleResponseDataWhenUpdatingATipAmount).

#### Example Payment object that updates the tip amount for an existing payment

The following example shows a `Payment` object that
updates the tip amount for an existing payment.

```
{
  "tipAmount": 10.00![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html#co-d1e186EB255FF4-7C0A-4389-9FB2-1A07C4E80AD5) | The updated tip amount. The tip amount for the payment is completely replaced by the `tipAmount` value that you include in the message body of the `PATCH` request. |

#### Example response when you update a tip in an existing payment

The following example shows a response for a `PATCH`
request to the
`/orders/{orderGuid}/checks/{checkGuid}/payments/{paymentGuid}`
endpoint of the orders API.

```
{
  "guid": "99e42b9c-2f45-4b01-ab90-de4169f6dd29",![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "guid": "b7dba08f-db0c-4db3-8ce8-ef25aa0cc492",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "entityType": "Check",

      [contents omitted]

      "payments": [
        {
          "guid": "b7372d29-09fd-46bc-b95e-3c1ab4e77fae",![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          "entityType": "OrderPayment",
          "externalId": null,
          "originalProcessingFee": null,
          "amount": 50.12,
          "tipAmount": 10.00,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          "amountTendered": null,
          "cashDrawer": null,
          "cardType": "VISA",
          "lastModifiedDevice": {
            "id": null
          },
          "refundStatus": "NONE",
          "houseAccount": null,
          "type": "CREDIT",
          "voidInfo": null,
          "otherPayment": null,
          "mcaRepaymentAmount": null,
          "createdDevice": {
            "id": null
          },
          "paidDate": "2021-12-22T14:43:04.036+0000",
          "cardEntryMode": null,
          "paymentStatus": "AUTHORIZED",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
          "paidBusinessDate": 20211222,
          "last4Digits": "1111",
          "refund": null
        }
      ],

      [contents omitted]

    }
  ],

  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html#co-d1e214EB255FF4-7C0A-4389-9FB2-1A07C4E80AD5) | The Toast platform GUID of the order that you updated a tip amount in. |
| [2](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html#co-d1e216EB255FF4-7C0A-4389-9FB2-1A07C4E80AD5) | The Toast platform GUID of the check that you updated a tip amount in. |
| [3](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html#co-d1e220EB255FF4-7C0A-4389-9FB2-1A07C4E80AD5) | The Toast platform GUID of the payment that you updated a tip amount in. |
| [4](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html#co-d1e222EB255FF4-7C0A-4389-9FB2-1A07C4E80AD5) | The updated tip amount. The `tipAmount` value that you provide in the `PATCH` request completely replaces the existing tip amount for the payment. |
| [5](https://doc.toasttab.com/doc/devguide/apiUpdatingTipsInAPayment.html#co-paymentStatus) | When you update a tip amount, the `paymentStatus` value must be `AUTHORIZED`. |


---

# Using multi-location IDs in orders - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html

### Using multi-location IDs in orders

When you use the orders API to post an order, you must identify the
menu groups, menu items, modifier groups, and modifiers that are included in
the order.

To do this, you can provide either:

* The unique `guid` assigned to each menu entity. You can
  see examples of that in [Order details based on the order dining option](https://doc.toasttab.com/doc/devguide/apiOrderTypeDetails.html) and [Specifying modifiers and instructions for menu item
  selections](https://doc.toasttab.com/doc/devguide/apiSpecifyingModifiersAndInstructions.html).
* The `multilocationId` for each menu entity. This is the
  recommended option, especially for restaurants that use the
  multi-location management module (previously known as the "[enterprise
  module](https://doc.toasttab.com/doc/platformguide/sharingMenusAndOtherInformationAmongRestaurants.html)").

For information about `guid` and
`multilocationId` values and using them in API requests, see
[Toast identifiers](https://doc.toasttab.com/doc/devguide/portalToastIdentifiers.html).

Note that for each menu entity, you must submit either a
`guid` OR a `multiLocationId`. You cannot submit both
identifiers. When you submit both types of identifier for a menu entity, the
order submission fails.

You can submit `guid` values for some menu entities and
`multiLocationId` values for others. You cannot submit both a
`guid` and a `multiLocationId` for the *same
menu entity*.

#### Example orders API request with multilocationIds

The following example shows a request to the `/orders`
endpoint that uses `multiLocationId` values.

```
{ ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "diningOption": {
        "guid": "03e8796d-6eeb-460c-83fe-376766003059",
    },
    "checks": [
        {
            "selections": [
                {
                    "itemGroup": { ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
                        "multiLocationId": "500000008202847047",
                    },
                    "item": { ![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
                        "multiLocationId": "500000008202871058"
                    },
                    "quantity": 1,
                    "modifiers": [
                        {
                            "optionGroup": { ![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
                                "multiLocationId": "500000000111604139"
                            },
                            "item": { ![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
                                "multiLocationId": "500000000106492270"
                            },
                            "quantity": 1
                        },
                        {
                            "optionGroup": {
                                "multiLocationId": "500000000106491932"
                            },
                            "item": {
                                "multiLocationId": "500000000099996428"
                            },
                            "quantity": 1
                        }
                    ]
                }
            ],
            "customer": { ![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
                "entityType": "Customer",
                "firstName": "Jack",
                "lastName": "Jones",
                "phone": "333-555-5555",
                "email": "jack@example.com"
            }
        }
    ]
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e1951635951163) | The `Order` object that defines the order being submitted. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e1971635951163) | The parent menu group for a menu item to submit in this order. For example, Salads. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e1991635951163) | The menu item included in this order. For example, Dinner Salad. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e2011635951163) | A modifier group for the Dinner Salad menu item. For example, Salad Dressing. |
| [5](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e2031635951163) | A modifier for the Dinner Salad menu item. For example, Balsamic Vinaigrette. |
| [6](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e2061635951163) | The guest who is placing the order. |

#### Example Order object with both identifiers in an orders API response

Responses to requests sent to the `/orders/{GUID}` and
`/ordersBulk` endpoints contain both the
`multiLocationId` and `guid` for all
`item`, `itemGroup`, and `optionGroup`
objects in an order.

The following example response shows how both identifiers are
provided for each menu entity.

```
{
  "guid": "2071fb81-988b-4d75-b8dc-c5c17cff9706",
  "entityType": "Order",

  [contents omitted]

  "checks": [
    {
      "guid": "e4c1f40d-3247-4b8b-9891-52f445930fa3",
      "entityType": "Check",

      [contents omitted]

      "selections": [
        {
          "guid": "2f91e217-ec31-4659-a7ba-dc66d76a1b5b",
          "entityType": "MenuItemSelection",

          [contents omitted]

          "displayName": "Dinner Salad",
          "modifiers": [
            {
              "guid": "7d850cd0-c014-46f0-bfa6-b1f920c03743",
              "entityType": "MenuItemSelection",

              [contents omitted]

              "optionGroup": {
                "guid": "8a2f952d-4dca-4eb0-b867-445f3a674bad",
                "entityType": "MenuOptionGroup",
                "externalId": null,
                "multiLocationId": "100000000171239701" ![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
              },
              "displayName": "Balsamic Vinaigrette",

              [contents omitted]

              "item": {
                "guid": "e5ccef2d-dc70-4c2d-bddd-d8448dee2e61",
                "entityType": "MenuItem",
                "externalId": null,
                "multiLocationId": "100000000171239909" ![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
              },
              
              [contents omitted]

            },
          ],
          
          [contents omitted]

          "itemGroup": {
            "guid": "c922e206-8512-4d99-a79d-32532eae239f",
            "entityType": "MenuGroup",
            "externalId": null,
            "multiLocationId": "100000000171239911" ![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
          },
          "item": {
            "guid": "50508a61-b561-4a5b-8bbb-7838c045dfab",
            "entityType": "MenuItem",
            "externalId": null,
            "multiLocationId": "100000000437569098" ![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
          },
          
          [contents omitted]

        },
      ],

      [contents omitted]

    },
  ],
  
  [contents omitted]

}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e2731635951163) | The `multiLocationId` for the modifier group. For example, Salad Dressing. |
| [2](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e2791635951163) | The `multiLocationId` for the modifier. For example, Balsamic Vinaigrette. |
| [3](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e2871635951163) | The `multiLocationId` for the menu group. For example, Salads. |
| [4](https://doc.toasttab.com/doc/devguide/apiUsingMultiLocationIdsInOrders.html#co-d1e2891635951163) | The `multiLocationId` for the menu item. For example, Dinner Salad. |


---

# Void an order - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/apiVoidOrder.html

### Void an order

If an order is placed and needs to be canceled, you can use the
`/orders/v2/orders/{orderGuid}/void`
endpoint of the Toast orders API to void the order. For more information
about this endpoint, see the [orders
API reference](https://toastprereleaseorders.redoc.ly/orders/operation/voidOrder/).

You might want to void an order if:

* The order was accidentally placed.
* The order was placed for the wrong location.
* The restaurant guest who placed the order changed their
  mind.

When you void an order, you must also void the order's payment at the
same time. **Once an order has been voided, it can not
be updated.** Even if an order is voided, you can still retrieve
the order with the `/orders/{guid}`
and `/ordersBulk` endpoints of the orders API. For more
information about retrieving an order, see [Getting detailed information about one order](https://doc.toasttab.com/doc/devguide/apiOrdersGetDetailedInfoAboutOneOrder.html).

Voided orders can also be found in the Orders and
Order details reports in Toast Web.

The following sections describe:

* [How to know an order has been voided](https://doc.toasttab.com/doc/devguide/apiVoidOrder.html#apiVoidOrderHowToTellAndOrderHasBeenVoided)
* [Prerequisites to void an order](https://doc.toasttab.com/doc/devguide/apiVoidOrder.html#apiVoidOrderPrereq)
* [Voiding an order with the /void endpoint](https://doc.toasttab.com/doc/devguide/apiVoidOrder.html#apiVoidOrderToVoidAnOrder)
* [Displaying voided orders on a kitchen display system (KDS)](https://doc.toasttab.com/doc/devguide/apiVoidOrder.html#apiVoidOrderKDS)
* [Supported payment types](https://doc.toasttab.com/doc/devguide/apiVoidOrder.html#apiVoidOrderPayments)

#### How to know an order has been voided

Once an order has been voided, you can expect the following updates.

* The order is removed from the Toast POS app after some
  time.
* A new VOIDED ticket is printed for the
  order.
* The following values are updated in the order payload:

  + The order's `guestOrderStatus` value updates
    to `VOIDED`.
  + The order's `voided` value updates to
    `true`.
  + The order's `paymentStatus` value updates to
    `VOIDED`.
  + The `selections` object's `voided`
    value updates to `true`.

#### Prerequisites to void an order

To void an order, ensure the following:

* Your API client must have the `orders.channel:void`
  scope. For more information about scopes, see [Scopes](https://doc.toasttab.com/doc/devguide/apiScopes.html).
* The order was placed using an Other payment
  option and not with a cash or card payment. For more
  information about other payment options, see [Other payment workflows](https://doc.toasttab.com/doc/platformguide/platformPwfTenders.html#platformPwfOther).
* The order is not already voided or deleted.
* The order was not placed using a Toast gift card payment.
* The order is not restricted. For more information about
  restricted orders, see [Working with restricted orders](https://doc.toasttab.com/doc/platformguide/adminViewingRestrictedOrders.html).
* You are using the same `clientId` in your [authentication](https://doc.toasttab.com/doc/devguide/authentication.html) that was used to
  create the original order with the orders API.

#### Voiding an order with the /void endpoint

To void an order, you send a `POST` request
that contains a `JSON Order` object to the `/void`
endpoint of the orders API. Before you void an order, ensure it meets the
[prerequisites](https://doc.toasttab.com/doc/devguide/apiVoidOrder.html#apiVoidOrderPrereq).

The following procedure describes how to void an order.

**To void an order**

1. Create a JSON object to describe the void operation. The JSON
   object is the message body parameter for the void request. The
   following example shows the void request message body contents.

   ```
   {
     "selections": {
       "voidAll": true
     },
     "payments": {
       "voidAll": true
     }
   }
   ```

   |  |
   | --- |
   | Note |
   | Each `voidAll` value must be set to `true`. |
2. Send a `POST` request to the
   `/orders/v2/orders/{order
   GUID}/void` endpoint of the orders API.

   The body of the `POST` request contains
   the `JSON Order` object for the order.
3. The response from the `/void` endpoint indicates
   whether the order was voided successfully.

#### Voiding an order with discounts

You can void an order that has discounts if the order meets all the
[prerequisites](https://doc.toasttab.com/doc/devguide/apiVoidOrder.html#apiVoidOrderPrereq). When you void an
order with discounts, you use the same [API request](https://doc.toasttab.com/doc/devguide/apiVoidOrder.html#apiVoidOrderToVoidAnOrder) that you use to
void an order without discounts.

When you void an order with discounts, all discounts on the check
are voided. All discount types can be voided.

The example response from the orders API below shows a portion of an
order with discounts that have been voided. When a discount is voided, the
`processingState` field of the `appliedDiscounts`
object is set to either `VOID` or `PENDING_VOID` for
discounts requiring external validation, for example, integrated loyalty
programs.

**Example orders API response of a voided order with
discounts**

```
{
  "guid": "f682e0b8-5869-45f8-a1c4-04ccbc077006",
  "entityType": "Order",
  {content omitted}
  "voided": true,
  "voidDate": "2025-09-10T20:46:40.700+0000",
  "voidBusinessDate": 20250910,
  "checks": [
    {
      "voided": true,
      "voidDate": "2025-09-10T20:46:40.700+0000",
      "voidBusinessDate": 20250910,
      "appliedDiscounts": [
        {
          "guid": "a1b2c3d4-e5f6-7890-abcd-ef1234567775",
          "processingState": "VOID",
          "discountAmount": 5,
          "name": "Check-level discount"
        }
      ],
      "selections": [
        {
          "voided": true,
          "voidDate": "2025-09-10T20:46:40.700+0000",
          "voidBusinessDate": 20250910,
          "appliedDiscounts": [
            {
              "guid": "cf5f6416-25f1-4075-b5a5-700ee1d58ccc",
              "processingState": "VOID",
              "discountAmount": 1,
              "name": "Item-level discount"
            }
          ]
        }
      ]
    }
  ]
}
```

#### Displaying voided orders on a kitchen display system (KDS)

If your restaurant uses a kitchen display system (KDS) voided orders
still show on the KDS, but are updated with strikethrough text styling and
the word VOIDED in parenthesis for each voided item
selection. The image below shows an example of this update.

![A voided order updated with strikethrough text.](https://doc.toasttab.com/doc/media/apiVoidOrderVoidedOrder.png)

#### Supported payment types

Currently, the orders API `void` endpoint supports
voiding orders with the following payment types.

* Other payment types.: The
  Other payment is a custom payment type you can
  configure to meet additional needs. For more information about
  Other payment types, see [Other payment workflows](https://doc.toasttab.com/doc/platformguide/platformPwfTenders.html#platformPwfOther).

  If you try to void an order that has a payment type that is not
  an Other payment type, such as cash or card, you
  see the following 400 error response:

  ```
  "status": 400
  "message": "Only OTHER payments may be voided"
  ```


---

# Calculating order wait time - - Developer guide

Source: https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html

### Calculating order wait time

When you use the orders API to create an order, the orders API does
not validate the time when you submit the order. The orders API accepts the
order even if, for example, the restaurant is not currently open, is not
currently accepting online orders, or will close before the order can be
fulfilled.

You can use information from the restaurant configuration to:

* Determine when the restaurant is open and is accepting online
  orders.
* For as soon as possible (ASAP) orders, estimate the amount of time
  that the guest will wait until a delivery order arrives or a takeout
  order is available.
* For scheduled orders, ensure that the `promisedDate`
  that you provide is realistic.

When you use the orders API to create the order, the
`estimatedFulfillmentDate` value in the response indicates when
the order will be fulfilled. The algorithm that the Toast platform uses to
set `estimatedFulfillmentDate` includes the configured restaurant
quotes times, hours, and throttling.

#### Restaurant configuration settings that affect order wait time

A restaurant uses Toast Web or a Toast POS
device to configure the following settings that affect order wait
times:

**Quote times for takeout and delivery**
:   The restaurant sets a default quote time for takeout and
    delivery orders. The quote time indicates how long it usually takes
    to fulfill a takeout or delivery order.

    For example, a takeout order by default might take 25 minutes,
    and a delivery order by default might take one hour.

**Throttling times for takeout and delivery**
:   In response to an unexpected surge in takeout or delivery
    orders, the restaurant can add throttling time to the original quote
    time.

    For example, when the restaurant is busy, takeout orders might
    take an additional 10 minutes. If the default quote time for a
    takeout order is 25 minutes, then the total preparation time is 35
    minutes.

**Restaurant hours of operation**
:   Each restaurant configures the hours when it is open for
    business.

**Restaurant hours for online ordering**
:   Restaurants that use Toast Online Ordering can configure when
    they accept online takeout and delivery orders. These times might be
    different from the restaurant's hours of operation.

    For example, a restaurant is open from 11:00 AM to 9:00 PM.
    However, they only take online delivery orders from 4:00 PM to 8:00
    PM, and online takeout orders from 12:00 PM to 8:00 PM.

#### Retrieving the configured preparation time and hours of operation

To retrieve information about the restaurant configuration,
including the quote times, throttling times, and the restaurant hours of
operation, send a `GET` request to the
`/restaurants/{restaurantGUID}` endpoint of the restaurants
API.

##### Takeout and delivery quote and throttling times

In the response to the `GET` request to the
`/restaurants/{restaurantGUID}/` endpoint, the
`prepTimes` object contains the current quote time and
throttling time configurations.

* The `deliveryPrepTime` and
  `takeoutPrepTime` values contain the delivery and takeout
  quote times.
* The `deliveryThrottlingTime` and
  `takeoutThrottlingTime` values contain the current
  delivery and takeout throttling times.

The following example shows the `prepTimes` object from
the response from a `GET` request to the
`/restaurants/{restaurantGUID}` endpoint of the restaurants
API.

**Example takeout and delivery preparation and throttling time
configuration from the restaurants API**

```
  "prepTimes": {
    "deliveryPrepTime": 60,![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
    "deliveryThrottlingTime": 0,![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
    "takeoutPrepTime": 30,![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    "takeoutThrottlingTime": 0,![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
    "deliveryTimeAfterOpen": 0,![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
    "deliveryTimeBeforeClose": 0,
    "takeoutTimeAfterOpen": 0,
    "takeoutTimeBeforeClose": 0
  }
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e34136459DE-07E9-4B54-81B7-2199831BCEFD) | The amount of time, in minutes, that it takes to prepare and deliver a delivery order. |
| [2](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e49136459DE-07E9-4B54-81B7-2199831BCEFD) | The amount of time, in minutes, that restaurant employees have chosen to delay delivery orders from firing. The throttling time allows restaurant employees to handle a temporary surge in orders. |
| [3](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e40136459DE-07E9-4B54-81B7-2199831BCEFD) | The amount of time, in minutes, that it takes to prepare a takeout order. |
| [4](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e47136459DE-07E9-4B54-81B7-2199831BCEFD) | The amount of time, in minutes, that restaurant employees have chosen to delay takeout orders from firing. The throttling time allows restaurant employees to handle a temporary surge in orders. |
| [5](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e36136459DE-07E9-4B54-81B7-2199831BCEFD) | The `deliveryTimeAfterOpen`, `deliveryTimeBeforeClose`, `takeoutTimeAfterOpen`, and `takeoutTimeBeforeClose` settings are discontinued. They cannot be configured in the Toast platform. In the response from the restaurants API, the values are always `0`. |

##### Restaurant opening and closing times

In the response to the `GET` request to the
`/restaurants/{restaurantGUID}` endpoint of the restaurants
API, the `schedules` value contains information about when
the restaurant is open for business.

The following example shows the `schedules` value with
the opening and closing time values.

**Example of daily opening and closing times in the response from
the restaurants API**

```
"schedules": {
  "daySchedules": {
    "1495000000000023": {![1](https://doc.toasttab.com/doc/devguide/assets/images/callouts/1.png)
      "scheduleName": "Weekdays",
      "services": [
        
        [contents omitted]
      ],
      "openTime": "06:00:00.000",![2](https://doc.toasttab.com/doc/devguide/assets/images/callouts/2.png)
      "closeTime": "02:00:00.000"![3](https://doc.toasttab.com/doc/devguide/assets/images/callouts/3.png)
    },
    "1495000000000024": {![4](https://doc.toasttab.com/doc/devguide/assets/images/callouts/4.png)
      "scheduleName": "Weekends",
      "services": [
        
        [contents omitted]
        
      ],
      "openTime": "11:00:00.000",![5](https://doc.toasttab.com/doc/devguide/assets/images/callouts/5.png)
      "closeTime": "05:00:00.000"![6](https://doc.toasttab.com/doc/devguide/assets/images/callouts/6.png)
    }
  },
  "weekSchedule": {
    "monday": "1495000000000023",![7](https://doc.toasttab.com/doc/devguide/assets/images/callouts/7.png)
    "tuesday": "1495000000000023",
    "wednesday": "1495000000000023",
    "thursday": "1495000000000023",
    "friday": "1495000000000023",
    "saturday": "1495000000000024",![8](https://doc.toasttab.com/doc/devguide/assets/images/callouts/8.png)
    "sunday": "1495000000000024"
  }
}
```

|  |  |
| --- | --- |
| [1](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e11738A7ED93-4BA1-46CE-89EF-D4AB1AFCB058) | The identifier of a one-day schedule configured for a restaurant. Each schedule can then be assigned to one or more days of the week. |
| [2](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e11938A7ED93-4BA1-46CE-89EF-D4AB1AFCB058) | The time that the restaurant opens on days that use this day schedule. Times are expressed in 24-hour format. For days that use this schedule, the restaurant opens at 6:00 AM. |
| [3](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e12138A7ED93-4BA1-46CE-89EF-D4AB1AFCB058) | The time that the restaurant closes on days that use this day schedule. Times are expressed in 24-hour format. For days that use this schedule, the restaurant closes at 2:00 AM. |
| [4](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e12338A7ED93-4BA1-46CE-89EF-D4AB1AFCB058) | The identifier of another one-day schedule configured for a restaurant. |
| [5](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e12538A7ED93-4BA1-46CE-89EF-D4AB1AFCB058) | The time that the restaurant opens on days that use this day schedule. Times are expressed in 24-hour format. For days that use this schedule, the restaurant opens at 11:00 AM. |
| [6](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e12838A7ED93-4BA1-46CE-89EF-D4AB1AFCB058) | The time that the restaurant closes on days that use this day schedule. Times are expressed in 24-hour format. For days that use this schedule, the restaurant closes at 5:00 AM. |
| [7](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e13038A7ED93-4BA1-46CE-89EF-D4AB1AFCB058) | The identifier of the day schedule that is used on this day of the week. The day of the week is determined by the local time zone of the restaurant. |
| [8](https://doc.toasttab.com/doc/devguide/calculatingOrderWaitTime.html#co-d1e13238A7ED93-4BA1-46CE-89EF-D4AB1AFCB058) | The identifier of the day schedule that is used on this day of the week. The day of the week is determined by the local time zone of the restaurant. |

##### Restaurant online ordering hours

Restaurants that use Toast Online Ordering can configure when they
accept online orders. The restaurant can have different hours for online
and takeout orders. They can also configure specific exceptions to those
hours.

To see the current hours for online delivery and takeout orders,
send a `GET` request to the `/orderingSchedule`
endpoint of the order management configuration API.

For more information, see [Getting online ordering schedules](https://doc.toasttab.com/doc/devguide/apiGettingOnlineOrderingSchedules.html).

#### Estimating takeout order wait time

To calculate the estimated takeout order wait time, you add the
amount of time it takes to prepare takeout orders and the amount of time
that restaurant employees have chosen to delay takeout order
firing.

* `takeoutPrepTime` - The time it takes to prepare a
  takeout order.
* `takeoutThrottlingTime` - The time that restaurant
  employees have chosen to delay takeout orders.

For example, if `takeoutPrepTime` is 25 minutes, and
`takeoutThrottlingTime` is 10 minutes, then the total estimated
order wait time is 35 minutes.

If the current time is outside of the restaurant's hours of
operation, then you must include the amount of time until the restaurant
is open. You can use the restaurant `openTime` and
`closeTime` values to determine whether takeout service is
available. For example, if the current time is 10:00 AM, but the
restaurant does not accept open or accept online takeout orders until
12:00 PM, then you need to add two hours to the order wait time.

For a scheduled order, you must also make sure that
`promisedDate` is within the allowed maximum amount of time for
future orders. For example, a restaurant might not accept scheduled orders
for a date that is more than two weeks in the future.

#### Estimating delivery order wait time

To calculate the estimated delivery order wait time, you add the
amount of time it takes to prepare delivery orders and the amount of time
that restaurant employees have chosen to delay delivery order
firing.

* `deliveryPrepTime` - The time it takes to prepare and
  deliver a delivery order.
* `deliveryThrottlingTime` - the time that restaurant
  employees have chosen to delay delivery orders.

For example, if `deliveryPrepTime` is 50 minutes, and
`deliveryThrottlingTime` is 10 minutes, then the total
estimated order wait time is 60 minutes.

If the current time is outside of the restaurant's hours of
operation, then you must include the amount of time until the restaurant
is open. You can use the restaurant `openTime` and
`closeTime` values to determine whether delivery service is
available. For example, if the current time is 10:00 AM, but the
restaurant does not open or accept delivery orders until 12:00 PM, then
you need to add two hours to the order wait time.

For a scheduled order, you must also make sure that
`promisedDate` is within the allowed maximum amount of time for
future orders. For example, a restaurant might not accept scheduled orders
for a date that is more than two weeks in the future.


---

# Untitled

Source: https://doc.toasttab.com/doc/devguide/toast-api-integration-checklist-reservation.csv

Complete?,Area,Task,Additional information
,Configuration Syncing,Retrieve employees from the labor API on a recurring basis.More information: https://doc.toasttab.com/openapi/labor/operation/employeesGet/,"If your reservation functionality assigns reservation orders to specific employees, you need to have up-to-date information about the employees at the restaurant."
,Configuration Syncing,Retrieve restaurant tables from the configuration API on a recurring basis.More information: https://doc.toasttab.com/openapi/configuration/operation/tablesGet/,"If your reservation functionality reserves places at specific tables, you need to have up-to-date information about the tables at the restaurant."
,Configuration Syncing,Retrieve restaurant hours from the restaurants API on a recurring basis.More information: https://doc.toasttab.com/openapi/restaurants/operation/restaurantsRestaurantGuidGet/,Having current information about a restaurant's hours allows you to prevent guests from placing reservations at times when the restaurant is not open.
,Configuration Syncing,Retrieve revenue centers from the configuration API on a recurring basis.More information: https://doc.toasttab.com/openapi/configuration/operation/revenueCentersGet/,Including revenue centers on your orders allow restaurants to choose how to categorize your orders in their revenue reporting.
,Configuration Syncing,Retrieve dining options from the configuration API on a recurring basis.More information: https://doc.toasttab.com/openapi/configuration/operation/diningOptionsGet/,"The dining option governs certain other elements of how an order should be structured.To be accepted by the Toast platform, the order must contain the order dining option."
,Order Placement,Develop the capability to place a reservation order at the reserved table at the reservation time.Assign a revenue center and server to this order if appropriate.More information,"By placing an order at a restaurant table at the time of a reservation, the restaurant can take the reserved party's order more quickly, and you can have a direct linkage between your reservation and its associated order.Consider assigning a server so that the correct employee sees this order in their list of open orders.Consider assigning a revenue center to the order so that it appears correctly on the restaurant's revenue reports."
,Reporting,"Retrieve all configuration data that you will use in your reporting and analytics.Examples of configuration data that you may want include discounts, service charges, payment types, sales categories, menu items, and menu groups.More information: https://doc.toasttab.com/openapi/configuration/overview/","If your reports allow users to see the names or other attributes of information that is associated with your reservation orders, you need to periodically poll the configuration or menus APIs for the associated data."
,Reporting,Retrieve updates about orders associated with your reservations using using the startDate/endDate parameters of the /orders endpoint of the orders API.More information: https://doc.toasttab.com/openapi/orders/operation/ordersGet/,"By retrieving order status updates on a recurring basis, you can know the item selections placed on your order, that total amount spent, and other order data that you can use for your analytics and reporting."


---

# Untitled

Source: https://doc.toasttab.com/doc/devguide/toast-api-integration-checklist-giftcard.csv

Complete?,Case number,Card type,Test case name,Steps,Expected results
,1,Non-Existent Card,Add Value,"From the Toast POS app > New Order.Tap Gift Cards > Add Value ($).Enter any value, and click Next.Swipe or enter a number not associated with a gift card at that restaurant.",Gift card cannot be found error message appears.
,2,Non-Existent Card,Balance Inquiry,From the Toast POS app > New Order.Tap Gift Cards > Balance Inquiry.Swipe or enter a number not associated with a gift card at that restaurant.,Gift card cannot be found error message appears.
,3,Non-Existent Card,Redeem,From the Toast POS app > New Order.Add items to your order.Click Pay.Click Gift Card.Swipe or enter a number not associated with a gift card at that restaurant.,Gift card cannot be found error message appears.
,4,Non-Existent Card,Sell Card,"From the Toast POS app > New Order.Tap Gift Cards > Sell Card.Enter any value, and click Next.Swipe or enter a number not associated with a gift card at the restaurant.",Gift card cannot be found error message appears.
,5,Inactive Card,Add Value,"From the Toast POS app > New Order.Tap Gift Cards > Add Value ($).Enter any value, and click Next.Swipe an inactive gift card.",The gift card is inactive error message appears.
,6,Inactive Card,Balance Inquiry,From the Toast POS app > New Order.Tap Gift Cards > Balance Inquiry.Swipe an inactive gift card.,The gift card is inactive error message appears.
,7,Inactive Card,Redeem,From the Toast POS app > New Order.Add items to your order.Click Pay.Click Gift Card.Swipe an inactive gift card.,The gift card is inactive error message appears.
,8,Inactive Card,Sell Card,"From the Toast POS app > New Order.Tap Gift Cards > Sell Card.Enter any value, and click Next.Swipe inactive gift card.","The gift card should display as an item selection on the check, for the amount for which you sold it."
,9,Inactive Card,Sell Card,"Pay cash for the check you created in case 8, which contains the gift card.",You should be able to sell and pay for the gift card successfully.
,10,Inactive Card,Sell Card,From the Toast POS app > New Order.Tap Gift Cards > Balance Inquiry.Swipe the gift card.,The gift card's balance should be the amount for which you sold it.
,11,Inactive Card,Reverse Sell Card,"Follow the steps from case 8.From the Toast POS app, navigate to the Closed Orders tab.Locate the check from your card sale.Click Update, then Pay, then Void. Confirm the void operation.In the overflow menu, click Void Order. Confirm the void operation.Create a new order.Click Gift Card.Click Balance Inquiry.Enter in the card number for the gift card you originally sold.Click Done.",The gift card is inactive error message appears.
,12,Active Card,Balance Inquiry,From the Toast POS app > New Order.Tap Gift Cards > Balance Inquiry.Swipe active gift card.,The balance should be the correct and expected balance on the card.
,13,Active Card,Redeem Full Order,From the Toast POS app > New Order.Add items to your order.Ensure that the total amount due is less than the amount on the gift card.Click Pay.Click Gift Card.Swipe an active gift card.,"The order should go to the Paid Checks tab on the POS, and it should have a gift card payment for the full order amount."
,14,Active Card,Redeem Full Order,Run a balance inquiry on the card used in case 13.,The balance should be decremented by the amount of the previous order.
,15,Active Card,Redeem Partial Order,From the Toast POS app > New Order.Add items to your order.Ensure the total amount due is more than the amount on the gift card.Click Pay.Click Gift Card.Swipe an active gift card.,The Payments screen will open.Verify that there is a gift card payment for the full amount of the gift card in the payments list.Verify that there is a balance due.
,16,Active Card,Redeem Partial Order,Complete the order from case 15 with a second payment.,The order should appear on the Paid Checks tab.
,17,Active Card,Redeem Partial Order,Run a balance inquiry on the card used in case 16.,The card balance should be $0.
,18,Active Card,Reverse Redeem,"On the Paid Checks tab, locate one of the orders created and paid for in one of the previous two tests.Click Pay ($).Note the card number you use to pay for this order, and the amount of money for which you redeem it.Click each payment and press Remove / Void.In the overflow menu, clock Void Order.Create a new order.Run a balance inquiry on the gift card for which you voided the payment.",The card balance should be incremented by the amount of the voided payment.
,19,Active Card,Tip Without Digital Receipts,"On the the Toast POS app home screen, navigate to the Setup section and click Device Setup.Turn off digital receipts.From the home screen, in the Mode section, click Payment Terminal.Create an order worth less than the value of an active gift card.Click Pay.Click Gift Card.On the Paid Checks tab, locate the previous check and click Pay ($).Enter in a tip that the gift card has enough money to cover.Click Update, and then Close.",The check should be moved to the Closed Checks tab.
,20,Active Card,Tip Without Digital Receipts,Run a balance inquiry on the card used in case 19.,The balance on the card should be decremented by the amount of the check and tip.
,21,Active Card,Tip With Digital Receipts,"On the the Toast POS app home screen, navigate to the Setup section and click Device Setup.Turn Digital Receipts on.From the home screen, in the Mode section, click Payment Terminal.Create an order worth less than the value on an active gift card.Click Pay.Click Gift Card.When the tip dialog appears, select a tip amount less than the gift card balance. This dialog does not allow you to tip more than the balance on the card.Complete the order.",The check should be moved to the Closed Checks tab.
,22,Active Card,Tip With Digital Receipts,Get the balance of the card used in case 21.,The balance on the card should be decremented by the amount of the check and tip.
,23,Active Card,Add Value,"From the Toast POS app > New Order.Tap Gift Cards > Add Value ($).Enter any value, and click Next.Swipe an active gift card.",Verify that Add Value ($) is added to the check for the correct amount.
,24,Active Card,Add Value,Complete the order from case 23.,The check should move to the Closed Checks tab.
,25,Active Card,Add Value,Run a balance inquiry on the card used in cases 23-24.,The card balance should be increased by the correct amount.
,26,Active Card,Reverse Add Value,"On the Closed Checks tab, find the order created in case 25.Click Pay ($).Void all payments.In the overflow menu, click Void Order.Confirm the void operation.Create a new order.Click Gift Card and then click Balance Inquiry.Swipe the card whose Add Value action was voided.",The gift card balance should be decremented by the voided Add Value action.


---

# Untitled

Source: https://doc.toasttab.com/doc/devguide/toast-api-integration-checklist-loyalty.csv

Complete?,Case number,Category,Test case,Steps,Expected results
,1,Account Lookup,Card swipe,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Swipe a card associated with a loyalty account at that restaurant.,The expected loyalty account should appear.
,2,Account Lookup,Card swipe,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Swipe a card NOT associated with a loyalty account at that restaurant.,The Invalid Account error message should appear.
,3,Account Lookup,Card swipe,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Swipe a card that is NOT a loyalty account card.,The Card swiped is not a rewards card error message should appear.
,4,Account Lookup,Keying in number,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Key in a card number associated with a loyalty account at that restaurant.,The expected loyalty account should appear.
,5,Account Lookup,Scanning QR code,From the Toast POS app > New Order.Tap Rewards > Look Up Customer > Scan.Scan a QR code associated with a loyalty account at that restaurant.,The expected loyalty account should appear.
,6,Account Lookup,Scanning QR code,From the Toast POS app > New Order.Tap Rewards > Look Up Customer > Scan.Scan a QR code NOT associated with a loyalty account at that restaurant.,The Invalid Account error message should appear.
,7,Account Lookup,By email,From the Toast POS app > New Order.Tap Rewards > Look Up Customer > Lookup.Key in an email address associated with a loyalty account at that restaurant.,The expected loyalty account should appear.
,8,Account Lookup,By phone number,From the Toast POS app > New Order.Tap Rewards > Look Up Customer > Lookup.Key in a phone number associated with a loyalty account at that restaurant.,The expected loyalty account should appear.
,9,Account Lookup,By name,From the Toast POS app > New Order.Tap Rewards > Look Up Customer > Lookup.Key in a name associated with a loyalty account at that restaurant.,The expected loyalty account should appear.
,10,Account Inquiry,Unavailable rewards,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.,"The expected rewards value should display, but because the awards are unavailable for redemption, you should not be able to apply them to a check."
,11,Account Inquiry,Available rewards,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.Add items that would trigger rewards to the check.Tap Rewards > Look Up Customer.,The expected rewards should be available redemption.A Redeem button should be present.
,12,Account Inquiry,Rewards points,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.,The expected rewards value should display on the dialog.
,13,Account Inquiry,Invalidated rewards,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.Add items that would trigger rewards to the check.Tap Rewards > Look Up Customer.Remove the items from your check.Tap Rewards > Look Up Customer.,The reward should be removed from the check.The error message Changes to the check have voided applied rewards. Discounts that are no longer applicable have been removed should display.
,14,Redemption,Item-level discount,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.Add items that would trigger rewards to the check.Tap Rewards > Look Up Customer.Tap Redeem to add a reward to the check.,The reward should apply to the target item on the check.The amount discounted should be correct.
,15,Redemption,Item-level discount,Tap Pay.,The reward discount should be correctly carried to the payment screen.
,16,Redemption,Item-level discount,Complete payment on the check.,The payment should process successfully.
,17,Redemption,Check-level discount,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.Add items that would trigger rewards to the check.Tap Rewards > Look Up Customer.Tap Redeem to add a reward to the check.,The reward should apply to the check.The amount discounted should be correct.
,18,Redemption,Check-level discount,Tap Pay.,The reward discount should be correctly carried to the payment screen.
,19,Redemption,Check-level discount,Complete payment on the check.,The payment should process successfully.
,20,Redemption,Buy one get one discount,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.Add items that would trigger rewards to the check.Tap Rewards > Look Up Customer.,"The expected reward should display, but should be unavailable for redemption."
,21,Redemption,Buy one get one discount,Add items that would trigger rewards to the check.Tap Rewards > Look Up Customer.,The expected rewards should be available redemption.A Redeem button should be present.
,22,Redemption,Buy one get one discount,Tap Redeem to add a reward to the check.,The reward should apply to the target item on the check.The amount discounted should be correct.
,23,Redemption,Buy one get one discount,Tap Pay.,The reward discount should be correctly carried to the payment screen.
,24,Redemption,Buy one get one discount,Complete payment on the check.,The payment should process successfully.
,25,Accrual and Reversal,Without reward applied to check,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.Add items to the check.Tap Pay($).,The payment should process successfully.You should see the expected accrual message.
,26,Accrual and Reversal,Accrual reverse,"On the Closed Checks tab, find the order placed in case 25.Tap Pay($).Void all payments.In the overflow menu, clock Void Order.Confirm the void operation.",The check should be successfully voided in Toast.You should see the expected reversal message.
,27,Accrual and Reversal,With reward applied to check,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.Add items that would trigger rewards to the check.Tap Rewards > Look Up Customer.Tap Redeem to add a reward to the check.Tap Pay.Complete payment on the check.,The payment should process successfully.You should see the expected accrual and redeem messages.
,28,Accrual and Reversal,Redemption reverse,"On the Closed Checks tab, find the order placed in case 27.Tap Pay($).Void all payments.In the overflow menu, click Void Order.Confirm the void operation.","The check should be successfully voided in Toast,.You should see the expected reversal messages."
,29,Accrual and Reversal,With multiple rewards applied to check,From the Toast POS app > New Order.Tap Rewards > Look Up Customer.Look up a loyalty account that has associated rewards.Add items that would trigger rewards to the check.Tap Rewards > Look Up Customer.Tap Redeem to add a reward to the check.Repeat at least once in order to apply multiple rewards to the check.Tap Pay.Complete payment on the check.,The payment should process successfully.You should see the expected accrual and redeem messages.
,30,Accrual and Reversal,Partial redemption reverse,"On the Closed Checks tab, find the order placed in case 29.Tap Update.Select a reward that was redeemed, and void it from the check.Tap Pay.Complete payment on the check.",The check should successfully close.You should see the expected reversal messages.
